// ==UserScript==
// @name           Manga ChapterReader
// @description    Displays full chapters from MangaReader.net in a simpler interface.
// @author         passcod
// @license        MIT/X11 + Attribution
// @version        11.28
// @namespace      http://www.mangareader.net
// @include        http://www.mangareader.net/*
// ==/UserScript==
// version format: y.z


/**
 * Decode a Base64 encoded string
 *
 * @see       http://phpjs.org
 * @version   3.21
 * @copyright 2011 Kevin van Zonneveld.
 * 
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 */ 
function base64_decode(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec="",tmp_arr=[];if(!data){return data;}
data+='';do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');dec=this.utf8_decode(dec);return dec;}
function utf8_decode(str_data){var tmp_arr=[],i=0,ac=0,c1=0,c2=0,c3=0;str_data+='';while(i<str_data.length){c1=str_data.charCodeAt(i);if(c1<128){tmp_arr[ac++]=String.fromCharCode(c1);i++;}
else if(c1>191&&c1<224){c2=str_data.charCodeAt(i+1);tmp_arr[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2;}
else{c2=str_data.charCodeAt(i+1);c3=str_data.charCodeAt(i+2);tmp_arr[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return tmp_arr.join('');}


var regular = /mangareader\.net\/[a-z0-9\-]+\/[0-9]+(\/.+)?/i,
	old = /mangareader\.net\/[0-9\-]+\/([a-z0-9\-]+)\/chapter-([0-9]+)\.htm/i;

if ( regular.test(window.location) || old.test(window.location) ) {
	document.getElementsByTagName('head')[0].innerHTML = '<title>Loading... -- '+
	  document.getElementsByTagName('title')[0].innerHTML+'</title>';
	
	document.getElementsByTagName('body')[0].innerHTML = 'Loading...';
	var script = document.createElement('script');
	var src = document.createTextNode(base64_decode(GetIt()));
	script.appendChild(src);
	script.type = "text/javascript";
	document.getElementsByTagName('body')[0].appendChild(script);
}


function GetIt() { return 'CnZhciBNQ1JfVkVSU0lPTj0xMS4yODtpZighdGhpcy5KU09OKXt0aGlzLkpTT049e307fQooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZihuKXtyZXR1cm4gbjwxMD8nMCcrbjpuO30KaWYodHlwZW9mIERhdGUucHJvdG90eXBlLnRvSlNPTiE9PSdmdW5jdGlvbicpe0RhdGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihrZXkpe3JldHVybiBpc0Zpbml0ZSh0aGlzLnZhbHVlT2YoKSk/dGhpcy5nZXRVVENGdWxsWWVhcigpKyctJysKZih0aGlzLmdldFVUQ01vbnRoKCkrMSkrJy0nKwpmKHRoaXMuZ2V0VVRDRGF0ZSgpKSsnVCcrCmYodGhpcy5nZXRVVENIb3VycygpKSsnOicrCmYodGhpcy5nZXRVVENNaW51dGVzKCkpKyc6JysKZih0aGlzLmdldFVUQ1NlY29uZHMoKSkrJ1onOm51bGw7fTtTdHJpbmcucHJvdG90eXBlLnRvSlNPTj1OdW1iZXIucHJvdG90eXBlLnRvSlNPTj1Cb29sZWFuLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oa2V5KXtyZXR1cm4gdGhpcy52YWx1ZU9mKCk7fTt9CnZhciBjeD0vW1x1MDAwMFx1MDBhZFx1MDYwMC1cdTA2MDRcdTA3MGZcdTE3YjRcdTE3YjVcdTIwMGMtXHUyMDBmXHUyMDI4LVx1MjAyZlx1MjA2MC1cdTIwNmZcdWZlZmZcdWZmZjAtXHVmZmZmXS9nLGVzY2FwYWJsZT0vW1xcXCJceDAwLVx4MWZceDdmLVx4OWZcdTAwYWRcdTA2MDAtXHUwNjA0XHUwNzBmXHUxN2I0XHUxN2I1XHUyMDBjLVx1MjAwZlx1MjAyOC1cdTIwMmZcdTIwNjAtXHUyMDZmXHVmZWZmXHVmZmYwLVx1ZmZmZl0vZyxnYXAsaW5kZW50LG1ldGE9eydcYic6J1xcYicsJ1x0JzonXFx0JywnXG4nOidcXG4nLCdcZic6J1xcZicsJ1xyJzonXFxyJywnIic6J1xcIicsJ1xcJzonXFxcXCd9LHJlcDtmdW5jdGlvbiBxdW90ZShzdHJpbmcpe2VzY2FwYWJsZS5sYXN0SW5kZXg9MDtyZXR1cm4gZXNjYXBhYmxlLnRlc3Qoc3RyaW5nKT8nIicrc3RyaW5nLnJlcGxhY2UoZXNjYXBhYmxlLGZ1bmN0aW9uKGEpe3ZhciBjPW1ldGFbYV07cmV0dXJuIHR5cGVvZiBjPT09J3N0cmluZyc/YzonXFx1JysoJzAwMDAnK2EuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTt9KSsnIic6JyInK3N0cmluZysnIic7fQpmdW5jdGlvbiBzdHIoa2V5LGhvbGRlcil7dmFyIGksayx2LGxlbmd0aCxtaW5kPWdhcCxwYXJ0aWFsLHZhbHVlPWhvbGRlcltrZXldO2lmKHZhbHVlJiZ0eXBlb2YgdmFsdWU9PT0nb2JqZWN0JyYmdHlwZW9mIHZhbHVlLnRvSlNPTj09PSdmdW5jdGlvbicpe3ZhbHVlPXZhbHVlLnRvSlNPTihrZXkpO30KaWYodHlwZW9mIHJlcD09PSdmdW5jdGlvbicpe3ZhbHVlPXJlcC5jYWxsKGhvbGRlcixrZXksdmFsdWUpO30Kc3dpdGNoKHR5cGVvZiB2YWx1ZSl7Y2FzZSdzdHJpbmcnOnJldHVybiBxdW90ZSh2YWx1ZSk7Y2FzZSdudW1iZXInOnJldHVybiBpc0Zpbml0ZSh2YWx1ZSk/U3RyaW5nKHZhbHVlKTonbnVsbCc7Y2FzZSdib29sZWFuJzpjYXNlJ251bGwnOnJldHVybiBTdHJpbmcodmFsdWUpO2Nhc2Unb2JqZWN0JzppZighdmFsdWUpe3JldHVybidudWxsJzt9CmdhcCs9aW5kZW50O3BhcnRpYWw9W107aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh2YWx1ZSk9PT0nW29iamVjdCBBcnJheV0nKXtsZW5ndGg9dmFsdWUubGVuZ3RoO2ZvcihpPTA7aTxsZW5ndGg7aSs9MSl7cGFydGlhbFtpXT1zdHIoaSx2YWx1ZSl8fCdudWxsJzt9CnY9cGFydGlhbC5sZW5ndGg9PT0wPydbXSc6Z2FwPydbXG4nK2dhcCsKcGFydGlhbC5qb2luKCcsXG4nK2dhcCkrJ1xuJysKbWluZCsnXSc6J1snK3BhcnRpYWwuam9pbignLCcpKyddJztnYXA9bWluZDtyZXR1cm4gdjt9CmlmKHJlcCYmdHlwZW9mIHJlcD09PSdvYmplY3QnKXtsZW5ndGg9cmVwLmxlbmd0aDtmb3IoaT0wO2k8bGVuZ3RoO2krPTEpe2s9cmVwW2ldO2lmKHR5cGVvZiBrPT09J3N0cmluZycpe3Y9c3RyKGssdmFsdWUpO2lmKHYpe3BhcnRpYWwucHVzaChxdW90ZShrKSsoZ2FwPyc6ICc6JzonKSt2KTt9fX19ZWxzZXtmb3IoayBpbiB2YWx1ZSl7aWYoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsaykpe3Y9c3RyKGssdmFsdWUpO2lmKHYpe3BhcnRpYWwucHVzaChxdW90ZShrKSsoZ2FwPyc6ICc6JzonKSt2KTt9fX19CnY9cGFydGlhbC5sZW5ndGg9PT0wPyd7fSc6Z2FwPyd7XG4nK2dhcCtwYXJ0aWFsLmpvaW4oJyxcbicrZ2FwKSsnXG4nKwptaW5kKyd9JzoneycrcGFydGlhbC5qb2luKCcsJykrJ30nO2dhcD1taW5kO3JldHVybiB2O319CmlmKHR5cGVvZiBKU09OLnN0cmluZ2lmeSE9PSdmdW5jdGlvbicpe0pTT04uc3RyaW5naWZ5PWZ1bmN0aW9uKHZhbHVlLHJlcGxhY2VyLHNwYWNlKXt2YXIgaTtnYXA9Jyc7aW5kZW50PScnO2lmKHR5cGVvZiBzcGFjZT09PSdudW1iZXInKXtmb3IoaT0wO2k8c3BhY2U7aSs9MSl7aW5kZW50Kz0nICc7fX1lbHNlIGlmKHR5cGVvZiBzcGFjZT09PSdzdHJpbmcnKXtpbmRlbnQ9c3BhY2U7fQpyZXA9cmVwbGFjZXI7aWYocmVwbGFjZXImJnR5cGVvZiByZXBsYWNlciE9PSdmdW5jdGlvbicmJih0eXBlb2YgcmVwbGFjZXIhPT0nb2JqZWN0J3x8dHlwZW9mIHJlcGxhY2VyLmxlbmd0aCE9PSdudW1iZXInKSl7dGhyb3cgbmV3IEVycm9yKCdKU09OLnN0cmluZ2lmeScpO30KcmV0dXJuIHN0cignJyx7Jyc6dmFsdWV9KTt9O30KaWYodHlwZW9mIEpTT04ucGFyc2UhPT0nZnVuY3Rpb24nKXtKU09OLnBhcnNlPWZ1bmN0aW9uKHRleHQscmV2aXZlcil7dmFyIGo7ZnVuY3Rpb24gd2Fsayhob2xkZXIsa2V5KXt2YXIgayx2LHZhbHVlPWhvbGRlcltrZXldO2lmKHZhbHVlJiZ0eXBlb2YgdmFsdWU9PT0nb2JqZWN0Jyl7Zm9yKGsgaW4gdmFsdWUpe2lmKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLGspKXt2PXdhbGsodmFsdWUsayk7aWYodiE9PXVuZGVmaW5lZCl7dmFsdWVba109djt9ZWxzZXtkZWxldGUgdmFsdWVba107fX19fQpyZXR1cm4gcmV2aXZlci5jYWxsKGhvbGRlcixrZXksdmFsdWUpO30KdGV4dD1TdHJpbmcodGV4dCk7Y3gubGFzdEluZGV4PTA7aWYoY3gudGVzdCh0ZXh0KSl7dGV4dD10ZXh0LnJlcGxhY2UoY3gsZnVuY3Rpb24oYSl7cmV0dXJuJ1xcdScrCignMDAwMCcrYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO30pO30KaWYoL15bXF0sOnt9XHNdKiQvLnRlc3QodGV4dC5yZXBsYWNlKC9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csJ0AnKS5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywnXScpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywnJykpKXtqPWV2YWwoJygnK3RleHQrJyknKTtyZXR1cm4gdHlwZW9mIHJldml2ZXI9PT0nZnVuY3Rpb24nP3dhbGsoeycnOmp9LCcnKTpqO30KdGhyb3cgbmV3IFN5bnRheEVycm9yKCdKU09OLnBhcnNlJyk7fTt9fSgpKTsoZnVuY3Rpb24oQSx3KXtmdW5jdGlvbiBtYSgpe2lmKCFjLmlzUmVhZHkpe3RyeXtzLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGEpe3NldFRpbWVvdXQobWEsMSk7cmV0dXJufWMucmVhZHkoKX19ZnVuY3Rpb24gUWEoYSxiKXtiLnNyYz9jLmFqYXgoe3VybDpiLnNyYyxhc3luYzpmYWxzZSxkYXRhVHlwZToic2NyaXB0In0pOmMuZ2xvYmFsRXZhbChiLnRleHR8fGIudGV4dENvbnRlbnR8fGIuaW5uZXJIVE1MfHwiIik7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9ZnVuY3Rpb24gWChhLGIsZCxmLGUsail7dmFyIGk9YS5sZW5ndGg7aWYodHlwZW9mIGI9PT0ib2JqZWN0Iil7Zm9yKHZhciBvIGluIGIpWChhLG8sYltvXSxmLGUsZCk7cmV0dXJuIGF9aWYoZCE9PXcpe2Y9IWomJmYmJmMuaXNGdW5jdGlvbihkKTtmb3Iobz0wO288aTtvKyspZShhW29dLGIsZj9kLmNhbGwoYVtvXSxvLGUoYVtvXSxiKSk6ZCxqKTtyZXR1cm4gYX1yZXR1cm4gaT9lKGFbMF0sYik6d31mdW5jdGlvbiBKKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9ZnVuY3Rpb24gWSgpe3JldHVybiBmYWxzZX1mdW5jdGlvbiBaKCl7cmV0dXJuIHRydWV9ZnVuY3Rpb24gbmEoYSxiLGQpe2RbMF0udHlwZT1hO3JldHVybiBjLmV2ZW50LmhhbmRsZS5hcHBseShiLGQpfWZ1bmN0aW9uIG9hKGEpe3ZhciBiLGQ9W10sZj1bXSxlPWFyZ3VtZW50cyxqLGksbyxrLG4scjtpPWMuZGF0YSh0aGlzLCJldmVudHMiKTtpZighKGEubGl2ZUZpcmVkPT09dGhpc3x8IWl8fCFpLmxpdmV8fGEuYnV0dG9uJiZhLnR5cGU9PT0iY2xpY2siKSl7YS5saXZlRmlyZWQ9dGhpczt2YXIgdT1pLmxpdmUuc2xpY2UoMCk7Zm9yKGs9MDtrPHUubGVuZ3RoO2srKyl7aT11W2tdO2kub3JpZ1R5cGUucmVwbGFjZShPLCIiKT09PWEudHlwZT9mLnB1c2goaS5zZWxlY3Rvcik6dS5zcGxpY2Uoay0tLDEpfWo9YyhhLnRhcmdldCkuY2xvc2VzdChmLGEuY3VycmVudFRhcmdldCk7bj0wO2ZvcihyPWoubGVuZ3RoO248cjtuKyspZm9yKGs9MDtrPHUubGVuZ3RoO2srKyl7aT11W2tdO2lmKGpbbl0uc2VsZWN0b3I9PT1pLnNlbGVjdG9yKXtvPWpbbl0uZWxlbTtmPW51bGw7aWYoaS5wcmVUeXBlPT09Im1vdXNlZW50ZXIifHxpLnByZVR5cGU9PT0ibW91c2VsZWF2ZSIpZj1jKGEucmVsYXRlZFRhcmdldCkuY2xvc2VzdChpLnNlbGVjdG9yKVswXTtpZighZnx8ZiE9PW8pZC5wdXNoKHtlbGVtOm8saGFuZGxlT2JqOml9KX19bj0wO2ZvcihyPWQubGVuZ3RoO248cjtuKyspe2o9ZFtuXTthLmN1cnJlbnRUYXJnZXQ9ai5lbGVtO2EuZGF0YT1qLmhhbmRsZU9iai5kYXRhO2EuaGFuZGxlT2JqPWouaGFuZGxlT2JqO2lmKGouaGFuZGxlT2JqLm9yaWdIYW5kbGVyLmFwcGx5KGouZWxlbSxlKT09PWZhbHNlKXtiPWZhbHNlO2JyZWFrfX1yZXR1cm4gYn19ZnVuY3Rpb24gcGEoYSxiKXtyZXR1cm4ibGl2ZS4iKyhhJiZhIT09IioiP2ErIi4iOiIiKStiLnJlcGxhY2UoL1wuL2csImAiKS5yZXBsYWNlKC8gL2csIiYiKX1mdW5jdGlvbiBxYShhKXtyZXR1cm4hYXx8IWEucGFyZW50Tm9kZXx8YS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTF9ZnVuY3Rpb24gcmEoYSxiKXt2YXIgZD0wO2IuZWFjaChmdW5jdGlvbigpe2lmKHRoaXMubm9kZU5hbWU9PT0oYVtkXSYmYVtkXS5ub2RlTmFtZSkpe3ZhciBmPWMuZGF0YShhW2QrK10pLGU9Yy5kYXRhKHRoaXMsZik7aWYoZj1mJiZmLmV2ZW50cyl7ZGVsZXRlIGUuaGFuZGxlO2UuZXZlbnRzPXt9O2Zvcih2YXIgaiBpbiBmKWZvcih2YXIgaSBpbiBmW2pdKWMuZXZlbnQuYWRkKHRoaXMsaixmW2pdW2ldLGZbal1baV0uZGF0YSl9fX0pfWZ1bmN0aW9uIHNhKGEsYixkKXt2YXIgZixlLGo7Yj1iJiZiWzBdP2JbMF0ub3duZXJEb2N1bWVudHx8YlswXTpzO2lmKGEubGVuZ3RoPT09MSYmdHlwZW9mIGFbMF09PT0ic3RyaW5nIiYmYVswXS5sZW5ndGg8NTEyJiZiPT09cyYmIXRhLnRlc3QoYVswXSkmJihjLnN1cHBvcnQuY2hlY2tDbG9uZXx8IXVhLnRlc3QoYVswXSkpKXtlPXRydWU7aWYoaj1jLmZyYWdtZW50c1thWzBdXSlpZihqIT09MSlmPWp9aWYoIWYpe2Y9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Yy5jbGVhbihhLGIsZixkKX1pZihlKWMuZnJhZ21lbnRzW2FbMF1dPWo/ZjoxO3JldHVybntmcmFnbWVudDpmLGNhY2hlYWJsZTplfX1mdW5jdGlvbiBLKGEsYil7dmFyIGQ9e307Yy5lYWNoKHZhLmNvbmNhdC5hcHBseShbXSx2YS5zbGljZSgwLGIpKSxmdW5jdGlvbigpe2RbdGhpc109YX0pO3JldHVybiBkfWZ1bmN0aW9uIHdhKGEpe3JldHVybiJzY3JvbGxUbyJpbiBhJiZhLmRvY3VtZW50P2E6YS5ub2RlVHlwZT09PTk/YS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3c6ZmFsc2V9dmFyIGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGMuZm4uaW5pdChhLGIpfSxSYT1BLmpRdWVyeSxTYT1BLiQscz1BLmRvY3VtZW50LFQsVGE9L15bXjxdKig8W1x3XFddKz4pW14+XSokfF4jKFtcdy1dKykkLyxVYT0vXi5bXjojXFtcLixdKiQvLFZhPS9cUy8sV2E9L14oXHN8XHUwMEEwKSt8KFxzfFx1MDBBMCkrJC9nLFhhPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPik/JC8sUD1uYXZpZ2F0b3IudXNlckFnZW50LHhhPWZhbHNlLFE9W10sTCwkPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsYWE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxiYT1BcnJheS5wcm90b3R5cGUucHVzaCxSPUFycmF5LnByb3RvdHlwZS5zbGljZSx5YT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZjtjLmZuPWMucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGQsZjtpZighYSlyZXR1cm4gdGhpcztpZihhLm5vZGVUeXBlKXt0aGlzLmNvbnRleHQ9dGhpc1swXT1hO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYoYT09PSJib2R5IiYmIWIpe3RoaXMuY29udGV4dD1zO3RoaXNbMF09cy5ib2R5O3RoaXMuc2VsZWN0b3I9ImJvZHkiO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYodHlwZW9mIGE9PT0ic3RyaW5nIilpZigoZD1UYS5leGVjKGEpKSYmKGRbMV18fCFiKSlpZihkWzFdKXtmPWI/Yi5vd25lckRvY3VtZW50fHxiOnM7aWYoYT1YYS5leGVjKGEpKWlmKGMuaXNQbGFpbk9iamVjdChiKSl7YT1bcy5jcmVhdGVFbGVtZW50KGFbMV0pXTtjLmZuLmF0dHIuY2FsbChhLGIsdHJ1ZSl9ZWxzZSBhPVtmLmNyZWF0ZUVsZW1lbnQoYVsxXSldO2Vsc2V7YT1zYShbZFsxXV0sW2ZdKTthPShhLmNhY2hlYWJsZT9hLmZyYWdtZW50LmNsb25lTm9kZSh0cnVlKTphLmZyYWdtZW50KS5jaGlsZE5vZGVzfXJldHVybiBjLm1lcmdlKHRoaXMsYSl9ZWxzZXtpZihiPXMuZ2V0RWxlbWVudEJ5SWQoZFsyXSkpe2lmKGIuaWQhPT1kWzJdKXJldHVybiBULmZpbmQoYSk7dGhpcy5sZW5ndGg9MTt0aGlzWzBdPWJ9dGhpcy5jb250ZXh0PXM7dGhpcy5zZWxlY3Rvcj1hO3JldHVybiB0aGlzfWVsc2UgaWYoIWImJi9eXHcrJC8udGVzdChhKSl7dGhpcy5zZWxlY3Rvcj1hO3RoaXMuY29udGV4dD1zO2E9cy5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtyZXR1cm4gYy5tZXJnZSh0aGlzLGEpfWVsc2UgcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxUKS5maW5kKGEpOmMoYikuZmluZChhKTtlbHNlIGlmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gVC5yZWFkeShhKTtpZihhLnNlbGVjdG9yIT09dyl7dGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yO3RoaXMuY29udGV4dD1hLmNvbnRleHR9cmV0dXJuIGMubWFrZUFycmF5KGEsdGhpcyl9LHNlbGVjdG9yOiIiLGpxdWVyeToiMS40LjIiLGxlbmd0aDowLHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gUi5jYWxsKHRoaXMsMCl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gYT09bnVsbD90aGlzLnRvQXJyYXkoKTphPDA/dGhpcy5zbGljZShhKVswXTp0aGlzW2FdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSxiLGQpe3ZhciBmPWMoKTtjLmlzQXJyYXkoYSk/YmEuYXBwbHkoZixhKTpjLm1lcmdlKGYsYSk7Zi5wcmV2T2JqZWN0PXRoaXM7Zi5jb250ZXh0PXRoaXMuY29udGV4dDtpZihiPT09ImZpbmQiKWYuc2VsZWN0b3I9dGhpcy5zZWxlY3RvcisodGhpcy5zZWxlY3Rvcj8iICI6IiIpK2Q7ZWxzZSBpZihiKWYuc2VsZWN0b3I9dGhpcy5zZWxlY3RvcisiLiIrYisiKCIrZCsiKSI7cmV0dXJuIGZ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5lYWNoKHRoaXMsYSxiKX0scmVhZHk6ZnVuY3Rpb24oYSl7Yy5iaW5kUmVhZHkoKTtpZihjLmlzUmVhZHkpYS5jYWxsKHMsYyk7ZWxzZSBRJiZRLnB1c2goYSk7cmV0dXJuIHRoaXN9LGVxOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09LTE/dGhpcy5zbGljZShhKTp0aGlzLnNsaWNlKGEsK2ErMSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFIuYXBwbHkodGhpcyxhcmd1bWVudHMpLCJzbGljZSIsUi5jYWxsKGFyZ3VtZW50cykuam9pbigiLCIpKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhjLm1hcCh0aGlzLGZ1bmN0aW9uKGIsZCl7cmV0dXJuIGEuY2FsbChiLGQsYil9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fGMobnVsbCl9LHB1c2g6YmEsc29ydDpbXS5zb3J0LHNwbGljZTpbXS5zcGxpY2V9O2MuZm4uaW5pdC5wcm90b3R5cGU9Yy5mbjtjLmV4dGVuZD1jLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXXx8e30sYj0xLGQ9YXJndW1lbnRzLmxlbmd0aCxmPWZhbHNlLGUsaixpLG87aWYodHlwZW9mIGE9PT0iYm9vbGVhbiIpe2Y9YTthPWFyZ3VtZW50c1sxXXx8e307Yj0yfWlmKHR5cGVvZiBhIT09Im9iamVjdCImJiFjLmlzRnVuY3Rpb24oYSkpYT17fTtpZihkPT09Yil7YT10aGlzOy0tYn1mb3IoO2I8ZDtiKyspaWYoKGU9YXJndW1lbnRzW2JdKSE9bnVsbClmb3IoaiBpbiBlKXtpPWFbal07bz1lW2pdO2lmKGEhPT1vKWlmKGYmJm8mJihjLmlzUGxhaW5PYmplY3Qobyl8fGMuaXNBcnJheShvKSkpe2k9aSYmKGMuaXNQbGFpbk9iamVjdChpKXx8Yy5pc0FycmF5KGkpKT9pOmMuaXNBcnJheShvKT9bXTp7fTthW2pdPWMuZXh0ZW5kKGYsaSxvKX1lbHNlIGlmKG8hPT13KWFbal09b31yZXR1cm4gYX07Yy5leHRlbmQoe25vQ29uZmxpY3Q6ZnVuY3Rpb24oYSl7QS4kPVNhO2lmKGEpQS5qUXVlcnk9UmE7cmV0dXJuIGN9LGlzUmVhZHk6ZmFsc2UscmVhZHk6ZnVuY3Rpb24oKXtpZighYy5pc1JlYWR5KXtpZighcy5ib2R5KXJldHVybiBzZXRUaW1lb3V0KGMucmVhZHksMTMpO2MuaXNSZWFkeT10cnVlO2lmKFEpe2Zvcih2YXIgYSxiPTA7YT1RW2IrK107KWEuY2FsbChzLGMpO1E9bnVsbH1jLmZuLnRyaWdnZXJIYW5kbGVyJiZjKHMpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpfX0sYmluZFJlYWR5OmZ1bmN0aW9uKCl7aWYoIXhhKXt4YT10cnVlO2lmKHMucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpcmV0dXJuIGMucmVhZHkoKTtpZihzLmFkZEV2ZW50TGlzdGVuZXIpe3MuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsTCxmYWxzZSk7QS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixjLnJlYWR5LGZhbHNlKX1lbHNlIGlmKHMuYXR0YWNoRXZlbnQpe3MuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsTCk7QS5hdHRhY2hFdmVudCgib25sb2FkIixjLnJlYWR5KTt2YXIgYT1mYWxzZTt0cnl7YT1BLmZyYW1lRWxlbWVudD09bnVsbH1jYXRjaChiKXt9cy5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwmJmEmJm1hKCl9fX0saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gJC5jYWxsKGEpPT09IltvYmplY3QgRnVuY3Rpb25dIn0saXNBcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gJC5jYWxsKGEpPT09IltvYmplY3QgQXJyYXldIn0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXtpZighYXx8JC5jYWxsKGEpIT09IltvYmplY3QgT2JqZWN0XSJ8fGEubm9kZVR5cGV8fGEuc2V0SW50ZXJ2YWwpcmV0dXJuIGZhbHNlO2lmKGEuY29uc3RydWN0b3ImJiFhYS5jYWxsKGEsImNvbnN0cnVjdG9yIikmJiFhYS5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpcmV0dXJuIGZhbHNlO3ZhciBiO2ZvcihiIGluIGEpO3JldHVybiBiPT09d3x8YWEuY2FsbChhLGIpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZX0sZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgYTt9LHBhcnNlSlNPTjpmdW5jdGlvbihhKXtpZih0eXBlb2YgYSE9PSJzdHJpbmcifHwhYSlyZXR1cm4gbnVsbDthPWMudHJpbShhKTtpZigvXltcXSw6e31cc10qJC8udGVzdChhLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKSkpcmV0dXJuIEEuSlNPTiYmQS5KU09OLnBhcnNlP0EuSlNPTi5wYXJzZShhKToobmV3IEZ1bmN0aW9uKCJyZXR1cm4gIisKYSkpKCk7ZWxzZSBjLmVycm9yKCJJbnZhbGlkIEpTT046ICIrYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7aWYoYSYmVmEudGVzdChhKSl7dmFyIGI9cy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxzLmRvY3VtZW50RWxlbWVudCxkPXMuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7ZC50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2lmKGMuc3VwcG9ydC5zY3JpcHRFdmFsKWQuYXBwZW5kQ2hpbGQocy5jcmVhdGVUZXh0Tm9kZShhKSk7ZWxzZSBkLnRleHQ9YTtiLmluc2VydEJlZm9yZShkLGIuZmlyc3RDaGlsZCk7Yi5yZW1vdmVDaGlsZChkKX19LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PWIudG9VcHBlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsZCl7dmFyIGYsZT0wLGo9YS5sZW5ndGgsaT1qPT09d3x8Yy5pc0Z1bmN0aW9uKGEpO2lmKGQpaWYoaSlmb3IoZiBpbiBhKXtpZihiLmFwcGx5KGFbZl0sZCk9PT1mYWxzZSlicmVha31lbHNlIGZvcig7ZTxqOyl7aWYoYi5hcHBseShhW2UrK10sZCk9PT1mYWxzZSlicmVha31lbHNlIGlmKGkpZm9yKGYgaW4gYSl7aWYoYi5jYWxsKGFbZl0sZixhW2ZdKT09PWZhbHNlKWJyZWFrfWVsc2UgZm9yKGQ9YVswXTtlPGomJmIuY2FsbChkLGUsZCkhPT1mYWxzZTtkPWFbKytlXSk7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fCIiKS5yZXBsYWNlKFdhLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7Yj1ifHxbXTtpZihhIT1udWxsKWEubGVuZ3RoPT1udWxsfHx0eXBlb2YgYT09PSJzdHJpbmcifHxjLmlzRnVuY3Rpb24oYSl8fHR5cGVvZiBhIT09ImZ1bmN0aW9uIiYmYS5zZXRJbnRlcnZhbD9iYS5jYWxsKGIsYSk6Yy5tZXJnZShiLGEpO3JldHVybiBifSxpbkFycmF5OmZ1bmN0aW9uKGEsYil7aWYoYi5pbmRleE9mKXJldHVybiBiLmluZGV4T2YoYSk7Zm9yKHZhciBkPTAsZj1iLmxlbmd0aDtkPGY7ZCsrKWlmKGJbZF09PT1hKXJldHVybiBkO3JldHVybi0xfSxtZXJnZTpmdW5jdGlvbihhLGIpe3ZhciBkPWEubGVuZ3RoLGY9MDtpZih0eXBlb2YgYi5sZW5ndGg9PT0ibnVtYmVyIilmb3IodmFyIGU9Yi5sZW5ndGg7ZjxlO2YrKylhW2QrK109YltmXTtlbHNlIGZvcig7YltmXSE9PXc7KWFbZCsrXT1iW2YrK107YS5sZW5ndGg9ZDtyZXR1cm4gYX0sZ3JlcDpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBmPVtdLGU9MCxqPWEubGVuZ3RoO2U8ajtlKyspIWQhPT0hYihhW2VdLGUpJiZmLnB1c2goYVtlXSk7cmV0dXJuIGZ9LG1hcDpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBmPVtdLGUsaj0wLGk9YS5sZW5ndGg7ajxpO2orKyl7ZT1iKGFbal0saixkKTtpZihlIT1udWxsKWZbZi5sZW5ndGhdPWV9cmV0dXJuIGYuY29uY2F0LmFwcGx5KFtdLGYpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiLGQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKWlmKHR5cGVvZiBiPT09InN0cmluZyIpe2Q9YTthPWRbYl07Yj13fWVsc2UgaWYoYiYmIWMuaXNGdW5jdGlvbihiKSl7ZD1iO2I9d31pZighYiYmYSliPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoZHx8dGhpcyxhcmd1bWVudHMpfTtpZihhKWIuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxiLmd1aWR8fGMuZ3VpZCsrO3JldHVybiBifSx1YU1hdGNoOmZ1bmN0aW9uKGEpe2E9YS50b0xvd2VyQ2FzZSgpO2E9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS8uZXhlYyhhKXx8LyhvcGVyYSkoPzouKnZlcnNpb24pP1sgXC9dKFtcdy5dKykvLmV4ZWMoYSl8fC8obXNpZSkgKFtcdy5dKykvLmV4ZWMoYSl8fCEvY29tcGF0aWJsZS8udGVzdChhKSYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKSk/Ly5leGVjKGEpfHxbXTtyZXR1cm57YnJvd3NlcjphWzFdfHwiIix2ZXJzaW9uOmFbMl18fCIwIn19LGJyb3dzZXI6e319KTtQPWMudWFNYXRjaChQKTtpZihQLmJyb3dzZXIpe2MuYnJvd3NlcltQLmJyb3dzZXJdPXRydWU7Yy5icm93c2VyLnZlcnNpb249UC52ZXJzaW9ufWlmKGMuYnJvd3Nlci53ZWJraXQpYy5icm93c2VyLnNhZmFyaT10cnVlO2lmKHlhKWMuaW5BcnJheT1mdW5jdGlvbihhLGIpe3JldHVybiB5YS5jYWxsKGIsYSl9O1Q9YyhzKTtpZihzLmFkZEV2ZW50TGlzdGVuZXIpTD1mdW5jdGlvbigpe3MucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsTCxmYWxzZSk7Yy5yZWFkeSgpfTtlbHNlIGlmKHMuYXR0YWNoRXZlbnQpTD1mdW5jdGlvbigpe2lmKHMucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe3MuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsTCk7Yy5yZWFkeSgpfX07KGZ1bmN0aW9uKCl7Yy5zdXBwb3J0PXt9O3ZhciBhPXMuZG9jdW1lbnRFbGVtZW50LGI9cy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxkPXMuY3JlYXRlRWxlbWVudCgiZGl2IiksZj0ic2NyaXB0IitKKCk7ZC5zdHlsZS5kaXNwbGF5PSJub25lIjtkLmlubmVySFRNTD0iICAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJyBzdHlsZT0nY29sb3I6cmVkO2Zsb2F0OmxlZnQ7b3BhY2l0eTouNTU7Jz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7dmFyIGU9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLGo9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdO2lmKCEoIWV8fCFlLmxlbmd0aHx8IWopKXtjLnN1cHBvcnQ9e2xlYWRpbmdXaGl0ZXNwYWNlOmQuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTMsdGJvZHk6IWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IikubGVuZ3RoLGh0bWxTZXJpYWxpemU6ISFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIikubGVuZ3RoLHN0eWxlOi9yZWQvLnRlc3Qoai5nZXRBdHRyaWJ1dGUoInN0eWxlIikpLGhyZWZOb3JtYWxpemVkOmouZ2V0QXR0cmlidXRlKCJocmVmIik9PT0iL2EiLG9wYWNpdHk6L14wLjU1JC8udGVzdChqLnN0eWxlLm9wYWNpdHkpLGNzc0Zsb2F0OiEhai5zdHlsZS5jc3NGbG9hdCxjaGVja09uOmQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF0udmFsdWU9PT0ib24iLG9wdFNlbGVjdGVkOnMuY3JlYXRlRWxlbWVudCgic2VsZWN0IikuYXBwZW5kQ2hpbGQocy5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSkuc2VsZWN0ZWQscGFyZW50Tm9kZTpkLnJlbW92ZUNoaWxkKGQuYXBwZW5kQ2hpbGQocy5jcmVhdGVFbGVtZW50KCJkaXYiKSkpLnBhcmVudE5vZGU9PT1udWxsLGRlbGV0ZUV4cGFuZG86dHJ1ZSxjaGVja0Nsb25lOmZhbHNlLHNjcmlwdEV2YWw6ZmFsc2Usbm9DbG9uZUV2ZW50OnRydWUsYm94TW9kZWw6bnVsbH07Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO3RyeXtiLmFwcGVuZENoaWxkKHMuY3JlYXRlVGV4dE5vZGUoIndpbmRvdy4iK2YrIj0xOyIpKX1jYXRjaChpKXt9YS5pbnNlcnRCZWZvcmUoYixhLmZpcnN0Q2hpbGQpO2lmKEFbZl0pe2Muc3VwcG9ydC5zY3JpcHRFdmFsPXRydWU7ZGVsZXRlIEFbZl19dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2gobyl7Yy5zdXBwb3J0LmRlbGV0ZUV4cGFuZG89ZmFsc2V9YS5yZW1vdmVDaGlsZChiKTtpZihkLmF0dGFjaEV2ZW50JiZkLmZpcmVFdmVudCl7ZC5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24gaygpe2Muc3VwcG9ydC5ub0Nsb25lRXZlbnQ9ZmFsc2U7ZC5kZXRhY2hFdmVudCgib25jbGljayIsayl9KTtkLmNsb25lTm9kZSh0cnVlKS5maXJlRXZlbnQoIm9uY2xpY2siKX1kPXMuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5pbm5lckhUTUw9IjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncmFkaW90ZXN0JyBjaGVja2VkPSdjaGVja2VkJy8+IjthPXMuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuYXBwZW5kQ2hpbGQoZC5maXJzdENoaWxkKTtjLnN1cHBvcnQuY2hlY2tDbG9uZT1hLmNsb25lTm9kZSh0cnVlKS5jbG9uZU5vZGUodHJ1ZSkubGFzdENoaWxkLmNoZWNrZWQ7YyhmdW5jdGlvbigpe3ZhciBrPXMuY3JlYXRlRWxlbWVudCgiZGl2Iik7ay5zdHlsZS53aWR0aD1rLnN0eWxlLnBhZGRpbmdMZWZ0PSIxcHgiO3MuYm9keS5hcHBlbmRDaGlsZChrKTtjLmJveE1vZGVsPWMuc3VwcG9ydC5ib3hNb2RlbD1rLm9mZnNldFdpZHRoPT09MjtzLmJvZHkucmVtb3ZlQ2hpbGQoaykuc3R5bGUuZGlzcGxheT0ibm9uZSJ9KTthPWZ1bmN0aW9uKGspe3ZhciBuPXMuY3JlYXRlRWxlbWVudCgiZGl2Iik7az0ib24iK2s7dmFyIHI9ayBpbiBuO2lmKCFyKXtuLnNldEF0dHJpYnV0ZShrLCJyZXR1cm47Iik7cj10eXBlb2YgbltrXT09PSJmdW5jdGlvbiJ9cmV0dXJuIHJ9O2Muc3VwcG9ydC5zdWJtaXRCdWJibGVzPWEoInN1Ym1pdCIpO2Muc3VwcG9ydC5jaGFuZ2VCdWJibGVzPWEoImNoYW5nZSIpO2E9Yj1kPWU9aj1udWxsfX0pKCk7Yy5wcm9wcz17ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSIscmVhZG9ubHk6InJlYWRPbmx5IixtYXhsZW5ndGg6Im1heExlbmd0aCIsY2VsbHNwYWNpbmc6ImNlbGxTcGFjaW5nIixyb3dzcGFuOiJyb3dTcGFuIixjb2xzcGFuOiJjb2xTcGFuIix0YWJpbmRleDoidGFiSW5kZXgiLHVzZW1hcDoidXNlTWFwIixmcmFtZWJvcmRlcjoiZnJhbWVCb3JkZXIifTt2YXIgRz0ialF1ZXJ5IitKKCksWWE9MCx6YT17fTtjLmV4dGVuZCh7Y2FjaGU6e30sZXhwYW5kbzpHLG5vRGF0YTp7ZW1iZWQ6dHJ1ZSxvYmplY3Q6dHJ1ZSxhcHBsZXQ6dHJ1ZX0sZGF0YTpmdW5jdGlvbihhLGIsZCl7aWYoIShhLm5vZGVOYW1lJiZjLm5vRGF0YVthLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7YT1hPT1BP3phOmE7dmFyIGY9YVtHXSxlPWMuY2FjaGU7aWYoIWYmJnR5cGVvZiBiPT09InN0cmluZyImJmQ9PT13KXJldHVybiBudWxsO2Z8fChmPSsrWWEpO2lmKHR5cGVvZiBiPT09Im9iamVjdCIpe2FbR109ZjtlW2ZdPWMuZXh0ZW5kKHRydWUse30sYil9ZWxzZSBpZighZVtmXSl7YVtHXT1mO2VbZl09e319YT1lW2ZdO2lmKGQhPT13KWFbYl09ZDtyZXR1cm4gdHlwZW9mIGI9PT0ic3RyaW5nIj9hW2JdOmF9fSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7aWYoIShhLm5vZGVOYW1lJiZjLm5vRGF0YVthLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7YT1hPT1BP3phOmE7dmFyIGQ9YVtHXSxmPWMuY2FjaGUsZT1mW2RdO2lmKGIpe2lmKGUpe2RlbGV0ZSBlW2JdO2MuaXNFbXB0eU9iamVjdChlKSYmYy5yZW1vdmVEYXRhKGEpfX1lbHNle2lmKGMuc3VwcG9ydC5kZWxldGVFeHBhbmRvKWRlbGV0ZSBhW2MuZXhwYW5kb107ZWxzZSBhLnJlbW92ZUF0dHJpYnV0ZSYmYS5yZW1vdmVBdHRyaWJ1dGUoYy5leHBhbmRvKTtkZWxldGUgZltkXX19fX0pO2MuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGE9PT0idW5kZWZpbmVkIiYmdGhpcy5sZW5ndGgpcmV0dXJuIGMuZGF0YSh0aGlzWzBdKTtlbHNlIGlmKHR5cGVvZiBhPT09Im9iamVjdCIpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2MuZGF0YSh0aGlzLGEpfSk7dmFyIGQ9YS5zcGxpdCgiLiIpO2RbMV09ZFsxXT8iLiIrZFsxXToiIjtpZihiPT09dyl7dmFyIGY9dGhpcy50cmlnZ2VySGFuZGxlcigiZ2V0RGF0YSIrZFsxXSsiISIsW2RbMF1dKTtpZihmPT09dyYmdGhpcy5sZW5ndGgpZj1jLmRhdGEodGhpc1swXSxhKTtyZXR1cm4gZj09PXcmJmRbMV0/dGhpcy5kYXRhKGRbMF0pOmZ9ZWxzZSByZXR1cm4gdGhpcy50cmlnZ2VyKCJzZXREYXRhIitkWzFdKyIhIixbZFswXSxiXSkuZWFjaChmdW5jdGlvbigpe2MuZGF0YSh0aGlzLGEsYil9KX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5yZW1vdmVEYXRhKHRoaXMsYSl9KX19KTtjLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGQpe2lmKGEpe2I9KGJ8fCJmeCIpKyJxdWV1ZSI7dmFyIGY9Yy5kYXRhKGEsYik7aWYoIWQpcmV0dXJuIGZ8fFtdO2lmKCFmfHxjLmlzQXJyYXkoZCkpZj1jLmRhdGEoYSxiLGMubWFrZUFycmF5KGQpKTtlbHNlIGYucHVzaChkKTtyZXR1cm4gZn19LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGQ9Yy5xdWV1ZShhLGIpLGY9ZC5zaGlmdCgpO2lmKGY9PT0iaW5wcm9ncmVzcyIpZj1kLnNoaWZ0KCk7aWYoZil7Yj09PSJmeCImJmQudW5zaGlmdCgiaW5wcm9ncmVzcyIpO2YuY2FsbChhLGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKGEsYil9KX19fSk7Yy5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGEhPT0ic3RyaW5nIil7Yj1hO2E9ImZ4In1pZihiPT09dylyZXR1cm4gYy5xdWV1ZSh0aGlzWzBdLGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1jLnF1ZXVlKHRoaXMsYSxiKTthPT09ImZ4IiYmZFswXSE9PSJpbnByb2dyZXNzIiYmYy5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVsYXk6ZnVuY3Rpb24oYSxiKXthPWMuZng/Yy5meC5zcGVlZHNbYV18fGE6YTtiPWJ8fCJmeCI7cmV0dXJuIHRoaXMucXVldWUoYixmdW5jdGlvbigpe3ZhciBkPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2MuZGVxdWV1ZShkLGIpfSxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfX0pO3ZhciBBYT0vW1xuXHRdL2csY2E9L1xzKy8sWmE9L1xyL2csJGE9L2hyZWZ8c3JjfHN0eWxlLyxhYj0vKGJ1dHRvbnxpbnB1dCkvaSxiYj0vKGJ1dHRvbnxpbnB1dHxvYmplY3R8c2VsZWN0fHRleHRhcmVhKS9pLGNiPS9eKGF8YXJlYSkkL2ksQmE9L3JhZGlvfGNoZWNrYm94LztjLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBYKHRoaXMsYSxiLHRydWUsYy5hdHRyKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5hdHRyKHRoaXMsYSwiIik7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMucmVtb3ZlQXR0cmlidXRlKGEpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciByPWModGhpcyk7ci5hZGRDbGFzcyhhLmNhbGwodGhpcyxuLHIuYXR0cigiY2xhc3MiKSkpfSk7aWYoYSYmdHlwZW9mIGE9PT0ic3RyaW5nIilmb3IodmFyIGI9KGF8fCIiKS5zcGxpdChjYSksZD0wLGY9dGhpcy5sZW5ndGg7ZDxmO2QrKyl7dmFyIGU9dGhpc1tkXTtpZihlLm5vZGVUeXBlPT09MSlpZihlLmNsYXNzTmFtZSl7Zm9yKHZhciBqPSIgIitlLmNsYXNzTmFtZSsiICIsaT1lLmNsYXNzTmFtZSxvPTAsaz1iLmxlbmd0aDtvPGs7bysrKWlmKGouaW5kZXhPZigiICIrYltvXSsiICIpPDApaSs9IiAiK2Jbb107ZS5jbGFzc05hbWU9Yy50cmltKGkpfWVsc2UgZS5jbGFzc05hbWU9YX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oayl7dmFyIG49Yyh0aGlzKTtuLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGssbi5hdHRyKCJjbGFzcyIpKSl9KTtpZihhJiZ0eXBlb2YgYT09PSJzdHJpbmcifHxhPT09dylmb3IodmFyIGI9KGF8fCIiKS5zcGxpdChjYSksZD0wLGY9dGhpcy5sZW5ndGg7ZDxmO2QrKyl7dmFyIGU9dGhpc1tkXTtpZihlLm5vZGVUeXBlPT09MSYmZS5jbGFzc05hbWUpaWYoYSl7Zm9yKHZhciBqPSgiICIrZS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKEFhLCIgIiksaT0wLG89Yi5sZW5ndGg7aTxvO2krKylqPWoucmVwbGFjZSgiICIrYltpXSsiICIsIiAiKTtlLmNsYXNzTmFtZT1jLnRyaW0oail9ZWxzZSBlLmNsYXNzTmFtZT0iIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgZD10eXBlb2YgYSxmPXR5cGVvZiBiPT09ImJvb2xlYW4iO2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBqPWModGhpcyk7ai50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxlLGouYXR0cigiY2xhc3MiKSxiKSxiKX0pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihkPT09InN0cmluZyIpZm9yKHZhciBlLGo9MCxpPWModGhpcyksbz1iLGs9YS5zcGxpdChjYSk7ZT1rW2orK107KXtvPWY/bzohaS5oYXNDbGFzcyhlKTtpW28/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXShlKX1lbHNlIGlmKGQ9PT0idW5kZWZpbmVkInx8ZD09PSJib29sZWFuIil7dGhpcy5jbGFzc05hbWUmJmMuZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSk7dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT1mYWxzZT8iIjpjLmRhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIn19KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7YT0iICIrYSsiICI7Zm9yKHZhciBiPTAsZD10aGlzLmxlbmd0aDtiPGQ7YisrKWlmKCgiICIrdGhpc1tiXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKEFhLCIgIikuaW5kZXhPZihhKT4tMSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9LHZhbDpmdW5jdGlvbihhKXtpZihhPT09dyl7dmFyIGI9dGhpc1swXTtpZihiKXtpZihjLm5vZGVOYW1lKGIsIm9wdGlvbiIpKXJldHVybihiLmF0dHJpYnV0ZXMudmFsdWV8fHt9KS5zcGVjaWZpZWQ/Yi52YWx1ZTpiLnRleHQ7aWYoYy5ub2RlTmFtZShiLCJzZWxlY3QiKSl7dmFyIGQ9Yi5zZWxlY3RlZEluZGV4LGY9W10sZT1iLm9wdGlvbnM7Yj1iLnR5cGU9PT0ic2VsZWN0LW9uZSI7aWYoZDwwKXJldHVybiBudWxsO3ZhciBqPWI/ZDowO2ZvcihkPWI/ZCsxOmUubGVuZ3RoO2o8ZDtqKyspe3ZhciBpPWVbal07aWYoaS5zZWxlY3RlZCl7YT1jKGkpLnZhbCgpO2lmKGIpcmV0dXJuIGE7Zi5wdXNoKGEpfX1yZXR1cm4gZn1pZihCYS50ZXN0KGIudHlwZSkmJiFjLnN1cHBvcnQuY2hlY2tPbilyZXR1cm4gYi5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6Yi52YWx1ZTtyZXR1cm4oYi52YWx1ZXx8IiIpLnJlcGxhY2UoWmEsIiIpfXJldHVybiB3fXZhciBvPWMuaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGspe3ZhciBuPWModGhpcykscj1hO2lmKHRoaXMubm9kZVR5cGU9PT0xKXtpZihvKXI9YS5jYWxsKHRoaXMsayxuLnZhbCgpKTtpZih0eXBlb2Ygcj09PSJudW1iZXIiKXIrPSIiO2lmKGMuaXNBcnJheShyKSYmQmEudGVzdCh0aGlzLnR5cGUpKXRoaXMuY2hlY2tlZD1jLmluQXJyYXkobi52YWwoKSxyKT49MDtlbHNlIGlmKGMubm9kZU5hbWUodGhpcywic2VsZWN0Iikpe3ZhciB1PWMubWFrZUFycmF5KHIpO2MoIm9wdGlvbiIsdGhpcykuZWFjaChmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWQ9Yy5pbkFycmF5KGModGhpcykudmFsKCksdSk+PTB9KTtpZighdS5sZW5ndGgpdGhpcy5zZWxlY3RlZEluZGV4PS0xfWVsc2UgdGhpcy52YWx1ZT1yfX0pfX0pO2MuZXh0ZW5kKHthdHRyRm46e3ZhbDp0cnVlLGNzczp0cnVlLGh0bWw6dHJ1ZSx0ZXh0OnRydWUsZGF0YTp0cnVlLHdpZHRoOnRydWUsaGVpZ2h0OnRydWUsb2Zmc2V0OnRydWV9LGF0dHI6ZnVuY3Rpb24oYSxiLGQsZil7aWYoIWF8fGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OClyZXR1cm4gdztpZihmJiZiIGluIGMuYXR0ckZuKXJldHVybiBjKGEpW2JdKGQpO2Y9YS5ub2RlVHlwZSE9PTF8fCFjLmlzWE1MRG9jKGEpO3ZhciBlPWQhPT13O2I9ZiYmYy5wcm9wc1tiXXx8YjtpZihhLm5vZGVUeXBlPT09MSl7dmFyIGo9JGEudGVzdChiKTtpZihiIGluIGEmJmYmJiFqKXtpZihlKXtiPT09InR5cGUiJiZhYi50ZXN0KGEubm9kZU5hbWUpJiZhLnBhcmVudE5vZGUmJmMuZXJyb3IoInR5cGUgcHJvcGVydHkgY2FuJ3QgYmUgY2hhbmdlZCIpO2FbYl09ZH1pZihjLm5vZGVOYW1lKGEsImZvcm0iKSYmYS5nZXRBdHRyaWJ1dGVOb2RlKGIpKXJldHVybiBhLmdldEF0dHJpYnV0ZU5vZGUoYikubm9kZVZhbHVlO2lmKGI9PT0idGFiSW5kZXgiKXJldHVybihiPWEuZ2V0QXR0cmlidXRlTm9kZSgidGFiSW5kZXgiKSkmJmIuc3BlY2lmaWVkP2IudmFsdWU6YmIudGVzdChhLm5vZGVOYW1lKXx8Y2IudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6dztyZXR1cm4gYVtiXX1pZighYy5zdXBwb3J0LnN0eWxlJiZmJiZiPT09InN0eWxlIil7aWYoZSlhLnN0eWxlLmNzc1RleHQ9IiIrZDtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fWUmJmEuc2V0QXR0cmlidXRlKGIsIiIrZCk7YT0hYy5zdXBwb3J0LmhyZWZOb3JtYWxpemVkJiZmJiZqP2EuZ2V0QXR0cmlidXRlKGIsMik6YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIGE9PT1udWxsP3c6YX1yZXR1cm4gYy5zdHlsZShhLGIsZCl9fSk7dmFyIE89L1wuKC4qKSQvLGRiPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1teXHdcc1wuXHxgXS9nLGZ1bmN0aW9uKGIpe3JldHVybiJcXCIrYn0pfTtjLmV2ZW50PXthZGQ6ZnVuY3Rpb24oYSxiLGQsZil7aWYoIShhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpKXtpZihhLnNldEludGVydmFsJiZhIT09QSYmIWEuZnJhbWVFbGVtZW50KWE9QTt2YXIgZSxqO2lmKGQuaGFuZGxlcil7ZT1kO2Q9ZS5oYW5kbGVyfWlmKCFkLmd1aWQpZC5ndWlkPWMuZ3VpZCsrO2lmKGo9Yy5kYXRhKGEpKXt2YXIgaT1qLmV2ZW50cz1qLmV2ZW50c3x8e30sbz1qLmhhbmRsZTtpZighbylqLmhhbmRsZT1vPWZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiBjIT09InVuZGVmaW5lZCImJiFjLmV2ZW50LnRyaWdnZXJlZD9jLmV2ZW50LmhhbmRsZS5hcHBseShvLmVsZW0sYXJndW1lbnRzKTp3fTtvLmVsZW09YTtiPWIuc3BsaXQoIiAiKTtmb3IodmFyIGssbj0wLHI7az1iW24rK107KXtqPWU/Yy5leHRlbmQoe30sZSk6e2hhbmRsZXI6ZCxkYXRhOmZ9O2lmKGsuaW5kZXhPZigiLiIpPi0xKXtyPWsuc3BsaXQoIi4iKTtrPXIuc2hpZnQoKTtqLm5hbWVzcGFjZT1yLnNsaWNlKDApLnNvcnQoKS5qb2luKCIuIil9ZWxzZXtyPVtdO2oubmFtZXNwYWNlPSIifWoudHlwZT1rO2ouZ3VpZD1kLmd1aWQ7dmFyIHU9aVtrXSx6PWMuZXZlbnQuc3BlY2lhbFtrXXx8e307aWYoIXUpe3U9aVtrXT1bXTtpZighei5zZXR1cHx8ei5zZXR1cC5jYWxsKGEsZixyLG8pPT09ZmFsc2UpaWYoYS5hZGRFdmVudExpc3RlbmVyKWEuYWRkRXZlbnRMaXN0ZW5lcihrLG8sZmFsc2UpO2Vsc2UgYS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib24iK2ssbyl9aWYoei5hZGQpe3ouYWRkLmNhbGwoYSxqKTtpZighai5oYW5kbGVyLmd1aWQpai5oYW5kbGVyLmd1aWQ9ZC5ndWlkfXUucHVzaChqKTtjLmV2ZW50Lmdsb2JhbFtrXT10cnVlfWE9bnVsbH19fSxnbG9iYWw6e30scmVtb3ZlOmZ1bmN0aW9uKGEsYixkLGYpe2lmKCEoYS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04KSl7dmFyIGUsaj0wLGksbyxrLG4scix1LHo9Yy5kYXRhKGEpLEM9eiYmei5ldmVudHM7aWYoeiYmQyl7aWYoYiYmYi50eXBlKXtkPWIuaGFuZGxlcjtiPWIudHlwZX1pZighYnx8dHlwZW9mIGI9PT0ic3RyaW5nIiYmYi5jaGFyQXQoMCk9PT0iLiIpe2I9Ynx8IiI7Zm9yKGUgaW4gQyljLmV2ZW50LnJlbW92ZShhLGUrYil9ZWxzZXtmb3IoYj1iLnNwbGl0KCIgIik7ZT1iW2orK107KXtuPWU7aT1lLmluZGV4T2YoIi4iKTwwO289W107aWYoIWkpe289ZS5zcGxpdCgiLiIpO2U9by5zaGlmdCgpO2s9bmV3IFJlZ0V4cCgiKF58XFwuKSIrYy5tYXAoby5zbGljZSgwKS5zb3J0KCksZGIpLmpvaW4oIlxcLig/Oi4qXFwuKT8iKSsiKFxcLnwkKSIpfWlmKHI9Q1tlXSlpZihkKXtuPWMuZXZlbnQuc3BlY2lhbFtlXXx8e307Zm9yKEI9Znx8MDtCPHIubGVuZ3RoO0IrKyl7dT1yW0JdO2lmKGQuZ3VpZD09PXUuZ3VpZCl7aWYoaXx8ay50ZXN0KHUubmFtZXNwYWNlKSl7Zj09bnVsbCYmci5zcGxpY2UoQi0tLDEpO24ucmVtb3ZlJiZuLnJlbW92ZS5jYWxsKGEsdSl9aWYoZiE9bnVsbClicmVha319aWYoci5sZW5ndGg9PT0wfHxmIT1udWxsJiZyLmxlbmd0aD09PTEpe2lmKCFuLnRlYXJkb3dufHxuLnRlYXJkb3duLmNhbGwoYSxvKT09PWZhbHNlKUNhKGEsZSx6LmhhbmRsZSk7ZGVsZXRlIENbZV19fWVsc2UgZm9yKHZhciBCPTA7QjxyLmxlbmd0aDtCKyspe3U9cltCXTtpZihpfHxrLnRlc3QodS5uYW1lc3BhY2UpKXtjLmV2ZW50LnJlbW92ZShhLG4sdS5oYW5kbGVyLEIpO3Iuc3BsaWNlKEItLSwxKX19fWlmKGMuaXNFbXB0eU9iamVjdChDKSl7aWYoYj16LmhhbmRsZSliLmVsZW09bnVsbDtkZWxldGUgei5ldmVudHM7ZGVsZXRlIHouaGFuZGxlO2MuaXNFbXB0eU9iamVjdCh6KSYmYy5yZW1vdmVEYXRhKGEpfX19fX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIsZCxmKXt2YXIgZT1hLnR5cGV8fGE7aWYoIWYpe2E9dHlwZW9mIGE9PT0ib2JqZWN0Ij9hW0ddP2E6Yy5leHRlbmQoYy5FdmVudChlKSxhKTpjLkV2ZW50KGUpO2lmKGUuaW5kZXhPZigiISIpPj0wKXthLnR5cGU9ZT1lLnNsaWNlKDAsLTEpO2EuZXhjbHVzaXZlPXRydWV9aWYoIWQpe2Euc3RvcFByb3BhZ2F0aW9uKCk7Yy5ldmVudC5nbG9iYWxbZV0mJmMuZWFjaChjLmNhY2hlLGZ1bmN0aW9uKCl7dGhpcy5ldmVudHMmJnRoaXMuZXZlbnRzW2VdJiZjLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMuaGFuZGxlLmVsZW0pfSl9aWYoIWR8fGQubm9kZVR5cGU9PT0zfHxkLm5vZGVUeXBlPT09OClyZXR1cm4gdzthLnJlc3VsdD13O2EudGFyZ2V0PWQ7Yj1jLm1ha2VBcnJheShiKTtiLnVuc2hpZnQoYSl9YS5jdXJyZW50VGFyZ2V0PWQ7KGY9Yy5kYXRhKGQsImhhbmRsZSIpKSYmZi5hcHBseShkLGIpO2Y9ZC5wYXJlbnROb2RlfHxkLm93bmVyRG9jdW1lbnQ7dHJ5e2lmKCEoZCYmZC5ub2RlTmFtZSYmYy5ub0RhdGFbZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpaWYoZFsib24iK2VdJiZkWyJvbiIrZV0uYXBwbHkoZCxiKT09PWZhbHNlKWEucmVzdWx0PWZhbHNlfWNhdGNoKGope31pZighYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZmKWMuZXZlbnQudHJpZ2dlcihhLGIsZix0cnVlKTtlbHNlIGlmKCFhLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtmPWEudGFyZ2V0O3ZhciBpLG89Yy5ub2RlTmFtZShmLCJhIikmJmU9PT0iY2xpY2siLGs9Yy5ldmVudC5zcGVjaWFsW2VdfHx7fTtpZigoIWsuX2RlZmF1bHR8fGsuX2RlZmF1bHQuY2FsbChkLGEpPT09ZmFsc2UpJiYhbyYmIShmJiZmLm5vZGVOYW1lJiZjLm5vRGF0YVtmLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7dHJ5e2lmKGZbZV0pe2lmKGk9Zlsib24iK2VdKWZbIm9uIitlXT1udWxsO2MuZXZlbnQudHJpZ2dlcmVkPXRydWU7ZltlXSgpfX1jYXRjaChuKXt9aWYoaSlmWyJvbiIrZV09aTtjLmV2ZW50LnRyaWdnZXJlZD1mYWxzZX19fSxoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGIsZCxmLGU7YT1hcmd1bWVudHNbMF09Yy5ldmVudC5maXgoYXx8QS5ldmVudCk7YS5jdXJyZW50VGFyZ2V0PXRoaXM7Yj1hLnR5cGUuaW5kZXhPZigiLiIpPDAmJiFhLmV4Y2x1c2l2ZTtpZighYil7ZD1hLnR5cGUuc3BsaXQoIi4iKTthLnR5cGU9ZC5zaGlmdCgpO2Y9bmV3IFJlZ0V4cCgiKF58XFwuKSIrZC5zbGljZSgwKS5zb3J0KCkuam9pbigiXFwuKD86LipcXC4pPyIpKyIoXFwufCQpIil9ZT1jLmRhdGEodGhpcywiZXZlbnRzIik7ZD1lW2EudHlwZV07aWYoZSYmZCl7ZD1kLnNsaWNlKDApO2U9MDtmb3IodmFyIGo9ZC5sZW5ndGg7ZTxqO2UrKyl7dmFyIGk9ZFtlXTtpZihifHxmLnRlc3QoaS5uYW1lc3BhY2UpKXthLmhhbmRsZXI9aS5oYW5kbGVyO2EuZGF0YT1pLmRhdGE7YS5oYW5kbGVPYmo9aTtpPWkuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoaSE9PXcpe2EucmVzdWx0PWk7aWYoaT09PWZhbHNlKXthLnByZXZlbnREZWZhdWx0KCk7YS5zdG9wUHJvcGFnYXRpb24oKX19aWYoYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWJyZWFrfX19cmV0dXJuIGEucmVzdWx0fSxwcm9wczoiYWx0S2V5IGF0dHJDaGFuZ2UgYXR0ck5hbWUgYnViYmxlcyBidXR0b24gY2FuY2VsYWJsZSBjaGFyQ29kZSBjbGllbnRYIGNsaWVudFkgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRhdGEgZGV0YWlsIGV2ZW50UGhhc2UgZnJvbUVsZW1lbnQgaGFuZGxlciBrZXlDb2RlIGxheWVyWCBsYXllclkgbWV0YUtleSBuZXdWYWx1ZSBvZmZzZXRYIG9mZnNldFkgb3JpZ2luYWxUYXJnZXQgcGFnZVggcGFnZVkgcHJldlZhbHVlIHJlbGF0ZWROb2RlIHJlbGF0ZWRUYXJnZXQgc2NyZWVuWCBzY3JlZW5ZIHNoaWZ0S2V5IHNyY0VsZW1lbnQgdGFyZ2V0IHRvRWxlbWVudCB2aWV3IHdoZWVsRGVsdGEgd2hpY2giLnNwbGl0KCIgIiksZml4OmZ1bmN0aW9uKGEpe2lmKGFbR10pcmV0dXJuIGE7dmFyIGI9YTthPWMuRXZlbnQoYik7Zm9yKHZhciBkPXRoaXMucHJvcHMubGVuZ3RoLGY7ZDspe2Y9dGhpcy5wcm9wc1stLWRdO2FbZl09YltmXX1pZighYS50YXJnZXQpYS50YXJnZXQ9YS5zcmNFbGVtZW50fHxzO2lmKGEudGFyZ2V0Lm5vZGVUeXBlPT09MylhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlO2lmKCFhLnJlbGF0ZWRUYXJnZXQmJmEuZnJvbUVsZW1lbnQpYS5yZWxhdGVkVGFyZ2V0PWEuZnJvbUVsZW1lbnQ9PT1hLnRhcmdldD9hLnRvRWxlbWVudDphLmZyb21FbGVtZW50O2lmKGEucGFnZVg9PW51bGwmJmEuY2xpZW50WCE9bnVsbCl7Yj1zLmRvY3VtZW50RWxlbWVudDtkPXMuYm9keTthLnBhZ2VYPWEuY2xpZW50WCsoYiYmYi5zY3JvbGxMZWZ0fHxkJiZkLnNjcm9sbExlZnR8fDApLShiJiZiLmNsaWVudExlZnR8fGQmJmQuY2xpZW50TGVmdHx8MCk7YS5wYWdlWT1hLmNsaWVudFkrKGImJmIuc2Nyb2xsVG9wfHxkJiZkLnNjcm9sbFRvcHx8MCktKGImJmIuY2xpZW50VG9wfHxkJiZkLmNsaWVudFRvcHx8MCl9aWYoIWEud2hpY2gmJihhLmNoYXJDb2RlfHxhLmNoYXJDb2RlPT09MD9hLmNoYXJDb2RlOmEua2V5Q29kZSkpYS53aGljaD1hLmNoYXJDb2RlfHxhLmtleUNvZGU7aWYoIWEubWV0YUtleSYmYS5jdHJsS2V5KWEubWV0YUtleT1hLmN0cmxLZXk7aWYoIWEud2hpY2gmJmEuYnV0dG9uIT09dylhLndoaWNoPWEuYnV0dG9uJjE/MTphLmJ1dHRvbiYyPzM6YS5idXR0b24mND8yOjA7cmV0dXJuIGF9LGd1aWQ6MUU4LHByb3h5OmMucHJveHksc3BlY2lhbDp7cmVhZHk6e3NldHVwOmMuYmluZFJlYWR5LHRlYXJkb3duOmMubm9vcH0sbGl2ZTp7YWRkOmZ1bmN0aW9uKGEpe2MuZXZlbnQuYWRkKHRoaXMsYS5vcmlnVHlwZSxjLmV4dGVuZCh7fSxhLHtoYW5kbGVyOm9hfSkpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dHJ1ZSxkPWEub3JpZ1R5cGUucmVwbGFjZShPLCIiKTtjLmVhY2goYy5kYXRhKHRoaXMsImV2ZW50cyIpLmxpdmV8fFtdLGZ1bmN0aW9uKCl7aWYoZD09PXRoaXMub3JpZ1R5cGUucmVwbGFjZShPLCIiKSlyZXR1cm4gYj1mYWxzZX0pO2ImJmMuZXZlbnQucmVtb3ZlKHRoaXMsYS5vcmlnVHlwZSxvYSl9fSxiZWZvcmV1bmxvYWQ6e3NldHVwOmZ1bmN0aW9uKGEsYixkKXtpZih0aGlzLnNldEludGVydmFsKXRoaXMub25iZWZvcmV1bmxvYWQ9ZDtyZXR1cm4gZmFsc2V9LHRlYXJkb3duOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5vbmJlZm9yZXVubG9hZD09PWIpdGhpcy5vbmJlZm9yZXVubG9hZD1udWxsfX19fTt2YXIgQ2E9cy5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGEsYixkKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixkLGZhbHNlKX06ZnVuY3Rpb24oYSxiLGQpe2EuZGV0YWNoRXZlbnQoIm9uIitiLGQpfTtjLkV2ZW50PWZ1bmN0aW9uKGEpe2lmKCF0aGlzLnByZXZlbnREZWZhdWx0KXJldHVybiBuZXcgYy5FdmVudChhKTtpZihhJiZhLnR5cGUpe3RoaXMub3JpZ2luYWxFdmVudD1hO3RoaXMudHlwZT1hLnR5cGV9ZWxzZSB0aGlzLnR5cGU9YTt0aGlzLnRpbWVTdGFtcD1KKCk7dGhpc1tHXT10cnVlfTtjLkV2ZW50LnByb3RvdHlwZT17cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1aO3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDtpZihhKXthLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCk7YS5yZXR1cm5WYWx1ZT1mYWxzZX19LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9Wjt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7aWYoYSl7YS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCk7YS5jYW5jZWxCdWJibGU9dHJ1ZX19LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9Wjt0aGlzLnN0b3BQcm9wYWdhdGlvbigpfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6WSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpZLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOll9O3ZhciBEYT1mdW5jdGlvbihhKXt2YXIgYj1hLnJlbGF0ZWRUYXJnZXQ7dHJ5e2Zvcig7YiYmYiE9PXRoaXM7KWI9Yi5wYXJlbnROb2RlO2lmKGIhPT10aGlzKXthLnR5cGU9YS5kYXRhO2MuZXZlbnQuaGFuZGxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19Y2F0Y2goZCl7fX0sRWE9ZnVuY3Rpb24oYSl7YS50eXBlPWEuZGF0YTtjLmV2ZW50LmhhbmRsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2MuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9LGZ1bmN0aW9uKGEsYil7Yy5ldmVudC5zcGVjaWFsW2FdPXtzZXR1cDpmdW5jdGlvbihkKXtjLmV2ZW50LmFkZCh0aGlzLGIsZCYmZC5zZWxlY3Rvcj9FYTpEYSxhKX0sdGVhcmRvd246ZnVuY3Rpb24oZCl7Yy5ldmVudC5yZW1vdmUodGhpcyxiLGQmJmQuc2VsZWN0b3I/RWE6RGEpfX19KTtpZighYy5zdXBwb3J0LnN1Ym1pdEJ1YmJsZXMpYy5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0iZm9ybSIpe2MuZXZlbnQuYWRkKHRoaXMsImNsaWNrLnNwZWNpYWxTdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGQ9Yi50eXBlO2lmKChkPT09InN1Ym1pdCJ8fGQ9PT0iaW1hZ2UiKSYmYyhiKS5jbG9zZXN0KCJmb3JtIikubGVuZ3RoKXJldHVybiBuYSgic3VibWl0Iix0aGlzLGFyZ3VtZW50cyl9KTtjLmV2ZW50LmFkZCh0aGlzLCJrZXlwcmVzcy5zcGVjaWFsU3VibWl0IixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZigoZD09PSJ0ZXh0Inx8ZD09PSJwYXNzd29yZCIpJiZjKGIpLmNsb3Nlc3QoImZvcm0iKS5sZW5ndGgmJmEua2V5Q29kZT09PTEzKXJldHVybiBuYSgic3VibWl0Iix0aGlzLGFyZ3VtZW50cyl9KX1lbHNlIHJldHVybiBmYWxzZX0sdGVhcmRvd246ZnVuY3Rpb24oKXtjLmV2ZW50LnJlbW92ZSh0aGlzLCIuc3BlY2lhbFN1Ym1pdCIpfX07aWYoIWMuc3VwcG9ydC5jaGFuZ2VCdWJibGVzKXt2YXIgZGE9L3RleHRhcmVhfGlucHV0fHNlbGVjdC9pLGVhLEZhPWZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZSxkPWEudmFsdWU7aWYoYj09PSJyYWRpbyJ8fGI9PT0iY2hlY2tib3giKWQ9YS5jaGVja2VkO2Vsc2UgaWYoYj09PSJzZWxlY3QtbXVsdGlwbGUiKWQ9YS5zZWxlY3RlZEluZGV4Pi0xP2MubWFwKGEub3B0aW9ucyxmdW5jdGlvbihmKXtyZXR1cm4gZi5zZWxlY3RlZH0pLmpvaW4oIi0iKToiIjtlbHNlIGlmKGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJzZWxlY3QiKWQ9YS5zZWxlY3RlZEluZGV4O3JldHVybiBkfSxmYT1mdW5jdGlvbihhLGIpe3ZhciBkPWEudGFyZ2V0LGYsZTtpZighKCFkYS50ZXN0KGQubm9kZU5hbWUpfHxkLnJlYWRPbmx5KSl7Zj1jLmRhdGEoZCwiX2NoYW5nZV9kYXRhIik7ZT1GYShkKTtpZihhLnR5cGUhPT0iZm9jdXNvdXQifHxkLnR5cGUhPT0icmFkaW8iKWMuZGF0YShkLCJfY2hhbmdlX2RhdGEiLGUpO2lmKCEoZj09PXd8fGU9PT1mKSlpZihmIT1udWxsfHxlKXthLnR5cGU9ImNoYW5nZSI7cmV0dXJuIGMuZXZlbnQudHJpZ2dlcihhLGIsZCl9fX07Yy5ldmVudC5zcGVjaWFsLmNoYW5nZT17ZmlsdGVyczp7Zm9jdXNvdXQ6ZmEsY2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoZD09PSJyYWRpbyJ8fGQ9PT0iY2hlY2tib3gifHxiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0ic2VsZWN0IilyZXR1cm4gZmEuY2FsbCh0aGlzLGEpfSxrZXlkb3duOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGQ9Yi50eXBlO2lmKGEua2V5Q29kZT09PTEzJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0idGV4dGFyZWEifHxhLmtleUNvZGU9PT0zMiYmKGQ9PT0iY2hlY2tib3gifHxkPT09InJhZGlvIil8fGQ9PT0ic2VsZWN0LW11bHRpcGxlIilyZXR1cm4gZmEuY2FsbCh0aGlzLGEpfSxiZWZvcmVhY3RpdmF0ZTpmdW5jdGlvbihhKXthPWEudGFyZ2V0O2MuZGF0YShhLCJfY2hhbmdlX2RhdGEiLEZhKGEpKX19LHNldHVwOmZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT09ImZpbGUiKXJldHVybiBmYWxzZTtmb3IodmFyIGEgaW4gZWEpYy5ldmVudC5hZGQodGhpcyxhKyIuc3BlY2lhbENoYW5nZSIsZWFbYV0pO3JldHVybiBkYS50ZXN0KHRoaXMubm9kZU5hbWUpfSx0ZWFyZG93bjpmdW5jdGlvbigpe2MuZXZlbnQucmVtb3ZlKHRoaXMsIi5zcGVjaWFsQ2hhbmdlIik7cmV0dXJuIGRhLnRlc3QodGhpcy5ub2RlTmFtZSl9fTtlYT1jLmV2ZW50LnNwZWNpYWwuY2hhbmdlLmZpbHRlcnN9cy5hZGRFdmVudExpc3RlbmVyJiZjLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChmKXtmPWMuZXZlbnQuZml4KGYpO2YudHlwZT1iO3JldHVybiBjLmV2ZW50LmhhbmRsZS5jYWxsKHRoaXMsZil9Yy5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihhLGQsdHJ1ZSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGEsZCx0cnVlKX19fSk7Yy5lYWNoKFsiYmluZCIsIm9uZSJdLGZ1bmN0aW9uKGEsYil7Yy5mbltiXT1mdW5jdGlvbihkLGYsZSl7aWYodHlwZW9mIGQ9PT0ib2JqZWN0Iil7Zm9yKHZhciBqIGluIGQpdGhpc1tiXShqLGYsZFtqXSxlKTtyZXR1cm4gdGhpc31pZihjLmlzRnVuY3Rpb24oZikpe2U9ZjtmPXd9dmFyIGk9Yj09PSJvbmUiP2MucHJveHkoZSxmdW5jdGlvbihrKXtjKHRoaXMpLnVuYmluZChrLGkpO3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pOmU7aWYoZD09PSJ1bmxvYWQiJiZiIT09Im9uZSIpdGhpcy5vbmUoZCxmLGUpO2Vsc2V7aj0wO2Zvcih2YXIgbz10aGlzLmxlbmd0aDtqPG87aisrKWMuZXZlbnQuYWRkKHRoaXNbal0sZCxpLGYpfXJldHVybiB0aGlzfX0pO2MuZm4uZXh0ZW5kKHt1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYT09PSJvYmplY3QiJiYhYS5wcmV2ZW50RGVmYXVsdClmb3IodmFyIGQgaW4gYSl0aGlzLnVuYmluZChkLGFbZF0pO2Vsc2V7ZD0wO2Zvcih2YXIgZj10aGlzLmxlbmd0aDtkPGY7ZCsrKWMuZXZlbnQucmVtb3ZlKHRoaXNbZF0sYSxiKX1yZXR1cm4gdGhpc30sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGQsZil7cmV0dXJuIHRoaXMubGl2ZShiLGQsZixhKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0wP3RoaXMudW5iaW5kKCJsaXZlIik6dGhpcy5kaWUoYixudWxsLGQsYSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe2lmKHRoaXNbMF0pe2E9Yy5FdmVudChhKTthLnByZXZlbnREZWZhdWx0KCk7YS5zdG9wUHJvcGFnYXRpb24oKTtjLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXNbMF0pO3JldHVybiBhLnJlc3VsdH19LHRvZ2dsZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YXJndW1lbnRzLGQ9MTtkPGIubGVuZ3RoOyljLnByb3h5KGEsYltkKytdKTtyZXR1cm4gdGhpcy5jbGljayhjLnByb3h5KGEsZnVuY3Rpb24oZil7dmFyIGU9KGMuZGF0YSh0aGlzLCJsYXN0VG9nZ2xlIithLmd1aWQpfHwwKSVkO2MuZGF0YSh0aGlzLCJsYXN0VG9nZ2xlIithLmd1aWQsZSsxKTtmLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIGJbZV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfHxmYWxzZX0pKX0saG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIEdhPXtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQiLG1vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifTtjLmVhY2goWyJsaXZlIiwiZGllIl0sZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZixlLGope3ZhciBpLG89MCxrLG4scj1qfHx0aGlzLnNlbGVjdG9yLHU9aj90aGlzOmModGhpcy5jb250ZXh0KTtpZihjLmlzRnVuY3Rpb24oZikpe2U9ZjtmPXd9Zm9yKGQ9KGR8fCIiKS5zcGxpdCgiICIpOyhpPWRbbysrXSkhPW51bGw7KXtqPU8uZXhlYyhpKTtrPSIiO2lmKGope2s9alswXTtpPWkucmVwbGFjZShPLCIiKX1pZihpPT09ImhvdmVyIilkLnB1c2goIm1vdXNlZW50ZXIiK2ssIm1vdXNlbGVhdmUiK2spO2Vsc2V7bj1pO2lmKGk9PT0iZm9jdXMifHxpPT09ImJsdXIiKXtkLnB1c2goR2FbaV0rayk7aSs9a31lbHNlIGk9KEdhW2ldfHxpKStrO2I9PT0ibGl2ZSI/dS5lYWNoKGZ1bmN0aW9uKCl7Yy5ldmVudC5hZGQodGhpcyxwYShpLHIpLHtkYXRhOmYsc2VsZWN0b3I6cixoYW5kbGVyOmUsb3JpZ1R5cGU6aSxvcmlnSGFuZGxlcjplLHByZVR5cGU6bn0pfSk6dS51bmJpbmQocGEoaSxyKSxlKX19cmV0dXJuIHRoaXN9fSk7Yy5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7Yy5mbltiXT1mdW5jdGlvbihkKXtyZXR1cm4gZD90aGlzLmJpbmQoYixkKTp0aGlzLnRyaWdnZXIoYil9O2lmKGMuYXR0ckZuKWMuYXR0ckZuW2JdPXRydWV9KTtBLmF0dGFjaEV2ZW50JiYhQS5hZGRFdmVudExpc3RlbmVyJiZBLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gYy5jYWNoZSlpZihjLmNhY2hlW2FdLmhhbmRsZSl0cnl7Yy5ldmVudC5yZW1vdmUoYy5jYWNoZVthXS5oYW5kbGUuZWxlbSl9Y2F0Y2goYil7fX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoZyl7Zm9yKHZhciBoPSIiLGwsbT0wO2dbbV07bSsrKXtsPWdbbV07aWYobC5ub2RlVHlwZT09PTN8fGwubm9kZVR5cGU9PT00KWgrPWwubm9kZVZhbHVlO2Vsc2UgaWYobC5ub2RlVHlwZSE9PTgpaCs9YShsLmNoaWxkTm9kZXMpfXJldHVybiBofWZ1bmN0aW9uIGIoZyxoLGwsbSxxLHApe3E9MDtmb3IodmFyIHY9bS5sZW5ndGg7cTx2O3ErKyl7dmFyIHQ9bVtxXTtpZih0KXt0PXRbZ107Zm9yKHZhciB5PWZhbHNlO3Q7KXtpZih0LnNpemNhY2hlPT09bCl7eT1tW3Quc2l6c2V0XTticmVha31pZih0Lm5vZGVUeXBlPT09MSYmIXApe3Quc2l6Y2FjaGU9bDt0LnNpenNldD1xfWlmKHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWgpe3k9dDticmVha310PXRbZ119bVtxXT15fX19ZnVuY3Rpb24gZChnLGgsbCxtLHEscCl7cT0wO2Zvcih2YXIgdj1tLmxlbmd0aDtxPHY7cSsrKXt2YXIgdD1tW3FdO2lmKHQpe3Q9dFtnXTtmb3IodmFyIHk9ZmFsc2U7dDspe2lmKHQuc2l6Y2FjaGU9PT1sKXt5PW1bdC5zaXpzZXRdO2JyZWFrfWlmKHQubm9kZVR5cGU9PT0xKXtpZighcCl7dC5zaXpjYWNoZT1sO3Quc2l6c2V0PXF9aWYodHlwZW9mIGghPT0ic3RyaW5nIil7aWYodD09PWgpe3k9dHJ1ZTticmVha319ZWxzZSBpZihrLmZpbHRlcihoLFt0XSkubGVuZ3RoPjApe3k9dDticmVha319dD10W2ddfW1bcV09eX19fXZhciBmPS8oKD86XCgoPzpcKFteKCldK1wpfFteKCldKykrXCl8XFsoPzpcW1teW1xdXSpcXXxbJyJdW14nIl0qWyciXXxbXltcXSciXSspK1xdfFxcLnxbXiA+K34sKFxbXFxdKykrfFs+K35dKShccyosXHMqKT8oKD86LnxccnxcbikqKS9nLGU9MCxqPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsaT1mYWxzZSxvPXRydWU7WzAsMF0uc29ydChmdW5jdGlvbigpe289ZmFsc2U7cmV0dXJuIDB9KTt2YXIgaz1mdW5jdGlvbihnLGgsbCxtKXtsPWx8fFtdO3ZhciBxPWg9aHx8cztpZihoLm5vZGVUeXBlIT09MSYmaC5ub2RlVHlwZSE9PTkpcmV0dXJuW107aWYoIWd8fHR5cGVvZiBnIT09InN0cmluZyIpcmV0dXJuIGw7Zm9yKHZhciBwPVtdLHYsdCx5LFMsSD10cnVlLE09eChoKSxJPWc7KGYuZXhlYygiIiksdj1mLmV4ZWMoSSkpIT09bnVsbDspe0k9dlszXTtwLnB1c2godlsxXSk7aWYodlsyXSl7Uz12WzNdO2JyZWFrfX1pZihwLmxlbmd0aD4xJiZyLmV4ZWMoZykpaWYocC5sZW5ndGg9PT0yJiZuLnJlbGF0aXZlW3BbMF1dKXQ9Z2EocFswXStwWzFdLGgpO2Vsc2UgZm9yKHQ9bi5yZWxhdGl2ZVtwWzBdXT9baF06ayhwLnNoaWZ0KCksaCk7cC5sZW5ndGg7KXtnPXAuc2hpZnQoKTtpZihuLnJlbGF0aXZlW2ddKWcrPXAuc2hpZnQoKTt0PWdhKGcsdCl9ZWxzZXtpZighbSYmcC5sZW5ndGg+MSYmaC5ub2RlVHlwZT09PTkmJiFNJiZuLm1hdGNoLklELnRlc3QocFswXSkmJiFuLm1hdGNoLklELnRlc3QocFtwLmxlbmd0aC0xXSkpe3Y9ay5maW5kKHAuc2hpZnQoKSxoLE0pO2g9di5leHByP2suZmlsdGVyKHYuZXhwcix2LnNldClbMF06di5zZXRbMF19aWYoaCl7dj1tP3tleHByOnAucG9wKCksc2V0OnoobSl9OmsuZmluZChwLnBvcCgpLHAubGVuZ3RoPT09MSYmKHBbMF09PT0ifiJ8fHBbMF09PT0iKyIpJiZoLnBhcmVudE5vZGU/aC5wYXJlbnROb2RlOmgsTSk7dD12LmV4cHI/ay5maWx0ZXIodi5leHByLHYuc2V0KTp2LnNldDtpZihwLmxlbmd0aD4wKXk9eih0KTtlbHNlIEg9ZmFsc2U7Zm9yKDtwLmxlbmd0aDspe3ZhciBEPXAucG9wKCk7dj1EO2lmKG4ucmVsYXRpdmVbRF0pdj1wLnBvcCgpO2Vsc2UgRD0iIjtpZih2PT1udWxsKXY9aDtuLnJlbGF0aXZlW0RdKHksdixNKX19ZWxzZSB5PVtdfXl8fCh5PXQpO3l8fGsuZXJyb3IoRHx8Zyk7aWYoai5jYWxsKHkpPT09IltvYmplY3QgQXJyYXldIilpZihIKWlmKGgmJmgubm9kZVR5cGU9PT0xKWZvcihnPTA7eVtnXSE9bnVsbDtnKyspe2lmKHlbZ10mJih5W2ddPT09dHJ1ZXx8eVtnXS5ub2RlVHlwZT09PTEmJkUoaCx5W2ddKSkpbC5wdXNoKHRbZ10pfWVsc2UgZm9yKGc9MDt5W2ddIT1udWxsO2crKyl5W2ddJiZ5W2ddLm5vZGVUeXBlPT09MSYmbC5wdXNoKHRbZ10pO2Vsc2UgbC5wdXNoLmFwcGx5KGwseSk7ZWxzZSB6KHksbCk7aWYoUyl7ayhTLHEsbCxtKTtrLnVuaXF1ZVNvcnQobCl9cmV0dXJuIGx9O2sudW5pcXVlU29ydD1mdW5jdGlvbihnKXtpZihCKXtpPW87Zy5zb3J0KEIpO2lmKGkpZm9yKHZhciBoPTE7aDxnLmxlbmd0aDtoKyspZ1toXT09PWdbaC0xXSYmZy5zcGxpY2UoaC0tLDEpfXJldHVybiBnfTtrLm1hdGNoZXM9ZnVuY3Rpb24oZyxoKXtyZXR1cm4gayhnLG51bGwsbnVsbCxoKX07ay5maW5kPWZ1bmN0aW9uKGcsaCxsKXt2YXIgbSxxO2lmKCFnKXJldHVybltdO2Zvcih2YXIgcD0wLHY9bi5vcmRlci5sZW5ndGg7cDx2O3ArKyl7dmFyIHQ9bi5vcmRlcltwXTtpZihxPW4ubGVmdE1hdGNoW3RdLmV4ZWMoZykpe3ZhciB5PXFbMV07cS5zcGxpY2UoMSwxKTtpZih5LnN1YnN0cih5Lmxlbmd0aC0xKSE9PSJcXCIpe3FbMV09KHFbMV18fCIiKS5yZXBsYWNlKC9cXC9nLCIiKTttPW4uZmluZFt0XShxLGgsbCk7aWYobSE9bnVsbCl7Zz1nLnJlcGxhY2Uobi5tYXRjaFt0XSwiIik7YnJlYWt9fX19bXx8KG09aC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTtyZXR1cm57c2V0Om0sZXhwcjpnfX07ay5maWx0ZXI9ZnVuY3Rpb24oZyxoLGwsbSl7Zm9yKHZhciBxPWcscD1bXSx2PWgsdCx5LFM9aCYmaFswXSYmeChoWzBdKTtnJiZoLmxlbmd0aDspe2Zvcih2YXIgSCBpbiBuLmZpbHRlcilpZigodD1uLmxlZnRNYXRjaFtIXS5leGVjKGcpKSE9bnVsbCYmdFsyXSl7dmFyIE09bi5maWx0ZXJbSF0sSSxEO0Q9dFsxXTt5PWZhbHNlO3Quc3BsaWNlKDEsMSk7aWYoRC5zdWJzdHIoRC5sZW5ndGgtCjEpIT09IlxcIil7aWYodj09PXApcD1bXTtpZihuLnByZUZpbHRlcltIXSlpZih0PW4ucHJlRmlsdGVyW0hdKHQsdixsLHAsbSxTKSl7aWYodD09PXRydWUpY29udGludWV9ZWxzZSB5PUk9dHJ1ZTtpZih0KWZvcih2YXIgVT0wOyhEPXZbVV0pIT1udWxsO1UrKylpZihEKXtJPU0oRCx0LFUsdik7dmFyIEhhPW1eISFJO2lmKGwmJkkhPW51bGwpaWYoSGEpeT10cnVlO2Vsc2UgdltVXT1mYWxzZTtlbHNlIGlmKEhhKXtwLnB1c2goRCk7eT10cnVlfX1pZihJIT09dyl7bHx8KHY9cCk7Zz1nLnJlcGxhY2Uobi5tYXRjaFtIXSwiIik7aWYoIXkpcmV0dXJuW107YnJlYWt9fX1pZihnPT09cSlpZih5PT1udWxsKWsuZXJyb3IoZyk7ZWxzZSBicmVhaztxPWd9cmV0dXJuIHZ9O2suZXJyb3I9ZnVuY3Rpb24oZyl7dGhyb3ciU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitnO307dmFyIG49ay5zZWxlY3RvcnM9e29yZGVyOlsiSUQiLCJOQU1FIiwiVEFHIl0sbWF0Y2g6e0lEOi8jKCg/Oltcd1x1MDBjMC1cdUZGRkYtXXxcXC4pKykvLENMQVNTOi9cLigoPzpbXHdcdTAwYzAtXHVGRkZGLV18XFwuKSspLyxOQU1FOi9cW25hbWU9WyciXSooKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKVsnIl0qXF0vLEFUVFI6L1xbXHMqKCg/Oltcd1x1MDBjMC1cdUZGRkYtXXxcXC4pKylccyooPzooXFM/PSlccyooWyciXSopKC4qPylcM3wpXHMqXF0vLFRBRzovXigoPzpbXHdcdTAwYzAtXHVGRkZGXCotXXxcXC4pKykvLENISUxEOi86KG9ubHl8bnRofGxhc3R8Zmlyc3QpLWNoaWxkKD86XCgoZXZlbnxvZGR8W1xkbistXSopXCkpPy8sUE9TOi86KG50aHxlcXxndHxsdHxmaXJzdHxsYXN0fGV2ZW58b2RkKSg/OlwoKFxkKilcKSk/KD89W14tXXwkKS8sUFNFVURPOi86KCg/Oltcd1x1MDBjMC1cdUZGRkYtXXxcXC4pKykoPzpcKChbJyJdPykoKD86XChbXlwpXStcKXxbXlwoXCldKikrKVwyXCkpPy99LGxlZnRNYXRjaDp7fSxhdHRyTWFwOnsiY2xhc3MiOiJjbGFzc05hbWUiLCJmb3IiOiJodG1sRm9yIn0sYXR0ckhhbmRsZTp7aHJlZjpmdW5jdGlvbihnKXtyZXR1cm4gZy5nZXRBdHRyaWJ1dGUoImhyZWYiKX19LHJlbGF0aXZlOnsiKyI6ZnVuY3Rpb24oZyxoKXt2YXIgbD10eXBlb2YgaD09PSJzdHJpbmciLG09bCYmIS9cVy8udGVzdChoKTtsPWwmJiFtO2lmKG0paD1oLnRvTG93ZXJDYXNlKCk7bT0wO2Zvcih2YXIgcT1nLmxlbmd0aCxwO208cTttKyspaWYocD1nW21dKXtmb3IoOyhwPXAucHJldmlvdXNTaWJsaW5nKSYmcC5ub2RlVHlwZSE9PTE7KTtnW21dPWx8fHAmJnAubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWg/cHx8ZmFsc2U6cD09PWh9bCYmay5maWx0ZXIoaCxnLHRydWUpfSwiPiI6ZnVuY3Rpb24oZyxoKXt2YXIgbD10eXBlb2YgaD09PSJzdHJpbmciO2lmKGwmJiEvXFcvLnRlc3QoaCkpe2g9aC50b0xvd2VyQ2FzZSgpO2Zvcih2YXIgbT0wLHE9Zy5sZW5ndGg7bTxxO20rKyl7dmFyIHA9Z1ttXTtpZihwKXtsPXAucGFyZW50Tm9kZTtnW21dPWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWg/bDpmYWxzZX19fWVsc2V7bT0wO2ZvcihxPWcubGVuZ3RoO208cTttKyspaWYocD1nW21dKWdbbV09bD9wLnBhcmVudE5vZGU6cC5wYXJlbnROb2RlPT09aDtsJiZrLmZpbHRlcihoLGcsdHJ1ZSl9fSwiIjpmdW5jdGlvbihnLGgsbCl7dmFyIG09ZSsrLHE9ZDtpZih0eXBlb2YgaD09PSJzdHJpbmciJiYhL1xXLy50ZXN0KGgpKXt2YXIgcD1oPWgudG9Mb3dlckNhc2UoKTtxPWJ9cSgicGFyZW50Tm9kZSIsaCxtLGcscCxsKX0sIn4iOmZ1bmN0aW9uKGcsaCxsKXt2YXIgbT1lKysscT1kO2lmKHR5cGVvZiBoPT09InN0cmluZyImJiEvXFcvLnRlc3QoaCkpe3ZhciBwPWg9aC50b0xvd2VyQ2FzZSgpO3E9Yn1xKCJwcmV2aW91c1NpYmxpbmciLGgsbSxnLHAsbCl9fSxmaW5kOntJRDpmdW5jdGlvbihnLGgsbCl7aWYodHlwZW9mIGguZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmIWwpcmV0dXJuKGc9aC5nZXRFbGVtZW50QnlJZChnWzFdKSk/W2ddOltdfSxOQU1FOmZ1bmN0aW9uKGcsaCl7aWYodHlwZW9mIGguZ2V0RWxlbWVudHNCeU5hbWUhPT0idW5kZWZpbmVkIil7dmFyIGw9W107aD1oLmdldEVsZW1lbnRzQnlOYW1lKGdbMV0pO2Zvcih2YXIgbT0wLHE9aC5sZW5ndGg7bTxxO20rKyloW21dLmdldEF0dHJpYnV0ZSgibmFtZSIpPT09Z1sxXSYmbC5wdXNoKGhbbV0pO3JldHVybiBsLmxlbmd0aD09PTA/bnVsbDpsfX0sVEFHOmZ1bmN0aW9uKGcsaCl7cmV0dXJuIGguZ2V0RWxlbWVudHNCeVRhZ05hbWUoZ1sxXSl9fSxwcmVGaWx0ZXI6e0NMQVNTOmZ1bmN0aW9uKGcsaCxsLG0scSxwKXtnPSIgIitnWzFdLnJlcGxhY2UoL1xcL2csIiIpKyIgIjtpZihwKXJldHVybiBnO3A9MDtmb3IodmFyIHY7KHY9aFtwXSkhPW51bGw7cCsrKWlmKHYpaWYocV4odi5jbGFzc05hbWUmJigiICIrdi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKC9bXHRcbl0vZywiICIpLmluZGV4T2YoZyk+PTApKWx8fG0ucHVzaCh2KTtlbHNlIGlmKGwpaFtwXT1mYWxzZTtyZXR1cm4gZmFsc2V9LElEOmZ1bmN0aW9uKGcpe3JldHVybiBnWzFdLnJlcGxhY2UoL1xcL2csIiIpfSxUQUc6ZnVuY3Rpb24oZyl7cmV0dXJuIGdbMV0udG9Mb3dlckNhc2UoKX0sQ0hJTEQ6ZnVuY3Rpb24oZyl7aWYoZ1sxXT09PSJudGgiKXt2YXIgaD0vKC0/KShcZCopbigoPzpcK3wtKT9cZCopLy5leGVjKGdbMl09PT0iZXZlbiImJiIybiJ8fGdbMl09PT0ib2RkIiYmIjJuKzEifHwhL1xELy50ZXN0KGdbMl0pJiYiMG4rIitnWzJdfHxnWzJdKTtnWzJdPWhbMV0rKGhbMl18fDEpLTA7Z1szXT1oWzNdLTB9Z1swXT1lKys7cmV0dXJuIGd9LEFUVFI6ZnVuY3Rpb24oZyxoLGwsbSxxLHApe2g9Z1sxXS5yZXBsYWNlKC9cXC9nLCIiKTtpZighcCYmbi5hdHRyTWFwW2hdKWdbMV09bi5hdHRyTWFwW2hdO2lmKGdbMl09PT0ifj0iKWdbNF09IiAiK2dbNF0rIiAiO3JldHVybiBnfSxQU0VVRE86ZnVuY3Rpb24oZyxoLGwsbSxxKXtpZihnWzFdPT09Im5vdCIpaWYoKGYuZXhlYyhnWzNdKXx8IiIpLmxlbmd0aD4xfHwvXlx3Ly50ZXN0KGdbM10pKWdbM109ayhnWzNdLG51bGwsbnVsbCxoKTtlbHNle2c9ay5maWx0ZXIoZ1szXSxoLGwsdHJ1ZV5xKTtsfHxtLnB1c2guYXBwbHkobSxnKTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihuLm1hdGNoLlBPUy50ZXN0KGdbMF0pfHxuLm1hdGNoLkNISUxELnRlc3QoZ1swXSkpcmV0dXJuIHRydWU7cmV0dXJuIGd9LFBPUzpmdW5jdGlvbihnKXtnLnVuc2hpZnQodHJ1ZSk7cmV0dXJuIGd9fSxmaWx0ZXJzOntlbmFibGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLmRpc2FibGVkPT09ZmFsc2UmJmcudHlwZSE9PSJoaWRkZW4ifSxkaXNhYmxlZDpmdW5jdGlvbihnKXtyZXR1cm4gZy5kaXNhYmxlZD09PXRydWV9LGNoZWNrZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuY2hlY2tlZD09PXRydWV9LHNlbGVjdGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLnNlbGVjdGVkPT09dHJ1ZX0scGFyZW50OmZ1bmN0aW9uKGcpe3JldHVybiEhZy5maXJzdENoaWxkfSxlbXB0eTpmdW5jdGlvbihnKXtyZXR1cm4hZy5maXJzdENoaWxkfSxoYXM6ZnVuY3Rpb24oZyxoLGwpe3JldHVybiEhayhsWzNdLGcpLmxlbmd0aH0saGVhZGVyOmZ1bmN0aW9uKGcpe3JldHVybi9oXGQvaS50ZXN0KGcubm9kZU5hbWUpfSx0ZXh0OmZ1bmN0aW9uKGcpe3JldHVybiJ0ZXh0Ij09PWcudHlwZX0scmFkaW86ZnVuY3Rpb24oZyl7cmV0dXJuInJhZGlvIj09PWcudHlwZX0sY2hlY2tib3g6ZnVuY3Rpb24oZyl7cmV0dXJuImNoZWNrYm94Ij09PWcudHlwZX0sZmlsZTpmdW5jdGlvbihnKXtyZXR1cm4iZmlsZSI9PT1nLnR5cGV9LHBhc3N3b3JkOmZ1bmN0aW9uKGcpe3JldHVybiJwYXNzd29yZCI9PT1nLnR5cGV9LHN1Ym1pdDpmdW5jdGlvbihnKXtyZXR1cm4ic3VibWl0Ij09PWcudHlwZX0saW1hZ2U6ZnVuY3Rpb24oZyl7cmV0dXJuImltYWdlIj09PWcudHlwZX0scmVzZXQ6ZnVuY3Rpb24oZyl7cmV0dXJuInJlc2V0Ij09PWcudHlwZX0sYnV0dG9uOmZ1bmN0aW9uKGcpe3JldHVybiJidXR0b24iPT09Zy50eXBlfHxnLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iYnV0dG9uIn0saW5wdXQ6ZnVuY3Rpb24oZyl7cmV0dXJuL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24vaS50ZXN0KGcubm9kZU5hbWUpfX0sc2V0RmlsdGVyczp7Zmlyc3Q6ZnVuY3Rpb24oZyxoKXtyZXR1cm4gaD09PTB9LGxhc3Q6ZnVuY3Rpb24oZyxoLGwsbSl7cmV0dXJuIGg9PT1tLmxlbmd0aC0xfSxldmVuOmZ1bmN0aW9uKGcsaCl7cmV0dXJuIGglMj09PTB9LG9kZDpmdW5jdGlvbihnLGgpe3JldHVybiBoJTI9PT0xfSxsdDpmdW5jdGlvbihnLGgsbCl7cmV0dXJuIGg8bFszXS0wfSxndDpmdW5jdGlvbihnLGgsbCl7cmV0dXJuIGg+bFszXS0wfSxudGg6ZnVuY3Rpb24oZyxoLGwpe3JldHVybiBsWzNdLTA9PT1ofSxlcTpmdW5jdGlvbihnLGgsbCl7cmV0dXJuIGxbM10tMD09PWh9fSxmaWx0ZXI6e1BTRVVETzpmdW5jdGlvbihnLGgsbCxtKXt2YXIgcT1oWzFdLHA9bi5maWx0ZXJzW3FdO2lmKHApcmV0dXJuIHAoZyxsLGgsbSk7ZWxzZSBpZihxPT09ImNvbnRhaW5zIilyZXR1cm4oZy50ZXh0Q29udGVudHx8Zy5pbm5lclRleHR8fGEoW2ddKXx8IiIpLmluZGV4T2YoaFszXSk+PTA7ZWxzZSBpZihxPT09Im5vdCIpe2g9aFszXTtsPTA7Zm9yKG09aC5sZW5ndGg7bDxtO2wrKylpZihoW2xdPT09ZylyZXR1cm4gZmFsc2U7cmV0dXJuIHRydWV9ZWxzZSBrLmVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK3EpfSxDSElMRDpmdW5jdGlvbihnLGgpe3ZhciBsPWhbMV0sbT1nO3N3aXRjaChsKXtjYXNlIm9ubHkiOmNhc2UiZmlyc3QiOmZvcig7bT1tLnByZXZpb3VzU2libGluZzspaWYobS5ub2RlVHlwZT09PTEpcmV0dXJuIGZhbHNlO2lmKGw9PT0iZmlyc3QiKXJldHVybiB0cnVlO209ZztjYXNlImxhc3QiOmZvcig7bT1tLm5leHRTaWJsaW5nOylpZihtLm5vZGVUeXBlPT09MSlyZXR1cm4gZmFsc2U7cmV0dXJuIHRydWU7Y2FzZSJudGgiOmw9aFsyXTt2YXIgcT1oWzNdO2lmKGw9PT0xJiZxPT09MClyZXR1cm4gdHJ1ZTtoPWhbMF07dmFyIHA9Zy5wYXJlbnROb2RlO2lmKHAmJihwLnNpemNhY2hlIT09aHx8IWcubm9kZUluZGV4KSl7dmFyIHY9MDtmb3IobT1wLmZpcnN0Q2hpbGQ7bTttPW0ubmV4dFNpYmxpbmcpaWYobS5ub2RlVHlwZT09PTEpbS5ub2RlSW5kZXg9Kyt2O3Auc2l6Y2FjaGU9aH1nPWcubm9kZUluZGV4LXE7cmV0dXJuIGw9PT0wP2c9PT0wOmclbD09PTAmJmcvbD49MH19LElEOmZ1bmN0aW9uKGcsaCl7cmV0dXJuIGcubm9kZVR5cGU9PT0xJiZnLmdldEF0dHJpYnV0ZSgiaWQiKT09PWh9LFRBRzpmdW5jdGlvbihnLGgpe3JldHVybiBoPT09IioiJiZnLm5vZGVUeXBlPT09MXx8Zy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aH0sQ0xBU1M6ZnVuY3Rpb24oZyxoKXtyZXR1cm4oIiAiKyhnLmNsYXNzTmFtZXx8Zy5nZXRBdHRyaWJ1dGUoImNsYXNzIikpKyIgIikuaW5kZXhPZihoKT4tMX0sQVRUUjpmdW5jdGlvbihnLGgpe3ZhciBsPWhbMV07Zz1uLmF0dHJIYW5kbGVbbF0/bi5hdHRySGFuZGxlW2xdKGcpOmdbbF0hPW51bGw/Z1tsXTpnLmdldEF0dHJpYnV0ZShsKTtsPWcrIiI7dmFyIG09aFsyXTtoPWhbNF07cmV0dXJuIGc9PW51bGw/bT09PSIhPSI6bT09PSI9Ij9sPT09aDptPT09Iio9Ij9sLmluZGV4T2YoaCk+PTA6bT09PSJ+PSI/KCIgIitsKyIgIikuaW5kZXhPZihoKT49MDohaD9sJiZnIT09ZmFsc2U6bT09PSIhPSI/bCE9PWg6bT09PSJePSI/bC5pbmRleE9mKGgpPT09MDptPT09IiQ9Ij9sLnN1YnN0cihsLmxlbmd0aC1oLmxlbmd0aCk9PT1oOm09PT0ifD0iP2w9PT1ofHxsLnN1YnN0cigwLGgubGVuZ3RoKzEpPT09aCsiLSI6ZmFsc2V9LFBPUzpmdW5jdGlvbihnLGgsbCxtKXt2YXIgcT1uLnNldEZpbHRlcnNbaFsyXV07aWYocSlyZXR1cm4gcShnLGwsaCxtKX19fSxyPW4ubWF0Y2guUE9TO2Zvcih2YXIgdSBpbiBuLm1hdGNoKXtuLm1hdGNoW3VdPW5ldyBSZWdFeHAobi5tYXRjaFt1XS5zb3VyY2UrLyg/IVteXFtdKlxdKSg/IVteXChdKlwpKS8uc291cmNlKTtuLmxlZnRNYXRjaFt1XT1uZXcgUmVnRXhwKC8oXig/Oi58XHJ8XG4pKj8pLy5zb3VyY2Urbi5tYXRjaFt1XS5zb3VyY2UucmVwbGFjZSgvXFwoXGQrKS9nLGZ1bmN0aW9uKGcsaCl7cmV0dXJuIlxcIisoaC0wKzEpfSkpfXZhciB6PWZ1bmN0aW9uKGcsaCl7Zz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChnLDApO2lmKGgpe2gucHVzaC5hcHBseShoLGcpO3JldHVybiBofXJldHVybiBnfTt0cnl7QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocy5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2RlcywwKX1jYXRjaChDKXt6PWZ1bmN0aW9uKGcsaCl7aD1ofHxbXTtpZihqLmNhbGwoZyk9PT0iW29iamVjdCBBcnJheV0iKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGgsZyk7ZWxzZSBpZih0eXBlb2YgZy5sZW5ndGg9PT0ibnVtYmVyIilmb3IodmFyIGw9MCxtPWcubGVuZ3RoO2w8bTtsKyspaC5wdXNoKGdbbF0pO2Vsc2UgZm9yKGw9MDtnW2xdO2wrKyloLnB1c2goZ1tsXSk7cmV0dXJuIGh9fXZhciBCO2lmKHMuZG9jdW1lbnRFbGVtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKUI9ZnVuY3Rpb24oZyxoKXtpZighZy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IWguY29tcGFyZURvY3VtZW50UG9zaXRpb24pe2lmKGc9PWgpaT10cnVlO3JldHVybiBnLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uPy0xOjF9Zz1nLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGgpJjQ/LTE6Zz09PWg/MDoxO2lmKGc9PT0wKWk9dHJ1ZTtyZXR1cm4gZ307ZWxzZSBpZigic291cmNlSW5kZXgiaW4gcy5kb2N1bWVudEVsZW1lbnQpQj1mdW5jdGlvbihnLGgpe2lmKCFnLnNvdXJjZUluZGV4fHwhaC5zb3VyY2VJbmRleCl7aWYoZz09aClpPXRydWU7cmV0dXJuIGcuc291cmNlSW5kZXg/LTE6MX1nPWcuc291cmNlSW5kZXgtaC5zb3VyY2VJbmRleDtpZihnPT09MClpPXRydWU7cmV0dXJuIGd9O2Vsc2UgaWYocy5jcmVhdGVSYW5nZSlCPWZ1bmN0aW9uKGcsaCl7aWYoIWcub3duZXJEb2N1bWVudHx8IWgub3duZXJEb2N1bWVudCl7aWYoZz09aClpPXRydWU7cmV0dXJuIGcub3duZXJEb2N1bWVudD8tMToxfXZhciBsPWcub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLG09aC5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7bC5zZXRTdGFydChnLDApO2wuc2V0RW5kKGcsMCk7bS5zZXRTdGFydChoLDApO20uc2V0RW5kKGgsMCk7Zz1sLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsbSk7aWYoZz09PTApaT10cnVlO3JldHVybiBnfTsoZnVuY3Rpb24oKXt2YXIgZz1zLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGg9InNjcmlwdCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7Zy5pbm5lckhUTUw9IjxhIG5hbWU9JyIraCsiJy8+Ijt2YXIgbD1zLmRvY3VtZW50RWxlbWVudDtsLmluc2VydEJlZm9yZShnLGwuZmlyc3RDaGlsZCk7aWYocy5nZXRFbGVtZW50QnlJZChoKSl7bi5maW5kLklEPWZ1bmN0aW9uKG0scSxwKXtpZih0eXBlb2YgcS5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiYhcClyZXR1cm4ocT1xLmdldEVsZW1lbnRCeUlkKG1bMV0pKT9xLmlkPT09bVsxXXx8dHlwZW9mIHEuZ2V0QXR0cmlidXRlTm9kZSE9PSJ1bmRlZmluZWQiJiZxLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlPT09bVsxXT9bcV06dzpbXX07bi5maWx0ZXIuSUQ9ZnVuY3Rpb24obSxxKXt2YXIgcD10eXBlb2YgbS5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJm0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbS5ub2RlVHlwZT09PTEmJnAmJnAubm9kZVZhbHVlPT09cX19bC5yZW1vdmVDaGlsZChnKTtsPWc9bnVsbH0pKCk7KGZ1bmN0aW9uKCl7dmFyIGc9cy5jcmVhdGVFbGVtZW50KCJkaXYiKTtnLmFwcGVuZENoaWxkKHMuY3JlYXRlQ29tbWVudCgiIikpO2lmKGcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg+MCluLmZpbmQuVEFHPWZ1bmN0aW9uKGgsbCl7bD1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKGhbMV0pO2lmKGhbMV09PT0iKiIpe2g9W107Zm9yKHZhciBtPTA7bFttXTttKyspbFttXS5ub2RlVHlwZT09PTEmJmgucHVzaChsW21dKTtsPWh9cmV0dXJuIGx9O2cuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IjtpZihnLmZpcnN0Q2hpbGQmJnR5cGVvZiBnLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlIT09InVuZGVmaW5lZCImJmcuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSE9PSIjIiluLmF0dHJIYW5kbGUuaHJlZj1mdW5jdGlvbihoKXtyZXR1cm4gaC5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpfTtnPW51bGx9KSgpO3MucXVlcnlTZWxlY3RvckFsbCYmZnVuY3Rpb24oKXt2YXIgZz1rLGg9cy5jcmVhdGVFbGVtZW50KCJkaXYiKTtoLmlubmVySFRNTD0iPHAgY2xhc3M9J1RFU1QnPjwvcD4iO2lmKCEoaC5xdWVyeVNlbGVjdG9yQWxsJiZoLnF1ZXJ5U2VsZWN0b3JBbGwoIi5URVNUIikubGVuZ3RoPT09MCkpe2s9ZnVuY3Rpb24obSxxLHAsdil7cT1xfHxzO2lmKCF2JiZxLm5vZGVUeXBlPT09OSYmIXgocSkpdHJ5e3JldHVybiB6KHEucXVlcnlTZWxlY3RvckFsbChtKSxwKX1jYXRjaCh0KXt9cmV0dXJuIGcobSxxLHAsdil9O2Zvcih2YXIgbCBpbiBnKWtbbF09Z1tsXTtoPW51bGx9fSgpOyhmdW5jdGlvbigpe3ZhciBnPXMuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zy5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J3Rlc3QgZSc+PC9kaXY+PGRpdiBjbGFzcz0ndGVzdCc+PC9kaXY+IjtpZighKCFnLmdldEVsZW1lbnRzQnlDbGFzc05hbWV8fGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aD09PTApKXtnLmxhc3RDaGlsZC5jbGFzc05hbWU9ImUiO2lmKGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aCE9PTEpe24ub3JkZXIuc3BsaWNlKDEsMCwiQ0xBU1MiKTtuLmZpbmQuQ0xBU1M9ZnVuY3Rpb24oaCxsLG0pe2lmKHR5cGVvZiBsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmIW0pcmV0dXJuIGwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShoWzFdKX07Zz1udWxsfX19KSgpO3ZhciBFPXMuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZyxoKXtyZXR1cm4hIShnLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGgpJjE2KX06ZnVuY3Rpb24oZyxoKXtyZXR1cm4gZyE9PWgmJihnLmNvbnRhaW5zP2cuY29udGFpbnMoaCk6dHJ1ZSl9LHg9ZnVuY3Rpb24oZyl7cmV0dXJuKGc9KGc/Zy5vd25lckRvY3VtZW50fHxnOjApLmRvY3VtZW50RWxlbWVudCk/Zy5ub2RlTmFtZSE9PSJIVE1MIjpmYWxzZX0sZ2E9ZnVuY3Rpb24oZyxoKXt2YXIgbD1bXSxtPSIiLHE7Zm9yKGg9aC5ub2RlVHlwZT9baF06aDtxPW4ubWF0Y2guUFNFVURPLmV4ZWMoZyk7KXttKz1xWzBdO2c9Zy5yZXBsYWNlKG4ubWF0Y2guUFNFVURPLCIiKX1nPW4ucmVsYXRpdmVbZ10/ZysiKiI6ZztxPTA7Zm9yKHZhciBwPWgubGVuZ3RoO3E8cDtxKyspayhnLGhbcV0sbCk7cmV0dXJuIGsuZmlsdGVyKG0sbCl9O2MuZmluZD1rO2MuZXhwcj1rLnNlbGVjdG9ycztjLmV4cHJbIjoiXT1jLmV4cHIuZmlsdGVycztjLnVuaXF1ZT1rLnVuaXF1ZVNvcnQ7Yy50ZXh0PWE7Yy5pc1hNTERvYz14O2MuY29udGFpbnM9RX0pKCk7dmFyIGViPS9VbnRpbCQvLGZiPS9eKD86cGFyZW50c3xwcmV2VW50aWx8cHJldkFsbCkvLGdiPS8sLztSPUFycmF5LnByb3RvdHlwZS5zbGljZTt2YXIgSWE9ZnVuY3Rpb24oYSxiLGQpe2lmKGMuaXNGdW5jdGlvbihiKSlyZXR1cm4gYy5ncmVwKGEsZnVuY3Rpb24oZSxqKXtyZXR1cm4hIWIuY2FsbChlLGosZSk9PT1kfSk7ZWxzZSBpZihiLm5vZGVUeXBlKXJldHVybiBjLmdyZXAoYSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PWI9PT1kfSk7ZWxzZSBpZih0eXBlb2YgYj09PSJzdHJpbmciKXt2YXIgZj1jLmdyZXAoYSxmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlVHlwZT09PTF9KTtpZihVYS50ZXN0KGIpKXJldHVybiBjLmZpbHRlcihiLGYsIWQpO2Vsc2UgYj1jLmZpbHRlcihiLGYpfXJldHVybiBjLmdyZXAoYSxmdW5jdGlvbihlKXtyZXR1cm4gYy5pbkFycmF5KGUsYik+PTA9PT1kfSl9O2MuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnB1c2hTdGFjaygiIiwiZmluZCIsYSksZD0wLGY9MCxlPXRoaXMubGVuZ3RoO2Y8ZTtmKyspe2Q9Yi5sZW5ndGg7Yy5maW5kKGEsdGhpc1tmXSxiKTtpZihmPjApZm9yKHZhciBqPWQ7ajxiLmxlbmd0aDtqKyspZm9yKHZhciBpPTA7aTxkO2krKylpZihiW2ldPT09YltqXSl7Yi5zcGxpY2Uoai0tLDEpO2JyZWFrfX1yZXR1cm4gYn0saGFzOmZ1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBkPTAsZj1iLmxlbmd0aDtkPGY7ZCsrKWlmKGMuY29udGFpbnModGhpcyxiW2RdKSlyZXR1cm4gdHJ1ZX0pfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKElhKHRoaXMsYSxmYWxzZSksIm5vdCIsYSl9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soSWEodGhpcyxhLHRydWUpLCJmaWx0ZXIiLGEpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIWEmJmMuZmlsdGVyKGEsdGhpcykubGVuZ3RoPjB9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtpZihjLmlzQXJyYXkoYSkpe3ZhciBkPVtdLGY9dGhpc1swXSxlLGo9e30saTtpZihmJiZhLmxlbmd0aCl7ZT0wO2Zvcih2YXIgbz1hLmxlbmd0aDtlPG87ZSsrKXtpPWFbZV07altpXXx8KGpbaV09Yy5leHByLm1hdGNoLlBPUy50ZXN0KGkpP2MoaSxifHx0aGlzLmNvbnRleHQpOmkpfWZvcig7ZiYmZi5vd25lckRvY3VtZW50JiZmIT09Yjspe2ZvcihpIGluIGope2U9altpXTtpZihlLmpxdWVyeT9lLmluZGV4KGYpPi0xOmMoZikuaXMoZSkpe2QucHVzaCh7c2VsZWN0b3I6aSxlbGVtOmZ9KTtkZWxldGUgaltpXX19Zj1mLnBhcmVudE5vZGV9fXJldHVybiBkfXZhciBrPWMuZXhwci5tYXRjaC5QT1MudGVzdChhKT9jKGEsYnx8dGhpcy5jb250ZXh0KTpudWxsO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbihuLHIpe2Zvcig7ciYmci5vd25lckRvY3VtZW50JiZyIT09Yjspe2lmKGs/ay5pbmRleChyKT4tMTpjKHIpLmlzKGEpKXJldHVybiByO3I9ci5wYXJlbnROb2RlfXJldHVybiBudWxsfSl9LGluZGV4OmZ1bmN0aW9uKGEpe2lmKCFhfHx0eXBlb2YgYT09PSJzdHJpbmciKXJldHVybiBjLmluQXJyYXkodGhpc1swXSxhP2MoYSk6dGhpcy5wYXJlbnQoKS5jaGlsZHJlbigpKTtyZXR1cm4gYy5pbkFycmF5KGEuanF1ZXJ5P2FbMF06YSx0aGlzKX0sYWRkOmZ1bmN0aW9uKGEsYil7YT10eXBlb2YgYT09PSJzdHJpbmciP2MoYSxifHx0aGlzLmNvbnRleHQpOmMubWFrZUFycmF5KGEpO2I9Yy5tZXJnZSh0aGlzLmdldCgpLGEpO3JldHVybiB0aGlzLnB1c2hTdGFjayhxYShhWzBdKXx8cWEoYlswXSk/YjpjLnVuaXF1ZShiKSl9LGFuZFNlbGY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGQodGhpcy5wcmV2T2JqZWN0KX19KTtjLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiZhLm5vZGVUeXBlIT09MTE/YTpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBjLmRpcihhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZGlyKGEsInBhcmVudE5vZGUiLGQpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBjLm50aChhLDIsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIGMubnRoKGEsMiwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGlyKGEsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGlyKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmRpcihhLCJuZXh0U2libGluZyIsZCl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZGlyKGEsInByZXZpb3VzU2libGluZyIsZCl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBjLnNpYmxpbmcoYS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBjLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGMubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpjLm1ha2VBcnJheShhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtjLmZuW2FdPWZ1bmN0aW9uKGQsZil7dmFyIGU9Yy5tYXAodGhpcyxiLGQpO2ViLnRlc3QoYSl8fChmPWQpO2lmKGYmJnR5cGVvZiBmPT09InN0cmluZyIpZT1jLmZpbHRlcihmLGUpO2U9dGhpcy5sZW5ndGg+MT9jLnVuaXF1ZShlKTplO2lmKCh0aGlzLmxlbmd0aD4xfHxnYi50ZXN0KGYpKSYmZmIudGVzdChhKSllPWUucmV2ZXJzZSgpO3JldHVybiB0aGlzLnB1c2hTdGFjayhlLGEsUi5jYWxsKGFyZ3VtZW50cykuam9pbigiLCIpKX19KTtjLmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGEsYixkKXtpZihkKWE9Ijpub3QoIithKyIpIjtyZXR1cm4gYy5maW5kLm1hdGNoZXMoYSxiKX0sZGlyOmZ1bmN0aW9uKGEsYixkKXt2YXIgZj1bXTtmb3IoYT1hW2JdO2EmJmEubm9kZVR5cGUhPT05JiYoZD09PXd8fGEubm9kZVR5cGUhPT0xfHwhYyhhKS5pcyhkKSk7KXthLm5vZGVUeXBlPT09MSYmZi5wdXNoKGEpO2E9YVtiXX1yZXR1cm4gZn0sbnRoOmZ1bmN0aW9uKGEsYixkKXtiPWJ8fDE7Zm9yKHZhciBmPTA7YTthPWFbZF0paWYoYS5ub2RlVHlwZT09PTEmJisrZj09PWIpYnJlYWs7cmV0dXJuIGF9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9W107YTthPWEubmV4dFNpYmxpbmcpYS5ub2RlVHlwZT09PTEmJmEhPT1iJiZkLnB1c2goYSk7cmV0dXJuIGR9fSk7dmFyIEphPS8galF1ZXJ5XGQrPSIoPzpcZCt8bnVsbCkiL2csVj0vXlxzKy8sS2E9Lyg8KFtcdzpdKylbXj5dKj8pXC8+L2csaGI9L14oPzphcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSQvaSxMYT0vPChbXHc6XSspLyxpYj0vPHRib2R5L2ksamI9Lzx8JiM/XHcrOy8sdGE9LzxzY3JpcHR8PG9iamVjdHw8ZW1iZWR8PG9wdGlvbnw8c3R5bGUvaSx1YT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxNYT1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIGhiLnRlc3QoZCk/YTpiKyI+PC8iK2QrIj4ifSxGPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxsZWdlbmQ6WzEsIjxmaWVsZHNldD4iLCI8L2ZpZWxkc2V0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sYXJlYTpbMSwiPG1hcD4iLCI8L21hcD4iXSxfZGVmYXVsdDpbMCwiIiwiIl19O0Yub3B0Z3JvdXA9Ri5vcHRpb247Ri50Ym9keT1GLnRmb290PUYuY29sZ3JvdXA9Ri5jYXB0aW9uPUYudGhlYWQ7Ri50aD1GLnRkO2lmKCFjLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSlGLl9kZWZhdWx0PVsxLCJkaXY8ZGl2PiIsIjwvZGl2PiJdO2MuZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3ZhciBkPWModGhpcyk7ZC50ZXh0KGEuY2FsbCh0aGlzLGIsZC50ZXh0KCkpKX0pO2lmKHR5cGVvZiBhIT09Im9iamVjdCImJmEhPT13KXJldHVybiB0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fHMpLmNyZWF0ZVRleHROb2RlKGEpKTtyZXR1cm4gYy50ZXh0KHRoaXMpfSx3cmFwQWxsOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGQpe2ModGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxkKSl9KTtpZih0aGlzWzBdKXt2YXIgYj1jKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSh0cnVlKTt0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pO2IubWFwKGZ1bmN0aW9uKCl7Zm9yKHZhciBkPXRoaXM7ZC5maXJzdENoaWxkJiZkLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0xOylkPWQuZmlyc3RDaGlsZDtyZXR1cm4gZH0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe2ModGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1jKHRoaXMpLGQ9Yi5jb250ZW50cygpO2QubGVuZ3RoP2Qud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMpLndyYXBBbGwoYSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe2Mubm9kZU5hbWUodGhpcywiYm9keSIpfHxjKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLHRydWUsZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMuYXBwZW5kQ2hpbGQoYSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyx0cnVlLGZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9PT0xJiZ0aGlzLmluc2VydEJlZm9yZShhLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7aWYodGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmYWxzZSxmdW5jdGlvbihiKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsdGhpcyl9KTtlbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBhPWMoYXJndW1lbnRzWzBdKTthLnB1c2guYXBwbHkoYSx0aGlzLnRvQXJyYXkoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGEsImJlZm9yZSIsYXJndW1lbnRzKX19LGFmdGVyOmZ1bmN0aW9uKCl7aWYodGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmYWxzZSxmdW5jdGlvbihiKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsdGhpcy5uZXh0U2libGluZyl9KTtlbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBhPXRoaXMucHVzaFN0YWNrKHRoaXMsImFmdGVyIixhcmd1bWVudHMpO2EucHVzaC5hcHBseShhLGMoYXJndW1lbnRzWzBdKS50b0FycmF5KCkpO3JldHVybiBhfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkPTAsZjsoZj10aGlzW2RdKSE9bnVsbDtkKyspaWYoIWF8fGMuZmlsdGVyKGEsW2ZdKS5sZW5ndGgpe2lmKCFiJiZmLm5vZGVUeXBlPT09MSl7Yy5jbGVhbkRhdGEoZi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTtjLmNsZWFuRGF0YShbZl0pfWYucGFyZW50Tm9kZSYmZi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGYpfXJldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7KGI9dGhpc1thXSkhPW51bGw7YSsrKWZvcihiLm5vZGVUeXBlPT09MSYmYy5jbGVhbkRhdGEoYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTtiLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXAoZnVuY3Rpb24oKXtpZighYy5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmIWMuaXNYTUxEb2ModGhpcykpe3ZhciBkPXRoaXMub3V0ZXJIVE1MLGY9dGhpcy5vd25lckRvY3VtZW50O2lmKCFkKXtkPWYuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5hcHBlbmRDaGlsZCh0aGlzLmNsb25lTm9kZSh0cnVlKSk7ZD1kLmlubmVySFRNTH1yZXR1cm4gYy5jbGVhbihbZC5yZXBsYWNlKEphLCIiKS5yZXBsYWNlKC89KFtePSInPlxzXStcLyk+L2csJz0iJDEiPicpLnJlcGxhY2UoViwiIildLGYpWzBdfWVsc2UgcmV0dXJuIHRoaXMuY2xvbmVOb2RlKHRydWUpfSk7aWYoYT09PXRydWUpe3JhKHRoaXMsYik7cmEodGhpcy5maW5kKCIqIiksYi5maW5kKCIqIikpfXJldHVybiBifSxodG1sOmZ1bmN0aW9uKGEpe2lmKGE9PT13KXJldHVybiB0aGlzWzBdJiZ0aGlzWzBdLm5vZGVUeXBlPT09MT90aGlzWzBdLmlubmVySFRNTC5yZXBsYWNlKEphLCIiKTpudWxsO2Vsc2UgaWYodHlwZW9mIGE9PT0ic3RyaW5nIiYmIXRhLnRlc3QoYSkmJihjLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2V8fCFWLnRlc3QoYSkpJiYhRlsoTGEuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKEthLE1hKTt0cnl7Zm9yKHZhciBiPTAsZD10aGlzLmxlbmd0aDtiPGQ7YisrKWlmKHRoaXNbYl0ubm9kZVR5cGU9PT0xKXtjLmNsZWFuRGF0YSh0aGlzW2JdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO3RoaXNbYl0uaW5uZXJIVE1MPWF9fWNhdGNoKGYpe3RoaXMuZW1wdHkoKS5hcHBlbmQoYSl9fWVsc2UgYy5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihlKXt2YXIgaj1jKHRoaXMpLGk9ai5odG1sKCk7ai5lbXB0eSgpLmFwcGVuZChmdW5jdGlvbigpe3JldHVybiBhLmNhbGwodGhpcyxlLGkpfSl9KTp0aGlzLmVtcHR5KCkuYXBwZW5kKGEpO3JldHVybiB0aGlzfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3ZhciBkPWModGhpcyksZj1kLmh0bWwoKTtkLnJlcGxhY2VXaXRoKGEuY2FsbCh0aGlzLGIsZikpfSk7aWYodHlwZW9mIGEhPT0ic3RyaW5nIilhPWMoYSkuZGV0YWNoKCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXRoaXMubmV4dFNpYmxpbmcsZD10aGlzLnBhcmVudE5vZGU7Yyh0aGlzKS5yZW1vdmUoKTtiP2MoYikuYmVmb3JlKGEpOmMoZCkuYXBwZW5kKGEpfSl9ZWxzZSByZXR1cm4gdGhpcy5wdXNoU3RhY2soYyhjLmlzRnVuY3Rpb24oYSk/YSgpOmEpLCJyZXBsYWNlV2l0aCIsYSl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSx0cnVlKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiLGQpe2Z1bmN0aW9uIGYodSl7cmV0dXJuIGMubm9kZU5hbWUodSwidGFibGUiKT91LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHx1LmFwcGVuZENoaWxkKHUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTp1fXZhciBlLGosaT1hWzBdLG89W10saztpZighYy5zdXBwb3J0LmNoZWNrQ2xvbmUmJmFyZ3VtZW50cy5sZW5ndGg9PT0zJiZ0eXBlb2YgaT09PSJzdHJpbmciJiZ1YS50ZXN0KGkpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMpLmRvbU1hbmlwKGEsYixkLHRydWUpfSk7aWYoYy5pc0Z1bmN0aW9uKGkpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odSl7dmFyIHo9Yyh0aGlzKTthWzBdPWkuY2FsbCh0aGlzLHUsYj96Lmh0bWwoKTp3KTt6LmRvbU1hbmlwKGEsYixkKX0pO2lmKHRoaXNbMF0pe2U9aSYmaS5wYXJlbnROb2RlO2U9Yy5zdXBwb3J0LnBhcmVudE5vZGUmJmUmJmUubm9kZVR5cGU9PT0xMSYmZS5jaGlsZE5vZGVzLmxlbmd0aD09PXRoaXMubGVuZ3RoP3tmcmFnbWVudDplfTpzYShhLHRoaXMsbyk7az1lLmZyYWdtZW50O2lmKGo9ay5jaGlsZE5vZGVzLmxlbmd0aD09PTE/KGs9ay5maXJzdENoaWxkKTprLmZpcnN0Q2hpbGQpe2I9YiYmYy5ub2RlTmFtZShqLCJ0ciIpO2Zvcih2YXIgbj0wLHI9dGhpcy5sZW5ndGg7bjxyO24rKylkLmNhbGwoYj9mKHRoaXNbbl0saik6dGhpc1tuXSxuPjB8fGUuY2FjaGVhYmxlfHx0aGlzLmxlbmd0aD4xP2suY2xvbmVOb2RlKHRydWUpOmspfW8ubGVuZ3RoJiZjLmVhY2gobyxRYSl9cmV0dXJuIHRoaXN9fSk7Yy5mcmFnbWVudHM9e307Yy5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oYSxiKXtjLmZuW2FdPWZ1bmN0aW9uKGQpe3ZhciBmPVtdO2Q9YyhkKTt2YXIgZT10aGlzLmxlbmd0aD09PTEmJnRoaXNbMF0ucGFyZW50Tm9kZTtpZihlJiZlLm5vZGVUeXBlPT09MTEmJmUuY2hpbGROb2Rlcy5sZW5ndGg9PT0xJiZkLmxlbmd0aD09PTEpe2RbYl0odGhpc1swXSk7cmV0dXJuIHRoaXN9ZWxzZXtlPTA7Zm9yKHZhciBqPWQubGVuZ3RoO2U8ajtlKyspe3ZhciBpPShlPjA/dGhpcy5jbG9uZSh0cnVlKTp0aGlzKS5nZXQoKTtjLmZuW2JdLmFwcGx5KGMoZFtlXSksaSk7Zj1mLmNvbmNhdChpKX1yZXR1cm4gdGhpcy5wdXNoU3RhY2soZixhLGQuc2VsZWN0b3IpfX19KTtjLmV4dGVuZCh7Y2xlYW46ZnVuY3Rpb24oYSxiLGQsZil7Yj1ifHxzO2lmKHR5cGVvZiBiLmNyZWF0ZUVsZW1lbnQ9PT0idW5kZWZpbmVkIiliPWIub3duZXJEb2N1bWVudHx8YlswXSYmYlswXS5vd25lckRvY3VtZW50fHxzO2Zvcih2YXIgZT1bXSxqPTAsaTsoaT1hW2pdKSE9bnVsbDtqKyspe2lmKHR5cGVvZiBpPT09Im51bWJlciIpaSs9IiI7aWYoaSl7aWYodHlwZW9mIGk9PT0ic3RyaW5nIiYmIWpiLnRlc3QoaSkpaT1iLmNyZWF0ZVRleHROb2RlKGkpO2Vsc2UgaWYodHlwZW9mIGk9PT0ic3RyaW5nIil7aT1pLnJlcGxhY2UoS2EsTWEpO3ZhciBvPShMYS5leGVjKGkpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGs9RltvXXx8Ri5fZGVmYXVsdCxuPWtbMF0scj1iLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ZvcihyLmlubmVySFRNTD1rWzFdK2kra1syXTtuLS07KXI9ci5sYXN0Q2hpbGQ7aWYoIWMuc3VwcG9ydC50Ym9keSl7bj1pYi50ZXN0KGkpO289bz09PSJ0YWJsZSImJiFuP3IuZmlyc3RDaGlsZCYmci5maXJzdENoaWxkLmNoaWxkTm9kZXM6a1sxXT09PSI8dGFibGU+IiYmIW4/ci5jaGlsZE5vZGVzOltdO2ZvcihrPW8ubGVuZ3RoLTE7az49MDstLWspYy5ub2RlTmFtZShvW2tdLCJ0Ym9keSIpJiYhb1trXS5jaGlsZE5vZGVzLmxlbmd0aCYmb1trXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9ba10pfSFjLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJlYudGVzdChpKSYmci5pbnNlcnRCZWZvcmUoYi5jcmVhdGVUZXh0Tm9kZShWLmV4ZWMoaSlbMF0pLHIuZmlyc3RDaGlsZCk7aT1yLmNoaWxkTm9kZXN9aWYoaS5ub2RlVHlwZSllLnB1c2goaSk7ZWxzZSBlPWMubWVyZ2UoZSxpKX19aWYoZClmb3Ioaj0wO2Vbal07aisrKWlmKGYmJmMubm9kZU5hbWUoZVtqXSwic2NyaXB0IikmJighZVtqXS50eXBlfHxlW2pdLnR5cGUudG9Mb3dlckNhc2UoKT09PSJ0ZXh0L2phdmFzY3JpcHQiKSlmLnB1c2goZVtqXS5wYXJlbnROb2RlP2Vbal0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlW2pdKTplW2pdKTtlbHNle2Vbal0ubm9kZVR5cGU9PT0xJiZlLnNwbGljZS5hcHBseShlLFtqKzEsMF0uY29uY2F0KGMubWFrZUFycmF5KGVbal0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpKSkpO2QuYXBwZW5kQ2hpbGQoZVtqXSl9cmV0dXJuIGV9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsZCxmPWMuY2FjaGUsZT1jLmV2ZW50LnNwZWNpYWwsaj1jLnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxpPTAsbzsobz1hW2ldKSE9bnVsbDtpKyspaWYoZD1vW2MuZXhwYW5kb10pe2I9ZltkXTtpZihiLmV2ZW50cylmb3IodmFyIGsgaW4gYi5ldmVudHMpZVtrXT9jLmV2ZW50LnJlbW92ZShvLGspOkNhKG8sayxiLmhhbmRsZSk7aWYoailkZWxldGUgb1tjLmV4cGFuZG9dO2Vsc2Ugby5yZW1vdmVBdHRyaWJ1dGUmJm8ucmVtb3ZlQXR0cmlidXRlKGMuZXhwYW5kbyk7ZGVsZXRlIGZbZF19fX0pO3ZhciBrYj0vei0/aW5kZXh8Zm9udC0/d2VpZ2h0fG9wYWNpdHl8em9vbXxsaW5lLT9oZWlnaHQvaSxOYT0vYWxwaGFcKFteKV0qXCkvLE9hPS9vcGFjaXR5PShbXildKikvLGhhPS9mbG9hdC9pLGlhPS8tKFthLXpdKS9pZyxsYj0vKFtBLVpdKS9nLG1iPS9eLT9cZCsoPzpweCk/JC9pLG5iPS9eLT9cZC8sb2I9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LHBiPVsiTGVmdCIsIlJpZ2h0Il0scWI9WyJUb3AiLCJCb3R0b20iXSxyYj1zLmRlZmF1bHRWaWV3JiZzLmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUsUGE9Yy5zdXBwb3J0LmNzc0Zsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQiLGphPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX07Yy5mbi5jc3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gWCh0aGlzLGEsYix0cnVlLGZ1bmN0aW9uKGQsZixlKXtpZihlPT09dylyZXR1cm4gYy5jdXJDU1MoZCxmKTtpZih0eXBlb2YgZT09PSJudW1iZXIiJiYha2IudGVzdChmKSllKz0icHgiO2Muc3R5bGUoZCxmLGUpfSl9O2MuZXh0ZW5kKHtzdHlsZTpmdW5jdGlvbihhLGIsZCl7aWYoIWF8fGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OClyZXR1cm4gdztpZigoYj09PSJ3aWR0aCJ8fGI9PT0iaGVpZ2h0IikmJnBhcnNlRmxvYXQoZCk8MClkPXc7dmFyIGY9YS5zdHlsZXx8YSxlPWQhPT13O2lmKCFjLnN1cHBvcnQub3BhY2l0eSYmYj09PSJvcGFjaXR5Iil7aWYoZSl7Zi56b29tPTE7Yj1wYXJzZUludChkLDEwKSsiIj09PSJOYU4iPyIiOiJhbHBoYShvcGFjaXR5PSIrZCoxMDArIikiO2E9Zi5maWx0ZXJ8fGMuY3VyQ1NTKGEsImZpbHRlciIpfHwiIjtmLmZpbHRlcj1OYS50ZXN0KGEpP2EucmVwbGFjZShOYSxiKTpifXJldHVybiBmLmZpbHRlciYmZi5maWx0ZXIuaW5kZXhPZigib3BhY2l0eT0iKT49MD9wYXJzZUZsb2F0KE9hLmV4ZWMoZi5maWx0ZXIpWzFdKS8xMDArIiI6IiJ9aWYoaGEudGVzdChiKSliPVBhO2I9Yi5yZXBsYWNlKGlhLGphKTtpZihlKWZbYl09ZDtyZXR1cm4gZltiXX0sY3NzOmZ1bmN0aW9uKGEsYixkLGYpe2lmKGI9PT0id2lkdGgifHxiPT09ImhlaWdodCIpe3ZhciBlLGo9Yj09PSJ3aWR0aCI/cGI6cWI7ZnVuY3Rpb24gaSgpe2U9Yj09PSJ3aWR0aCI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodDtmIT09ImJvcmRlciImJmMuZWFjaChqLGZ1bmN0aW9uKCl7Znx8KGUtPXBhcnNlRmxvYXQoYy5jdXJDU1MoYSwicGFkZGluZyIrdGhpcyx0cnVlKSl8fDApO2lmKGY9PT0ibWFyZ2luIillKz1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsIm1hcmdpbiIrdGhpcyx0cnVlKSl8fDA7ZWxzZSBlLT1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsImJvcmRlciIrdGhpcysiV2lkdGgiLHRydWUpKXx8MH0pfWEub2Zmc2V0V2lkdGghPT0wP2koKTpjLnN3YXAoYSxvYixpKTtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLnJvdW5kKGUpKX1yZXR1cm4gYy5jdXJDU1MoYSxiLGQpfSxjdXJDU1M6ZnVuY3Rpb24oYSxiLGQpe3ZhciBmLGU9YS5zdHlsZTtpZighYy5zdXBwb3J0Lm9wYWNpdHkmJmI9PT0ib3BhY2l0eSImJmEuY3VycmVudFN0eWxlKXtmPU9hLnRlc3QoYS5jdXJyZW50U3R5bGUuZmlsdGVyfHwiIik/cGFyc2VGbG9hdChSZWdFeHAuJDEpLzEwMCsiIjoiIjtyZXR1cm4gZj09PSIiPyIxIjpmfWlmKGhhLnRlc3QoYikpYj1QYTtpZighZCYmZSYmZVtiXSlmPWVbYl07ZWxzZSBpZihyYil7aWYoaGEudGVzdChiKSliPSJmbG9hdCI7Yj1iLnJlcGxhY2UobGIsIi0kMSIpLnRvTG93ZXJDYXNlKCk7ZT1hLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7aWYoIWUpcmV0dXJuIG51bGw7aWYoYT1lLmdldENvbXB1dGVkU3R5bGUoYSxudWxsKSlmPWEuZ2V0UHJvcGVydHlWYWx1ZShiKTtpZihiPT09Im9wYWNpdHkiJiZmPT09IiIpZj0iMSJ9ZWxzZSBpZihhLmN1cnJlbnRTdHlsZSl7ZD1iLnJlcGxhY2UoaWEsamEpO2Y9YS5jdXJyZW50U3R5bGVbYl18fGEuY3VycmVudFN0eWxlW2RdO2lmKCFtYi50ZXN0KGYpJiZuYi50ZXN0KGYpKXtiPWUubGVmdDt2YXIgaj1hLnJ1bnRpbWVTdHlsZS5sZWZ0O2EucnVudGltZVN0eWxlLmxlZnQ9YS5jdXJyZW50U3R5bGUubGVmdDtlLmxlZnQ9ZD09PSJmb250U2l6ZSI/IjFlbSI6Znx8MDtmPWUucGl4ZWxMZWZ0KyJweCI7ZS5sZWZ0PWI7YS5ydW50aW1lU3R5bGUubGVmdD1qfX1yZXR1cm4gZn0sc3dhcDpmdW5jdGlvbihhLGIsZCl7dmFyIGY9e307Zm9yKHZhciBlIGluIGIpe2ZbZV09YS5zdHlsZVtlXTthLnN0eWxlW2VdPWJbZV19ZC5jYWxsKGEpO2ZvcihlIGluIGIpYS5zdHlsZVtlXT1mW2VdfX0pO2lmKGMuZXhwciYmYy5leHByLmZpbHRlcnMpe2MuZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXt2YXIgYj1hLm9mZnNldFdpZHRoLGQ9YS5vZmZzZXRIZWlnaHQsZj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0idHIiO3JldHVybiBiPT09MCYmZD09PTAmJiFmP3RydWU6Yj4wJiZkPjAmJiFmP2ZhbHNlOmMuY3VyQ1NTKGEsImRpc3BsYXkiKT09PSJub25lIn07Yy5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hYy5leHByLmZpbHRlcnMuaGlkZGVuKGEpfX12YXIgc2I9SigpLHRiPS88c2NyaXB0KC58XHMpKj9cL3NjcmlwdD4vZ2ksdWI9L3NlbGVjdHx0ZXh0YXJlYS9pLHZiPS9jb2xvcnxkYXRlfGRhdGV0aW1lfGVtYWlsfGhpZGRlbnxtb250aHxudW1iZXJ8cGFzc3dvcmR8cmFuZ2V8c2VhcmNofHRlbHx0ZXh0fHRpbWV8dXJsfHdlZWsvaSxOPS89XD8oJnwkKS8sa2E9L1w/Lyx3Yj0vKFw/fCYpXz0uKj8oJnwkKS8seGI9L14oXHcrOik/XC9cLyhbXlwvPyNdKykvLHliPS8lMjAvZyx6Yj1jLmZuLmxvYWQ7Yy5mbi5leHRlbmQoe2xvYWQ6ZnVuY3Rpb24oYSxiLGQpe2lmKHR5cGVvZiBhIT09InN0cmluZyIpcmV0dXJuIHpiLmNhbGwodGhpcyxhKTtlbHNlIGlmKCF0aGlzLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgZj1hLmluZGV4T2YoIiAiKTtpZihmPj0wKXt2YXIgZT1hLnNsaWNlKGYsYS5sZW5ndGgpO2E9YS5zbGljZSgwLGYpfWY9IkdFVCI7aWYoYilpZihjLmlzRnVuY3Rpb24oYikpe2Q9YjtiPW51bGx9ZWxzZSBpZih0eXBlb2YgYj09PSJvYmplY3QiKXtiPWMucGFyYW0oYixjLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCk7Zj0iUE9TVCJ9dmFyIGo9dGhpcztjLmFqYXgoe3VybDphLHR5cGU6ZixkYXRhVHlwZToiaHRtbCIsZGF0YTpiLGNvbXBsZXRlOmZ1bmN0aW9uKGksbyl7aWYobz09PSJzdWNjZXNzInx8bz09PSJub3Rtb2RpZmllZCIpai5odG1sKGU/YygiPGRpdiAvPiIpLmFwcGVuZChpLnJlc3BvbnNlVGV4dC5yZXBsYWNlKHRiLCIiKSkuZmluZChlKTppLnJlc3BvbnNlVGV4dCk7ZCYmai5lYWNoKGQsW2kucmVzcG9uc2VUZXh0LG8saV0pfX0pO3JldHVybiB0aGlzfSxzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gYy5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnRzP2MubWFrZUFycmF5KHRoaXMuZWxlbWVudHMpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lJiYhdGhpcy5kaXNhYmxlZCYmKHRoaXMuY2hlY2tlZHx8dWIudGVzdCh0aGlzLm5vZGVOYW1lKXx8dmIudGVzdCh0aGlzLnR5cGUpKX0pLm1hcChmdW5jdGlvbihhLGIpe2E9Yyh0aGlzKS52YWwoKTtyZXR1cm4gYT09bnVsbD9udWxsOmMuaXNBcnJheShhKT9jLm1hcChhLGZ1bmN0aW9uKGQpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTpkfX0pOntuYW1lOmIubmFtZSx2YWx1ZTphfX0pLmdldCgpfX0pO2MuZWFjaCgiYWpheFN0YXJ0IGFqYXhTdG9wIGFqYXhDb21wbGV0ZSBhamF4RXJyb3IgYWpheFN1Y2Nlc3MgYWpheFNlbmQiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQpe3JldHVybiB0aGlzLmJpbmQoYixkKX19KTtjLmV4dGVuZCh7Z2V0OmZ1bmN0aW9uKGEsYixkLGYpe2lmKGMuaXNGdW5jdGlvbihiKSl7Zj1mfHxkO2Q9YjtiPW51bGx9cmV0dXJuIGMuYWpheCh7dHlwZToiR0VUIix1cmw6YSxkYXRhOmIsc3VjY2VzczpkLGRhdGFUeXBlOmZ9KX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuZ2V0KGEsbnVsbCxiLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZ2V0KGEsYixkLCJqc29uIil9LHBvc3Q6ZnVuY3Rpb24oYSxiLGQsZil7aWYoYy5pc0Z1bmN0aW9uKGIpKXtmPWZ8fGQ7ZD1iO2I9e319cmV0dXJuIGMuYWpheCh7dHlwZToiUE9TVCIsdXJsOmEsZGF0YTpiLHN1Y2Nlc3M6ZCxkYXRhVHlwZTpmfSl9LGFqYXhTZXR1cDpmdW5jdGlvbihhKXtjLmV4dGVuZChjLmFqYXhTZXR0aW5ncyxhKX0sYWpheFNldHRpbmdzOnt1cmw6bG9jYXRpb24uaHJlZixnbG9iYWw6dHJ1ZSx0eXBlOiJHRVQiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLHByb2Nlc3NEYXRhOnRydWUsYXN5bmM6dHJ1ZSx4aHI6QS5YTUxIdHRwUmVxdWVzdCYmKEEubG9jYXRpb24ucHJvdG9jb2whPT0iZmlsZToifHwhQS5BY3RpdmVYT2JqZWN0KT9mdW5jdGlvbigpe3JldHVybiBuZXcgQS5YTUxIdHRwUmVxdWVzdH06ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBBLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2goYSl7fX0sYWNjZXB0czp7eG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixodG1sOiJ0ZXh0L2h0bWwiLHNjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Iixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQiLHRleHQ6InRleHQvcGxhaW4iLF9kZWZhdWx0OiIqLyoifX0sbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZS5zdWNjZXNzJiZlLnN1Y2Nlc3MuY2FsbChrLG8saSx4KTtlLmdsb2JhbCYmZigiYWpheFN1Y2Nlc3MiLFt4LGVdKX1mdW5jdGlvbiBkKCl7ZS5jb21wbGV0ZSYmZS5jb21wbGV0ZS5jYWxsKGsseCxpKTtlLmdsb2JhbCYmZigiYWpheENvbXBsZXRlIixbeCxlXSk7ZS5nbG9iYWwmJiEtLWMuYWN0aXZlJiZjLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9ZnVuY3Rpb24gZihxLHApeyhlLmNvbnRleHQ/YyhlLmNvbnRleHQpOmMuZXZlbnQpLnRyaWdnZXIocSxwKX12YXIgZT1jLmV4dGVuZCh0cnVlLHt9LGMuYWpheFNldHRpbmdzLGEpLGosaSxvLGs9YSYmYS5jb250ZXh0fHxlLG49ZS50eXBlLnRvVXBwZXJDYXNlKCk7aWYoZS5kYXRhJiZlLnByb2Nlc3NEYXRhJiZ0eXBlb2YgZS5kYXRhIT09InN0cmluZyIpZS5kYXRhPWMucGFyYW0oZS5kYXRhLGUudHJhZGl0aW9uYWwpO2lmKGUuZGF0YVR5cGU9PT0ianNvbnAiKXtpZihuPT09IkdFVCIpTi50ZXN0KGUudXJsKXx8KGUudXJsKz0oa2EudGVzdChlLnVybCk/IiYiOiI/IikrKGUuanNvbnB8fCJjYWxsYmFjayIpKyI9PyIpO2Vsc2UgaWYoIWUuZGF0YXx8IU4udGVzdChlLmRhdGEpKWUuZGF0YT0oZS5kYXRhP2UuZGF0YSsiJiI6IiIpKyhlLmpzb25wfHwiY2FsbGJhY2siKSsiPT8iO2UuZGF0YVR5cGU9Impzb24ifWlmKGUuZGF0YVR5cGU9PT0ianNvbiImJihlLmRhdGEmJk4udGVzdChlLmRhdGEpfHxOLnRlc3QoZS51cmwpKSl7aj1lLmpzb25wQ2FsbGJhY2t8fCJqc29ucCIrc2IrKztpZihlLmRhdGEpZS5kYXRhPShlLmRhdGErIiIpLnJlcGxhY2UoTiwiPSIraisiJDEiKTtlLnVybD1lLnVybC5yZXBsYWNlKE4sIj0iK2orIiQxIik7ZS5kYXRhVHlwZT0ic2NyaXB0IjtBW2pdPUFbal18fGZ1bmN0aW9uKHEpe289cTtiKCk7ZCgpO0Fbal09dzt0cnl7ZGVsZXRlIEFbal19Y2F0Y2gocCl7fXomJnoucmVtb3ZlQ2hpbGQoQyl9fWlmKGUuZGF0YVR5cGU9PT0ic2NyaXB0IiYmZS5jYWNoZT09PW51bGwpZS5jYWNoZT1mYWxzZTtpZihlLmNhY2hlPT09ZmFsc2UmJm49PT0iR0VUIil7dmFyIHI9SigpLHU9ZS51cmwucmVwbGFjZSh3YiwiJDFfPSIrcisiJDIiKTtlLnVybD11Kyh1PT09ZS51cmw/KGthLnRlc3QoZS51cmwpPyImIjoiPyIpKyJfPSIrcjoiIil9aWYoZS5kYXRhJiZuPT09IkdFVCIpZS51cmwrPShrYS50ZXN0KGUudXJsKT8iJiI6Ij8iKStlLmRhdGE7ZS5nbG9iYWwmJiFjLmFjdGl2ZSsrJiZjLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpO3I9KHI9eGIuZXhlYyhlLnVybCkpJiYoclsxXSYmclsxXSE9PWxvY2F0aW9uLnByb3RvY29sfHxyWzJdIT09bG9jYXRpb24uaG9zdCk7aWYoZS5kYXRhVHlwZT09PSJzY3JpcHQiJiZuPT09IkdFVCImJnIpe3ZhciB6PXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXXx8cy5kb2N1bWVudEVsZW1lbnQsQz1zLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO0Muc3JjPWUudXJsO2lmKGUuc2NyaXB0Q2hhcnNldClDLmNoYXJzZXQ9ZS5zY3JpcHRDaGFyc2V0O2lmKCFqKXt2YXIgQj1mYWxzZTtDLm9ubG9hZD1DLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKCFCJiYoIXRoaXMucmVhZHlTdGF0ZXx8dGhpcy5yZWFkeVN0YXRlPT09ImxvYWRlZCJ8fHRoaXMucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpKXtCPXRydWU7YigpO2QoKTtDLm9ubG9hZD1DLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3omJkMucGFyZW50Tm9kZSYmei5yZW1vdmVDaGlsZChDKX19fXouaW5zZXJ0QmVmb3JlKEMsei5maXJzdENoaWxkKTtyZXR1cm4gd312YXIgRT1mYWxzZSx4PWUueGhyKCk7aWYoeCl7ZS51c2VybmFtZT94Lm9wZW4obixlLnVybCxlLmFzeW5jLGUudXNlcm5hbWUsZS5wYXNzd29yZCk6eC5vcGVuKG4sZS51cmwsZS5hc3luYyk7dHJ5e2lmKGUuZGF0YXx8YSYmYS5jb250ZW50VHlwZSl4LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsZS5jb250ZW50VHlwZSk7aWYoZS5pZk1vZGlmaWVkKXtjLmxhc3RNb2RpZmllZFtlLnVybF0mJnguc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGMubGFzdE1vZGlmaWVkW2UudXJsXSk7Yy5ldGFnW2UudXJsXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixjLmV0YWdbZS51cmxdKX1yfHx4LnNldFJlcXVlc3RIZWFkZXIoIlgtUmVxdWVzdGVkLVdpdGgiLCJYTUxIdHRwUmVxdWVzdCIpO3guc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixlLmRhdGFUeXBlJiZlLmFjY2VwdHNbZS5kYXRhVHlwZV0/ZS5hY2NlcHRzW2UuZGF0YVR5cGVdKyIsICovKiI6ZS5hY2NlcHRzLl9kZWZhdWx0KX1jYXRjaChnYSl7fWlmKGUuYmVmb3JlU2VuZCYmZS5iZWZvcmVTZW5kLmNhbGwoayx4LGUpPT09ZmFsc2Upe2UuZ2xvYmFsJiYhLS1jLmFjdGl2ZSYmYy5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpO3guYWJvcnQoKTtyZXR1cm4gZmFsc2V9ZS5nbG9iYWwmJmYoImFqYXhTZW5kIixbeCxlXSk7dmFyIGc9eC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24ocSl7aWYoIXh8fHgucmVhZHlTdGF0ZT09PTB8fHE9PT0iYWJvcnQiKXtFfHxkKCk7RT10cnVlO2lmKHgpeC5vbnJlYWR5c3RhdGVjaGFuZ2U9Yy5ub29wfWVsc2UgaWYoIUUmJngmJih4LnJlYWR5U3RhdGU9PT00fHxxPT09InRpbWVvdXQiKSl7RT10cnVlO3gub25yZWFkeXN0YXRlY2hhbmdlPWMubm9vcDtpPXE9PT0idGltZW91dCI/InRpbWVvdXQiOiFjLmh0dHBTdWNjZXNzKHgpPyJlcnJvciI6ZS5pZk1vZGlmaWVkJiZjLmh0dHBOb3RNb2RpZmllZCh4LGUudXJsKT8ibm90bW9kaWZpZWQiOiJzdWNjZXNzIjt2YXIgcDtpZihpPT09InN1Y2Nlc3MiKXRyeXtvPWMuaHR0cERhdGEoeCxlLmRhdGFUeXBlLGUpfWNhdGNoKHYpe2k9InBhcnNlcmVycm9yIjtwPXZ9aWYoaT09PSJzdWNjZXNzInx8aT09PSJub3Rtb2RpZmllZCIpanx8YigpO2Vsc2UgYy5oYW5kbGVFcnJvcihlLHgsaSxwKTtkKCk7cT09PSJ0aW1lb3V0IiYmeC5hYm9ydCgpO2lmKGUuYXN5bmMpeD1udWxsfX07dHJ5e3ZhciBoPXguYWJvcnQ7eC5hYm9ydD1mdW5jdGlvbigpe3gmJmguY2FsbCh4KTtnKCJhYm9ydCIpfX1jYXRjaChsKXt9ZS5hc3luYyYmZS50aW1lb3V0PjAmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt4JiYhRSYmZygidGltZW91dCIpfSxlLnRpbWVvdXQpO3RyeXt4LnNlbmQobj09PSJQT1NUInx8bj09PSJQVVQifHxuPT09IkRFTEVURSI/ZS5kYXRhOm51bGwpfWNhdGNoKG0pe2MuaGFuZGxlRXJyb3IoZSx4LG51bGwsbSk7ZCgpfWUuYXN5bmN8fGcoKTtyZXR1cm4geH19LGhhbmRsZUVycm9yOmZ1bmN0aW9uKGEsYixkLGYpe2lmKGEuZXJyb3IpYS5lcnJvci5jYWxsKGEuY29udGV4dHx8YSxiLGQsZik7aWYoYS5nbG9iYWwpKGEuY29udGV4dD9jKGEuY29udGV4dCk6Yy5ldmVudCkudHJpZ2dlcigiYWpheEVycm9yIixbYixhLGZdKX0sYWN0aXZlOjAsaHR0cFN1Y2Nlc3M6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiFhLnN0YXR1cyYmbG9jYXRpb24ucHJvdG9jb2w9PT0iZmlsZToifHxhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fGEuc3RhdHVzPT09MzA0fHxhLnN0YXR1cz09PTEyMjN8fGEuc3RhdHVzPT09MH1jYXRjaChiKXt9cmV0dXJuIGZhbHNlfSxodHRwTm90TW9kaWZpZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIiksZj1hLmdldFJlc3BvbnNlSGVhZGVyKCJFdGFnIik7aWYoZCljLmxhc3RNb2RpZmllZFtiXT1kO2lmKGYpYy5ldGFnW2JdPWY7cmV0dXJuIGEuc3RhdHVzPT09MzA0fHxhLnN0YXR1cz09PTB9LGh0dHBEYXRhOmZ1bmN0aW9uKGEsYixkKXt2YXIgZj1hLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKXx8IiIsZT1iPT09InhtbCJ8fCFiJiZmLmluZGV4T2YoInhtbCIpPj0wO2E9ZT9hLnJlc3BvbnNlWE1MOmEucmVzcG9uc2VUZXh0O2UmJmEuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lPT09InBhcnNlcmVycm9yIiYmYy5lcnJvcigicGFyc2VyZXJyb3IiKTtpZihkJiZkLmRhdGFGaWx0ZXIpYT1kLmRhdGFGaWx0ZXIoYSxiKTtpZih0eXBlb2YgYT09PSJzdHJpbmciKWlmKGI9PT0ianNvbiJ8fCFiJiZmLmluZGV4T2YoImpzb24iKT49MClhPWMucGFyc2VKU09OKGEpO2Vsc2UgaWYoYj09PSJzY3JpcHQifHwhYiYmZi5pbmRleE9mKCJqYXZhc2NyaXB0Iik+PTApYy5nbG9iYWxFdmFsKGEpO3JldHVybiBhfSxwYXJhbTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoaSxvKXtpZihjLmlzQXJyYXkobykpYy5lYWNoKG8sZnVuY3Rpb24oayxuKXtifHwvXFtcXSQvLnRlc3QoaSk/ZihpLG4pOmQoaSsiWyIrKHR5cGVvZiBuPT09Im9iamVjdCJ8fGMuaXNBcnJheShuKT9rOiIiKSsiXSIsbil9KTtlbHNlIWImJm8hPW51bGwmJnR5cGVvZiBvPT09Im9iamVjdCI/Yy5lYWNoKG8sZnVuY3Rpb24oayxuKXtkKGkrIlsiK2srIl0iLG4pfSk6ZihpLG8pfWZ1bmN0aW9uIGYoaSxvKXtvPWMuaXNGdW5jdGlvbihvKT9vKCk6bztlW2UubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoaSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChvKX12YXIgZT1bXTtpZihiPT09dyliPWMuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO2lmKGMuaXNBcnJheShhKXx8YS5qcXVlcnkpYy5lYWNoKGEsZnVuY3Rpb24oKXtmKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKHZhciBqIGluIGEpZChqLGFbal0pO3JldHVybiBlLmpvaW4oIiYiKS5yZXBsYWNlKHliLCIrIil9fSk7dmFyIGxhPXt9LEFiPS90b2dnbGV8c2hvd3xoaWRlLyxCYj0vXihbKy1dPSk/KFtcZCstLl0rKSguKikkLyxXLHZhPVtbImhlaWdodCIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIl0sWyJ3aWR0aCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Il0sWyJvcGFjaXR5Il1dO2MuZm4uZXh0ZW5kKHtzaG93OmZ1bmN0aW9uKGEsYil7aWYoYXx8YT09PTApcmV0dXJuIHRoaXMuYW5pbWF0ZShLKCJzaG93IiwzKSxhLGIpO2Vsc2V7YT0wO2ZvcihiPXRoaXMubGVuZ3RoO2E8YjthKyspe3ZhciBkPWMuZGF0YSh0aGlzW2FdLCJvbGRkaXNwbGF5Iik7dGhpc1thXS5zdHlsZS5kaXNwbGF5PWR8fCIiO2lmKGMuY3NzKHRoaXNbYV0sImRpc3BsYXkiKT09PSJub25lIil7ZD10aGlzW2FdLm5vZGVOYW1lO3ZhciBmO2lmKGxhW2RdKWY9bGFbZF07ZWxzZXt2YXIgZT1jKCI8IitkKyIgLz4iKS5hcHBlbmRUbygiYm9keSIpO2Y9ZS5jc3MoImRpc3BsYXkiKTtpZihmPT09Im5vbmUiKWY9ImJsb2NrIjtlLnJlbW92ZSgpO2xhW2RdPWZ9Yy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiLGYpfX1hPTA7Zm9yKGI9dGhpcy5sZW5ndGg7YTxiO2ErKyl0aGlzW2FdLnN0eWxlLmRpc3BsYXk9Yy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiKXx8IiI7cmV0dXJuIHRoaXN9fSxoaWRlOmZ1bmN0aW9uKGEsYil7aWYoYXx8YT09PTApcmV0dXJuIHRoaXMuYW5pbWF0ZShLKCJoaWRlIiwzKSxhLGIpO2Vsc2V7YT0wO2ZvcihiPXRoaXMubGVuZ3RoO2E8YjthKyspe3ZhciBkPWMuZGF0YSh0aGlzW2FdLCJvbGRkaXNwbGF5Iik7IWQmJmQhPT0ibm9uZSImJmMuZGF0YSh0aGlzW2FdLCJvbGRkaXNwbGF5IixjLmNzcyh0aGlzW2FdLCJkaXNwbGF5IikpfWE9MDtmb3IoYj10aGlzLmxlbmd0aDthPGI7YSsrKXRoaXNbYV0uc3R5bGUuZGlzcGxheT0ibm9uZSI7cmV0dXJuIHRoaXN9fSxfdG9nZ2xlOmMuZm4udG9nZ2xlLHRvZ2dsZTpmdW5jdGlvbihhLGIpe3ZhciBkPXR5cGVvZiBhPT09ImJvb2xlYW4iO2lmKGMuaXNGdW5jdGlvbihhKSYmYy5pc0Z1bmN0aW9uKGIpKXRoaXMuX3RvZ2dsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxzZSBhPT1udWxsfHxkP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBmPWQ/YTpjKHRoaXMpLmlzKCI6aGlkZGVuIik7Yyh0aGlzKVtmPyJzaG93IjoiaGlkZSJdKCl9KTp0aGlzLmFuaW1hdGUoSygidG9nZ2xlIiwzKSxhLGIpO3JldHVybiB0aGlzfSxmYWRlVG86ZnVuY3Rpb24oYSxiLGQpe3JldHVybiB0aGlzLmZpbHRlcigiOmhpZGRlbiIpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsZCxmKXt2YXIgZT1jLnNwZWVkKGIsZCxmKTtpZihjLmlzRW1wdHlPYmplY3QoYSkpcmV0dXJuIHRoaXMuZWFjaChlLmNvbXBsZXRlKTtyZXR1cm4gdGhpc1tlLnF1ZXVlPT09ZmFsc2U/ImVhY2giOiJxdWV1ZSJdKGZ1bmN0aW9uKCl7dmFyIGo9Yy5leHRlbmQoe30sZSksaSxvPXRoaXMubm9kZVR5cGU9PT0xJiZjKHRoaXMpLmlzKCI6aGlkZGVuIiksaz10aGlzO2ZvcihpIGluIGEpe3ZhciBuPWkucmVwbGFjZShpYSxqYSk7aWYoaSE9PW4pe2Fbbl09YVtpXTtkZWxldGUgYVtpXTtpPW59aWYoYVtpXT09PSJoaWRlIiYmb3x8YVtpXT09PSJzaG93IiYmIW8pcmV0dXJuIGouY29tcGxldGUuY2FsbCh0aGlzKTtpZigoaT09PSJoZWlnaHQifHxpPT09IndpZHRoIikmJnRoaXMuc3R5bGUpe2ouZGlzcGxheT1jLmNzcyh0aGlzLCJkaXNwbGF5Iik7ai5vdmVyZmxvdz10aGlzLnN0eWxlLm92ZXJmbG93fWlmKGMuaXNBcnJheShhW2ldKSl7KGouc3BlY2lhbEVhc2luZz1qLnNwZWNpYWxFYXNpbmd8fHt9KVtpXT1hW2ldWzFdO2FbaV09YVtpXVswXX19aWYoai5vdmVyZmxvdyE9bnVsbCl0aGlzLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2ouY3VyQW5pbT1jLmV4dGVuZCh7fSxhKTtjLmVhY2goYSxmdW5jdGlvbihyLHUpe3ZhciB6PW5ldyBjLmZ4KGssaixyKTtpZihBYi50ZXN0KHUpKXpbdT09PSJ0b2dnbGUiP28/InNob3ciOiJoaWRlIjp1XShhKTtlbHNle3ZhciBDPUJiLmV4ZWModSksQj16LmN1cih0cnVlKXx8MDtpZihDKXt1PXBhcnNlRmxvYXQoQ1syXSk7dmFyIEU9Q1szXXx8InB4IjtpZihFIT09InB4Iil7ay5zdHlsZVtyXT0odXx8MSkrRTtCPSh1fHwxKS96LmN1cih0cnVlKSpCO2suc3R5bGVbcl09QitFfWlmKENbMV0pdT0oQ1sxXT09PSItPSI/LTE6MSkqdStCO3ouY3VzdG9tKEIsdSxFKX1lbHNlIHouY3VzdG9tKEIsdSwiIil9fSk7cmV0dXJuIHRydWV9KX0sc3RvcDpmdW5jdGlvbihhLGIpe3ZhciBkPWMudGltZXJzO2EmJnRoaXMucXVldWUoW10pO3RoaXMuZWFjaChmdW5jdGlvbigpe2Zvcih2YXIgZj1kLmxlbmd0aC0xO2Y+PTA7Zi0tKWlmKGRbZl0uZWxlbT09PXRoaXMpe2ImJmRbZl0odHJ1ZSk7ZC5zcGxpY2UoZiwxKX19KTtifHx0aGlzLmRlcXVldWUoKTtyZXR1cm4gdGhpc319KTtjLmVhY2goe3NsaWRlRG93bjpLKCJzaG93IiwxKSxzbGlkZVVwOksoImhpZGUiLDEpLHNsaWRlVG9nZ2xlOksoInRvZ2dsZSIsMSksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9fSxmdW5jdGlvbihhLGIpe2MuZm5bYV09ZnVuY3Rpb24oZCxmKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsZCxmKX19KTtjLmV4dGVuZCh7c3BlZWQ6ZnVuY3Rpb24oYSxiLGQpe3ZhciBmPWEmJnR5cGVvZiBhPT09Im9iamVjdCI/YTp7Y29tcGxldGU6ZHx8IWQmJmJ8fGMuaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpkJiZifHxiJiYhYy5pc0Z1bmN0aW9uKGIpJiZifTtmLmR1cmF0aW9uPWMuZngub2ZmPzA6dHlwZW9mIGYuZHVyYXRpb249PT0ibnVtYmVyIj9mLmR1cmF0aW9uOmMuZnguc3BlZWRzW2YuZHVyYXRpb25dfHxjLmZ4LnNwZWVkcy5fZGVmYXVsdDtmLm9sZD1mLmNvbXBsZXRlO2YuY29tcGxldGU9ZnVuY3Rpb24oKXtmLnF1ZXVlIT09ZmFsc2UmJmModGhpcykuZGVxdWV1ZSgpO2MuaXNGdW5jdGlvbihmLm9sZCkmJmYub2xkLmNhbGwodGhpcyl9O3JldHVybiBmfSxlYXNpbmc6e2xpbmVhcjpmdW5jdGlvbihhLGIsZCxmKXtyZXR1cm4gZCtmKmF9LHN3aW5nOmZ1bmN0aW9uKGEsYixkLGYpe3JldHVybigtTWF0aC5jb3MoYSpNYXRoLlBJKS8yKzAuNSkqZitkfX0sdGltZXJzOltdLGZ4OmZ1bmN0aW9uKGEsYixkKXt0aGlzLm9wdGlvbnM9Yjt0aGlzLmVsZW09YTt0aGlzLnByb3A9ZDtpZighYi5vcmlnKWIub3JpZz17fX19KTtjLmZ4LnByb3RvdHlwZT17dXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpOyhjLmZ4LnN0ZXBbdGhpcy5wcm9wXXx8Yy5meC5zdGVwLl9kZWZhdWx0KSh0aGlzKTtpZigodGhpcy5wcm9wPT09ImhlaWdodCJ8fHRoaXMucHJvcD09PSJ3aWR0aCIpJiZ0aGlzLmVsZW0uc3R5bGUpdGhpcy5lbGVtLnN0eWxlLmRpc3BsYXk9ImJsb2NrIn0sY3VyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZWxlbVt0aGlzLnByb3BdIT1udWxsJiYoIXRoaXMuZWxlbS5zdHlsZXx8dGhpcy5lbGVtLnN0eWxlW3RoaXMucHJvcF09PW51bGwpKXJldHVybiB0aGlzLmVsZW1bdGhpcy5wcm9wXTtyZXR1cm4oYT1wYXJzZUZsb2F0KGMuY3NzKHRoaXMuZWxlbSx0aGlzLnByb3AsYSkpKSYmYT4tMTAwMDA/YTpwYXJzZUZsb2F0KGMuY3VyQ1NTKHRoaXMuZWxlbSx0aGlzLnByb3ApKXx8MH0sY3VzdG9tOmZ1bmN0aW9uKGEsYixkKXtmdW5jdGlvbiBmKGope3JldHVybiBlLnN0ZXAoail9dGhpcy5zdGFydFRpbWU9SigpO3RoaXMuc3RhcnQ9YTt0aGlzLmVuZD1iO3RoaXMudW5pdD1kfHx0aGlzLnVuaXR8fCJweCI7dGhpcy5ub3c9dGhpcy5zdGFydDt0aGlzLnBvcz10aGlzLnN0YXRlPTA7dmFyIGU9dGhpcztmLmVsZW09dGhpcy5lbGVtO2lmKGYoKSYmYy50aW1lcnMucHVzaChmKSYmIVcpVz1zZXRJbnRlcnZhbChjLmZ4LnRpY2ssMTMpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9yaWdbdGhpcy5wcm9wXT1jLnN0eWxlKHRoaXMuZWxlbSx0aGlzLnByb3ApO3RoaXMub3B0aW9ucy5zaG93PXRydWU7dGhpcy5jdXN0b20odGhpcy5wcm9wPT09IndpZHRoInx8dGhpcy5wcm9wPT09ImhlaWdodCI/MTowLHRoaXMuY3VyKCkpO2ModGhpcy5lbGVtKS5zaG93KCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub3JpZ1t0aGlzLnByb3BdPWMuc3R5bGUodGhpcy5lbGVtLHRoaXMucHJvcCk7dGhpcy5vcHRpb25zLmhpZGU9dHJ1ZTt0aGlzLmN1c3RvbSh0aGlzLmN1cigpLDApfSxzdGVwOmZ1bmN0aW9uKGEpe3ZhciBiPUooKSxkPXRydWU7aWYoYXx8Yj49dGhpcy5vcHRpb25zLmR1cmF0aW9uK3RoaXMuc3RhcnRUaW1lKXt0aGlzLm5vdz10aGlzLmVuZDt0aGlzLnBvcz10aGlzLnN0YXRlPTE7dGhpcy51cGRhdGUoKTt0aGlzLm9wdGlvbnMuY3VyQW5pbVt0aGlzLnByb3BdPXRydWU7Zm9yKHZhciBmIGluIHRoaXMub3B0aW9ucy5jdXJBbmltKWlmKHRoaXMub3B0aW9ucy5jdXJBbmltW2ZdIT09dHJ1ZSlkPWZhbHNlO2lmKGQpe2lmKHRoaXMub3B0aW9ucy5kaXNwbGF5IT1udWxsKXt0aGlzLmVsZW0uc3R5bGUub3ZlcmZsb3c9dGhpcy5vcHRpb25zLm92ZXJmbG93O2E9Yy5kYXRhKHRoaXMuZWxlbSwib2xkZGlzcGxheSIpO3RoaXMuZWxlbS5zdHlsZS5kaXNwbGF5PWE/YTp0aGlzLm9wdGlvbnMuZGlzcGxheTtpZihjLmNzcyh0aGlzLmVsZW0sImRpc3BsYXkiKT09PSJub25lIil0aGlzLmVsZW0uc3R5bGUuZGlzcGxheT0iYmxvY2sifXRoaXMub3B0aW9ucy5oaWRlJiZjKHRoaXMuZWxlbSkuaGlkZSgpO2lmKHRoaXMub3B0aW9ucy5oaWRlfHx0aGlzLm9wdGlvbnMuc2hvdylmb3IodmFyIGUgaW4gdGhpcy5vcHRpb25zLmN1ckFuaW0pYy5zdHlsZSh0aGlzLmVsZW0sZSx0aGlzLm9wdGlvbnMub3JpZ1tlXSk7dGhpcy5vcHRpb25zLmNvbXBsZXRlLmNhbGwodGhpcy5lbGVtKX1yZXR1cm4gZmFsc2V9ZWxzZXtlPWItdGhpcy5zdGFydFRpbWU7dGhpcy5zdGF0ZT1lL3RoaXMub3B0aW9ucy5kdXJhdGlvbjthPXRoaXMub3B0aW9ucy5lYXNpbmd8fChjLmVhc2luZy5zd2luZz8ic3dpbmciOiJsaW5lYXIiKTt0aGlzLnBvcz1jLmVhc2luZ1t0aGlzLm9wdGlvbnMuc3BlY2lhbEVhc2luZyYmdGhpcy5vcHRpb25zLnNwZWNpYWxFYXNpbmdbdGhpcy5wcm9wXXx8YV0odGhpcy5zdGF0ZSxlLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pO3RoaXMubm93PXRoaXMuc3RhcnQrKHRoaXMuZW5kLXRoaXMuc3RhcnQpKnRoaXMucG9zO3RoaXMudXBkYXRlKCl9cmV0dXJuIHRydWV9fTtjLmV4dGVuZChjLmZ4LHt0aWNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWMudGltZXJzLGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl8fGEuc3BsaWNlKGItLSwxKTthLmxlbmd0aHx8Yy5meC5zdG9wKCl9LHN0b3A6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFcpO1c9bnVsbH0sc3BlZWRzOntzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHN0ZXA6e29wYWNpdHk6ZnVuY3Rpb24oYSl7Yy5zdHlsZShhLmVsZW0sIm9wYWNpdHkiLGEubm93KX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7aWYoYS5lbGVtLnN0eWxlJiZhLmVsZW0uc3R5bGVbYS5wcm9wXSE9bnVsbClhLmVsZW0uc3R5bGVbYS5wcm9wXT0oYS5wcm9wPT09IndpZHRoInx8YS5wcm9wPT09ImhlaWdodCI/TWF0aC5tYXgoMCxhLm5vdyk6YS5ub3cpK2EudW5pdDtlbHNlIGEuZWxlbVthLnByb3BdPWEubm93fX19KTtpZihjLmV4cHImJmMuZXhwci5maWx0ZXJzKWMuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBjLmdyZXAoYy50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O2MuZm4ub2Zmc2V0PSJnZXRCb3VuZGluZ0NsaWVudFJlY3QiaW4gcy5kb2N1bWVudEVsZW1lbnQ/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXTtpZihhKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7Yy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxlKX0pO2lmKCFifHwhYi5vd25lckRvY3VtZW50KXJldHVybiBudWxsO2lmKGI9PT1iLm93bmVyRG9jdW1lbnQuYm9keSlyZXR1cm4gYy5vZmZzZXQuYm9keU9mZnNldChiKTt2YXIgZD1iLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGY9Yi5vd25lckRvY3VtZW50O2I9Zi5ib2R5O2Y9Zi5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3RvcDpkLnRvcCsoc2VsZi5wYWdlWU9mZnNldHx8Yy5zdXBwb3J0LmJveE1vZGVsJiZmLnNjcm9sbFRvcHx8Yi5zY3JvbGxUb3ApLShmLmNsaWVudFRvcHx8Yi5jbGllbnRUb3B8fDApLGxlZnQ6ZC5sZWZ0KyhzZWxmLnBhZ2VYT2Zmc2V0fHxjLnN1cHBvcnQuYm94TW9kZWwmJmYuc2Nyb2xsTGVmdHx8Yi5zY3JvbGxMZWZ0KS0oZi5jbGllbnRMZWZ0fHxiLmNsaWVudExlZnR8fDApfX06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXTtpZihhKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24ocil7Yy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxyKX0pO2lmKCFifHwhYi5vd25lckRvY3VtZW50KXJldHVybiBudWxsO2lmKGI9PT1iLm93bmVyRG9jdW1lbnQuYm9keSlyZXR1cm4gYy5vZmZzZXQuYm9keU9mZnNldChiKTtjLm9mZnNldC5pbml0aWFsaXplKCk7dmFyIGQ9Yi5vZmZzZXRQYXJlbnQsZj1iLGU9Yi5vd25lckRvY3VtZW50LGosaT1lLmRvY3VtZW50RWxlbWVudCxvPWUuYm9keTtmPShlPWUuZGVmYXVsdFZpZXcpP2UuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmIuY3VycmVudFN0eWxlO2Zvcih2YXIgaz1iLm9mZnNldFRvcCxuPWIub2Zmc2V0TGVmdDsoYj1iLnBhcmVudE5vZGUpJiZiIT09byYmYiE9PWk7KXtpZihjLm9mZnNldC5zdXBwb3J0c0ZpeGVkUG9zaXRpb24mJmYucG9zaXRpb249PT0iZml4ZWQiKWJyZWFrO2o9ZT9lLmdldENvbXB1dGVkU3R5bGUoYixudWxsKTpiLmN1cnJlbnRTdHlsZTtrLT1iLnNjcm9sbFRvcDtuLT1iLnNjcm9sbExlZnQ7aWYoYj09PWQpe2srPWIub2Zmc2V0VG9wO24rPWIub2Zmc2V0TGVmdDtpZihjLm9mZnNldC5kb2VzTm90QWRkQm9yZGVyJiYhKGMub2Zmc2V0LmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzJiYvXnQoYWJsZXxkfGgpJC9pLnRlc3QoYi5ub2RlTmFtZSkpKXtrKz1wYXJzZUZsb2F0KGouYm9yZGVyVG9wV2lkdGgpfHwwO24rPXBhcnNlRmxvYXQoai5ib3JkZXJMZWZ0V2lkdGgpfHwwfWY9ZDtkPWIub2Zmc2V0UGFyZW50fWlmKGMub2Zmc2V0LnN1YnRyYWN0c0JvcmRlckZvck92ZXJmbG93Tm90VmlzaWJsZSYmai5vdmVyZmxvdyE9PSJ2aXNpYmxlIil7ays9cGFyc2VGbG9hdChqLmJvcmRlclRvcFdpZHRoKXx8MDtuKz1wYXJzZUZsb2F0KGouYm9yZGVyTGVmdFdpZHRoKXx8MH1mPWp9aWYoZi5wb3NpdGlvbj09PSJyZWxhdGl2ZSJ8fGYucG9zaXRpb249PT0ic3RhdGljIil7ays9by5vZmZzZXRUb3A7bis9by5vZmZzZXRMZWZ0fWlmKGMub2Zmc2V0LnN1cHBvcnRzRml4ZWRQb3NpdGlvbiYmZi5wb3NpdGlvbj09PSJmaXhlZCIpe2srPU1hdGgubWF4KGkuc2Nyb2xsVG9wLG8uc2Nyb2xsVG9wKTtuKz1NYXRoLm1heChpLnNjcm9sbExlZnQsby5zY3JvbGxMZWZ0KX1yZXR1cm57dG9wOmssbGVmdDpufX07Yy5vZmZzZXQ9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT1zLmJvZHksYj1zLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQsZixlLGo9cGFyc2VGbG9hdChjLmN1ckNTUyhhLCJtYXJnaW5Ub3AiLHRydWUpKXx8MDtjLmV4dGVuZChiLnN0eWxlLHtwb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDowLGxlZnQ6MCxtYXJnaW46MCxib3JkZXI6MCx3aWR0aDoiMXB4IixoZWlnaHQ6IjFweCIsdmlzaWJpbGl0eToiaGlkZGVuIn0pO2IuaW5uZXJIVE1MPSI8ZGl2IHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7bWFyZ2luOjA7Ym9yZGVyOjVweCBzb2xpZCAjMDAwO3BhZGRpbmc6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDsnPjxkaXY+PC9kaXY+PC9kaXY+PHRhYmxlIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7bWFyZ2luOjA7Ym9yZGVyOjVweCBzb2xpZCAjMDAwO3BhZGRpbmc6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDsnIGNlbGxwYWRkaW5nPScwJyBjZWxsc3BhY2luZz0nMCc+PHRyPjx0ZD48L3RkPjwvdHI+PC90YWJsZT4iO2EuaW5zZXJ0QmVmb3JlKGIsYS5maXJzdENoaWxkKTtkPWIuZmlyc3RDaGlsZDtmPWQuZmlyc3RDaGlsZDtlPWQubmV4dFNpYmxpbmcuZmlyc3RDaGlsZC5maXJzdENoaWxkO3RoaXMuZG9lc05vdEFkZEJvcmRlcj1mLm9mZnNldFRvcCE9PTU7dGhpcy5kb2VzQWRkQm9yZGVyRm9yVGFibGVBbmRDZWxscz1lLm9mZnNldFRvcD09PTU7Zi5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiO2Yuc3R5bGUudG9wPSIyMHB4Ijt0aGlzLnN1cHBvcnRzRml4ZWRQb3NpdGlvbj1mLm9mZnNldFRvcD09PTIwfHxmLm9mZnNldFRvcD09PTE1O2Yuc3R5bGUucG9zaXRpb249Zi5zdHlsZS50b3A9IiI7ZC5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjtkLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7dGhpcy5zdWJ0cmFjdHNCb3JkZXJGb3JPdmVyZmxvd05vdFZpc2libGU9Zi5vZmZzZXRUb3A9PT0tNTt0aGlzLmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0PWEub2Zmc2V0VG9wIT09ajthLnJlbW92ZUNoaWxkKGIpO2Mub2Zmc2V0LmluaXRpYWxpemU9Yy5ub29wfSxib2R5T2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEub2Zmc2V0VG9wLGQ9YS5vZmZzZXRMZWZ0O2Mub2Zmc2V0LmluaXRpYWxpemUoKTtpZihjLm9mZnNldC5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldCl7Yis9cGFyc2VGbG9hdChjLmN1ckNTUyhhLCJtYXJnaW5Ub3AiLHRydWUpKXx8MDtkKz1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsIm1hcmdpbkxlZnQiLHRydWUpKXx8MH1yZXR1cm57dG9wOmIsbGVmdDpkfX0sc2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixkKXtpZigvc3RhdGljLy50ZXN0KGMuY3VyQ1NTKGEsInBvc2l0aW9uIikpKWEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjt2YXIgZj1jKGEpLGU9Zi5vZmZzZXQoKSxqPXBhcnNlSW50KGMuY3VyQ1NTKGEsInRvcCIsdHJ1ZSksMTApfHwwLGk9cGFyc2VJbnQoYy5jdXJDU1MoYSwibGVmdCIsdHJ1ZSksMTApfHwwO2lmKGMuaXNGdW5jdGlvbihiKSliPWIuY2FsbChhLGQsZSk7ZD17dG9wOmIudG9wLWUudG9wK2osbGVmdDpiLmxlZnQtZS5sZWZ0K2l9OyJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLGQpOmYuY3NzKGQpfX07Yy5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXNbMF0pcmV0dXJuIG51bGw7dmFyIGE9dGhpc1swXSxiPXRoaXMub2Zmc2V0UGFyZW50KCksZD10aGlzLm9mZnNldCgpLGY9L15ib2R5fGh0bWwkL2kudGVzdChiWzBdLm5vZGVOYW1lKT97dG9wOjAsbGVmdDowfTpiLm9mZnNldCgpO2QudG9wLT1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsIm1hcmdpblRvcCIsdHJ1ZSkpfHwwO2QubGVmdC09cGFyc2VGbG9hdChjLmN1ckNTUyhhLCJtYXJnaW5MZWZ0Iix0cnVlKSl8fDA7Zi50b3ArPXBhcnNlRmxvYXQoYy5jdXJDU1MoYlswXSwiYm9yZGVyVG9wV2lkdGgiLHRydWUpKXx8MDtmLmxlZnQrPXBhcnNlRmxvYXQoYy5jdXJDU1MoYlswXSwiYm9yZGVyTGVmdFdpZHRoIix0cnVlKSl8fDA7cmV0dXJue3RvcDpkLnRvcC0KZi50b3AsbGVmdDpkLmxlZnQtZi5sZWZ0fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxzLmJvZHk7YSYmIS9eYm9keXxodG1sJC9pLnRlc3QoYS5ub2RlTmFtZSkmJmMuY3NzKGEsInBvc2l0aW9uIik9PT0ic3RhdGljIjspYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYX0pfX0pO2MuZWFjaChbIkxlZnQiLCJUb3AiXSxmdW5jdGlvbihhLGIpe3ZhciBkPSJzY3JvbGwiK2I7Yy5mbltkXT1mdW5jdGlvbihmKXt2YXIgZT10aGlzWzBdLGo7aWYoIWUpcmV0dXJuIG51bGw7aWYoZiE9PXcpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGo9d2EodGhpcykpai5zY3JvbGxUbyghYT9mOmMoaikuc2Nyb2xsTGVmdCgpLGE/ZjpjKGopLnNjcm9sbFRvcCgpKTtlbHNlIHRoaXNbZF09Zn0pO2Vsc2UgcmV0dXJuKGo9d2EoZSkpPyJwYWdlWE9mZnNldCJpbiBqP2pbYT8icGFnZVlPZmZzZXQiOiJwYWdlWE9mZnNldCJdOmMuc3VwcG9ydC5ib3hNb2RlbCYmai5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbZF18fGouZG9jdW1lbnQuYm9keVtkXTplW2RdfX0pO2MuZWFjaChbIkhlaWdodCIsIldpZHRoIl0sZnVuY3Rpb24oYSxiKXt2YXIgZD1iLnRvTG93ZXJDYXNlKCk7Yy5mblsiaW5uZXIiK2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbMF0/Yy5jc3ModGhpc1swXSxkLGZhbHNlLCJwYWRkaW5nIik6bnVsbH07Yy5mblsib3V0ZXIiK2JdPWZ1bmN0aW9uKGYpe3JldHVybiB0aGlzWzBdP2MuY3NzKHRoaXNbMF0sZCxmYWxzZSxmPyJtYXJnaW4iOiJib3JkZXIiKTpudWxsfTtjLmZuW2RdPWZ1bmN0aW9uKGYpe3ZhciBlPXRoaXNbMF07aWYoIWUpcmV0dXJuIGY9PW51bGw/bnVsbDp0aGlzO2lmKGMuaXNGdW5jdGlvbihmKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope3ZhciBpPWModGhpcyk7aVtkXShmLmNhbGwodGhpcyxqLGlbZF0oKSkpfSk7cmV0dXJuInNjcm9sbFRvImluCmUmJmUuZG9jdW1lbnQ/ZS5kb2N1bWVudC5jb21wYXRNb2RlPT09IkNTUzFDb21wYXQiJiZlLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitiXXx8ZS5kb2N1bWVudC5ib2R5WyJjbGllbnQiK2JdOmUubm9kZVR5cGU9PT05P01hdGgubWF4KGUuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2JdLGUuYm9keVsic2Nyb2xsIitiXSxlLmRvY3VtZW50RWxlbWVudFsic2Nyb2xsIitiXSxlLmJvZHlbIm9mZnNldCIrYl0sZS5kb2N1bWVudEVsZW1lbnRbIm9mZnNldCIrYl0pOmY9PT13P2MuY3NzKGUsZCk6dGhpcy5jc3MoZCx0eXBlb2YgZj09PSJzdHJpbmciP2Y6ZisicHgiKX19KTtBLmpRdWVyeT1BLiQ9Y30pKHdpbmRvdyk7aWYodHlwZW9mIERPTVBhcnNlcj09PSd1bmRlZmluZWQnKXtET01QYXJzZXI9ZnVuY3Rpb24oKXt9O0RPTVBhcnNlci5wcm90b3R5cGUucGFyc2VGcm9tU3RyaW5nPWZ1bmN0aW9uKHN0cixjb250ZW50VHlwZSl7dmFyIHhtbGRhdGE7aWYodHlwZW9mIEFjdGl2ZVhPYmplY3QhPT0ndW5kZWZpbmVkJyl7eG1sZGF0YT1uZXcgQWN0aXZlWE9iamVjdCgnTVNYTUwuRG9tRG9jdW1lbnQnKTt4bWxkYXRhLmFzeW5jPWZhbHNlO3htbGRhdGEubG9hZFhNTChzdHIpO3JldHVybiB4bWxkYXRhO31lbHNlIGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCE9PSd1bmRlZmluZWQnKXt4bWxkYXRhPW5ldyBYTUxIdHRwUmVxdWVzdCgpO2lmKCFjb250ZW50VHlwZSl7Y29udGVudFR5cGU9J2FwcGxpY2F0aW9uL3htbCc7fQp4bWxkYXRhLm9wZW4oJ0dFVCcsJ2RhdGE6Jytjb250ZW50VHlwZSsnO2NoYXJzZXQ9dXRmLTgsJytlbmNvZGVVUklDb21wb25lbnQoc3RyKSxmYWxzZSk7aWYoeG1sZGF0YS5vdmVycmlkZU1pbWVUeXBlKXt4bWxkYXRhLm92ZXJyaWRlTWltZVR5cGUoY29udGVudFR5cGUpO30KeG1sZGF0YS5zZW5kKG51bGwpO3JldHVybiB4bWxkYXRhLnJlc3BvbnNlWE1MO319O30KT2JqZWN0LnNpemU9ZnVuY3Rpb24ob2JqKXsidXNlIHN0cmljdCI7dmFyIHNpemU9MCxrZXk7Zm9yKGtleSBpbiBvYmope2lmKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKXtzaXplKys7fX0KcmV0dXJuIHNpemU7fTtGdW5jdGlvbi5wcm90b3R5cGUuZGVmYXVsdHM9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGY9dGhpcyxhPVtmLmxlbmd0aC1hcmd1bWVudHMubGVuZ3RoXTthPWEuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZi5hcHBseShmLEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpLmNvbmNhdChhLnNsaWNlKGFyZ3VtZW50cy5sZW5ndGgsYS5sZW5ndGgpKSk7fTt9OyhmdW5jdGlvbih3aW5kb3cpeyJ1c2Ugc3RyaWN0Ijt2YXIgTUNSPXt9O01DUj17R2xvYmFsOntUTVA6e30scmVxdWVzdDp7fSxtYW5nYTp7ImNoYXB0ZXJzIjp7fSwidGl0bGUiOiIiLCJjaGFwdGVyIjp7Im51bWJlciI6MCwibmFtZSI6IiJ9fX0sSW5mbzp7InZlcnNpb24iOk1DUl9WRVJTSU9OLCJrZXlQcmVmaXgiOiJNQ1ItIn0sUmVnZXg6eyJ1cmwiOnsib2xkIjovbWFuZ2FyZWFkZXJcLm5ldFwvWzAtOV0rXC1bMC05XStcLShbMC05XSspXC8oW2EtejAtOVwtXSspXC9jaGFwdGVyLShbMC05XSspXC5odG1sPy9pLCJjdXIiOi9tYW5nYXJlYWRlclwubmV0XC8oW2EtejAtOVwtXSspKFwvWzAtOV0rKT8oXC9bMC05XSspPy9pfSwic2VsZWN0Ijp7Im9sZCI6L1wvWzAtOVwtXStcL1thLXpcLV0rXC9jaGFwdGVyLShbMC05XSspXC5odG1sPy9pLCJjdXIiOi9cL1thLXpcLV0rXC8oWzAtOV0rKS9pLCJjaGFwdGVyIjovWzAtOV0rOj8oLispL2l9fSxVSTp7aHRtbDoiIisiPGRpdiBpZD0nY29udGFpbmVyJz4iKyIgPG5hdiBpZD0nbWFpbic+IisiICA8c3BhbiBpZD0nY2hhcHRlcnMnIGNsYXNzPSd3aGl0ZSc+PHNlbGVjdD48b3B0aW9uPi0tLTwvb3B0aW9uPjwvc2VsZWN0Pjwvc3Bhbj4iKyIgIDxzcGFuIGlkPSdsaW5rcyc+IisiICAgPGEgaHJlZj0nLyc+SG9tZTwvYT4iKyIgICAvIisiICAgPGEgaWQ9J21hbmdhbGluayc+TWFuZ2E8L2E+IisiICAgLyIrIiAgIDxhIGlkPSdjb250cm9sLWJ1dHRvbic+T3B0aW9uczwvYT4iKyIgICAvIisiICAgPGEgaWQ9J3Blcm1hbGluaycgaHJlZj0nIyc+UGVybWFsaW5rPC9hPiIrIiAgPC9zcGFuPiIrIiAgPHNwYW4gc3R5bGU9J2Zsb2F0OiByaWdodDsnPiIrIiAgIDxzcGFuIGlkPSdzdGF0dXMnPlJlYWR5PC9zcGFuPiIrIiAgIDxhIGlkPSdwcmV2Jz5QcmV2aW91czwvYT4iKyIgICAtIisiICAgPGEgaWQ9J25leHQnPk5leHQ8L2E+IisiICA8L3NwYW4+IisiIDwvbmF2PiIrIiA8bmF2IGlkPSdvcHRpb25zJz4iKyIgICA8cD5PcHRpb24gSXRlbSAxPC9wPiIrIiA8L25hdj4iKyIgPHNlY3Rpb24+IisiICAgPGhlYWRlcj4iKyIgICAgIDxoMT5NYW5nYTwvaDE+IisiICAgPC9oZWFkZXI+IisiICAgPGFydGljbGU+IisiICAgICA8aGVhZGVyPiIrIiAgICAgICA8aDE+Q2hhcHRlcjwvaDE+IisiICAgICA8L2hlYWRlcj4iKyIgICAgPHA+TG9hZGluZy4uLjwvcD4iKyIgICA8L2FydGljbGU+IisiIDwvc2VjdGlvbj4iKyIgPGZvb3Rlcj4iKyIgICA8bmF2PiIrIiAgIFVzZXJzY3JpcHQgYnkgPGEgaHJlZj0naHR0cDovL3Bhc3Njb2QuY3ouY2MnPnBhc3Njb2Q8L2E+IisiICAgLSBVc2VzIDxhIGhyZWY9J2h0dHA6Ly9qcXVlcnkuY29tJz5qUXVlcnk8L2E+IisiICAgLSBXb3JrcyBiZXN0IGluIDxhIGhyZWY9J2h0dHA6Ly93d3cubW96aWxsYS5jb20vZmlyZWZveC8nPkZpcmVmb3ggNDwvYT4iKyIgICAgIC0gRm9yayBtZSBvbiA8YSBocmVmPSdodHRwOi8vZ2l0aHViLmNvbS9wYXNzY29kL01hbmdhLUNoYXB0ZXJSZWFkZXIvJz5HaXRodWI8L2E+IisiICAgLSBMaWNlbnNlOiA8YSBocmVmPSdodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocCc+TUlUPC9hPiArIEF0dHJpYnV0aW9uIisiICAgIC0gVGhhbmtzIGZvciB1c2luZyEiKyIgICA8L25hdj4iKyIgICA8IS0tPGRpdiBpZD0nYWRzJz4iKyIgICAgPGlmcmFtZSB3aWR0aD0nMzUwJyBoZWlnaHQ9JzI1MCcgZnJhbWVib3JkZXI9J25vJyBzY3JvbGxpbmc9J25vJyBzcmM9J2h0dHA6Ly9hZC5tYW5nYXJlYWRlci5uZXQvYnRsZWZ0JyBjbGFzcz0nbGVmdCcgLz4iKyIgICAgPGlmcmFtZSB3aWR0aD0nMzUwJyBoZWlnaHQ9JzI1MCcgZnJhbWVib3JkZXI9J25vJyBzY3JvbGxpbmc9J25vJyBzcmM9J2h0dHA6Ly9hZC5tYW5nYXJlYWRlci5uZXQvYnRyaWdodCcgY2xhc3M9J3JpZ2h0JyAvPiIrIiAgIDwvZGl2Pi0tPiIrIiA8L2Zvb3Rlcj4iKyI8L2Rpdj4iLGNzczp7IioiOnsiY29sb3IiOiJpbmhlcml0In0sImJvZHkiOnsiZm9udC1mYW1pbHkiOiJzYW5zLXNlcmlmIn0sIiNjb250YWluZXIiOnsid2lkdGgiOiI4MDBweCIsIm1hcmdpbiI6IjVlbSBhdXRvIn0sIm5hdiNtYWluIjp7InRvcCI6IjBweCIsImxlZnQiOiJhdXRvIiwid2lkdGgiOiI3ODBweCIsImJvcmRlciI6IjVweCAjQ0NDIHNvbGlkIiwicGFkZGluZyI6IjVweCIsInBvc2l0aW9uIjoiZml4ZWQiLCJmb250LXNpemUiOiIxZW0ifSwiI2xpbmtzIjp7ImZvbnQtc2l6ZSI6IjAuOGVtIn0sIiNzdGF0dXMiOnsiZm9udC1zaXplIjoiMC42ZW0iLCJjb2xvciI6IiNDQ0MifSwibmF2I29wdGlvbnMiOnsidG9wIjoiNTBweCIsImxlZnQiOiJhdXRvIiwid2lkdGgiOiI3ODBweCIsImJvcmRlciI6IjVweCAjQ0NDIHNvbGlkIiwicGFkZGluZyI6IjVweCIsImRpc3BsYXkiOiJub25lIiwicG9zaXRpb24iOiJmaXhlZCIsImZvbnQtc2l6ZSI6IjFlbSJ9LCJzZWN0aW9uIGhlYWRlciI6eyJmb250LXNpemUiOiIxLjVlbSJ9LCJhcnRpY2xlIjp7InRleHQtYWxpZ24iOiJjZW50ZXIifSwiYXJ0aWNsZSBoZWFkZXIiOnsiZm9udC1zaXplIjoiMS4yZW0ifSwiYXJ0aWNsZSBpbWciOnsibWFyZ2luLWJvdHRvbSI6IjFlbSJ9LCIuZm9yY2VkODAwIGltZyI6eyJ3aWR0aCI6IjgwMHB4In0sImZvb3RlciBuYXYiOnsiZm9udC1zaXplIjoiMC43ZW0iLCJtYXJnaW4iOiIxZW0gYXV0byIsInRleHQtYWxpZ24iOiJjZW50ZXIifSwiYSI6eyJjb2xvciI6ImluaGVyaXQiLCJ0ZXh0LWRlY29yYXRpb24iOiJub25lIiwiY3Vyc29yIjoicG9pbnRlciJ9LCJhOmhvdmVyLCBhOmZvY3VzIjp7ImNvbG9yIjoiI0NDQyJ9LCIuYmxhY2siOnsiYmFja2dyb3VuZC1jb2xvciI6ImJsYWNrIiwiY29sb3IiOiJ3aGl0ZSIsImJvcmRlci1jb2xvciI6IndoaXRlIn0sIi53aGl0ZSI6eyJiYWNrZ3JvdW5kLWNvbG9yIjoid2hpdGUiLCJjb2xvciI6ImJsYWNrIiwiYm9yZGVyLWNvbG9yIjoiYmxhY2sifSwiLndoaXRlIHNlbGVjdCwgc2VsZWN0LndoaXRlLCAuYmxhY2sgc2VsZWN0LCBzZWxlY3QuYmxhY2siOnsiY29sb3IiOiJibGFjayJ9LCJmb290ZXIgI2FkcyAubGVmdCI6eyJmbG9hdCI6ImxlZnQifSwiZm9vdGVyICNhZHMgLnJpZ2h0Ijp7ImZsb2F0IjoicmlnaHQifX0saW5pdDpmdW5jdGlvbigpe01DUi5VSS5jc3NbImFydGljbGUgaW1nIl1bIm1hcmdpbi1ib3R0b20iXT1NQ1IuT3B0aW9uLmdldCgnc3BhY2luZycpOyQoJ2JvZHknKS5odG1sKE1DUi5VSS5odG1sKS5hZGQoJ25hdicpLmFkZENsYXNzKCd3aGl0ZScpO01DUi5Ub29sLmFkZENzcyhNQ1IuVUkuY3NzKTt9fSxUb29sOntnZXRGYWtlOmZ1bmN0aW9uKHVybCxjYWxsYmFjayxzZXR0aW5ncyl7JC5hamF4KHt0eXBlOiJHRVQiLHVybDp1cmwsc3VjY2VzczpmdW5jdGlvbihkYXRhKXtpZihjYWxsYmFjayl7dmFyIHA9bmV3IERPTVBhcnNlcigpLGRvYz1wLnBhcnNlRnJvbVN0cmluZyhkYXRhLCJ0ZXh0L3htbCIpO2NhbGxiYWNrKGRvYyk7fX0sZXJyb3I6ZnVuY3Rpb24oeGhyLHN0YXQsZXJyKXt2YXIgZGF0YT0iPGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5PjxkaXYgaWQ9J3N0YXR1cyc+IisKc3RhdCsiPC9kaXY+PGRpdiBpZD0nZXJyb3InPiIrZXJyKyI8L2Rpdj48ZGl2IGlkPSd1cmwnPiIrCnVybCsiPC9kaXY+IjtpZihzdGF0PT0ndGltZW91dCcpe2RhdGErPSc8ZGl2IGlkPSJpbWdob2xkZXIiPjxpbWcgc3JjPSIvcXdlcnR5dWlvcGFzZGZnaGprbHp4Y3Zibm0uNDA0IiBhbHQ9Ii0iIC8+PC9kaXY+Jzt9CmRhdGErPSI8L2JvZHk+PC9odG1sPiI7aWYoY2FsbGJhY2spe3ZhciBwPW5ldyBET01QYXJzZXIoKSxkb2M9cC5wYXJzZUZyb21TdHJpbmcoZGF0YSwidGV4dC94bWwiKTtjYWxsYmFjayhkb2MpO319LHRpbWVvdXQ6NTAwMH0pO30sbWFrZUNzczpmdW5jdGlvbihjc3Nfb2JqLG1pbmlmaWVkLHRhYil7dmFyIHNlbGVjdG9yLHN0eWxlcyxwcm9wZXJ0eSx2YWx1ZSxubD0iXG4iLGh0bWw9Jyc7bWluaWZpZWQ9bWluaWZpZWQ/dHJ1ZTpmYWxzZTt0YWI9dGFiP3RhYjoiXHQiO2lmKG1pbmlmaWVkKXt0YWI9Jyc7bmw9JyAnO30KZm9yKHNlbGVjdG9yIGluIGNzc19vYmope2lmKHR5cGVvZiBzZWxlY3Rvcj09PSdzdHJpbmcnKXtzdHlsZXM9Y3NzX29ialtzZWxlY3Rvcl07aHRtbCs9bmwrc2VsZWN0b3IrIiB7Ijtmb3IocHJvcGVydHkgaW4gc3R5bGVzKXtpZih0eXBlb2YgcHJvcGVydHk9PT0nc3RyaW5nJyl7dmFsdWU9c3R5bGVzW3Byb3BlcnR5XTtodG1sKz1ubCt0YWIrcHJvcGVydHkrIjogIit2YWx1ZSsiOyI7fX0KaHRtbCs9bmwrIn0iO319CnJldHVybiBodG1sO30sYWRkQ3NzOmZ1bmN0aW9uKGNzcyl7InVzZSBzdHJpY3QiO3ZhciBlbDtpZih0eXBlb2YgY3NzPT0ib2JqZWN0Iil7Y3NzPU1DUi5Ub29sLm1ha2VDc3MoY3NzKTt9CmVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7ZWwudHlwZT0idGV4dC9jc3MiO2lmKGVsLnN0eWxlU2hlZXQpe2VsLnN0eWxlU2hlZXQuY3NzVGV4dD1jc3M7fWVsc2V7ZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7fQpkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGVsKTt9LHBhcnNlVXJsOmZ1bmN0aW9uKHVybF9zdHIpe3ZhciBVPXt9LFJvPU1DUi5SZWdleC51cmwub2xkLmV4ZWModXJsX3N0ciksUm49TUNSLlJlZ2V4LnVybC5jdXIuZXhlYyh1cmxfc3RyKSxzcz0vW1wvXS87aWYoUm8hPT1udWxsKXtVLnBhZ2U9Um9bMV0/Um9bMV0ucmVwbGFjZShzcywnJyk6bnVsbDtVLm1hbmdhPVJvWzJdP1JvWzJdLnJlcGxhY2Uoc3MsJycpOm51bGw7VS5jaGFwdGVyPVJvWzNdP1JvWzNdLnJlcGxhY2Uoc3MsJycpOm51bGw7fWVsc2UgaWYoUm4hPT1udWxsKXtVLm1hbmdhPVJuWzFdP1JuWzFdLnJlcGxhY2Uoc3MsJycpOm51bGw7VS5jaGFwdGVyPVJuWzJdP1JuWzJdLnJlcGxhY2Uoc3MsJycpOm51bGw7VS5wYWdlPVJuWzNdP1JuWzNdLnJlcGxhY2Uoc3MsJycpOm51bGw7fWVsc2V7cmV0dXJuIG51bGw7fQpyZXR1cm4gVTt9LGJ1aWxkVXJsOmZ1bmN0aW9uKG1hbmdhLGNoYXB0ZXIscGFnZSl7bWFuZ2E9bWFuZ2E/Jy8nK21hbmdhOicnO2NoYXB0ZXI9Y2hhcHRlcj8nLycrY2hhcHRlcjonJztwYWdlPXBhZ2U/Jy8nK3BhZ2U6Jyc7cmV0dXJuJ2h0dHA6Ly93d3cubWFuZ2FyZWFkZXIubmV0JyttYW5nYStjaGFwdGVyK3BhZ2U7fSxjYW5IYXpTdG9yYWdlOmZ1bmN0aW9uKCl7dHJ5e3JldHVybidsb2NhbFN0b3JhZ2UnaW4gd2luZG93JiZ3aW5kb3cubG9jYWxTdG9yYWdlIT09bnVsbDt9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlO319LGNhcGl0YWxpemU6ZnVuY3Rpb24oc3RyKXtyZXR1cm4gc3RyLnJlcGxhY2UoLyhefFxzKShbYS16XSkvZyxmdW5jdGlvbihvLHAscSl7cmV0dXJuIHArcS50b1VwcGVyQ2FzZSgpO30pO30sc3RvcmFnZUF2YWlsYWJsZTpmdW5jdGlvbigpe2lmKC9jaHJvbWUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtyZXR1cm4gMi41KjEwMDAqMTAwMDt9CnJldHVybiA1KjEwMDAqMTAwMDt9LHN0b3JhZ2VVc2VkOmZ1bmN0aW9uKHBlcmNlbnQpe2lmKE1DUi5Ub29sLmNhbkhhelN0b3JhZ2UoKSl7dmFyIGxlbj0wLGksaztmb3IoaT0wO2k8d2luZG93LmxvY2FsU3RvcmFnZS5sZW5ndGg7aSsrKXtrPXdpbmRvdy5sb2NhbFN0b3JhZ2Uua2V5KGkpO2xlbj1sZW4ray5sZW5ndGgrd2luZG93LmxvY2FsU3RvcmFnZVtrXS5sZW5ndGg7fQppZihwZXJjZW50KXtyZXR1cm4gbGVuKjEwMC9NQ1IuVG9vbC5zdG9yYWdlQXZhaWxhYmxlKCk7fQpyZXR1cm4gbGVuO31lbHNle3JldHVybiAwO319LmRlZmF1bHRzKGZhbHNlKX0sT3B0aW9uOntkZWZhdWx0czp7InNwYWNpbmciOiIxZW0iLCJhbGxibGFjayI6Im9mZiIsImhvdGtleXMiOiJvZmYiLCJzaG93Zmlyc3QiOiJvZmYiLCJmb3JjZWQ4MDAiOiJvbiIsImFkcyI6Im9uIiwiY2FjaGUiOiJvZmYiLCJjYWNoZS1pbWFnZXMiOiJ7fSJ9LGluaXQ6ZnVuY3Rpb24oKXt2YXIga2V5O2ZvcihrZXkgaW4gTUNSLk9wdGlvbi5kZWZhdWx0cyl7aWYoTUNSLlRvb2wuY2FuSGF6U3RvcmFnZSgpKXtNQ1IuT3B0aW9uLnZhbHVlc1trZXldPXdpbmRvdy5sb2NhbFN0b3JhZ2VbTUNSLkluZm8ua2V5UHJlZml4K2tleV0/d2luZG93LmxvY2FsU3RvcmFnZVtNQ1IuSW5mby5rZXlQcmVmaXgra2V5XTpNQ1IuT3B0aW9uLmRlZmF1bHRzW2tleV07d2luZG93LmxvY2FsU3RvcmFnZVtNQ1IuSW5mby5rZXlQcmVmaXgra2V5XT1yZXR1cm5lZE9wdGlvbnNba2V5XTt9ZWxzZXtNQ1IuT3B0aW9uLnZhbHVlc1trZXldPU1DUi5PcHRpb24uZGVmYXVsdHNba2V5XTt9fX0sc2V0OmZ1bmN0aW9uKGtleSx2YWx1ZSl7TUNSLk9wdGlvbltrZXldPXZhbHVlO2lmKE1DUi5Ub29sLmNhbkhhelN0b3JhZ2UoKSl7d2luZG93LmxvY2FsU3RvcmFnZVtNQ1IuSW5mby5rZXlQcmVmaXgra2V5XT1NQ1IuT3B0aW9uW2tleV07JCgnI2NvbnRyb2wtY2FjaGVzaXplIHNwYW4nKS50ZXh0KE1DUi5Ub29sLnN0b3JhZ2VVc2VkKHRydWUpKTt9fSxnZXQ6ZnVuY3Rpb24oa2V5KXt2YXIgdmFsdWU9TUNSLk9wdGlvbltrZXldO2lmKE1DUi5Ub29sLmNhbkhhelN0b3JhZ2UoKSl7dmFsdWU9d2luZG93LmxvY2FsU3RvcmFnZVtNQ1IuSW5mby5rZXlQcmVmaXgra2V5XTt9CnJldHVybiB2YWx1ZTt9LHN3aXRjaFRvOmZ1bmN0aW9uKGtleSx0byl7dmFyIGJlZm9yZT1NQ1IuT3B0aW9uLmdldChrZXkpLG9uZmY9dG8/J29uJzonb2ZmJztpZigvbyhufGZmKS9pLnRlc3QoYmVmb3JlKSl7TUNSLk9wdGlvbi5zZXQoa2V5LG9uZmYpO31lbHNle3Rocm93IFR5cGVFcnJvcjt9fSxzd2l0Y2hPbjpmdW5jdGlvbihrZXkpe01DUi5PcHRpb24uc3dpdGNoVG8oa2V5LHRydWUpO30sc3dpdGNoT2ZmOmZ1bmN0aW9uKGtleSl7TUNSLk9wdGlvbi5zd2l0Y2hUbyhrZXksZmFsc2UpO30sc3dpdGNoZWQ6ZnVuY3Rpb24oa2V5KXt2YXIgb3B0PU1DUi5PcHRpb24uZ2V0KGtleSk7aWYoL28obnxmZikvaS50ZXN0KG9wdCkpe2lmKG9wdD09J29uJyl7cmV0dXJuIHRydWU7fX1lbHNle3Rocm93IFR5cGVFcnJvcjt9CnJldHVybiBmYWxzZTt9LHRvZ2dsZTpmdW5jdGlvbihrZXksZm9yY2VfdG8sY2FsbE9uLGNhbGxPZmYpe2lmKHR5cGVvZiBmb3JjZV90bz09PSdib29sZWFuJyl7TUNSLk9wdGlvbi5zd2l0Y2hUbyhrZXksIWZvcmNlX3RvKTt9CmlmKCFNQ1IuT3B0aW9uLnN3aXRjaGVkKGtleSkpe2lmKGNhbGxPbil7Y2FsbE9uKCk7fQpNQ1IuT3B0aW9uLnN3aXRjaE9uKGtleSk7JCgnI2xlZ2VuZC0nK2tleSsnIC5jb250cm9sLW5vdycpLnRleHQoJ09uJyk7fWVsc2V7aWYoY2FsbE9mZil7Y2FsbE9mZigpO30KTUNSLk9wdGlvbi5zd2l0Y2hPZmYoa2V5KTskKCcjbGVnZW5kLScra2V5KycgLmNvbnRyb2wtbm93JykudGV4dCgnT2ZmJyk7fX0sdmFsdWVzOnt9fSxDYWNoZTp7aW5pdDpmdW5jdGlvbigpe2lmKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2NhY2hlJykpe01DUi5DYWNoZS5zdG9yZS5jaGFwdGVycz1NQ1IuQ2FjaGUuZ2V0KCdjaGFwdGVycycpO319LHNldDpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBqc29uPUpTT04uc3RyaW5naWZ5KHZhbHVlKTtNQ1IuT3B0aW9uLnNldCgnY2FjaGUtJytrZXksanNvbik7fSxnZXQ6ZnVuY3Rpb24oa2V5KXt2YXIganNvbj1NQ1IuT3B0aW9uLmdldCgnY2FjaGUtJytrZXkpO3JldHVybiBKU09OLnBhcnNlKGpzb24pO30sZDpmdW5jdGlvbihrZXkscXVlcnkpe3JldHVybiBmYWxzZTt9LGNsZWFyOmZ1bmN0aW9uKCl7Zm9yKGkgaW4gTUNSLkNhY2hlLnN0b3JlKXtNQ1IuQ2FjaGUuc2V0KGkse30pO319LHN0b3JlOntjaGFwdGVyczp7fX19LERvOntkaXNwbGF5U3RhdHVzOmZ1bmN0aW9uKHN0YXR1cyxhbmltYXRlKXtpZihhbmltYXRlKXskKCcjc3RhdHVzJykuc3RvcCgpLmZhZGVPdXQoJ2Zhc3QnLGZ1bmN0aW9uKCl7JCgnI3N0YXR1cycpLnRleHQoc3RhdHVzKS5mYWRlSW4oKTt9KTt9ZWxzZXskKCcjc3RhdHVzJykuc3RvcCgpLnRleHQoc3RhdHVzKS5zaG93KCk7fQpkb2N1bWVudC50aXRsZT1NQ1IuR2xvYmFsLm1hbmdhLnRpdGxlKycgLyAnK01DUi5HbG9iYWwucmVxdWVzdC5jaGFwdGVyKycgLyAnK3N0YXR1czt9LmRlZmF1bHRzKHRydWUpLGNoYW5nZTp7c3BhY2luZzpmdW5jdGlvbihmb3JjZV90byl7aWYoL1swLTldKyhlbXxweCkvaS50ZXN0KGZvcmNlX3RvKSl7JCgnI3BhZ2VzIGltZycpLmNzcygnbWFyZ2luLWJvdHRvbScsZm9yY2VfdG8pO31lbHNle3ZhciBzPSQoJyNjb250cm9sLXNwYWNpbmcgaW5wdXQnKS52YWwoKTtNQ1IuT3B0aW9uLnNldCgnc3BhY2luZycscyk7JCgnI3BhZ2VzIGltZycpLmNzcygnbWFyZ2luLWJvdHRvbScscyk7fQokKCcjbGVnZW5kLXNwYWNpbmcgLmNvbnRyb2wtbm93JykudGV4dChNQ1IuT3B0aW9uLmdldCgnc3BhY2luZycpKTt9fSxoYW5kbGVIb3RrZXlzOmZ1bmN0aW9uKGUpe3N3aXRjaChlLndoaWNoKXtjYXNlIDE4ODpNQ1IuR2V0LnByZXZpb3VzQ2hhcHRlcigpO3JldHVybjtjYXNlIDE5MDpNQ1IuR2V0Lm5leHRDaGFwdGVyKCk7cmV0dXJuO2RlZmF1bHQ6cmV0dXJuO319LHRvZ2dsZTp7aG90a2V5czpmdW5jdGlvbihmb3JjZV90byl7TUNSLk9wdGlvbi50b2dnbGUoJ2hvdGtleXMnLGZvcmNlX3RvLGZ1bmN0aW9uKCl7JChkb2N1bWVudCkuYmluZCgna2V5ZG93bicsTUNSLkRvLmhhbmRsZUhvdGtleXMpO30sZnVuY3Rpb24oKXskKGRvY3VtZW50KS51bmJpbmQoJ2tleWRvd24nLE1DUi5Eby5oYW5kbGVIb3RrZXlzKTt9KTt9LGFsbEJsYWNrOmZ1bmN0aW9uKGZvcmNlX3RvKXt2YXIgYT0kKCdbY2xhc3MqPXdoaXRlXSwgW2NsYXNzKj1ibGFja10nKTtNQ1IuT3B0aW9uLnRvZ2dsZSgnYWxsYmxhY2snLGZvcmNlX3RvLGZ1bmN0aW9uKCl7YS5hZGRDbGFzcygnYmxhY2snKS5yZW1vdmVDbGFzcygnd2hpdGUnKTt9LGZ1bmN0aW9uKCl7YS5hZGRDbGFzcygnd2hpdGUnKS5yZW1vdmVDbGFzcygnYmxhY2snKTt9KTt9LHNob3dGaXJzdDpmdW5jdGlvbihmb3JjZV90byl7TUNSLk9wdGlvbi50b2dnbGUoJ3Nob3dmaXJzdCcsZm9yY2VfdG8pO30sY2FjaGU6ZnVuY3Rpb24oZm9yY2VfdG8pe01DUi5PcHRpb24udG9nZ2xlKCdjYWNoZScsZm9yY2VfdG8pO30sZm9yY2VkODAwOmZ1bmN0aW9uKGZvcmNlX3RvKXtNQ1IuT3B0aW9uLnRvZ2dsZSgnZm9yY2VkODAwJyxmb3JjZV90byxmdW5jdGlvbigpeyQoJyNwYWdlcycpLmFkZENsYXNzKCdmb3JjZWQ4MDAnKTt9LGZ1bmN0aW9uKCl7JCgnI3BhZ2VzJykucmVtb3ZlQ2xhc3MoJ2ZvcmNlZDgwMCcpO30pO30sYWRzOmZ1bmN0aW9uKGZvcmNlX3RvKXtNQ1IuT3B0aW9uLnRvZ2dsZSgnYWRzJyxmb3JjZV90byxmdW5jdGlvbigpeyQoJyNhZGZvb3RlcicpLnNob3coKTt9LGZ1bmN0aW9uKCl7JCgnI2FkZm9vdGVyJykuaGlkZSgpO30pO319LGNvbnRyb2xzOntpbml0OmZ1bmN0aW9uKCl7JCgnI2NvbnRyb2wtYnV0dG9uJykuY2xpY2soTUNSLkRvLmNvbnRyb2wuc2hvdyk7JCgnI2NvbnRyb2wtY2xvc2UnKS5jbGljayhNQ1IuRG8uY29udHJvbC5oaWRlKTskKCcjY29udHJvbC1zcGFjaW5nIGlucHV0Jykua2V5dXAoTUNSLkRvLmNoYW5nZS5zcGFjaW5nKTskKCcjY29udHJvbC1hbGxibGFjayBidXR0b24nKS5jbGljayhNQ1IuRG8udG9nZ2xlLmFsbEJsYWNrKTskKCcjY29udHJvbC1ob3RrZXlzIGJ1dHRvbicpLmNsaWNrKE1DUi5Eby50b2dnbGUuaG90a2V5cyk7JCgnI2NvbnRyb2wtc2hvd2ZpcnN0IGJ1dHRvbicpLmNsaWNrKE1DUi5Eby50b2dnbGUuc2hvd0ZpcnN0KTskKCcjY29udHJvbC1mb3JjZWQ4MDAgYnV0dG9uJykuY2xpY2soTUNSLkRvLnRvZ2dsZS5mb3JjZWQ4MDApOyQoJyNjb250cm9sLWNhY2hlIGJ1dHRvbicpLmNsaWNrKE1DUi5Eby50b2dnbGUuY2FjaGUpOyQoJyNjb250cm9sLWFkcyBidXR0b24nKS5jbGljayhNQ1IuRG8udG9nZ2xlLmFkcyk7JCgnI25hdmlnYXRpb24tYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtNQ1IuRG8uY29udHJvbC5zaG93KCduYXZpZ2F0aW9uJyk7fSk7JCgnI25hdmlnYXRpb24tY2xvc2UnKS5jbGljayhmdW5jdGlvbigpe01DUi5Eby5jb250cm9sLmhpZGUoJ25hdmlnYXRpb24nKTt9KTskKCcjbmF2aWdhdGlvbi1jaGFwdGVycycpLmxpdmUoJ2NoYW5nZScsTUNSLkdldC5zZWxlY3RlZENoYXB0ZXIpOyQoJyNuYXZpZ2F0aW9uLXByZXZpb3VzJykuY2xpY2soTUNSLkdldC5wcmV2aW91c0NoYXB0ZXIpOyQoJyNuYXZpZ2F0aW9uLW5leHQnKS5jbGljayhNQ1IuR2V0Lm5leHRDaGFwdGVyKTskKCcjY2FjaGUtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtNQ1IuRG8uY29udHJvbC5zaG93KCdjYWNoZScpO30pOyQoJyNjYWNoZS1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCl7TUNSLkRvLmNvbnRyb2wuaGlkZSgnY2FjaGUnKTt9KTskKCcjY2FjaGUtY2xlYXInKS5jbGljayhNQ1IuQ2FjaGUuY2xlYXIpO01DUi5Eby5jaGFuZ2Uuc3BhY2luZyhNQ1IuT3B0aW9uLmdldCgnc3BhY2luZycpKTtNQ1IuRG8udG9nZ2xlLmFsbEJsYWNrKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2FsbGJsYWNrJykpO01DUi5Eby50b2dnbGUuaG90a2V5cyhNQ1IuT3B0aW9uLnN3aXRjaGVkKCdob3RrZXlzJykpO01DUi5Eby50b2dnbGUuc2hvd0ZpcnN0KE1DUi5PcHRpb24uc3dpdGNoZWQoJ3Nob3dmaXJzdCcpKTtNQ1IuRG8udG9nZ2xlLmNhY2hlKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2NhY2hlJykpO01DUi5Eby50b2dnbGUuZm9yY2VkODAwKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2ZvcmNlZDgwMCcpKTtNQ1IuRG8udG9nZ2xlLmFkcyhNQ1IuT3B0aW9uLnN3aXRjaGVkKCdhZHMnKSk7fSxzaG93OmZ1bmN0aW9uKHBhbmVsKXskKCcjJytwYW5lbCsnLXBhbmVsJykuZmFkZUluKCdmYXN0Jyk7fS5kZWZhdWx0cygnY29udHJvbCcpLGhpZGU6ZnVuY3Rpb24ocGFuZWwpeyQoJyMnK3BhbmVsKyctcGFuZWwnKS5mYWRlT3V0KCdmYXN0Jyk7fS5kZWZhdWx0cygnY29udHJvbCcpfX0sR2V0OntjaGFwdGVyOmZ1bmN0aW9uKCl7dmFyIHVybCxtYWtlVXJsPWZ1bmN0aW9uKCl7cmV0dXJuIE1DUi5Ub29sLmJ1aWxkVXJsKE1DUi5HbG9iYWwucmVxdWVzdC5tYW5nYSxNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlcixNQ1IuVE1QLnBhZ2UpO30sdXBkYXRlRGV0YWlscz1mdW5jdGlvbigpe30sdXBkYXRlU2VsZWN0PWZ1bmN0aW9uKCl7fSx1cGRhdGVEaXNwbGF5PWZ1bmN0aW9uKCl7fSxtYWluTG9vcD1mdW5jdGlvbigpe307aWYoTUNSLk9wdGlvbi5zd2l0Y2hlZCgiY2FjaGUiKSl7aWYoTUNSLkNhY2hlLmNoYXB0ZXJzW1N0cmluZyhNQ1IuR2xvYmFsLnJlcXVlc3QubWFuZ2EpXSl7aWYoTUNSLkNhY2hlLmNoYXB0ZXJzW1N0cmluZyhNQ1IuR2xvYmFsLnJlcXVlc3QubWFuZ2EpXVtTdHJpbmcoTUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXIpXSl7dXBkYXRlRGV0YWlscygpO3VwZGF0ZURpc3BsYXkoKTtyZXR1cm47fX19ZWxzZXtNQ1IuVE1QLnBhZ2U9MTttYWluTG9vcCgpO319fX07d2luZG93Lk1DUj1NQ1I7fSkod2luZG93KTskKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gb212S2V5UHJlc3NlZCgpe30KZG9jdW1lbnQub25rZXlkb3duPWZ1bmN0aW9uKCl7fTtNQ1IuR2xvYmFsLnJlcXVlc3Q9TUNSLlRvb2wucGFyc2VVcmwod2luZG93LmxvY2F0aW9uKTtNQ1IuR2xvYmFsLm1hbmdhLnRpdGxlPU1DUi5Ub29sLmNhcGl0YWxpemUoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhLnJlcGxhY2UoLy0vaWcsJyAnKSk7TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyPXsibnVtYmVyIjpNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlciwibmFtZSI6IiJ9OyQoJ2hlYWQgPiAqJykubm90KCdzY3JpcHQnKS5yZW1vdmUoKTtNQ1IuVUkuaW5pdCgpO01DUi5PcHRpb24uaW5pdCgpO01DUi5DYWNoZS5pbml0KCk7TUNSLkRvLmluaXQoKTtNQ1IuR2V0LmNoYXB0ZXIoKTt9KTs='; }