// ==UserScript==
// @name           Manga ChapterReader
// @description    Displays full chapters from MangaReader.net in a simpler interface.
// @author         passcod
// @license        MIT/X11 + Attribution
// @version        11.28
// @namespace      http://www.mangareader.net
// @include        http://www.mangareader.net/*
// ==/UserScript==
// version format: y.z


/**
 * Decode a Base64 encoded string
 *
 * @see       http://phpjs.org
 * @version   3.21
 * @copyright 2011 Kevin van Zonneveld.
 * 
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 */ 
function base64_decode(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec="",tmp_arr=[];if(!data){return data;}
data+='';do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');dec=this.utf8_decode(dec);return dec;}
function utf8_decode(str_data){var tmp_arr=[],i=0,ac=0,c1=0,c2=0,c3=0;str_data+='';while(i<str_data.length){c1=str_data.charCodeAt(i);if(c1<128){tmp_arr[ac++]=String.fromCharCode(c1);i++;}
else if(c1>191&&c1<224){c2=str_data.charCodeAt(i+1);tmp_arr[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2;}
else{c2=str_data.charCodeAt(i+1);c3=str_data.charCodeAt(i+2);tmp_arr[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return tmp_arr.join('');}


var regular = /mangareader\.net\/[a-z0-9\-]+\/[0-9]+(\/.+)?/i,
	old = /mangareader\.net\/[0-9\-]+\/([a-z0-9\-]+)\/chapter-([0-9]+)\.htm/i;

if ( regular.test(window.location) || old.test(window.location) ) {
	document.getElementsByTagName('head')[0].innerHTML = '<title>Loading... -- '+
	  document.getElementsByTagName('title')[0].innerHTML+'</title>';
	
	document.getElementsByTagName('body')[0].innerHTML = 'Loading...';
	var script = document.createElement('script');
	var src = document.createTextNode(base64_decode(GetIt()));
	script.scr = load;
	document.getElementsByTagName('body')[0].appendChild(script);
}


function GetIt() { return 'Ck1DUl9WRVJTSU9OPTExLjI4O2lmKCF0aGlzLkpTT04pe3RoaXMuSlNPTj17fTt9CihmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBmKG4pe3JldHVybiBuPDEwPycwJytuOm47fQppZih0eXBlb2YgRGF0ZS5wcm90b3R5cGUudG9KU09OIT09J2Z1bmN0aW9uJyl7RGF0ZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGtleSl7cmV0dXJuIGlzRmluaXRlKHRoaXMudmFsdWVPZigpKT90aGlzLmdldFVUQ0Z1bGxZZWFyKCkrJy0nKwpmKHRoaXMuZ2V0VVRDTW9udGgoKSsxKSsnLScrCmYodGhpcy5nZXRVVENEYXRlKCkpKydUJysKZih0aGlzLmdldFVUQ0hvdXJzKCkpKyc6JysKZih0aGlzLmdldFVUQ01pbnV0ZXMoKSkrJzonKwpmKHRoaXMuZ2V0VVRDU2Vjb25kcygpKSsnWic6bnVsbDt9O1N0cmluZy5wcm90b3R5cGUudG9KU09OPU51bWJlci5wcm90b3R5cGUudG9KU09OPUJvb2xlYW4ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLnZhbHVlT2YoKTt9O30KdmFyIGN4PS9bXHUwMDAwXHUwMGFkXHUwNjAwLVx1MDYwNFx1MDcwZlx1MTdiNFx1MTdiNVx1MjAwYy1cdTIwMGZcdTIwMjgtXHUyMDJmXHUyMDYwLVx1MjA2Zlx1ZmVmZlx1ZmZmMC1cdWZmZmZdL2csZXNjYXBhYmxlPS9bXFxcIlx4MDAtXHgxZlx4N2YtXHg5Zlx1MDBhZFx1MDYwMC1cdTA2MDRcdTA3MGZcdTE3YjRcdTE3YjVcdTIwMGMtXHUyMDBmXHUyMDI4LVx1MjAyZlx1MjA2MC1cdTIwNmZcdWZlZmZcdWZmZjAtXHVmZmZmXS9nLGdhcCxpbmRlbnQsbWV0YT17J1xiJzonXFxiJywnXHQnOidcXHQnLCdcbic6J1xcbicsJ1xmJzonXFxmJywnXHInOidcXHInLCciJzonXFwiJywnXFwnOidcXFxcJ30scmVwO2Z1bmN0aW9uIHF1b3RlKHN0cmluZyl7ZXNjYXBhYmxlLmxhc3RJbmRleD0wO3JldHVybiBlc2NhcGFibGUudGVzdChzdHJpbmcpPyciJytzdHJpbmcucmVwbGFjZShlc2NhcGFibGUsZnVuY3Rpb24oYSl7dmFyIGM9bWV0YVthXTtyZXR1cm4gdHlwZW9mIGM9PT0nc3RyaW5nJz9jOidcXHUnKygnMDAwMCcrYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO30pKyciJzonIicrc3RyaW5nKyciJzt9CmZ1bmN0aW9uIHN0cihrZXksaG9sZGVyKXt2YXIgaSxrLHYsbGVuZ3RoLG1pbmQ9Z2FwLHBhcnRpYWwsdmFsdWU9aG9sZGVyW2tleV07aWYodmFsdWUmJnR5cGVvZiB2YWx1ZT09PSdvYmplY3QnJiZ0eXBlb2YgdmFsdWUudG9KU09OPT09J2Z1bmN0aW9uJyl7dmFsdWU9dmFsdWUudG9KU09OKGtleSk7fQppZih0eXBlb2YgcmVwPT09J2Z1bmN0aW9uJyl7dmFsdWU9cmVwLmNhbGwoaG9sZGVyLGtleSx2YWx1ZSk7fQpzd2l0Y2godHlwZW9mIHZhbHVlKXtjYXNlJ3N0cmluZyc6cmV0dXJuIHF1b3RlKHZhbHVlKTtjYXNlJ251bWJlcic6cmV0dXJuIGlzRmluaXRlKHZhbHVlKT9TdHJpbmcodmFsdWUpOidudWxsJztjYXNlJ2Jvb2xlYW4nOmNhc2UnbnVsbCc6cmV0dXJuIFN0cmluZyh2YWx1ZSk7Y2FzZSdvYmplY3QnOmlmKCF2YWx1ZSl7cmV0dXJuJ251bGwnO30KZ2FwKz1pbmRlbnQ7cGFydGlhbD1bXTtpZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHZhbHVlKT09PSdbb2JqZWN0IEFycmF5XScpe2xlbmd0aD12YWx1ZS5sZW5ndGg7Zm9yKGk9MDtpPGxlbmd0aDtpKz0xKXtwYXJ0aWFsW2ldPXN0cihpLHZhbHVlKXx8J251bGwnO30Kdj1wYXJ0aWFsLmxlbmd0aD09PTA/J1tdJzpnYXA/J1tcbicrZ2FwKwpwYXJ0aWFsLmpvaW4oJyxcbicrZ2FwKSsnXG4nKwptaW5kKyddJzonWycrcGFydGlhbC5qb2luKCcsJykrJ10nO2dhcD1taW5kO3JldHVybiB2O30KaWYocmVwJiZ0eXBlb2YgcmVwPT09J29iamVjdCcpe2xlbmd0aD1yZXAubGVuZ3RoO2ZvcihpPTA7aTxsZW5ndGg7aSs9MSl7az1yZXBbaV07aWYodHlwZW9mIGs9PT0nc3RyaW5nJyl7dj1zdHIoayx2YWx1ZSk7aWYodil7cGFydGlhbC5wdXNoKHF1b3RlKGspKyhnYXA/JzogJzonOicpK3YpO319fX1lbHNle2ZvcihrIGluIHZhbHVlKXtpZihPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSxrKSl7dj1zdHIoayx2YWx1ZSk7aWYodil7cGFydGlhbC5wdXNoKHF1b3RlKGspKyhnYXA/JzogJzonOicpK3YpO319fX0Kdj1wYXJ0aWFsLmxlbmd0aD09PTA/J3t9JzpnYXA/J3tcbicrZ2FwK3BhcnRpYWwuam9pbignLFxuJytnYXApKydcbicrCm1pbmQrJ30nOid7JytwYXJ0aWFsLmpvaW4oJywnKSsnfSc7Z2FwPW1pbmQ7cmV0dXJuIHY7fX0KaWYodHlwZW9mIEpTT04uc3RyaW5naWZ5IT09J2Z1bmN0aW9uJyl7SlNPTi5zdHJpbmdpZnk9ZnVuY3Rpb24odmFsdWUscmVwbGFjZXIsc3BhY2Upe3ZhciBpO2dhcD0nJztpbmRlbnQ9Jyc7aWYodHlwZW9mIHNwYWNlPT09J251bWJlcicpe2ZvcihpPTA7aTxzcGFjZTtpKz0xKXtpbmRlbnQrPScgJzt9fWVsc2UgaWYodHlwZW9mIHNwYWNlPT09J3N0cmluZycpe2luZGVudD1zcGFjZTt9CnJlcD1yZXBsYWNlcjtpZihyZXBsYWNlciYmdHlwZW9mIHJlcGxhY2VyIT09J2Z1bmN0aW9uJyYmKHR5cGVvZiByZXBsYWNlciE9PSdvYmplY3QnfHx0eXBlb2YgcmVwbGFjZXIubGVuZ3RoIT09J251bWJlcicpKXt0aHJvdyBuZXcgRXJyb3IoJ0pTT04uc3RyaW5naWZ5Jyk7fQpyZXR1cm4gc3RyKCcnLHsnJzp2YWx1ZX0pO307fQppZih0eXBlb2YgSlNPTi5wYXJzZSE9PSdmdW5jdGlvbicpe0pTT04ucGFyc2U9ZnVuY3Rpb24odGV4dCxyZXZpdmVyKXt2YXIgajtmdW5jdGlvbiB3YWxrKGhvbGRlcixrZXkpe3ZhciBrLHYsdmFsdWU9aG9sZGVyW2tleV07aWYodmFsdWUmJnR5cGVvZiB2YWx1ZT09PSdvYmplY3QnKXtmb3IoayBpbiB2YWx1ZSl7aWYoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsaykpe3Y9d2Fsayh2YWx1ZSxrKTtpZih2IT09dW5kZWZpbmVkKXt2YWx1ZVtrXT12O31lbHNle2RlbGV0ZSB2YWx1ZVtrXTt9fX19CnJldHVybiByZXZpdmVyLmNhbGwoaG9sZGVyLGtleSx2YWx1ZSk7fQp0ZXh0PVN0cmluZyh0ZXh0KTtjeC5sYXN0SW5kZXg9MDtpZihjeC50ZXN0KHRleHQpKXt0ZXh0PXRleHQucmVwbGFjZShjeCxmdW5jdGlvbihhKXtyZXR1cm4nXFx1JysKKCcwMDAwJythLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7fSk7fQppZigvXltcXSw6e31cc10qJC8udGVzdCh0ZXh0LnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywnQCcpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCddJykucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCcnKSkpe2o9ZXZhbCgnKCcrdGV4dCsnKScpO3JldHVybiB0eXBlb2YgcmV2aXZlcj09PSdmdW5jdGlvbic/d2Fsayh7Jyc6an0sJycpOmo7fQp0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0pTT04ucGFyc2UnKTt9O319KCkpOyhmdW5jdGlvbihBLHcpe2Z1bmN0aW9uIG1hKCl7aWYoIWMuaXNSZWFkeSl7dHJ5e3MuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goYSl7c2V0VGltZW91dChtYSwxKTtyZXR1cm59Yy5yZWFkeSgpfX1mdW5jdGlvbiBRYShhLGIpe2Iuc3JjP2MuYWpheCh7dXJsOmIuc3JjLGFzeW5jOmZhbHNlLGRhdGFUeXBlOiJzY3JpcHQifSk6Yy5nbG9iYWxFdmFsKGIudGV4dHx8Yi50ZXh0Q29udGVudHx8Yi5pbm5lckhUTUx8fCIiKTtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiBYKGEsYixkLGYsZSxqKXt2YXIgaT1hLmxlbmd0aDtpZih0eXBlb2YgYj09PSJvYmplY3QiKXtmb3IodmFyIG8gaW4gYilYKGEsbyxiW29dLGYsZSxkKTtyZXR1cm4gYX1pZihkIT09dyl7Zj0haiYmZiYmYy5pc0Z1bmN0aW9uKGQpO2ZvcihvPTA7bzxpO28rKyllKGFbb10sYixmP2QuY2FsbChhW29dLG8sZShhW29dLGIpKTpkLGopO3JldHVybiBhfXJldHVybiBpP2UoYVswXSxiKTp3fWZ1bmN0aW9uIEooKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX1mdW5jdGlvbiBZKCl7cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIFooKXtyZXR1cm4gdHJ1ZX1mdW5jdGlvbiBuYShhLGIsZCl7ZFswXS50eXBlPWE7cmV0dXJuIGMuZXZlbnQuaGFuZGxlLmFwcGx5KGIsZCl9ZnVuY3Rpb24gb2EoYSl7dmFyIGIsZD1bXSxmPVtdLGU9YXJndW1lbnRzLGosaSxvLGssbixyO2k9Yy5kYXRhKHRoaXMsImV2ZW50cyIpO2lmKCEoYS5saXZlRmlyZWQ9PT10aGlzfHwhaXx8IWkubGl2ZXx8YS5idXR0b24mJmEudHlwZT09PSJjbGljayIpKXthLmxpdmVGaXJlZD10aGlzO3ZhciB1PWkubGl2ZS5zbGljZSgwKTtmb3Ioaz0wO2s8dS5sZW5ndGg7aysrKXtpPXVba107aS5vcmlnVHlwZS5yZXBsYWNlKE8sIiIpPT09YS50eXBlP2YucHVzaChpLnNlbGVjdG9yKTp1LnNwbGljZShrLS0sMSl9aj1jKGEudGFyZ2V0KS5jbG9zZXN0KGYsYS5jdXJyZW50VGFyZ2V0KTtuPTA7Zm9yKHI9ai5sZW5ndGg7bjxyO24rKylmb3Ioaz0wO2s8dS5sZW5ndGg7aysrKXtpPXVba107aWYoaltuXS5zZWxlY3Rvcj09PWkuc2VsZWN0b3Ipe289altuXS5lbGVtO2Y9bnVsbDtpZihpLnByZVR5cGU9PT0ibW91c2VlbnRlciJ8fGkucHJlVHlwZT09PSJtb3VzZWxlYXZlIilmPWMoYS5yZWxhdGVkVGFyZ2V0KS5jbG9zZXN0KGkuc2VsZWN0b3IpWzBdO2lmKCFmfHxmIT09bylkLnB1c2goe2VsZW06byxoYW5kbGVPYmo6aX0pfX1uPTA7Zm9yKHI9ZC5sZW5ndGg7bjxyO24rKyl7aj1kW25dO2EuY3VycmVudFRhcmdldD1qLmVsZW07YS5kYXRhPWouaGFuZGxlT2JqLmRhdGE7YS5oYW5kbGVPYmo9ai5oYW5kbGVPYmo7aWYoai5oYW5kbGVPYmoub3JpZ0hhbmRsZXIuYXBwbHkoai5lbGVtLGUpPT09ZmFsc2Upe2I9ZmFsc2U7YnJlYWt9fXJldHVybiBifX1mdW5jdGlvbiBwYShhLGIpe3JldHVybiJsaXZlLiIrKGEmJmEhPT0iKiI/YSsiLiI6IiIpK2IucmVwbGFjZSgvXC4vZywiYCIpLnJlcGxhY2UoLyAvZywiJiIpfWZ1bmN0aW9uIHFhKGEpe3JldHVybiFhfHwhYS5wYXJlbnROb2RlfHxhLnBhcmVudE5vZGUubm9kZVR5cGU9PT0xMX1mdW5jdGlvbiByYShhLGIpe3ZhciBkPTA7Yi5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlTmFtZT09PShhW2RdJiZhW2RdLm5vZGVOYW1lKSl7dmFyIGY9Yy5kYXRhKGFbZCsrXSksZT1jLmRhdGEodGhpcyxmKTtpZihmPWYmJmYuZXZlbnRzKXtkZWxldGUgZS5oYW5kbGU7ZS5ldmVudHM9e307Zm9yKHZhciBqIGluIGYpZm9yKHZhciBpIGluIGZbal0pYy5ldmVudC5hZGQodGhpcyxqLGZbal1baV0sZltqXVtpXS5kYXRhKX19fSl9ZnVuY3Rpb24gc2EoYSxiLGQpe3ZhciBmLGUsajtiPWImJmJbMF0/YlswXS5vd25lckRvY3VtZW50fHxiWzBdOnM7aWYoYS5sZW5ndGg9PT0xJiZ0eXBlb2YgYVswXT09PSJzdHJpbmciJiZhWzBdLmxlbmd0aDw1MTImJmI9PT1zJiYhdGEudGVzdChhWzBdKSYmKGMuc3VwcG9ydC5jaGVja0Nsb25lfHwhdWEudGVzdChhWzBdKSkpe2U9dHJ1ZTtpZihqPWMuZnJhZ21lbnRzW2FbMF1dKWlmKGohPT0xKWY9an1pZighZil7Zj1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtjLmNsZWFuKGEsYixmLGQpfWlmKGUpYy5mcmFnbWVudHNbYVswXV09aj9mOjE7cmV0dXJue2ZyYWdtZW50OmYsY2FjaGVhYmxlOmV9fWZ1bmN0aW9uIEsoYSxiKXt2YXIgZD17fTtjLmVhY2godmEuY29uY2F0LmFwcGx5KFtdLHZhLnNsaWNlKDAsYikpLGZ1bmN0aW9uKCl7ZFt0aGlzXT1hfSk7cmV0dXJuIGR9ZnVuY3Rpb24gd2EoYSl7cmV0dXJuInNjcm9sbFRvImluIGEmJmEuZG9jdW1lbnQ/YTphLm5vZGVUeXBlPT09OT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzpmYWxzZX12YXIgYz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgYy5mbi5pbml0KGEsYil9LFJhPUEualF1ZXJ5LFNhPUEuJCxzPUEuZG9jdW1lbnQsVCxUYT0vXltePF0qKDxbXHdcV10rPilbXj5dKiR8XiMoW1x3LV0rKSQvLFVhPS9eLlteOiNcW1wuLF0qJC8sVmE9L1xTLyxXYT0vXihcc3xcdTAwQTApK3woXHN8XHUwMEEwKSskL2csWGE9L148KFx3KylccypcLz8+KD86PFwvXDE+KT8kLyxQPW5hdmlnYXRvci51c2VyQWdlbnQseGE9ZmFsc2UsUT1bXSxMLCQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxhYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGJhPUFycmF5LnByb3RvdHlwZS5wdXNoLFI9QXJyYXkucHJvdG90eXBlLnNsaWNlLHlhPUFycmF5LnByb3RvdHlwZS5pbmRleE9mO2MuZm49Yy5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgZCxmO2lmKCFhKXJldHVybiB0aGlzO2lmKGEubm9kZVR5cGUpe3RoaXMuY29udGV4dD10aGlzWzBdPWE7dGhpcy5sZW5ndGg9MTtyZXR1cm4gdGhpc31pZihhPT09ImJvZHkiJiYhYil7dGhpcy5jb250ZXh0PXM7dGhpc1swXT1zLmJvZHk7dGhpcy5zZWxlY3Rvcj0iYm9keSI7dGhpcy5sZW5ndGg9MTtyZXR1cm4gdGhpc31pZih0eXBlb2YgYT09PSJzdHJpbmciKWlmKChkPVRhLmV4ZWMoYSkpJiYoZFsxXXx8IWIpKWlmKGRbMV0pe2Y9Yj9iLm93bmVyRG9jdW1lbnR8fGI6cztpZihhPVhhLmV4ZWMoYSkpaWYoYy5pc1BsYWluT2JqZWN0KGIpKXthPVtzLmNyZWF0ZUVsZW1lbnQoYVsxXSldO2MuZm4uYXR0ci5jYWxsKGEsYix0cnVlKX1lbHNlIGE9W2YuY3JlYXRlRWxlbWVudChhWzFdKV07ZWxzZXthPXNhKFtkWzFdXSxbZl0pO2E9KGEuY2FjaGVhYmxlP2EuZnJhZ21lbnQuY2xvbmVOb2RlKHRydWUpOmEuZnJhZ21lbnQpLmNoaWxkTm9kZXN9cmV0dXJuIGMubWVyZ2UodGhpcyxhKX1lbHNle2lmKGI9cy5nZXRFbGVtZW50QnlJZChkWzJdKSl7aWYoYi5pZCE9PWRbMl0pcmV0dXJuIFQuZmluZChhKTt0aGlzLmxlbmd0aD0xO3RoaXNbMF09Yn10aGlzLmNvbnRleHQ9czt0aGlzLnNlbGVjdG9yPWE7cmV0dXJuIHRoaXN9ZWxzZSBpZighYiYmL15cdyskLy50ZXN0KGEpKXt0aGlzLnNlbGVjdG9yPWE7dGhpcy5jb250ZXh0PXM7YT1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO3JldHVybiBjLm1lcmdlKHRoaXMsYSl9ZWxzZSByZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fFQpLmZpbmQoYSk6YyhiKS5maW5kKGEpO2Vsc2UgaWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiBULnJlYWR5KGEpO2lmKGEuc2VsZWN0b3IhPT13KXt0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3I7dGhpcy5jb250ZXh0PWEuY29udGV4dH1yZXR1cm4gYy5tYWtlQXJyYXkoYSx0aGlzKX0sc2VsZWN0b3I6IiIsanF1ZXJ5OiIxLjQuMiIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBSLmNhbGwodGhpcywwKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhPT1udWxsP3RoaXMudG9BcnJheSgpOmE8MD90aGlzLnNsaWNlKGEpWzBdOnRoaXNbYV19LHB1c2hTdGFjazpmdW5jdGlvbihhLGIsZCl7dmFyIGY9YygpO2MuaXNBcnJheShhKT9iYS5hcHBseShmLGEpOmMubWVyZ2UoZixhKTtmLnByZXZPYmplY3Q9dGhpcztmLmNvbnRleHQ9dGhpcy5jb250ZXh0O2lmKGI9PT0iZmluZCIpZi5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyh0aGlzLnNlbGVjdG9yPyIgIjoiIikrZDtlbHNlIGlmKGIpZi5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyIuIitiKyIoIitkKyIpIjtyZXR1cm4gZn0sZWFjaDpmdW5jdGlvbihhLGIpe3JldHVybiBjLmVhY2godGhpcyxhLGIpfSxyZWFkeTpmdW5jdGlvbihhKXtjLmJpbmRSZWFkeSgpO2lmKGMuaXNSZWFkeSlhLmNhbGwocyxjKTtlbHNlIFEmJlEucHVzaChhKTtyZXR1cm4gdGhpc30sZXE6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT0tMT90aGlzLnNsaWNlKGEpOnRoaXMuc2xpY2UoYSwrYSsxKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUi5hcHBseSh0aGlzLGFyZ3VtZW50cyksInNsaWNlIixSLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGMubWFwKHRoaXMsZnVuY3Rpb24oYixkKXtyZXR1cm4gYS5jYWxsKGIsZCxiKX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8YyhudWxsKX0scHVzaDpiYSxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX07Yy5mbi5pbml0LnByb3RvdHlwZT1jLmZuO2MuZXh0ZW5kPWMuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdfHx7fSxiPTEsZD1hcmd1bWVudHMubGVuZ3RoLGY9ZmFsc2UsZSxqLGksbztpZih0eXBlb2YgYT09PSJib29sZWFuIil7Zj1hO2E9YXJndW1lbnRzWzFdfHx7fTtiPTJ9aWYodHlwZW9mIGEhPT0ib2JqZWN0IiYmIWMuaXNGdW5jdGlvbihhKSlhPXt9O2lmKGQ9PT1iKXthPXRoaXM7LS1ifWZvcig7YjxkO2IrKylpZigoZT1hcmd1bWVudHNbYl0pIT1udWxsKWZvcihqIGluIGUpe2k9YVtqXTtvPWVbal07aWYoYSE9PW8paWYoZiYmbyYmKGMuaXNQbGFpbk9iamVjdChvKXx8Yy5pc0FycmF5KG8pKSl7aT1pJiYoYy5pc1BsYWluT2JqZWN0KGkpfHxjLmlzQXJyYXkoaSkpP2k6Yy5pc0FycmF5KG8pP1tdOnt9O2Fbal09Yy5leHRlbmQoZixpLG8pfWVsc2UgaWYobyE9PXcpYVtqXT1vfXJldHVybiBhfTtjLmV4dGVuZCh7bm9Db25mbGljdDpmdW5jdGlvbihhKXtBLiQ9U2E7aWYoYSlBLmpRdWVyeT1SYTtyZXR1cm4gY30saXNSZWFkeTpmYWxzZSxyZWFkeTpmdW5jdGlvbigpe2lmKCFjLmlzUmVhZHkpe2lmKCFzLmJvZHkpcmV0dXJuIHNldFRpbWVvdXQoYy5yZWFkeSwxMyk7Yy5pc1JlYWR5PXRydWU7aWYoUSl7Zm9yKHZhciBhLGI9MDthPVFbYisrXTspYS5jYWxsKHMsYyk7UT1udWxsfWMuZm4udHJpZ2dlckhhbmRsZXImJmMocykudHJpZ2dlckhhbmRsZXIoInJlYWR5Iil9fSxiaW5kUmVhZHk6ZnVuY3Rpb24oKXtpZigheGEpe3hhPXRydWU7aWYocy5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIilyZXR1cm4gYy5yZWFkeSgpO2lmKHMuYWRkRXZlbnRMaXN0ZW5lcil7cy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixMLGZhbHNlKTtBLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGMucmVhZHksZmFsc2UpfWVsc2UgaWYocy5hdHRhY2hFdmVudCl7cy5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixMKTtBLmF0dGFjaEV2ZW50KCJvbmxvYWQiLGMucmVhZHkpO3ZhciBhPWZhbHNlO3RyeXthPUEuZnJhbWVFbGVtZW50PT1udWxsfWNhdGNoKGIpe31zLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCYmYSYmbWEoKX19fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAkLmNhbGwoYSk9PT0iW29iamVjdCBGdW5jdGlvbl0ifSxpc0FycmF5OmZ1bmN0aW9uKGEpe3JldHVybiAkLmNhbGwoYSk9PT0iW29iamVjdCBBcnJheV0ifSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe2lmKCFhfHwkLmNhbGwoYSkhPT0iW29iamVjdCBPYmplY3RdInx8YS5ub2RlVHlwZXx8YS5zZXRJbnRlcnZhbClyZXR1cm4gZmFsc2U7aWYoYS5jb25zdHJ1Y3RvciYmIWFhLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWFhLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSlyZXR1cm4gZmFsc2U7dmFyIGI7Zm9yKGIgaW4gYSk7cmV0dXJuIGI9PT13fHxhYS5jYWxsKGEsYil9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfSxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBhO30scGFyc2VKU09OOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT09InN0cmluZyJ8fCFhKXJldHVybiBudWxsO2E9Yy50cmltKGEpO2lmKC9eW1xdLDp7fVxzXSokLy50ZXN0KGEucmVwbGFjZSgvXFwoPzpbIlxcXC9iZm5ydF18dVswLTlhLWZBLUZdezR9KS9nLCJAIikucmVwbGFjZSgvIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csIl0iKS5yZXBsYWNlKC8oPzpefDp8LCkoPzpccypcWykrL2csIiIpKSlyZXR1cm4gQS5KU09OJiZBLkpTT04ucGFyc2U/QS5KU09OLnBhcnNlKGEpOihuZXcgRnVuY3Rpb24oInJldHVybiAiKwphKSkoKTtlbHNlIGMuZXJyb3IoIkludmFsaWQgSlNPTjogIithKX0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXtpZihhJiZWYS50ZXN0KGEpKXt2YXIgYj1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF18fHMuZG9jdW1lbnRFbGVtZW50LGQ9cy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLnR5cGU9InRleHQvamF2YXNjcmlwdCI7aWYoYy5zdXBwb3J0LnNjcmlwdEV2YWwpZC5hcHBlbmRDaGlsZChzLmNyZWF0ZVRleHROb2RlKGEpKTtlbHNlIGQudGV4dD1hO2IuaW5zZXJ0QmVmb3JlKGQsYi5maXJzdENoaWxkKTtiLnJlbW92ZUNoaWxkKGQpfX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT09Yi50b1VwcGVyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixkKXt2YXIgZixlPTAsaj1hLmxlbmd0aCxpPWo9PT13fHxjLmlzRnVuY3Rpb24oYSk7aWYoZClpZihpKWZvcihmIGluIGEpe2lmKGIuYXBwbHkoYVtmXSxkKT09PWZhbHNlKWJyZWFrfWVsc2UgZm9yKDtlPGo7KXtpZihiLmFwcGx5KGFbZSsrXSxkKT09PWZhbHNlKWJyZWFrfWVsc2UgaWYoaSlmb3IoZiBpbiBhKXtpZihiLmNhbGwoYVtmXSxmLGFbZl0pPT09ZmFsc2UpYnJlYWt9ZWxzZSBmb3IoZD1hWzBdO2U8aiYmYi5jYWxsKGQsZSxkKSE9PWZhbHNlO2Q9YVsrK2VdKTtyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8IiIpLnJlcGxhY2UoV2EsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXtiPWJ8fFtdO2lmKGEhPW51bGwpYS5sZW5ndGg9PW51bGx8fHR5cGVvZiBhPT09InN0cmluZyJ8fGMuaXNGdW5jdGlvbihhKXx8dHlwZW9mIGEhPT0iZnVuY3Rpb24iJiZhLnNldEludGVydmFsP2JhLmNhbGwoYixhKTpjLm1lcmdlKGIsYSk7cmV0dXJuIGJ9LGluQXJyYXk6ZnVuY3Rpb24oYSxiKXtpZihiLmluZGV4T2YpcmV0dXJuIGIuaW5kZXhPZihhKTtmb3IodmFyIGQ9MCxmPWIubGVuZ3RoO2Q8ZjtkKyspaWYoYltkXT09PWEpcmV0dXJuIGQ7cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5sZW5ndGgsZj0wO2lmKHR5cGVvZiBiLmxlbmd0aD09PSJudW1iZXIiKWZvcih2YXIgZT1iLmxlbmd0aDtmPGU7ZisrKWFbZCsrXT1iW2ZdO2Vsc2UgZm9yKDtiW2ZdIT09dzspYVtkKytdPWJbZisrXTthLmxlbmd0aD1kO3JldHVybiBhfSxncmVwOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGY9W10sZT0wLGo9YS5sZW5ndGg7ZTxqO2UrKykhZCE9PSFiKGFbZV0sZSkmJmYucHVzaChhW2VdKTtyZXR1cm4gZn0sbWFwOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGY9W10sZSxqPTAsaT1hLmxlbmd0aDtqPGk7aisrKXtlPWIoYVtqXSxqLGQpO2lmKGUhPW51bGwpZltmLmxlbmd0aF09ZX1yZXR1cm4gZi5jb25jYXQuYXBwbHkoW10sZil9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIsZCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpaWYodHlwZW9mIGI9PT0ic3RyaW5nIil7ZD1hO2E9ZFtiXTtiPXd9ZWxzZSBpZihiJiYhYy5pc0Z1bmN0aW9uKGIpKXtkPWI7Yj13fWlmKCFiJiZhKWI9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShkfHx0aGlzLGFyZ3VtZW50cyl9O2lmKGEpYi5ndWlkPWEuZ3VpZD1hLmd1aWR8fGIuZ3VpZHx8Yy5ndWlkKys7cmV0dXJuIGJ9LHVhTWF0Y2g6ZnVuY3Rpb24oYSl7YT1hLnRvTG93ZXJDYXNlKCk7YT0vKHdlYmtpdClbIFwvXShbXHcuXSspLy5leGVjKGEpfHwvKG9wZXJhKSg/Oi4qdmVyc2lvbik/WyBcL10oW1x3Ll0rKS8uZXhlYyhhKXx8Lyhtc2llKSAoW1x3Ll0rKS8uZXhlYyhhKXx8IS9jb21wYXRpYmxlLy50ZXN0KGEpJiYvKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspKT8vLmV4ZWMoYSl8fFtdO3JldHVybnticm93c2VyOmFbMV18fCIiLHZlcnNpb246YVsyXXx8IjAifX0sYnJvd3Nlcjp7fX0pO1A9Yy51YU1hdGNoKFApO2lmKFAuYnJvd3Nlcil7Yy5icm93c2VyW1AuYnJvd3Nlcl09dHJ1ZTtjLmJyb3dzZXIudmVyc2lvbj1QLnZlcnNpb259aWYoYy5icm93c2VyLndlYmtpdCljLmJyb3dzZXIuc2FmYXJpPXRydWU7aWYoeWEpYy5pbkFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHlhLmNhbGwoYixhKX07VD1jKHMpO2lmKHMuYWRkRXZlbnRMaXN0ZW5lcilMPWZ1bmN0aW9uKCl7cy5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixMLGZhbHNlKTtjLnJlYWR5KCl9O2Vsc2UgaWYocy5hdHRhY2hFdmVudClMPWZ1bmN0aW9uKCl7aWYocy5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7cy5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixMKTtjLnJlYWR5KCl9fTsoZnVuY3Rpb24oKXtjLnN1cHBvcnQ9e307dmFyIGE9cy5kb2N1bWVudEVsZW1lbnQsYj1zLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGQ9cy5jcmVhdGVFbGVtZW50KCJkaXYiKSxmPSJzY3JpcHQiK0ooKTtkLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2QuaW5uZXJIVE1MPSIgICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnIHN0eWxlPSdjb2xvcjpyZWQ7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41NTsnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+Ijt2YXIgZT1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksaj1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07aWYoISghZXx8IWUubGVuZ3RofHwhaikpe2Muc3VwcG9ydD17bGVhZGluZ1doaXRlc3BhY2U6ZC5maXJzdENoaWxkLm5vZGVUeXBlPT09Myx0Ym9keTohZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZTohIWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGgsc3R5bGU6L3JlZC8udGVzdChqLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksaHJlZk5vcm1hbGl6ZWQ6ai5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIvYSIsb3BhY2l0eTovXjAuNTUkLy50ZXN0KGouc3R5bGUub3BhY2l0eSksY3NzRmxvYXQ6ISFqLnN0eWxlLmNzc0Zsb2F0LGNoZWNrT246ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXS52YWx1ZT09PSJvbiIsb3B0U2VsZWN0ZWQ6cy5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKS5hcHBlbmRDaGlsZChzLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKS5zZWxlY3RlZCxwYXJlbnROb2RlOmQucmVtb3ZlQ2hpbGQoZC5hcHBlbmRDaGlsZChzLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSkucGFyZW50Tm9kZT09PW51bGwsZGVsZXRlRXhwYW5kbzp0cnVlLGNoZWNrQ2xvbmU6ZmFsc2Usc2NyaXB0RXZhbDpmYWxzZSxub0Nsb25lRXZlbnQ6dHJ1ZSxib3hNb2RlbDpudWxsfTtiLnR5cGU9InRleHQvamF2YXNjcmlwdCI7dHJ5e2IuYXBwZW5kQ2hpbGQocy5jcmVhdGVUZXh0Tm9kZSgid2luZG93LiIrZisiPTE7IikpfWNhdGNoKGkpe31hLmluc2VydEJlZm9yZShiLGEuZmlyc3RDaGlsZCk7aWYoQVtmXSl7Yy5zdXBwb3J0LnNjcmlwdEV2YWw9dHJ1ZTtkZWxldGUgQVtmXX10cnl7ZGVsZXRlIGIudGVzdH1jYXRjaChvKXtjLnN1cHBvcnQuZGVsZXRlRXhwYW5kbz1mYWxzZX1hLnJlbW92ZUNoaWxkKGIpO2lmKGQuYXR0YWNoRXZlbnQmJmQuZmlyZUV2ZW50KXtkLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixmdW5jdGlvbiBrKCl7Yy5zdXBwb3J0Lm5vQ2xvbmVFdmVudD1mYWxzZTtkLmRldGFjaEV2ZW50KCJvbmNsaWNrIixrKX0pO2QuY2xvbmVOb2RlKHRydWUpLmZpcmVFdmVudCgib25jbGljayIpfWQ9cy5jcmVhdGVFbGVtZW50KCJkaXYiKTtkLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdyYWRpb3Rlc3QnIGNoZWNrZWQ9J2NoZWNrZWQnLz4iO2E9cy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5hcHBlbmRDaGlsZChkLmZpcnN0Q2hpbGQpO2Muc3VwcG9ydC5jaGVja0Nsb25lPWEuY2xvbmVOb2RlKHRydWUpLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuY2hlY2tlZDtjKGZ1bmN0aW9uKCl7dmFyIGs9cy5jcmVhdGVFbGVtZW50KCJkaXYiKTtrLnN0eWxlLndpZHRoPWsuc3R5bGUucGFkZGluZ0xlZnQ9IjFweCI7cy5ib2R5LmFwcGVuZENoaWxkKGspO2MuYm94TW9kZWw9Yy5zdXBwb3J0LmJveE1vZGVsPWsub2Zmc2V0V2lkdGg9PT0yO3MuYm9keS5yZW1vdmVDaGlsZChrKS5zdHlsZS5kaXNwbGF5PSJub25lIn0pO2E9ZnVuY3Rpb24oayl7dmFyIG49cy5jcmVhdGVFbGVtZW50KCJkaXYiKTtrPSJvbiIrazt2YXIgcj1rIGluIG47aWYoIXIpe24uc2V0QXR0cmlidXRlKGssInJldHVybjsiKTtyPXR5cGVvZiBuW2tdPT09ImZ1bmN0aW9uIn1yZXR1cm4gcn07Yy5zdXBwb3J0LnN1Ym1pdEJ1YmJsZXM9YSgic3VibWl0Iik7Yy5zdXBwb3J0LmNoYW5nZUJ1YmJsZXM9YSgiY2hhbmdlIik7YT1iPWQ9ZT1qPW51bGx9fSkoKTtjLnByb3BzPXsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIixyZWFkb25seToicmVhZE9ubHkiLG1heGxlbmd0aDoibWF4TGVuZ3RoIixjZWxsc3BhY2luZzoiY2VsbFNwYWNpbmciLHJvd3NwYW46InJvd1NwYW4iLGNvbHNwYW46ImNvbFNwYW4iLHRhYmluZGV4OiJ0YWJJbmRleCIsdXNlbWFwOiJ1c2VNYXAiLGZyYW1lYm9yZGVyOiJmcmFtZUJvcmRlciJ9O3ZhciBHPSJqUXVlcnkiK0ooKSxZYT0wLHphPXt9O2MuZXh0ZW5kKHtjYWNoZTp7fSxleHBhbmRvOkcsbm9EYXRhOntlbWJlZDp0cnVlLG9iamVjdDp0cnVlLGFwcGxldDp0cnVlfSxkYXRhOmZ1bmN0aW9uKGEsYixkKXtpZighKGEubm9kZU5hbWUmJmMubm9EYXRhW2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXthPWE9PUE/emE6YTt2YXIgZj1hW0ddLGU9Yy5jYWNoZTtpZighZiYmdHlwZW9mIGI9PT0ic3RyaW5nIiYmZD09PXcpcmV0dXJuIG51bGw7Znx8KGY9KytZYSk7aWYodHlwZW9mIGI9PT0ib2JqZWN0Iil7YVtHXT1mO2VbZl09Yy5leHRlbmQodHJ1ZSx7fSxiKX1lbHNlIGlmKCFlW2ZdKXthW0ddPWY7ZVtmXT17fX1hPWVbZl07aWYoZCE9PXcpYVtiXT1kO3JldHVybiB0eXBlb2YgYj09PSJzdHJpbmciP2FbYl06YX19LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtpZighKGEubm9kZU5hbWUmJmMubm9EYXRhW2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXthPWE9PUE/emE6YTt2YXIgZD1hW0ddLGY9Yy5jYWNoZSxlPWZbZF07aWYoYil7aWYoZSl7ZGVsZXRlIGVbYl07Yy5pc0VtcHR5T2JqZWN0KGUpJiZjLnJlbW92ZURhdGEoYSl9fWVsc2V7aWYoYy5zdXBwb3J0LmRlbGV0ZUV4cGFuZG8pZGVsZXRlIGFbYy5leHBhbmRvXTtlbHNlIGEucmVtb3ZlQXR0cmlidXRlJiZhLnJlbW92ZUF0dHJpYnV0ZShjLmV4cGFuZG8pO2RlbGV0ZSBmW2RdfX19fSk7Yy5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYT09PSJ1bmRlZmluZWQiJiZ0aGlzLmxlbmd0aClyZXR1cm4gYy5kYXRhKHRoaXNbMF0pO2Vsc2UgaWYodHlwZW9mIGE9PT0ib2JqZWN0IilyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5kYXRhKHRoaXMsYSl9KTt2YXIgZD1hLnNwbGl0KCIuIik7ZFsxXT1kWzFdPyIuIitkWzFdOiIiO2lmKGI9PT13KXt2YXIgZj10aGlzLnRyaWdnZXJIYW5kbGVyKCJnZXREYXRhIitkWzFdKyIhIixbZFswXV0pO2lmKGY9PT13JiZ0aGlzLmxlbmd0aClmPWMuZGF0YSh0aGlzWzBdLGEpO3JldHVybiBmPT09dyYmZFsxXT90aGlzLmRhdGEoZFswXSk6Zn1lbHNlIHJldHVybiB0aGlzLnRyaWdnZXIoInNldERhdGEiK2RbMV0rIiEiLFtkWzBdLGJdKS5lYWNoKGZ1bmN0aW9uKCl7Yy5kYXRhKHRoaXMsYSxiKX0pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pO2MuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsZCl7aWYoYSl7Yj0oYnx8ImZ4IikrInF1ZXVlIjt2YXIgZj1jLmRhdGEoYSxiKTtpZighZClyZXR1cm4gZnx8W107aWYoIWZ8fGMuaXNBcnJheShkKSlmPWMuZGF0YShhLGIsYy5tYWtlQXJyYXkoZCkpO2Vsc2UgZi5wdXNoKGQpO3JldHVybiBmfX0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgZD1jLnF1ZXVlKGEsYiksZj1kLnNoaWZ0KCk7aWYoZj09PSJpbnByb2dyZXNzIilmPWQuc2hpZnQoKTtpZihmKXtiPT09ImZ4IiYmZC51bnNoaWZ0KCJpbnByb2dyZXNzIik7Zi5jYWxsKGEsZnVuY3Rpb24oKXtjLmRlcXVldWUoYSxiKX0pfX19KTtjLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYSE9PSJzdHJpbmciKXtiPWE7YT0iZngifWlmKGI9PT13KXJldHVybiBjLnF1ZXVlKHRoaXNbMF0sYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWMucXVldWUodGhpcyxhLGIpO2E9PT0iZngiJiZkWzBdIT09ImlucHJvZ3Jlc3MiJiZjLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLmRlcXVldWUodGhpcyxhKX0pfSxkZWxheTpmdW5jdGlvbihhLGIpe2E9Yy5meD9jLmZ4LnNwZWVkc1thXXx8YTphO2I9Ynx8ImZ4IjtyZXR1cm4gdGhpcy5xdWV1ZShiLGZ1bmN0aW9uKCl7dmFyIGQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKGQsYil9LGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9fSk7dmFyIEFhPS9bXG5cdF0vZyxjYT0vXHMrLyxaYT0vXHIvZywkYT0vaHJlZnxzcmN8c3R5bGUvLGFiPS8oYnV0dG9ufGlucHV0KS9pLGJiPS8oYnV0dG9ufGlucHV0fG9iamVjdHxzZWxlY3R8dGV4dGFyZWEpL2ksY2I9L14oYXxhcmVhKSQvaSxCYT0vcmFkaW98Y2hlY2tib3gvO2MuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFgodGhpcyxhLGIsdHJ1ZSxjLmF0dHIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLmF0dHIodGhpcyxhLCIiKTt0aGlzLm5vZGVUeXBlPT09MSYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSl9KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7dmFyIHI9Yyh0aGlzKTtyLmFkZENsYXNzKGEuY2FsbCh0aGlzLG4sci5hdHRyKCJjbGFzcyIpKSl9KTtpZihhJiZ0eXBlb2YgYT09PSJzdHJpbmciKWZvcih2YXIgYj0oYXx8IiIpLnNwbGl0KGNhKSxkPTAsZj10aGlzLmxlbmd0aDtkPGY7ZCsrKXt2YXIgZT10aGlzW2RdO2lmKGUubm9kZVR5cGU9PT0xKWlmKGUuY2xhc3NOYW1lKXtmb3IodmFyIGo9IiAiK2UuY2xhc3NOYW1lKyIgIixpPWUuY2xhc3NOYW1lLG89MCxrPWIubGVuZ3RoO288aztvKyspaWYoai5pbmRleE9mKCIgIitiW29dKyIgIik8MClpKz0iICIrYltvXTtlLmNsYXNzTmFtZT1jLnRyaW0oaSl9ZWxzZSBlLmNsYXNzTmFtZT1hfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXtpZihjLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihrKXt2YXIgbj1jKHRoaXMpO24ucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsayxuLmF0dHIoImNsYXNzIikpKX0pO2lmKGEmJnR5cGVvZiBhPT09InN0cmluZyJ8fGE9PT13KWZvcih2YXIgYj0oYXx8IiIpLnNwbGl0KGNhKSxkPTAsZj10aGlzLmxlbmd0aDtkPGY7ZCsrKXt2YXIgZT10aGlzW2RdO2lmKGUubm9kZVR5cGU9PT0xJiZlLmNsYXNzTmFtZSlpZihhKXtmb3IodmFyIGo9KCIgIitlLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoQWEsIiAiKSxpPTAsbz1iLmxlbmd0aDtpPG87aSsrKWo9ai5yZXBsYWNlKCIgIitiW2ldKyIgIiwiICIpO2UuY2xhc3NOYW1lPWMudHJpbShqKX1lbHNlIGUuY2xhc3NOYW1lPSIifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBkPXR5cGVvZiBhLGY9dHlwZW9mIGI9PT0iYm9vbGVhbiI7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7dmFyIGo9Yyh0aGlzKTtqLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGUsai5hdHRyKCJjbGFzcyIpLGIpLGIpfSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGQ9PT0ic3RyaW5nIilmb3IodmFyIGUsaj0wLGk9Yyh0aGlzKSxvPWIsaz1hLnNwbGl0KGNhKTtlPWtbaisrXTspe289Zj9vOiFpLmhhc0NsYXNzKGUpO2lbbz8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKGUpfWVsc2UgaWYoZD09PSJ1bmRlZmluZWQifHxkPT09ImJvb2xlYW4iKXt0aGlzLmNsYXNzTmFtZSYmYy5kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iLHRoaXMuY2xhc3NOYW1lKTt0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PWZhbHNlPyIiOmMuZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIifX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXthPSIgIithKyIgIjtmb3IodmFyIGI9MCxkPXRoaXMubGVuZ3RoO2I8ZDtiKyspaWYoKCIgIit0aGlzW2JdLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoQWEsIiAiKS5pbmRleE9mKGEpPi0xKXJldHVybiB0cnVlO3JldHVybiBmYWxzZX0sdmFsOmZ1bmN0aW9uKGEpe2lmKGE9PT13KXt2YXIgYj10aGlzWzBdO2lmKGIpe2lmKGMubm9kZU5hbWUoYiwib3B0aW9uIikpcmV0dXJuKGIuYXR0cmlidXRlcy52YWx1ZXx8e30pLnNwZWNpZmllZD9iLnZhbHVlOmIudGV4dDtpZihjLm5vZGVOYW1lKGIsInNlbGVjdCIpKXt2YXIgZD1iLnNlbGVjdGVkSW5kZXgsZj1bXSxlPWIub3B0aW9ucztiPWIudHlwZT09PSJzZWxlY3Qtb25lIjtpZihkPDApcmV0dXJuIG51bGw7dmFyIGo9Yj9kOjA7Zm9yKGQ9Yj9kKzE6ZS5sZW5ndGg7ajxkO2orKyl7dmFyIGk9ZVtqXTtpZihpLnNlbGVjdGVkKXthPWMoaSkudmFsKCk7aWYoYilyZXR1cm4gYTtmLnB1c2goYSl9fXJldHVybiBmfWlmKEJhLnRlc3QoYi50eXBlKSYmIWMuc3VwcG9ydC5jaGVja09uKXJldHVybiBiLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PW51bGw/Im9uIjpiLnZhbHVlO3JldHVybihiLnZhbHVlfHwiIikucmVwbGFjZShaYSwiIil9cmV0dXJuIHd9dmFyIG89Yy5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oayl7dmFyIG49Yyh0aGlzKSxyPWE7aWYodGhpcy5ub2RlVHlwZT09PTEpe2lmKG8pcj1hLmNhbGwodGhpcyxrLG4udmFsKCkpO2lmKHR5cGVvZiByPT09Im51bWJlciIpcis9IiI7aWYoYy5pc0FycmF5KHIpJiZCYS50ZXN0KHRoaXMudHlwZSkpdGhpcy5jaGVja2VkPWMuaW5BcnJheShuLnZhbCgpLHIpPj0wO2Vsc2UgaWYoYy5ub2RlTmFtZSh0aGlzLCJzZWxlY3QiKSl7dmFyIHU9Yy5tYWtlQXJyYXkocik7Yygib3B0aW9uIix0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD1jLmluQXJyYXkoYyh0aGlzKS52YWwoKSx1KT49MH0pO2lmKCF1Lmxlbmd0aCl0aGlzLnNlbGVjdGVkSW5kZXg9LTF9ZWxzZSB0aGlzLnZhbHVlPXJ9fSl9fSk7Yy5leHRlbmQoe2F0dHJGbjp7dmFsOnRydWUsY3NzOnRydWUsaHRtbDp0cnVlLHRleHQ6dHJ1ZSxkYXRhOnRydWUsd2lkdGg6dHJ1ZSxoZWlnaHQ6dHJ1ZSxvZmZzZXQ6dHJ1ZX0sYXR0cjpmdW5jdGlvbihhLGIsZCxmKXtpZighYXx8YS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04KXJldHVybiB3O2lmKGYmJmIgaW4gYy5hdHRyRm4pcmV0dXJuIGMoYSlbYl0oZCk7Zj1hLm5vZGVUeXBlIT09MXx8IWMuaXNYTUxEb2MoYSk7dmFyIGU9ZCE9PXc7Yj1mJiZjLnByb3BzW2JdfHxiO2lmKGEubm9kZVR5cGU9PT0xKXt2YXIgaj0kYS50ZXN0KGIpO2lmKGIgaW4gYSYmZiYmIWope2lmKGUpe2I9PT0idHlwZSImJmFiLnRlc3QoYS5ub2RlTmFtZSkmJmEucGFyZW50Tm9kZSYmYy5lcnJvcigidHlwZSBwcm9wZXJ0eSBjYW4ndCBiZSBjaGFuZ2VkIik7YVtiXT1kfWlmKGMubm9kZU5hbWUoYSwiZm9ybSIpJiZhLmdldEF0dHJpYnV0ZU5vZGUoYikpcmV0dXJuIGEuZ2V0QXR0cmlidXRlTm9kZShiKS5ub2RlVmFsdWU7aWYoYj09PSJ0YWJJbmRleCIpcmV0dXJuKGI9YS5nZXRBdHRyaWJ1dGVOb2RlKCJ0YWJJbmRleCIpKSYmYi5zcGVjaWZpZWQ/Yi52YWx1ZTpiYi50ZXN0KGEubm9kZU5hbWUpfHxjYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDp3O3JldHVybiBhW2JdfWlmKCFjLnN1cHBvcnQuc3R5bGUmJmYmJmI9PT0ic3R5bGUiKXtpZihlKWEuc3R5bGUuY3NzVGV4dD0iIitkO3JldHVybiBhLnN0eWxlLmNzc1RleHR9ZSYmYS5zZXRBdHRyaWJ1dGUoYiwiIitkKTthPSFjLnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQmJmYmJmo/YS5nZXRBdHRyaWJ1dGUoYiwyKTphLmdldEF0dHJpYnV0ZShiKTtyZXR1cm4gYT09PW51bGw/dzphfXJldHVybiBjLnN0eWxlKGEsYixkKX19KTt2YXIgTz0vXC4oLiopJC8sZGI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvW15cd1xzXC5cfGBdL2csZnVuY3Rpb24oYil7cmV0dXJuIlxcIitifSl9O2MuZXZlbnQ9e2FkZDpmdW5jdGlvbihhLGIsZCxmKXtpZighKGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OCkpe2lmKGEuc2V0SW50ZXJ2YWwmJmEhPT1BJiYhYS5mcmFtZUVsZW1lbnQpYT1BO3ZhciBlLGo7aWYoZC5oYW5kbGVyKXtlPWQ7ZD1lLmhhbmRsZXJ9aWYoIWQuZ3VpZClkLmd1aWQ9Yy5ndWlkKys7aWYoaj1jLmRhdGEoYSkpe3ZhciBpPWouZXZlbnRzPWouZXZlbnRzfHx7fSxvPWouaGFuZGxlO2lmKCFvKWouaGFuZGxlPW89ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGMhPT0idW5kZWZpbmVkIiYmIWMuZXZlbnQudHJpZ2dlcmVkP2MuZXZlbnQuaGFuZGxlLmFwcGx5KG8uZWxlbSxhcmd1bWVudHMpOnd9O28uZWxlbT1hO2I9Yi5zcGxpdCgiICIpO2Zvcih2YXIgayxuPTAscjtrPWJbbisrXTspe2o9ZT9jLmV4dGVuZCh7fSxlKTp7aGFuZGxlcjpkLGRhdGE6Zn07aWYoay5pbmRleE9mKCIuIik+LTEpe3I9ay5zcGxpdCgiLiIpO2s9ci5zaGlmdCgpO2oubmFtZXNwYWNlPXIuc2xpY2UoMCkuc29ydCgpLmpvaW4oIi4iKX1lbHNle3I9W107ai5uYW1lc3BhY2U9IiJ9ai50eXBlPWs7ai5ndWlkPWQuZ3VpZDt2YXIgdT1pW2tdLHo9Yy5ldmVudC5zcGVjaWFsW2tdfHx7fTtpZighdSl7dT1pW2tdPVtdO2lmKCF6LnNldHVwfHx6LnNldHVwLmNhbGwoYSxmLHIsbyk9PT1mYWxzZSlpZihhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGssbyxmYWxzZSk7ZWxzZSBhLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrayxvKX1pZih6LmFkZCl7ei5hZGQuY2FsbChhLGopO2lmKCFqLmhhbmRsZXIuZ3VpZClqLmhhbmRsZXIuZ3VpZD1kLmd1aWR9dS5wdXNoKGopO2MuZXZlbnQuZ2xvYmFsW2tdPXRydWV9YT1udWxsfX19LGdsb2JhbDp7fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGQsZil7aWYoIShhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpKXt2YXIgZSxqPTAsaSxvLGssbixyLHUsej1jLmRhdGEoYSksQz16JiZ6LmV2ZW50cztpZih6JiZDKXtpZihiJiZiLnR5cGUpe2Q9Yi5oYW5kbGVyO2I9Yi50eXBlfWlmKCFifHx0eXBlb2YgYj09PSJzdHJpbmciJiZiLmNoYXJBdCgwKT09PSIuIil7Yj1ifHwiIjtmb3IoZSBpbiBDKWMuZXZlbnQucmVtb3ZlKGEsZStiKX1lbHNle2ZvcihiPWIuc3BsaXQoIiAiKTtlPWJbaisrXTspe249ZTtpPWUuaW5kZXhPZigiLiIpPDA7bz1bXTtpZighaSl7bz1lLnNwbGl0KCIuIik7ZT1vLnNoaWZ0KCk7az1uZXcgUmVnRXhwKCIoXnxcXC4pIitjLm1hcChvLnNsaWNlKDApLnNvcnQoKSxkYikuam9pbigiXFwuKD86LipcXC4pPyIpKyIoXFwufCQpIil9aWYocj1DW2VdKWlmKGQpe249Yy5ldmVudC5zcGVjaWFsW2VdfHx7fTtmb3IoQj1mfHwwO0I8ci5sZW5ndGg7QisrKXt1PXJbQl07aWYoZC5ndWlkPT09dS5ndWlkKXtpZihpfHxrLnRlc3QodS5uYW1lc3BhY2UpKXtmPT1udWxsJiZyLnNwbGljZShCLS0sMSk7bi5yZW1vdmUmJm4ucmVtb3ZlLmNhbGwoYSx1KX1pZihmIT1udWxsKWJyZWFrfX1pZihyLmxlbmd0aD09PTB8fGYhPW51bGwmJnIubGVuZ3RoPT09MSl7aWYoIW4udGVhcmRvd258fG4udGVhcmRvd24uY2FsbChhLG8pPT09ZmFsc2UpQ2EoYSxlLHouaGFuZGxlKTtkZWxldGUgQ1tlXX19ZWxzZSBmb3IodmFyIEI9MDtCPHIubGVuZ3RoO0IrKyl7dT1yW0JdO2lmKGl8fGsudGVzdCh1Lm5hbWVzcGFjZSkpe2MuZXZlbnQucmVtb3ZlKGEsbix1LmhhbmRsZXIsQik7ci5zcGxpY2UoQi0tLDEpfX19aWYoYy5pc0VtcHR5T2JqZWN0KEMpKXtpZihiPXouaGFuZGxlKWIuZWxlbT1udWxsO2RlbGV0ZSB6LmV2ZW50cztkZWxldGUgei5oYW5kbGU7Yy5pc0VtcHR5T2JqZWN0KHopJiZjLnJlbW92ZURhdGEoYSl9fX19fSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYixkLGYpe3ZhciBlPWEudHlwZXx8YTtpZighZil7YT10eXBlb2YgYT09PSJvYmplY3QiP2FbR10/YTpjLmV4dGVuZChjLkV2ZW50KGUpLGEpOmMuRXZlbnQoZSk7aWYoZS5pbmRleE9mKCIhIik+PTApe2EudHlwZT1lPWUuc2xpY2UoMCwtMSk7YS5leGNsdXNpdmU9dHJ1ZX1pZighZCl7YS5zdG9wUHJvcGFnYXRpb24oKTtjLmV2ZW50Lmdsb2JhbFtlXSYmYy5lYWNoKGMuY2FjaGUsZnVuY3Rpb24oKXt0aGlzLmV2ZW50cyYmdGhpcy5ldmVudHNbZV0mJmMuZXZlbnQudHJpZ2dlcihhLGIsdGhpcy5oYW5kbGUuZWxlbSl9KX1pZighZHx8ZC5ub2RlVHlwZT09PTN8fGQubm9kZVR5cGU9PT04KXJldHVybiB3O2EucmVzdWx0PXc7YS50YXJnZXQ9ZDtiPWMubWFrZUFycmF5KGIpO2IudW5zaGlmdChhKX1hLmN1cnJlbnRUYXJnZXQ9ZDsoZj1jLmRhdGEoZCwiaGFuZGxlIikpJiZmLmFwcGx5KGQsYik7Zj1kLnBhcmVudE5vZGV8fGQub3duZXJEb2N1bWVudDt0cnl7aWYoIShkJiZkLm5vZGVOYW1lJiZjLm5vRGF0YVtkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSlpZihkWyJvbiIrZV0mJmRbIm9uIitlXS5hcHBseShkLGIpPT09ZmFsc2UpYS5yZXN1bHQ9ZmFsc2V9Y2F0Y2goail7fWlmKCFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYpYy5ldmVudC50cmlnZ2VyKGEsYixmLHRydWUpO2Vsc2UgaWYoIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpe2Y9YS50YXJnZXQ7dmFyIGksbz1jLm5vZGVOYW1lKGYsImEiKSYmZT09PSJjbGljayIsaz1jLmV2ZW50LnNwZWNpYWxbZV18fHt9O2lmKCghay5fZGVmYXVsdHx8ay5fZGVmYXVsdC5jYWxsKGQsYSk9PT1mYWxzZSkmJiFvJiYhKGYmJmYubm9kZU5hbWUmJmMubm9EYXRhW2Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXt0cnl7aWYoZltlXSl7aWYoaT1mWyJvbiIrZV0pZlsib24iK2VdPW51bGw7Yy5ldmVudC50cmlnZ2VyZWQ9dHJ1ZTtmW2VdKCl9fWNhdGNoKG4pe31pZihpKWZbIm9uIitlXT1pO2MuZXZlbnQudHJpZ2dlcmVkPWZhbHNlfX19LGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYixkLGYsZTthPWFyZ3VtZW50c1swXT1jLmV2ZW50LmZpeChhfHxBLmV2ZW50KTthLmN1cnJlbnRUYXJnZXQ9dGhpcztiPWEudHlwZS5pbmRleE9mKCIuIik8MCYmIWEuZXhjbHVzaXZlO2lmKCFiKXtkPWEudHlwZS5zcGxpdCgiLiIpO2EudHlwZT1kLnNoaWZ0KCk7Zj1uZXcgUmVnRXhwKCIoXnxcXC4pIitkLnNsaWNlKDApLnNvcnQoKS5qb2luKCJcXC4oPzouKlxcLik/IikrIihcXC58JCkiKX1lPWMuZGF0YSh0aGlzLCJldmVudHMiKTtkPWVbYS50eXBlXTtpZihlJiZkKXtkPWQuc2xpY2UoMCk7ZT0wO2Zvcih2YXIgaj1kLmxlbmd0aDtlPGo7ZSsrKXt2YXIgaT1kW2VdO2lmKGJ8fGYudGVzdChpLm5hbWVzcGFjZSkpe2EuaGFuZGxlcj1pLmhhbmRsZXI7YS5kYXRhPWkuZGF0YTthLmhhbmRsZU9iaj1pO2k9aS5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihpIT09dyl7YS5yZXN1bHQ9aTtpZihpPT09ZmFsc2Upe2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpfX1pZihhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpYnJlYWt9fX1yZXR1cm4gYS5yZXN1bHR9LHByb3BzOiJhbHRLZXkgYXR0ckNoYW5nZSBhdHRyTmFtZSBidWJibGVzIGJ1dHRvbiBjYW5jZWxhYmxlIGNoYXJDb2RlIGNsaWVudFggY2xpZW50WSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZGF0YSBkZXRhaWwgZXZlbnRQaGFzZSBmcm9tRWxlbWVudCBoYW5kbGVyIGtleUNvZGUgbGF5ZXJYIGxheWVyWSBtZXRhS2V5IG5ld1ZhbHVlIG9mZnNldFggb2Zmc2V0WSBvcmlnaW5hbFRhcmdldCBwYWdlWCBwYWdlWSBwcmV2VmFsdWUgcmVsYXRlZE5vZGUgcmVsYXRlZFRhcmdldCBzY3JlZW5YIHNjcmVlblkgc2hpZnRLZXkgc3JjRWxlbWVudCB0YXJnZXQgdG9FbGVtZW50IHZpZXcgd2hlZWxEZWx0YSB3aGljaCIuc3BsaXQoIiAiKSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtHXSlyZXR1cm4gYTt2YXIgYj1hO2E9Yy5FdmVudChiKTtmb3IodmFyIGQ9dGhpcy5wcm9wcy5sZW5ndGgsZjtkOyl7Zj10aGlzLnByb3BzWy0tZF07YVtmXT1iW2ZdfWlmKCFhLnRhcmdldClhLnRhcmdldD1hLnNyY0VsZW1lbnR8fHM7aWYoYS50YXJnZXQubm9kZVR5cGU9PT0zKWEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGU7aWYoIWEucmVsYXRlZFRhcmdldCYmYS5mcm9tRWxlbWVudClhLnJlbGF0ZWRUYXJnZXQ9YS5mcm9tRWxlbWVudD09PWEudGFyZ2V0P2EudG9FbGVtZW50OmEuZnJvbUVsZW1lbnQ7aWYoYS5wYWdlWD09bnVsbCYmYS5jbGllbnRYIT1udWxsKXtiPXMuZG9jdW1lbnRFbGVtZW50O2Q9cy5ib2R5O2EucGFnZVg9YS5jbGllbnRYKyhiJiZiLnNjcm9sbExlZnR8fGQmJmQuc2Nyb2xsTGVmdHx8MCktKGImJmIuY2xpZW50TGVmdHx8ZCYmZC5jbGllbnRMZWZ0fHwwKTthLnBhZ2VZPWEuY2xpZW50WSsoYiYmYi5zY3JvbGxUb3B8fGQmJmQuc2Nyb2xsVG9wfHwwKS0oYiYmYi5jbGllbnRUb3B8fGQmJmQuY2xpZW50VG9wfHwwKX1pZighYS53aGljaCYmKGEuY2hhckNvZGV8fGEuY2hhckNvZGU9PT0wP2EuY2hhckNvZGU6YS5rZXlDb2RlKSlhLndoaWNoPWEuY2hhckNvZGV8fGEua2V5Q29kZTtpZighYS5tZXRhS2V5JiZhLmN0cmxLZXkpYS5tZXRhS2V5PWEuY3RybEtleTtpZighYS53aGljaCYmYS5idXR0b24hPT13KWEud2hpY2g9YS5idXR0b24mMT8xOmEuYnV0dG9uJjI/MzphLmJ1dHRvbiY0PzI6MDtyZXR1cm4gYX0sZ3VpZDoxRTgscHJveHk6Yy5wcm94eSxzcGVjaWFsOntyZWFkeTp7c2V0dXA6Yy5iaW5kUmVhZHksdGVhcmRvd246Yy5ub29wfSxsaXZlOnthZGQ6ZnVuY3Rpb24oYSl7Yy5ldmVudC5hZGQodGhpcyxhLm9yaWdUeXBlLGMuZXh0ZW5kKHt9LGEse2hhbmRsZXI6b2F9KSl9LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYj10cnVlLGQ9YS5vcmlnVHlwZS5yZXBsYWNlKE8sIiIpO2MuZWFjaChjLmRhdGEodGhpcywiZXZlbnRzIikubGl2ZXx8W10sZnVuY3Rpb24oKXtpZihkPT09dGhpcy5vcmlnVHlwZS5yZXBsYWNlKE8sIiIpKXJldHVybiBiPWZhbHNlfSk7YiYmYy5ldmVudC5yZW1vdmUodGhpcyxhLm9yaWdUeXBlLG9hKX19LGJlZm9yZXVubG9hZDp7c2V0dXA6ZnVuY3Rpb24oYSxiLGQpe2lmKHRoaXMuc2V0SW50ZXJ2YWwpdGhpcy5vbmJlZm9yZXVubG9hZD1kO3JldHVybiBmYWxzZX0sdGVhcmRvd246ZnVuY3Rpb24oYSxiKXtpZih0aGlzLm9uYmVmb3JldW5sb2FkPT09Yil0aGlzLm9uYmVmb3JldW5sb2FkPW51bGx9fX19O3ZhciBDYT1zLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGQpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGQsZmFsc2UpfTpmdW5jdGlvbihhLGIsZCl7YS5kZXRhY2hFdmVudCgib24iK2IsZCl9O2MuRXZlbnQ9ZnVuY3Rpb24oYSl7aWYoIXRoaXMucHJldmVudERlZmF1bHQpcmV0dXJuIG5ldyBjLkV2ZW50KGEpO2lmKGEmJmEudHlwZSl7dGhpcy5vcmlnaW5hbEV2ZW50PWE7dGhpcy50eXBlPWEudHlwZX1lbHNlIHRoaXMudHlwZT1hO3RoaXMudGltZVN0YW1wPUooKTt0aGlzW0ddPXRydWV9O2MuRXZlbnQucHJvdG90eXBlPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVo7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKGEpe2EucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKTthLnJldHVyblZhbHVlPWZhbHNlfX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aO3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDtpZihhKXthLnN0b3BQcm9wYWdhdGlvbiYmYS5zdG9wUHJvcGFnYXRpb24oKTthLmNhbmNlbEJ1YmJsZT10cnVlfX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aO3RoaXMuc3RvcFByb3BhZ2F0aW9uKCl9LGlzRGVmYXVsdFByZXZlbnRlZDpZLGlzUHJvcGFnYXRpb25TdG9wcGVkOlksaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6WX07dmFyIERhPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVsYXRlZFRhcmdldDt0cnl7Zm9yKDtiJiZiIT09dGhpczspYj1iLnBhcmVudE5vZGU7aWYoYiE9PXRoaXMpe2EudHlwZT1hLmRhdGE7Yy5ldmVudC5oYW5kbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1jYXRjaChkKXt9fSxFYT1mdW5jdGlvbihhKXthLnR5cGU9YS5kYXRhO2MuZXZlbnQuaGFuZGxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yy5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0In0sZnVuY3Rpb24oYSxiKXtjLmV2ZW50LnNwZWNpYWxbYV09e3NldHVwOmZ1bmN0aW9uKGQpe2MuZXZlbnQuYWRkKHRoaXMsYixkJiZkLnNlbGVjdG9yP0VhOkRhLGEpfSx0ZWFyZG93bjpmdW5jdGlvbihkKXtjLmV2ZW50LnJlbW92ZSh0aGlzLGIsZCYmZC5zZWxlY3Rvcj9FYTpEYSl9fX0pO2lmKCFjLnN1cHBvcnQuc3VibWl0QnViYmxlcyljLmV2ZW50LnNwZWNpYWwuc3VibWl0PXtzZXR1cDpmdW5jdGlvbigpe2lmKHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJmb3JtIil7Yy5ldmVudC5hZGQodGhpcywiY2xpY2suc3BlY2lhbFN1Ym1pdCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoKGQ9PT0ic3VibWl0Inx8ZD09PSJpbWFnZSIpJiZjKGIpLmNsb3Nlc3QoImZvcm0iKS5sZW5ndGgpcmV0dXJuIG5hKCJzdWJtaXQiLHRoaXMsYXJndW1lbnRzKX0pO2MuZXZlbnQuYWRkKHRoaXMsImtleXByZXNzLnNwZWNpYWxTdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGQ9Yi50eXBlO2lmKChkPT09InRleHQifHxkPT09InBhc3N3b3JkIikmJmMoYikuY2xvc2VzdCgiZm9ybSIpLmxlbmd0aCYmYS5rZXlDb2RlPT09MTMpcmV0dXJuIG5hKCJzdWJtaXQiLHRoaXMsYXJndW1lbnRzKX0pfWVsc2UgcmV0dXJuIGZhbHNlfSx0ZWFyZG93bjpmdW5jdGlvbigpe2MuZXZlbnQucmVtb3ZlKHRoaXMsIi5zcGVjaWFsU3VibWl0Iil9fTtpZighYy5zdXBwb3J0LmNoYW5nZUJ1YmJsZXMpe3ZhciBkYT0vdGV4dGFyZWF8aW5wdXR8c2VsZWN0L2ksZWEsRmE9ZnVuY3Rpb24oYSl7dmFyIGI9YS50eXBlLGQ9YS52YWx1ZTtpZihiPT09InJhZGlvInx8Yj09PSJjaGVja2JveCIpZD1hLmNoZWNrZWQ7ZWxzZSBpZihiPT09InNlbGVjdC1tdWx0aXBsZSIpZD1hLnNlbGVjdGVkSW5kZXg+LTE/Yy5tYXAoYS5vcHRpb25zLGZ1bmN0aW9uKGYpe3JldHVybiBmLnNlbGVjdGVkfSkuam9pbigiLSIpOiIiO2Vsc2UgaWYoYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpZD1hLnNlbGVjdGVkSW5kZXg7cmV0dXJuIGR9LGZhPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YS50YXJnZXQsZixlO2lmKCEoIWRhLnRlc3QoZC5ub2RlTmFtZSl8fGQucmVhZE9ubHkpKXtmPWMuZGF0YShkLCJfY2hhbmdlX2RhdGEiKTtlPUZhKGQpO2lmKGEudHlwZSE9PSJmb2N1c291dCJ8fGQudHlwZSE9PSJyYWRpbyIpYy5kYXRhKGQsIl9jaGFuZ2VfZGF0YSIsZSk7aWYoIShmPT09d3x8ZT09PWYpKWlmKGYhPW51bGx8fGUpe2EudHlwZT0iY2hhbmdlIjtyZXR1cm4gYy5ldmVudC50cmlnZ2VyKGEsYixkKX19fTtjLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtmaWx0ZXJzOntmb2N1c291dDpmYSxjbGljazpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZihkPT09InJhZGlvInx8ZD09PSJjaGVja2JveCJ8fGIubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJzZWxlY3QiKXJldHVybiBmYS5jYWxsKHRoaXMsYSl9LGtleWRvd246ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoYS5rZXlDb2RlPT09MTMmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJ0ZXh0YXJlYSJ8fGEua2V5Q29kZT09PTMyJiYoZD09PSJjaGVja2JveCJ8fGQ9PT0icmFkaW8iKXx8ZD09PSJzZWxlY3QtbXVsdGlwbGUiKXJldHVybiBmYS5jYWxsKHRoaXMsYSl9LGJlZm9yZWFjdGl2YXRlOmZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7Yy5kYXRhKGEsIl9jaGFuZ2VfZGF0YSIsRmEoYSkpfX0sc2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGU9PT0iZmlsZSIpcmV0dXJuIGZhbHNlO2Zvcih2YXIgYSBpbiBlYSljLmV2ZW50LmFkZCh0aGlzLGErIi5zcGVjaWFsQ2hhbmdlIixlYVthXSk7cmV0dXJuIGRhLnRlc3QodGhpcy5ub2RlTmFtZSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Yy5ldmVudC5yZW1vdmUodGhpcywiLnNwZWNpYWxDaGFuZ2UiKTtyZXR1cm4gZGEudGVzdCh0aGlzLm5vZGVOYW1lKX19O2VhPWMuZXZlbnQuc3BlY2lhbC5jaGFuZ2UuZmlsdGVyc31zLmFkZEV2ZW50TGlzdGVuZXImJmMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGYpe2Y9Yy5ldmVudC5maXgoZik7Zi50eXBlPWI7cmV0dXJuIGMuZXZlbnQuaGFuZGxlLmNhbGwodGhpcyxmKX1jLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKGEsZCx0cnVlKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxkLHRydWUpfX19KTtjLmVhY2goWyJiaW5kIiwib25lIl0sZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZixlKXtpZih0eXBlb2YgZD09PSJvYmplY3QiKXtmb3IodmFyIGogaW4gZCl0aGlzW2JdKGosZixkW2pdLGUpO3JldHVybiB0aGlzfWlmKGMuaXNGdW5jdGlvbihmKSl7ZT1mO2Y9d312YXIgaT1iPT09Im9uZSI/Yy5wcm94eShlLGZ1bmN0aW9uKGspe2ModGhpcykudW5iaW5kKGssaSk7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk6ZTtpZihkPT09InVubG9hZCImJmIhPT0ib25lIil0aGlzLm9uZShkLGYsZSk7ZWxzZXtqPTA7Zm9yKHZhciBvPXRoaXMubGVuZ3RoO2o8bztqKyspYy5ldmVudC5hZGQodGhpc1tqXSxkLGksZil9cmV0dXJuIHRoaXN9fSk7Yy5mbi5leHRlbmQoe3VuYmluZDpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhPT09Im9iamVjdCImJiFhLnByZXZlbnREZWZhdWx0KWZvcih2YXIgZCBpbiBhKXRoaXMudW5iaW5kKGQsYVtkXSk7ZWxzZXtkPTA7Zm9yKHZhciBmPXRoaXMubGVuZ3RoO2Q8ZjtkKyspYy5ldmVudC5yZW1vdmUodGhpc1tkXSxhLGIpfXJldHVybiB0aGlzfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsZCxmKXtyZXR1cm4gdGhpcy5saXZlKGIsZCxmLGEpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTA/dGhpcy51bmJpbmQoImxpdmUiKTp0aGlzLmRpZShiLG51bGwsZCxhKX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7aWYodGhpc1swXSl7YT1jLkV2ZW50KGEpO2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpO2MuZXZlbnQudHJpZ2dlcihhLGIsdGhpc1swXSk7cmV0dXJuIGEucmVzdWx0fX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hcmd1bWVudHMsZD0xO2Q8Yi5sZW5ndGg7KWMucHJveHkoYSxiW2QrK10pO3JldHVybiB0aGlzLmNsaWNrKGMucHJveHkoYSxmdW5jdGlvbihmKXt2YXIgZT0oYy5kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2EuZ3VpZCl8fDApJWQ7Yy5kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2EuZ3VpZCxlKzEpO2YucHJldmVudERlZmF1bHQoKTtyZXR1cm4gYltlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fGZhbHNlfSkpfSxob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KTt2YXIgR2E9e2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCIsbW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9O2MuZWFjaChbImxpdmUiLCJkaWUiXSxmdW5jdGlvbihhLGIpe2MuZm5bYl09ZnVuY3Rpb24oZCxmLGUsail7dmFyIGksbz0wLGssbixyPWp8fHRoaXMuc2VsZWN0b3IsdT1qP3RoaXM6Yyh0aGlzLmNvbnRleHQpO2lmKGMuaXNGdW5jdGlvbihmKSl7ZT1mO2Y9d31mb3IoZD0oZHx8IiIpLnNwbGl0KCIgIik7KGk9ZFtvKytdKSE9bnVsbDspe2o9Ty5leGVjKGkpO2s9IiI7aWYoail7az1qWzBdO2k9aS5yZXBsYWNlKE8sIiIpfWlmKGk9PT0iaG92ZXIiKWQucHVzaCgibW91c2VlbnRlciIraywibW91c2VsZWF2ZSIrayk7ZWxzZXtuPWk7aWYoaT09PSJmb2N1cyJ8fGk9PT0iYmx1ciIpe2QucHVzaChHYVtpXStrKTtpKz1rfWVsc2UgaT0oR2FbaV18fGkpK2s7Yj09PSJsaXZlIj91LmVhY2goZnVuY3Rpb24oKXtjLmV2ZW50LmFkZCh0aGlzLHBhKGkscikse2RhdGE6ZixzZWxlY3RvcjpyLGhhbmRsZXI6ZSxvcmlnVHlwZTppLG9yaWdIYW5kbGVyOmUscHJlVHlwZTpufSl9KTp1LnVuYmluZChwYShpLHIpLGUpfX1yZXR1cm4gdGhpc319KTtjLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQpe3JldHVybiBkP3RoaXMuYmluZChiLGQpOnRoaXMudHJpZ2dlcihiKX07aWYoYy5hdHRyRm4pYy5hdHRyRm5bYl09dHJ1ZX0pO0EuYXR0YWNoRXZlbnQmJiFBLmFkZEV2ZW50TGlzdGVuZXImJkEuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBjLmNhY2hlKWlmKGMuY2FjaGVbYV0uaGFuZGxlKXRyeXtjLmV2ZW50LnJlbW92ZShjLmNhY2hlW2FdLmhhbmRsZS5lbGVtKX1jYXRjaChiKXt9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShnKXtmb3IodmFyIGg9IiIsbCxtPTA7Z1ttXTttKyspe2w9Z1ttXTtpZihsLm5vZGVUeXBlPT09M3x8bC5ub2RlVHlwZT09PTQpaCs9bC5ub2RlVmFsdWU7ZWxzZSBpZihsLm5vZGVUeXBlIT09OCloKz1hKGwuY2hpbGROb2Rlcyl9cmV0dXJuIGh9ZnVuY3Rpb24gYihnLGgsbCxtLHEscCl7cT0wO2Zvcih2YXIgdj1tLmxlbmd0aDtxPHY7cSsrKXt2YXIgdD1tW3FdO2lmKHQpe3Q9dFtnXTtmb3IodmFyIHk9ZmFsc2U7dDspe2lmKHQuc2l6Y2FjaGU9PT1sKXt5PW1bdC5zaXpzZXRdO2JyZWFrfWlmKHQubm9kZVR5cGU9PT0xJiYhcCl7dC5zaXpjYWNoZT1sO3Quc2l6c2V0PXF9aWYodC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aCl7eT10O2JyZWFrfXQ9dFtnXX1tW3FdPXl9fX1mdW5jdGlvbiBkKGcsaCxsLG0scSxwKXtxPTA7Zm9yKHZhciB2PW0ubGVuZ3RoO3E8djtxKyspe3ZhciB0PW1bcV07aWYodCl7dD10W2ddO2Zvcih2YXIgeT1mYWxzZTt0Oyl7aWYodC5zaXpjYWNoZT09PWwpe3k9bVt0LnNpenNldF07YnJlYWt9aWYodC5ub2RlVHlwZT09PTEpe2lmKCFwKXt0LnNpemNhY2hlPWw7dC5zaXpzZXQ9cX1pZih0eXBlb2YgaCE9PSJzdHJpbmciKXtpZih0PT09aCl7eT10cnVlO2JyZWFrfX1lbHNlIGlmKGsuZmlsdGVyKGgsW3RdKS5sZW5ndGg+MCl7eT10O2JyZWFrfX10PXRbZ119bVtxXT15fX19dmFyIGY9LygoPzpcKCg/OlwoW14oKV0rXCl8W14oKV0rKStcKXxcWyg/OlxbW15bXF1dKlxdfFsnIl1bXiciXSpbJyJdfFteW1xdJyJdKykrXF18XFwufFteID4rfiwoXFtcXF0rKSt8Wz4rfl0pKFxzKixccyopPygoPzoufFxyfFxuKSopL2csZT0wLGo9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxpPWZhbHNlLG89dHJ1ZTtbMCwwXS5zb3J0KGZ1bmN0aW9uKCl7bz1mYWxzZTtyZXR1cm4gMH0pO3ZhciBrPWZ1bmN0aW9uKGcsaCxsLG0pe2w9bHx8W107dmFyIHE9aD1ofHxzO2lmKGgubm9kZVR5cGUhPT0xJiZoLm5vZGVUeXBlIT09OSlyZXR1cm5bXTtpZighZ3x8dHlwZW9mIGchPT0ic3RyaW5nIilyZXR1cm4gbDtmb3IodmFyIHA9W10sdix0LHksUyxIPXRydWUsTT14KGgpLEk9ZzsoZi5leGVjKCIiKSx2PWYuZXhlYyhJKSkhPT1udWxsOyl7ST12WzNdO3AucHVzaCh2WzFdKTtpZih2WzJdKXtTPXZbM107YnJlYWt9fWlmKHAubGVuZ3RoPjEmJnIuZXhlYyhnKSlpZihwLmxlbmd0aD09PTImJm4ucmVsYXRpdmVbcFswXV0pdD1nYShwWzBdK3BbMV0saCk7ZWxzZSBmb3IodD1uLnJlbGF0aXZlW3BbMF1dP1toXTprKHAuc2hpZnQoKSxoKTtwLmxlbmd0aDspe2c9cC5zaGlmdCgpO2lmKG4ucmVsYXRpdmVbZ10pZys9cC5zaGlmdCgpO3Q9Z2EoZyx0KX1lbHNle2lmKCFtJiZwLmxlbmd0aD4xJiZoLm5vZGVUeXBlPT09OSYmIU0mJm4ubWF0Y2guSUQudGVzdChwWzBdKSYmIW4ubWF0Y2guSUQudGVzdChwW3AubGVuZ3RoLTFdKSl7dj1rLmZpbmQocC5zaGlmdCgpLGgsTSk7aD12LmV4cHI/ay5maWx0ZXIodi5leHByLHYuc2V0KVswXTp2LnNldFswXX1pZihoKXt2PW0/e2V4cHI6cC5wb3AoKSxzZXQ6eihtKX06ay5maW5kKHAucG9wKCkscC5sZW5ndGg9PT0xJiYocFswXT09PSJ+Inx8cFswXT09PSIrIikmJmgucGFyZW50Tm9kZT9oLnBhcmVudE5vZGU6aCxNKTt0PXYuZXhwcj9rLmZpbHRlcih2LmV4cHIsdi5zZXQpOnYuc2V0O2lmKHAubGVuZ3RoPjApeT16KHQpO2Vsc2UgSD1mYWxzZTtmb3IoO3AubGVuZ3RoOyl7dmFyIEQ9cC5wb3AoKTt2PUQ7aWYobi5yZWxhdGl2ZVtEXSl2PXAucG9wKCk7ZWxzZSBEPSIiO2lmKHY9PW51bGwpdj1oO24ucmVsYXRpdmVbRF0oeSx2LE0pfX1lbHNlIHk9W119eXx8KHk9dCk7eXx8ay5lcnJvcihEfHxnKTtpZihqLmNhbGwoeSk9PT0iW29iamVjdCBBcnJheV0iKWlmKEgpaWYoaCYmaC5ub2RlVHlwZT09PTEpZm9yKGc9MDt5W2ddIT1udWxsO2crKyl7aWYoeVtnXSYmKHlbZ109PT10cnVlfHx5W2ddLm5vZGVUeXBlPT09MSYmRShoLHlbZ10pKSlsLnB1c2godFtnXSl9ZWxzZSBmb3IoZz0wO3lbZ10hPW51bGw7ZysrKXlbZ10mJnlbZ10ubm9kZVR5cGU9PT0xJiZsLnB1c2godFtnXSk7ZWxzZSBsLnB1c2guYXBwbHkobCx5KTtlbHNlIHooeSxsKTtpZihTKXtrKFMscSxsLG0pO2sudW5pcXVlU29ydChsKX1yZXR1cm4gbH07ay51bmlxdWVTb3J0PWZ1bmN0aW9uKGcpe2lmKEIpe2k9bztnLnNvcnQoQik7aWYoaSlmb3IodmFyIGg9MTtoPGcubGVuZ3RoO2grKylnW2hdPT09Z1toLTFdJiZnLnNwbGljZShoLS0sMSl9cmV0dXJuIGd9O2subWF0Y2hlcz1mdW5jdGlvbihnLGgpe3JldHVybiBrKGcsbnVsbCxudWxsLGgpfTtrLmZpbmQ9ZnVuY3Rpb24oZyxoLGwpe3ZhciBtLHE7aWYoIWcpcmV0dXJuW107Zm9yKHZhciBwPTAsdj1uLm9yZGVyLmxlbmd0aDtwPHY7cCsrKXt2YXIgdD1uLm9yZGVyW3BdO2lmKHE9bi5sZWZ0TWF0Y2hbdF0uZXhlYyhnKSl7dmFyIHk9cVsxXTtxLnNwbGljZSgxLDEpO2lmKHkuc3Vic3RyKHkubGVuZ3RoLTEpIT09IlxcIil7cVsxXT0ocVsxXXx8IiIpLnJlcGxhY2UoL1xcL2csIiIpO209bi5maW5kW3RdKHEsaCxsKTtpZihtIT1udWxsKXtnPWcucmVwbGFjZShuLm1hdGNoW3RdLCIiKTticmVha319fX1tfHwobT1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO3JldHVybntzZXQ6bSxleHByOmd9fTtrLmZpbHRlcj1mdW5jdGlvbihnLGgsbCxtKXtmb3IodmFyIHE9ZyxwPVtdLHY9aCx0LHksUz1oJiZoWzBdJiZ4KGhbMF0pO2cmJmgubGVuZ3RoOyl7Zm9yKHZhciBIIGluIG4uZmlsdGVyKWlmKCh0PW4ubGVmdE1hdGNoW0hdLmV4ZWMoZykpIT1udWxsJiZ0WzJdKXt2YXIgTT1uLmZpbHRlcltIXSxJLEQ7RD10WzFdO3k9ZmFsc2U7dC5zcGxpY2UoMSwxKTtpZihELnN1YnN0cihELmxlbmd0aC0KMSkhPT0iXFwiKXtpZih2PT09cClwPVtdO2lmKG4ucHJlRmlsdGVyW0hdKWlmKHQ9bi5wcmVGaWx0ZXJbSF0odCx2LGwscCxtLFMpKXtpZih0PT09dHJ1ZSljb250aW51ZX1lbHNlIHk9ST10cnVlO2lmKHQpZm9yKHZhciBVPTA7KEQ9dltVXSkhPW51bGw7VSsrKWlmKEQpe0k9TShELHQsVSx2KTt2YXIgSGE9bV4hIUk7aWYobCYmSSE9bnVsbClpZihIYSl5PXRydWU7ZWxzZSB2W1VdPWZhbHNlO2Vsc2UgaWYoSGEpe3AucHVzaChEKTt5PXRydWV9fWlmKEkhPT13KXtsfHwodj1wKTtnPWcucmVwbGFjZShuLm1hdGNoW0hdLCIiKTtpZigheSlyZXR1cm5bXTticmVha319fWlmKGc9PT1xKWlmKHk9PW51bGwpay5lcnJvcihnKTtlbHNlIGJyZWFrO3E9Z31yZXR1cm4gdn07ay5lcnJvcj1mdW5jdGlvbihnKXt0aHJvdyJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2c7fTt2YXIgbj1rLnNlbGVjdG9ycz17b3JkZXI6WyJJRCIsIk5BTUUiLCJUQUciXSxtYXRjaDp7SUQ6LyMoKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKS8sQ0xBU1M6L1wuKCg/Oltcd1x1MDBjMC1cdUZGRkYtXXxcXC4pKykvLE5BTUU6L1xbbmFtZT1bJyJdKigoPzpbXHdcdTAwYzAtXHVGRkZGLV18XFwuKSspWyciXSpcXS8sQVRUUjovXFtccyooKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKVxzKig/OihcUz89KVxzKihbJyJdKikoLio/KVwzfClccypcXS8sVEFHOi9eKCg/Oltcd1x1MDBjMC1cdUZGRkZcKi1dfFxcLikrKS8sQ0hJTEQ6Lzoob25seXxudGh8bGFzdHxmaXJzdCktY2hpbGQoPzpcKChldmVufG9kZHxbXGRuKy1dKilcKSk/LyxQT1M6LzoobnRofGVxfGd0fGx0fGZpcnN0fGxhc3R8ZXZlbnxvZGQpKD86XCgoXGQqKVwpKT8oPz1bXi1dfCQpLyxQU0VVRE86LzooKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKSg/OlwoKFsnIl0/KSgoPzpcKFteXCldK1wpfFteXChcKV0qKSspXDJcKSk/L30sbGVmdE1hdGNoOnt9LGF0dHJNYXA6eyJjbGFzcyI6ImNsYXNzTmFtZSIsImZvciI6Imh0bWxGb3IifSxhdHRySGFuZGxlOntocmVmOmZ1bmN0aW9uKGcpe3JldHVybiBnLmdldEF0dHJpYnV0ZSgiaHJlZiIpfX0scmVsYXRpdmU6eyIrIjpmdW5jdGlvbihnLGgpe3ZhciBsPXR5cGVvZiBoPT09InN0cmluZyIsbT1sJiYhL1xXLy50ZXN0KGgpO2w9bCYmIW07aWYobSloPWgudG9Mb3dlckNhc2UoKTttPTA7Zm9yKHZhciBxPWcubGVuZ3RoLHA7bTxxO20rKylpZihwPWdbbV0pe2Zvcig7KHA9cC5wcmV2aW91c1NpYmxpbmcpJiZwLm5vZGVUeXBlIT09MTspO2dbbV09bHx8cCYmcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aD9wfHxmYWxzZTpwPT09aH1sJiZrLmZpbHRlcihoLGcsdHJ1ZSl9LCI+IjpmdW5jdGlvbihnLGgpe3ZhciBsPXR5cGVvZiBoPT09InN0cmluZyI7aWYobCYmIS9cVy8udGVzdChoKSl7aD1oLnRvTG93ZXJDYXNlKCk7Zm9yKHZhciBtPTAscT1nLmxlbmd0aDttPHE7bSsrKXt2YXIgcD1nW21dO2lmKHApe2w9cC5wYXJlbnROb2RlO2dbbV09bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aD9sOmZhbHNlfX19ZWxzZXttPTA7Zm9yKHE9Zy5sZW5ndGg7bTxxO20rKylpZihwPWdbbV0pZ1ttXT1sP3AucGFyZW50Tm9kZTpwLnBhcmVudE5vZGU9PT1oO2wmJmsuZmlsdGVyKGgsZyx0cnVlKX19LCIiOmZ1bmN0aW9uKGcsaCxsKXt2YXIgbT1lKysscT1kO2lmKHR5cGVvZiBoPT09InN0cmluZyImJiEvXFcvLnRlc3QoaCkpe3ZhciBwPWg9aC50b0xvd2VyQ2FzZSgpO3E9Yn1xKCJwYXJlbnROb2RlIixoLG0sZyxwLGwpfSwifiI6ZnVuY3Rpb24oZyxoLGwpe3ZhciBtPWUrKyxxPWQ7aWYodHlwZW9mIGg9PT0ic3RyaW5nIiYmIS9cVy8udGVzdChoKSl7dmFyIHA9aD1oLnRvTG93ZXJDYXNlKCk7cT1ifXEoInByZXZpb3VzU2libGluZyIsaCxtLGcscCxsKX19LGZpbmQ6e0lEOmZ1bmN0aW9uKGcsaCxsKXtpZih0eXBlb2YgaC5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiYhbClyZXR1cm4oZz1oLmdldEVsZW1lbnRCeUlkKGdbMV0pKT9bZ106W119LE5BTUU6ZnVuY3Rpb24oZyxoKXtpZih0eXBlb2YgaC5nZXRFbGVtZW50c0J5TmFtZSE9PSJ1bmRlZmluZWQiKXt2YXIgbD1bXTtoPWguZ2V0RWxlbWVudHNCeU5hbWUoZ1sxXSk7Zm9yKHZhciBtPTAscT1oLmxlbmd0aDttPHE7bSsrKWhbbV0uZ2V0QXR0cmlidXRlKCJuYW1lIik9PT1nWzFdJiZsLnB1c2goaFttXSk7cmV0dXJuIGwubGVuZ3RoPT09MD9udWxsOmx9fSxUQUc6ZnVuY3Rpb24oZyxoKXtyZXR1cm4gaC5nZXRFbGVtZW50c0J5VGFnTmFtZShnWzFdKX19LHByZUZpbHRlcjp7Q0xBU1M6ZnVuY3Rpb24oZyxoLGwsbSxxLHApe2c9IiAiK2dbMV0ucmVwbGFjZSgvXFwvZywiIikrIiAiO2lmKHApcmV0dXJuIGc7cD0wO2Zvcih2YXIgdjsodj1oW3BdKSE9bnVsbDtwKyspaWYodilpZihxXih2LmNsYXNzTmFtZSYmKCIgIit2LmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoL1tcdFxuXS9nLCIgIikuaW5kZXhPZihnKT49MCkpbHx8bS5wdXNoKHYpO2Vsc2UgaWYobCloW3BdPWZhbHNlO3JldHVybiBmYWxzZX0sSUQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGdbMV0ucmVwbGFjZSgvXFwvZywiIil9LFRBRzpmdW5jdGlvbihnKXtyZXR1cm4gZ1sxXS50b0xvd2VyQ2FzZSgpfSxDSElMRDpmdW5jdGlvbihnKXtpZihnWzFdPT09Im50aCIpe3ZhciBoPS8oLT8pKFxkKiluKCg/OlwrfC0pP1xkKikvLmV4ZWMoZ1syXT09PSJldmVuIiYmIjJuInx8Z1syXT09PSJvZGQiJiYiMm4rMSJ8fCEvXEQvLnRlc3QoZ1syXSkmJiIwbisiK2dbMl18fGdbMl0pO2dbMl09aFsxXSsoaFsyXXx8MSktMDtnWzNdPWhbM10tMH1nWzBdPWUrKztyZXR1cm4gZ30sQVRUUjpmdW5jdGlvbihnLGgsbCxtLHEscCl7aD1nWzFdLnJlcGxhY2UoL1xcL2csIiIpO2lmKCFwJiZuLmF0dHJNYXBbaF0pZ1sxXT1uLmF0dHJNYXBbaF07aWYoZ1syXT09PSJ+PSIpZ1s0XT0iICIrZ1s0XSsiICI7cmV0dXJuIGd9LFBTRVVETzpmdW5jdGlvbihnLGgsbCxtLHEpe2lmKGdbMV09PT0ibm90IilpZigoZi5leGVjKGdbM10pfHwiIikubGVuZ3RoPjF8fC9eXHcvLnRlc3QoZ1szXSkpZ1szXT1rKGdbM10sbnVsbCxudWxsLGgpO2Vsc2V7Zz1rLmZpbHRlcihnWzNdLGgsbCx0cnVlXnEpO2x8fG0ucHVzaC5hcHBseShtLGcpO3JldHVybiBmYWxzZX1lbHNlIGlmKG4ubWF0Y2guUE9TLnRlc3QoZ1swXSl8fG4ubWF0Y2guQ0hJTEQudGVzdChnWzBdKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZ30sUE9TOmZ1bmN0aW9uKGcpe2cudW5zaGlmdCh0cnVlKTtyZXR1cm4gZ319LGZpbHRlcnM6e2VuYWJsZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuZGlzYWJsZWQ9PT1mYWxzZSYmZy50eXBlIT09ImhpZGRlbiJ9LGRpc2FibGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLmRpc2FibGVkPT09dHJ1ZX0sY2hlY2tlZDpmdW5jdGlvbihnKXtyZXR1cm4gZy5jaGVja2VkPT09dHJ1ZX0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuc2VsZWN0ZWQ9PT10cnVlfSxwYXJlbnQ6ZnVuY3Rpb24oZyl7cmV0dXJuISFnLmZpcnN0Q2hpbGR9LGVtcHR5OmZ1bmN0aW9uKGcpe3JldHVybiFnLmZpcnN0Q2hpbGR9LGhhczpmdW5jdGlvbihnLGgsbCl7cmV0dXJuISFrKGxbM10sZykubGVuZ3RofSxoZWFkZXI6ZnVuY3Rpb24oZyl7cmV0dXJuL2hcZC9pLnRlc3QoZy5ub2RlTmFtZSl9LHRleHQ6ZnVuY3Rpb24oZyl7cmV0dXJuInRleHQiPT09Zy50eXBlfSxyYWRpbzpmdW5jdGlvbihnKXtyZXR1cm4icmFkaW8iPT09Zy50eXBlfSxjaGVja2JveDpmdW5jdGlvbihnKXtyZXR1cm4iY2hlY2tib3giPT09Zy50eXBlfSxmaWxlOmZ1bmN0aW9uKGcpe3JldHVybiJmaWxlIj09PWcudHlwZX0scGFzc3dvcmQ6ZnVuY3Rpb24oZyl7cmV0dXJuInBhc3N3b3JkIj09PWcudHlwZX0sc3VibWl0OmZ1bmN0aW9uKGcpe3JldHVybiJzdWJtaXQiPT09Zy50eXBlfSxpbWFnZTpmdW5jdGlvbihnKXtyZXR1cm4iaW1hZ2UiPT09Zy50eXBlfSxyZXNldDpmdW5jdGlvbihnKXtyZXR1cm4icmVzZXQiPT09Zy50eXBlfSxidXR0b246ZnVuY3Rpb24oZyl7cmV0dXJuImJ1dHRvbiI9PT1nLnR5cGV8fGcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJidXR0b24ifSxpbnB1dDpmdW5jdGlvbihnKXtyZXR1cm4vaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbi9pLnRlc3QoZy5ub2RlTmFtZSl9fSxzZXRGaWx0ZXJzOntmaXJzdDpmdW5jdGlvbihnLGgpe3JldHVybiBoPT09MH0sbGFzdDpmdW5jdGlvbihnLGgsbCxtKXtyZXR1cm4gaD09PW0ubGVuZ3RoLTF9LGV2ZW46ZnVuY3Rpb24oZyxoKXtyZXR1cm4gaCUyPT09MH0sb2RkOmZ1bmN0aW9uKGcsaCl7cmV0dXJuIGglMj09PTF9LGx0OmZ1bmN0aW9uKGcsaCxsKXtyZXR1cm4gaDxsWzNdLTB9LGd0OmZ1bmN0aW9uKGcsaCxsKXtyZXR1cm4gaD5sWzNdLTB9LG50aDpmdW5jdGlvbihnLGgsbCl7cmV0dXJuIGxbM10tMD09PWh9LGVxOmZ1bmN0aW9uKGcsaCxsKXtyZXR1cm4gbFszXS0wPT09aH19LGZpbHRlcjp7UFNFVURPOmZ1bmN0aW9uKGcsaCxsLG0pe3ZhciBxPWhbMV0scD1uLmZpbHRlcnNbcV07aWYocClyZXR1cm4gcChnLGwsaCxtKTtlbHNlIGlmKHE9PT0iY29udGFpbnMiKXJldHVybihnLnRleHRDb250ZW50fHxnLmlubmVyVGV4dHx8YShbZ10pfHwiIikuaW5kZXhPZihoWzNdKT49MDtlbHNlIGlmKHE9PT0ibm90Iil7aD1oWzNdO2w9MDtmb3IobT1oLmxlbmd0aDtsPG07bCsrKWlmKGhbbF09PT1nKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZX1lbHNlIGsuZXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrcSl9LENISUxEOmZ1bmN0aW9uKGcsaCl7dmFyIGw9aFsxXSxtPWc7c3dpdGNoKGwpe2Nhc2Uib25seSI6Y2FzZSJmaXJzdCI6Zm9yKDttPW0ucHJldmlvdXNTaWJsaW5nOylpZihtLm5vZGVUeXBlPT09MSlyZXR1cm4gZmFsc2U7aWYobD09PSJmaXJzdCIpcmV0dXJuIHRydWU7bT1nO2Nhc2UibGFzdCI6Zm9yKDttPW0ubmV4dFNpYmxpbmc7KWlmKG0ubm9kZVR5cGU9PT0xKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZTtjYXNlIm50aCI6bD1oWzJdO3ZhciBxPWhbM107aWYobD09PTEmJnE9PT0wKXJldHVybiB0cnVlO2g9aFswXTt2YXIgcD1nLnBhcmVudE5vZGU7aWYocCYmKHAuc2l6Y2FjaGUhPT1ofHwhZy5ub2RlSW5kZXgpKXt2YXIgdj0wO2ZvcihtPXAuZmlyc3RDaGlsZDttO209bS5uZXh0U2libGluZylpZihtLm5vZGVUeXBlPT09MSltLm5vZGVJbmRleD0rK3Y7cC5zaXpjYWNoZT1ofWc9Zy5ub2RlSW5kZXgtcTtyZXR1cm4gbD09PTA/Zz09PTA6ZyVsPT09MCYmZy9sPj0wfX0sSUQ6ZnVuY3Rpb24oZyxoKXtyZXR1cm4gZy5ub2RlVHlwZT09PTEmJmcuZ2V0QXR0cmlidXRlKCJpZCIpPT09aH0sVEFHOmZ1bmN0aW9uKGcsaCl7cmV0dXJuIGg9PT0iKiImJmcubm9kZVR5cGU9PT0xfHxnLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ofSxDTEFTUzpmdW5jdGlvbihnLGgpe3JldHVybigiICIrKGcuY2xhc3NOYW1lfHxnLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSkrIiAiKS5pbmRleE9mKGgpPi0xfSxBVFRSOmZ1bmN0aW9uKGcsaCl7dmFyIGw9aFsxXTtnPW4uYXR0ckhhbmRsZVtsXT9uLmF0dHJIYW5kbGVbbF0oZyk6Z1tsXSE9bnVsbD9nW2xdOmcuZ2V0QXR0cmlidXRlKGwpO2w9ZysiIjt2YXIgbT1oWzJdO2g9aFs0XTtyZXR1cm4gZz09bnVsbD9tPT09IiE9IjptPT09Ij0iP2w9PT1oOm09PT0iKj0iP2wuaW5kZXhPZihoKT49MDptPT09In49Ij8oIiAiK2wrIiAiKS5pbmRleE9mKGgpPj0wOiFoP2wmJmchPT1mYWxzZTptPT09IiE9Ij9sIT09aDptPT09Il49Ij9sLmluZGV4T2YoaCk9PT0wOm09PT0iJD0iP2wuc3Vic3RyKGwubGVuZ3RoLWgubGVuZ3RoKT09PWg6bT09PSJ8PSI/bD09PWh8fGwuc3Vic3RyKDAsaC5sZW5ndGgrMSk9PT1oKyItIjpmYWxzZX0sUE9TOmZ1bmN0aW9uKGcsaCxsLG0pe3ZhciBxPW4uc2V0RmlsdGVyc1toWzJdXTtpZihxKXJldHVybiBxKGcsbCxoLG0pfX19LHI9bi5tYXRjaC5QT1M7Zm9yKHZhciB1IGluIG4ubWF0Y2gpe24ubWF0Y2hbdV09bmV3IFJlZ0V4cChuLm1hdGNoW3VdLnNvdXJjZSsvKD8hW15cW10qXF0pKD8hW15cKF0qXCkpLy5zb3VyY2UpO24ubGVmdE1hdGNoW3VdPW5ldyBSZWdFeHAoLyheKD86LnxccnxcbikqPykvLnNvdXJjZStuLm1hdGNoW3VdLnNvdXJjZS5yZXBsYWNlKC9cXChcZCspL2csZnVuY3Rpb24oZyxoKXtyZXR1cm4iXFwiKyhoLTArMSl9KSl9dmFyIHo9ZnVuY3Rpb24oZyxoKXtnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGcsMCk7aWYoaCl7aC5wdXNoLmFwcGx5KGgsZyk7cmV0dXJuIGh9cmV0dXJuIGd9O3RyeXtBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChzLmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLDApfWNhdGNoKEMpe3o9ZnVuY3Rpb24oZyxoKXtoPWh8fFtdO2lmKGouY2FsbChnKT09PSJbb2JqZWN0IEFycmF5XSIpQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoaCxnKTtlbHNlIGlmKHR5cGVvZiBnLmxlbmd0aD09PSJudW1iZXIiKWZvcih2YXIgbD0wLG09Zy5sZW5ndGg7bDxtO2wrKyloLnB1c2goZ1tsXSk7ZWxzZSBmb3IobD0wO2dbbF07bCsrKWgucHVzaChnW2xdKTtyZXR1cm4gaH19dmFyIEI7aWYocy5kb2N1bWVudEVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24pQj1mdW5jdGlvbihnLGgpe2lmKCFnLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9ufHwhaC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil7aWYoZz09aClpPXRydWU7cmV0dXJuIGcuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX1nPWcuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaCkmND8tMTpnPT09aD8wOjE7aWYoZz09PTApaT10cnVlO3JldHVybiBnfTtlbHNlIGlmKCJzb3VyY2VJbmRleCJpbiBzLmRvY3VtZW50RWxlbWVudClCPWZ1bmN0aW9uKGcsaCl7aWYoIWcuc291cmNlSW5kZXh8fCFoLnNvdXJjZUluZGV4KXtpZihnPT1oKWk9dHJ1ZTtyZXR1cm4gZy5zb3VyY2VJbmRleD8tMToxfWc9Zy5zb3VyY2VJbmRleC1oLnNvdXJjZUluZGV4O2lmKGc9PT0wKWk9dHJ1ZTtyZXR1cm4gZ307ZWxzZSBpZihzLmNyZWF0ZVJhbmdlKUI9ZnVuY3Rpb24oZyxoKXtpZighZy5vd25lckRvY3VtZW50fHwhaC5vd25lckRvY3VtZW50KXtpZihnPT1oKWk9dHJ1ZTtyZXR1cm4gZy5vd25lckRvY3VtZW50Py0xOjF9dmFyIGw9Zy5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCksbT1oLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtsLnNldFN0YXJ0KGcsMCk7bC5zZXRFbmQoZywwKTttLnNldFN0YXJ0KGgsMCk7bS5zZXRFbmQoaCwwKTtnPWwuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCxtKTtpZihnPT09MClpPXRydWU7cmV0dXJuIGd9OyhmdW5jdGlvbigpe3ZhciBnPXMuY3JlYXRlRWxlbWVudCgiZGl2IiksaD0ic2NyaXB0IisobmV3IERhdGUpLmdldFRpbWUoKTtnLmlubmVySFRNTD0iPGEgbmFtZT0nIitoKyInLz4iO3ZhciBsPXMuZG9jdW1lbnRFbGVtZW50O2wuaW5zZXJ0QmVmb3JlKGcsbC5maXJzdENoaWxkKTtpZihzLmdldEVsZW1lbnRCeUlkKGgpKXtuLmZpbmQuSUQ9ZnVuY3Rpb24obSxxLHApe2lmKHR5cGVvZiBxLmdldEVsZW1lbnRCeUlkIT09InVuZGVmaW5lZCImJiFwKXJldHVybihxPXEuZ2V0RWxlbWVudEJ5SWQobVsxXSkpP3EuaWQ9PT1tWzFdfHx0eXBlb2YgcS5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJnEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWU9PT1tWzFdP1txXTp3OltdfTtuLmZpbHRlci5JRD1mdW5jdGlvbihtLHEpe3ZhciBwPXR5cGVvZiBtLmdldEF0dHJpYnV0ZU5vZGUhPT0idW5kZWZpbmVkIiYmbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBtLm5vZGVUeXBlPT09MSYmcCYmcC5ub2RlVmFsdWU9PT1xfX1sLnJlbW92ZUNoaWxkKGcpO2w9Zz1udWxsfSkoKTsoZnVuY3Rpb24oKXt2YXIgZz1zLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2cuYXBwZW5kQ2hpbGQocy5jcmVhdGVDb21tZW50KCIiKSk7aWYoZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4wKW4uZmluZC5UQUc9ZnVuY3Rpb24oaCxsKXtsPWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoaFsxXSk7aWYoaFsxXT09PSIqIil7aD1bXTtmb3IodmFyIG09MDtsW21dO20rKylsW21dLm5vZGVUeXBlPT09MSYmaC5wdXNoKGxbbV0pO2w9aH1yZXR1cm4gbH07Zy5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO2lmKGcuZmlyc3RDaGlsZCYmdHlwZW9mIGcuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUhPT0idW5kZWZpbmVkIiYmZy5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpIT09IiMiKW4uYXR0ckhhbmRsZS5ocmVmPWZ1bmN0aW9uKGgpe3JldHVybiBoLmdldEF0dHJpYnV0ZSgiaHJlZiIsMil9O2c9bnVsbH0pKCk7cy5xdWVyeVNlbGVjdG9yQWxsJiZmdW5jdGlvbigpe3ZhciBnPWssaD1zLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2guaW5uZXJIVE1MPSI8cCBjbGFzcz0nVEVTVCc+PC9wPiI7aWYoIShoLnF1ZXJ5U2VsZWN0b3JBbGwmJmgucXVlcnlTZWxlY3RvckFsbCgiLlRFU1QiKS5sZW5ndGg9PT0wKSl7az1mdW5jdGlvbihtLHEscCx2KXtxPXF8fHM7aWYoIXYmJnEubm9kZVR5cGU9PT05JiYheChxKSl0cnl7cmV0dXJuIHoocS5xdWVyeVNlbGVjdG9yQWxsKG0pLHApfWNhdGNoKHQpe31yZXR1cm4gZyhtLHEscCx2KX07Zm9yKHZhciBsIGluIGcpa1tsXT1nW2xdO2g9bnVsbH19KCk7KGZ1bmN0aW9uKCl7dmFyIGc9cy5jcmVhdGVFbGVtZW50KCJkaXYiKTtnLmlubmVySFRNTD0iPGRpdiBjbGFzcz0ndGVzdCBlJz48L2Rpdj48ZGl2IGNsYXNzPSd0ZXN0Jz48L2Rpdj4iO2lmKCEoIWcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8Zy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoPT09MCkpe2cubGFzdENoaWxkLmNsYXNzTmFtZT0iZSI7aWYoZy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoIT09MSl7bi5vcmRlci5zcGxpY2UoMSwwLCJDTEFTUyIpO24uZmluZC5DTEFTUz1mdW5jdGlvbihoLGwsbSl7aWYodHlwZW9mIGwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PSJ1bmRlZmluZWQiJiYhbSlyZXR1cm4gbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGhbMV0pfTtnPW51bGx9fX0pKCk7dmFyIEU9cy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihnLGgpe3JldHVybiEhKGcuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaCkmMTYpfTpmdW5jdGlvbihnLGgpe3JldHVybiBnIT09aCYmKGcuY29udGFpbnM/Zy5jb250YWlucyhoKTp0cnVlKX0seD1mdW5jdGlvbihnKXtyZXR1cm4oZz0oZz9nLm93bmVyRG9jdW1lbnR8fGc6MCkuZG9jdW1lbnRFbGVtZW50KT9nLm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlfSxnYT1mdW5jdGlvbihnLGgpe3ZhciBsPVtdLG09IiIscTtmb3IoaD1oLm5vZGVUeXBlP1toXTpoO3E9bi5tYXRjaC5QU0VVRE8uZXhlYyhnKTspe20rPXFbMF07Zz1nLnJlcGxhY2Uobi5tYXRjaC5QU0VVRE8sIiIpfWc9bi5yZWxhdGl2ZVtnXT9nKyIqIjpnO3E9MDtmb3IodmFyIHA9aC5sZW5ndGg7cTxwO3ErKylrKGcsaFtxXSxsKTtyZXR1cm4gay5maWx0ZXIobSxsKX07Yy5maW5kPWs7Yy5leHByPWsuc2VsZWN0b3JzO2MuZXhwclsiOiJdPWMuZXhwci5maWx0ZXJzO2MudW5pcXVlPWsudW5pcXVlU29ydDtjLnRleHQ9YTtjLmlzWE1MRG9jPXg7Yy5jb250YWlucz1FfSkoKTt2YXIgZWI9L1VudGlsJC8sZmI9L14oPzpwYXJlbnRzfHByZXZVbnRpbHxwcmV2QWxsKS8sZ2I9LywvO1I9QXJyYXkucHJvdG90eXBlLnNsaWNlO3ZhciBJYT1mdW5jdGlvbihhLGIsZCl7aWYoYy5pc0Z1bmN0aW9uKGIpKXJldHVybiBjLmdyZXAoYSxmdW5jdGlvbihlLGope3JldHVybiEhYi5jYWxsKGUsaixlKT09PWR9KTtlbHNlIGlmKGIubm9kZVR5cGUpcmV0dXJuIGMuZ3JlcChhLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09Yj09PWR9KTtlbHNlIGlmKHR5cGVvZiBiPT09InN0cmluZyIpe3ZhciBmPWMuZ3JlcChhLGZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVUeXBlPT09MX0pO2lmKFVhLnRlc3QoYikpcmV0dXJuIGMuZmlsdGVyKGIsZiwhZCk7ZWxzZSBiPWMuZmlsdGVyKGIsZil9cmV0dXJuIGMuZ3JlcChhLGZ1bmN0aW9uKGUpe3JldHVybiBjLmluQXJyYXkoZSxiKT49MD09PWR9KX07Yy5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucHVzaFN0YWNrKCIiLCJmaW5kIixhKSxkPTAsZj0wLGU9dGhpcy5sZW5ndGg7ZjxlO2YrKyl7ZD1iLmxlbmd0aDtjLmZpbmQoYSx0aGlzW2ZdLGIpO2lmKGY+MClmb3IodmFyIGo9ZDtqPGIubGVuZ3RoO2orKylmb3IodmFyIGk9MDtpPGQ7aSsrKWlmKGJbaV09PT1iW2pdKXtiLnNwbGljZShqLS0sMSk7YnJlYWt9fXJldHVybiBifSxoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9YyhhKTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGQ9MCxmPWIubGVuZ3RoO2Q8ZjtkKyspaWYoYy5jb250YWlucyh0aGlzLGJbZF0pKXJldHVybiB0cnVlfSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soSWEodGhpcyxhLGZhbHNlKSwibm90IixhKX0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhJYSh0aGlzLGEsdHJ1ZSksImZpbHRlciIsYSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhYSYmYy5maWx0ZXIoYSx0aGlzKS5sZW5ndGg+MH0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2lmKGMuaXNBcnJheShhKSl7dmFyIGQ9W10sZj10aGlzWzBdLGUsaj17fSxpO2lmKGYmJmEubGVuZ3RoKXtlPTA7Zm9yKHZhciBvPWEubGVuZ3RoO2U8bztlKyspe2k9YVtlXTtqW2ldfHwoaltpXT1jLmV4cHIubWF0Y2guUE9TLnRlc3QoaSk/YyhpLGJ8fHRoaXMuY29udGV4dCk6aSl9Zm9yKDtmJiZmLm93bmVyRG9jdW1lbnQmJmYhPT1iOyl7Zm9yKGkgaW4gail7ZT1qW2ldO2lmKGUuanF1ZXJ5P2UuaW5kZXgoZik+LTE6YyhmKS5pcyhlKSl7ZC5wdXNoKHtzZWxlY3RvcjppLGVsZW06Zn0pO2RlbGV0ZSBqW2ldfX1mPWYucGFyZW50Tm9kZX19cmV0dXJuIGR9dmFyIGs9Yy5leHByLm1hdGNoLlBPUy50ZXN0KGEpP2MoYSxifHx0aGlzLmNvbnRleHQpOm51bGw7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKG4scil7Zm9yKDtyJiZyLm93bmVyRG9jdW1lbnQmJnIhPT1iOyl7aWYoaz9rLmluZGV4KHIpPi0xOmMocikuaXMoYSkpcmV0dXJuIHI7cj1yLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9KX0saW5kZXg6ZnVuY3Rpb24oYSl7aWYoIWF8fHR5cGVvZiBhPT09InN0cmluZyIpcmV0dXJuIGMuaW5BcnJheSh0aGlzWzBdLGE/YyhhKTp0aGlzLnBhcmVudCgpLmNoaWxkcmVuKCkpO3JldHVybiBjLmluQXJyYXkoYS5qcXVlcnk/YVswXTphLHRoaXMpfSxhZGQ6ZnVuY3Rpb24oYSxiKXthPXR5cGVvZiBhPT09InN0cmluZyI/YyhhLGJ8fHRoaXMuY29udGV4dCk6Yy5tYWtlQXJyYXkoYSk7Yj1jLm1lcmdlKHRoaXMuZ2V0KCksYSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHFhKGFbMF0pfHxxYShiWzBdKT9iOmMudW5pcXVlKGIpKX0sYW5kU2VsZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZCh0aGlzLnByZXZPYmplY3QpfX0pO2MuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJmEubm9kZVR5cGUhPT0xMT9hOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGlyKGEsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5kaXIoYSwicGFyZW50Tm9kZSIsZCl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGMubnRoKGEsMiwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gYy5udGgoYSwyLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gYy5kaXIoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gYy5kaXIoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZGlyKGEsIm5leHRTaWJsaW5nIixkKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5kaXIoYSwicHJldmlvdXNTaWJsaW5nIixkKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuc2libGluZyhhLnBhcmVudE5vZGUuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIGMuc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYy5ub2RlTmFtZShhLCJpZnJhbWUiKT9hLmNvbnRlbnREb2N1bWVudHx8YS5jb250ZW50V2luZG93LmRvY3VtZW50OmMubWFrZUFycmF5KGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe2MuZm5bYV09ZnVuY3Rpb24oZCxmKXt2YXIgZT1jLm1hcCh0aGlzLGIsZCk7ZWIudGVzdChhKXx8KGY9ZCk7aWYoZiYmdHlwZW9mIGY9PT0ic3RyaW5nIillPWMuZmlsdGVyKGYsZSk7ZT10aGlzLmxlbmd0aD4xP2MudW5pcXVlKGUpOmU7aWYoKHRoaXMubGVuZ3RoPjF8fGdiLnRlc3QoZikpJiZmYi50ZXN0KGEpKWU9ZS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUsYSxSLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfX0pO2MuZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oYSxiLGQpe2lmKGQpYT0iOm5vdCgiK2ErIikiO3JldHVybiBjLmZpbmQubWF0Y2hlcyhhLGIpfSxkaXI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBmPVtdO2ZvcihhPWFbYl07YSYmYS5ub2RlVHlwZSE9PTkmJihkPT09d3x8YS5ub2RlVHlwZSE9PTF8fCFjKGEpLmlzKGQpKTspe2Eubm9kZVR5cGU9PT0xJiZmLnB1c2goYSk7YT1hW2JdfXJldHVybiBmfSxudGg6ZnVuY3Rpb24oYSxiLGQpe2I9Ynx8MTtmb3IodmFyIGY9MDthO2E9YVtkXSlpZihhLm5vZGVUeXBlPT09MSYmKytmPT09YilicmVhaztyZXR1cm4gYX0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD1bXTthO2E9YS5uZXh0U2libGluZylhLm5vZGVUeXBlPT09MSYmYSE9PWImJmQucHVzaChhKTtyZXR1cm4gZH19KTt2YXIgSmE9LyBqUXVlcnlcZCs9Iig/OlxkK3xudWxsKSIvZyxWPS9eXHMrLyxLYT0vKDwoW1x3Ol0rKVtePl0qPylcLz4vZyxoYj0vXig/OmFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pJC9pLExhPS88KFtcdzpdKykvLGliPS88dGJvZHkvaSxqYj0vPHwmIz9cdys7Lyx0YT0vPHNjcmlwdHw8b2JqZWN0fDxlbWJlZHw8b3B0aW9ufDxzdHlsZS9pLHVhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLE1hPWZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gaGIudGVzdChkKT9hOmIrIj48LyIrZCsiPiJ9LEY9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLGxlZ2VuZDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07Ri5vcHRncm91cD1GLm9wdGlvbjtGLnRib2R5PUYudGZvb3Q9Ri5jb2xncm91cD1GLmNhcHRpb249Ri50aGVhZDtGLnRoPUYudGQ7aWYoIWMuc3VwcG9ydC5odG1sU2VyaWFsaXplKUYuX2RlZmF1bHQ9WzEsImRpdjxkaXY+IiwiPC9kaXY+Il07Yy5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7dmFyIGQ9Yyh0aGlzKTtkLnRleHQoYS5jYWxsKHRoaXMsYixkLnRleHQoKSkpfSk7aWYodHlwZW9mIGEhPT0ib2JqZWN0IiYmYSE9PXcpcmV0dXJuIHRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8cykuY3JlYXRlVGV4dE5vZGUoYSkpO3JldHVybiBjLnRleHQodGhpcyl9LHdyYXBBbGw6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZCl7Yyh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGQpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPWMoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKHRydWUpO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSk7Yi5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGQ9dGhpcztkLmZpcnN0Q2hpbGQmJmQuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTE7KWQ9ZC5maXJzdENoaWxkO3JldHVybiBkfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7Yyh0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPWModGhpcyksZD1iLmNvbnRlbnRzKCk7ZC5sZW5ndGg/ZC53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2ModGhpcykud3JhcEFsbChhKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Yy5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGModGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsdHJ1ZSxmdW5jdGlvbihhKXt0aGlzLm5vZGVUeXBlPT09MSYmdGhpcy5hcHBlbmRDaGlsZChhKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLHRydWUsZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMuaW5zZXJ0QmVmb3JlKGEsdGhpcy5maXJzdENoaWxkKX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZhbHNlLGZ1bmN0aW9uKGIpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzKX0pO2Vsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9Yyhhcmd1bWVudHNbMF0pO2EucHVzaC5hcHBseShhLHRoaXMudG9BcnJheSgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYSwiYmVmb3JlIixhcmd1bWVudHMpfX0sYWZ0ZXI6ZnVuY3Rpb24oKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZhbHNlLGZ1bmN0aW9uKGIpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm5leHRTaWJsaW5nKX0pO2Vsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9dGhpcy5wdXNoU3RhY2sodGhpcywiYWZ0ZXIiLGFyZ3VtZW50cyk7YS5wdXNoLmFwcGx5KGEsYyhhcmd1bWVudHNbMF0pLnRvQXJyYXkoKSk7cmV0dXJuIGF9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9MCxmOyhmPXRoaXNbZF0pIT1udWxsO2QrKylpZighYXx8Yy5maWx0ZXIoYSxbZl0pLmxlbmd0aCl7aWYoIWImJmYubm9kZVR5cGU9PT0xKXtjLmNsZWFuRGF0YShmLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO2MuY2xlYW5EYXRhKFtmXSl9Zi5wYXJlbnROb2RlJiZmLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZil9cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYjsoYj10aGlzW2FdKSE9bnVsbDthKyspZm9yKGIubm9kZVR5cGU9PT0xJiZjLmNsZWFuRGF0YShiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO2IuZmlyc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmZpcnN0Q2hpbGQpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcChmdW5jdGlvbigpe2lmKCFjLnN1cHBvcnQubm9DbG9uZUV2ZW50JiYhYy5pc1hNTERvYyh0aGlzKSl7dmFyIGQ9dGhpcy5vdXRlckhUTUwsZj10aGlzLm93bmVyRG9jdW1lbnQ7aWYoIWQpe2Q9Zi5jcmVhdGVFbGVtZW50KCJkaXYiKTtkLmFwcGVuZENoaWxkKHRoaXMuY2xvbmVOb2RlKHRydWUpKTtkPWQuaW5uZXJIVE1MfXJldHVybiBjLmNsZWFuKFtkLnJlcGxhY2UoSmEsIiIpLnJlcGxhY2UoLz0oW149Iic+XHNdK1wvKT4vZywnPSIkMSI+JykucmVwbGFjZShWLCIiKV0sZilbMF19ZWxzZSByZXR1cm4gdGhpcy5jbG9uZU5vZGUodHJ1ZSl9KTtpZihhPT09dHJ1ZSl7cmEodGhpcyxiKTtyYSh0aGlzLmZpbmQoIioiKSxiLmZpbmQoIioiKSl9cmV0dXJuIGJ9LGh0bWw6ZnVuY3Rpb24oYSl7aWYoYT09PXcpcmV0dXJuIHRoaXNbMF0mJnRoaXNbMF0ubm9kZVR5cGU9PT0xP3RoaXNbMF0uaW5uZXJIVE1MLnJlcGxhY2UoSmEsIiIpOm51bGw7ZWxzZSBpZih0eXBlb2YgYT09PSJzdHJpbmciJiYhdGEudGVzdChhKSYmKGMuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZXx8IVYudGVzdChhKSkmJiFGWyhMYS5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoS2EsTWEpO3RyeXtmb3IodmFyIGI9MCxkPXRoaXMubGVuZ3RoO2I8ZDtiKyspaWYodGhpc1tiXS5ub2RlVHlwZT09PTEpe2MuY2xlYW5EYXRhKHRoaXNbYl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSk7dGhpc1tiXS5pbm5lckhUTUw9YX19Y2F0Y2goZil7dGhpcy5lbXB0eSgpLmFwcGVuZChhKX19ZWxzZSBjLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBqPWModGhpcyksaT1qLmh0bWwoKTtqLmVtcHR5KCkuYXBwZW5kKGZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbCh0aGlzLGUsaSl9KX0pOnRoaXMuZW1wdHkoKS5hcHBlbmQoYSk7cmV0dXJuIHRoaXN9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEpe2lmKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7dmFyIGQ9Yyh0aGlzKSxmPWQuaHRtbCgpO2QucmVwbGFjZVdpdGgoYS5jYWxsKHRoaXMsYixmKSl9KTtpZih0eXBlb2YgYSE9PSJzdHJpbmciKWE9YyhhKS5kZXRhY2goKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5uZXh0U2libGluZyxkPXRoaXMucGFyZW50Tm9kZTtjKHRoaXMpLnJlbW92ZSgpO2I/YyhiKS5iZWZvcmUoYSk6YyhkKS5hcHBlbmQoYSl9KX1lbHNlIHJldHVybiB0aGlzLnB1c2hTdGFjayhjKGMuaXNGdW5jdGlvbihhKT9hKCk6YSksInJlcGxhY2VXaXRoIixhKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLHRydWUpfSxkb21NYW5pcDpmdW5jdGlvbihhLGIsZCl7ZnVuY3Rpb24gZih1KXtyZXR1cm4gYy5ub2RlTmFtZSh1LCJ0YWJsZSIpP3UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fHUuYXBwZW5kQ2hpbGQodS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOnV9dmFyIGUsaixpPWFbMF0sbz1bXSxrO2lmKCFjLnN1cHBvcnQuY2hlY2tDbG9uZSYmYXJndW1lbnRzLmxlbmd0aD09PTMmJnR5cGVvZiBpPT09InN0cmluZyImJnVhLnRlc3QoaSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2ModGhpcykuZG9tTWFuaXAoYSxiLGQsdHJ1ZSl9KTtpZihjLmlzRnVuY3Rpb24oaSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih1KXt2YXIgej1jKHRoaXMpO2FbMF09aS5jYWxsKHRoaXMsdSxiP3ouaHRtbCgpOncpO3ouZG9tTWFuaXAoYSxiLGQpfSk7aWYodGhpc1swXSl7ZT1pJiZpLnBhcmVudE5vZGU7ZT1jLnN1cHBvcnQucGFyZW50Tm9kZSYmZSYmZS5ub2RlVHlwZT09PTExJiZlLmNoaWxkTm9kZXMubGVuZ3RoPT09dGhpcy5sZW5ndGg/e2ZyYWdtZW50OmV9OnNhKGEsdGhpcyxvKTtrPWUuZnJhZ21lbnQ7aWYoaj1rLmNoaWxkTm9kZXMubGVuZ3RoPT09MT8oaz1rLmZpcnN0Q2hpbGQpOmsuZmlyc3RDaGlsZCl7Yj1iJiZjLm5vZGVOYW1lKGosInRyIik7Zm9yKHZhciBuPTAscj10aGlzLmxlbmd0aDtuPHI7bisrKWQuY2FsbChiP2YodGhpc1tuXSxqKTp0aGlzW25dLG4+MHx8ZS5jYWNoZWFibGV8fHRoaXMubGVuZ3RoPjE/ay5jbG9uZU5vZGUodHJ1ZSk6ayl9by5sZW5ndGgmJmMuZWFjaChvLFFhKX1yZXR1cm4gdGhpc319KTtjLmZyYWdtZW50cz17fTtjLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihhLGIpe2MuZm5bYV09ZnVuY3Rpb24oZCl7dmFyIGY9W107ZD1jKGQpO3ZhciBlPXRoaXMubGVuZ3RoPT09MSYmdGhpc1swXS5wYXJlbnROb2RlO2lmKGUmJmUubm9kZVR5cGU9PT0xMSYmZS5jaGlsZE5vZGVzLmxlbmd0aD09PTEmJmQubGVuZ3RoPT09MSl7ZFtiXSh0aGlzWzBdKTtyZXR1cm4gdGhpc31lbHNle2U9MDtmb3IodmFyIGo9ZC5sZW5ndGg7ZTxqO2UrKyl7dmFyIGk9KGU+MD90aGlzLmNsb25lKHRydWUpOnRoaXMpLmdldCgpO2MuZm5bYl0uYXBwbHkoYyhkW2VdKSxpKTtmPWYuY29uY2F0KGkpfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLGEsZC5zZWxlY3Rvcil9fX0pO2MuZXh0ZW5kKHtjbGVhbjpmdW5jdGlvbihhLGIsZCxmKXtiPWJ8fHM7aWYodHlwZW9mIGIuY3JlYXRlRWxlbWVudD09PSJ1bmRlZmluZWQiKWI9Yi5vd25lckRvY3VtZW50fHxiWzBdJiZiWzBdLm93bmVyRG9jdW1lbnR8fHM7Zm9yKHZhciBlPVtdLGo9MCxpOyhpPWFbal0pIT1udWxsO2orKyl7aWYodHlwZW9mIGk9PT0ibnVtYmVyIilpKz0iIjtpZihpKXtpZih0eXBlb2YgaT09PSJzdHJpbmciJiYhamIudGVzdChpKSlpPWIuY3JlYXRlVGV4dE5vZGUoaSk7ZWxzZSBpZih0eXBlb2YgaT09PSJzdHJpbmciKXtpPWkucmVwbGFjZShLYSxNYSk7dmFyIG89KExhLmV4ZWMoaSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksaz1GW29dfHxGLl9kZWZhdWx0LG49a1swXSxyPWIuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKHIuaW5uZXJIVE1MPWtbMV0raStrWzJdO24tLTspcj1yLmxhc3RDaGlsZDtpZighYy5zdXBwb3J0LnRib2R5KXtuPWliLnRlc3QoaSk7bz1vPT09InRhYmxlIiYmIW4/ci5maXJzdENoaWxkJiZyLmZpcnN0Q2hpbGQuY2hpbGROb2RlczprWzFdPT09Ijx0YWJsZT4iJiYhbj9yLmNoaWxkTm9kZXM6W107Zm9yKGs9by5sZW5ndGgtMTtrPj0wOy0tayljLm5vZGVOYW1lKG9ba10sInRib2R5IikmJiFvW2tdLmNoaWxkTm9kZXMubGVuZ3RoJiZvW2tdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob1trXSl9IWMuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmVi50ZXN0KGkpJiZyLmluc2VydEJlZm9yZShiLmNyZWF0ZVRleHROb2RlKFYuZXhlYyhpKVswXSksci5maXJzdENoaWxkKTtpPXIuY2hpbGROb2Rlc31pZihpLm5vZGVUeXBlKWUucHVzaChpKTtlbHNlIGU9Yy5tZXJnZShlLGkpfX1pZihkKWZvcihqPTA7ZVtqXTtqKyspaWYoZiYmYy5ub2RlTmFtZShlW2pdLCJzY3JpcHQiKSYmKCFlW2pdLnR5cGV8fGVbal0udHlwZS50b0xvd2VyQ2FzZSgpPT09InRleHQvamF2YXNjcmlwdCIpKWYucHVzaChlW2pdLnBhcmVudE5vZGU/ZVtqXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVbal0pOmVbal0pO2Vsc2V7ZVtqXS5ub2RlVHlwZT09PTEmJmUuc3BsaWNlLmFwcGx5KGUsW2orMSwwXS5jb25jYXQoYy5tYWtlQXJyYXkoZVtqXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IikpKSk7ZC5hcHBlbmRDaGlsZChlW2pdKX1yZXR1cm4gZX0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkLGY9Yy5jYWNoZSxlPWMuZXZlbnQuc3BlY2lhbCxqPWMuc3VwcG9ydC5kZWxldGVFeHBhbmRvLGk9MCxvOyhvPWFbaV0pIT1udWxsO2krKylpZihkPW9bYy5leHBhbmRvXSl7Yj1mW2RdO2lmKGIuZXZlbnRzKWZvcih2YXIgayBpbiBiLmV2ZW50cyllW2tdP2MuZXZlbnQucmVtb3ZlKG8sayk6Q2EobyxrLGIuaGFuZGxlKTtpZihqKWRlbGV0ZSBvW2MuZXhwYW5kb107ZWxzZSBvLnJlbW92ZUF0dHJpYnV0ZSYmby5yZW1vdmVBdHRyaWJ1dGUoYy5leHBhbmRvKTtkZWxldGUgZltkXX19fSk7dmFyIGtiPS96LT9pbmRleHxmb250LT93ZWlnaHR8b3BhY2l0eXx6b29tfGxpbmUtP2hlaWdodC9pLE5hPS9hbHBoYVwoW14pXSpcKS8sT2E9L29wYWNpdHk9KFteKV0qKS8saGE9L2Zsb2F0L2ksaWE9Ly0oW2Etel0pL2lnLGxiPS8oW0EtWl0pL2csbWI9L14tP1xkKyg/OnB4KT8kL2ksbmI9L14tP1xkLyxvYj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0scGI9WyJMZWZ0IiwiUmlnaHQiXSxxYj1bIlRvcCIsIkJvdHRvbSJdLHJiPXMuZGVmYXVsdFZpZXcmJnMuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSxQYT1jLnN1cHBvcnQuY3NzRmxvYXQ/ImNzc0Zsb2F0Ijoic3R5bGVGbG9hdCIsamE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtjLmZuLmNzcz1mdW5jdGlvbihhLGIpe3JldHVybiBYKHRoaXMsYSxiLHRydWUsZnVuY3Rpb24oZCxmLGUpe2lmKGU9PT13KXJldHVybiBjLmN1ckNTUyhkLGYpO2lmKHR5cGVvZiBlPT09Im51bWJlciImJiFrYi50ZXN0KGYpKWUrPSJweCI7Yy5zdHlsZShkLGYsZSl9KX07Yy5leHRlbmQoe3N0eWxlOmZ1bmN0aW9uKGEsYixkKXtpZighYXx8YS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04KXJldHVybiB3O2lmKChiPT09IndpZHRoInx8Yj09PSJoZWlnaHQiKSYmcGFyc2VGbG9hdChkKTwwKWQ9dzt2YXIgZj1hLnN0eWxlfHxhLGU9ZCE9PXc7aWYoIWMuc3VwcG9ydC5vcGFjaXR5JiZiPT09Im9wYWNpdHkiKXtpZihlKXtmLnpvb209MTtiPXBhcnNlSW50KGQsMTApKyIiPT09Ik5hTiI/IiI6ImFscGhhKG9wYWNpdHk9IitkKjEwMCsiKSI7YT1mLmZpbHRlcnx8Yy5jdXJDU1MoYSwiZmlsdGVyIil8fCIiO2YuZmlsdGVyPU5hLnRlc3QoYSk/YS5yZXBsYWNlKE5hLGIpOmJ9cmV0dXJuIGYuZmlsdGVyJiZmLmZpbHRlci5pbmRleE9mKCJvcGFjaXR5PSIpPj0wP3BhcnNlRmxvYXQoT2EuZXhlYyhmLmZpbHRlcilbMV0pLzEwMCsiIjoiIn1pZihoYS50ZXN0KGIpKWI9UGE7Yj1iLnJlcGxhY2UoaWEsamEpO2lmKGUpZltiXT1kO3JldHVybiBmW2JdfSxjc3M6ZnVuY3Rpb24oYSxiLGQsZil7aWYoYj09PSJ3aWR0aCJ8fGI9PT0iaGVpZ2h0Iil7dmFyIGUsaj1iPT09IndpZHRoIj9wYjpxYjtmdW5jdGlvbiBpKCl7ZT1iPT09IndpZHRoIj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0O2YhPT0iYm9yZGVyIiYmYy5lYWNoKGosZnVuY3Rpb24oKXtmfHwoZS09cGFyc2VGbG9hdChjLmN1ckNTUyhhLCJwYWRkaW5nIit0aGlzLHRydWUpKXx8MCk7aWYoZj09PSJtYXJnaW4iKWUrPXBhcnNlRmxvYXQoYy5jdXJDU1MoYSwibWFyZ2luIit0aGlzLHRydWUpKXx8MDtlbHNlIGUtPXBhcnNlRmxvYXQoYy5jdXJDU1MoYSwiYm9yZGVyIit0aGlzKyJXaWR0aCIsdHJ1ZSkpfHwwfSl9YS5vZmZzZXRXaWR0aCE9PTA/aSgpOmMuc3dhcChhLG9iLGkpO3JldHVybiBNYXRoLm1heCgwLE1hdGgucm91bmQoZSkpfXJldHVybiBjLmN1ckNTUyhhLGIsZCl9LGN1ckNTUzpmdW5jdGlvbihhLGIsZCl7dmFyIGYsZT1hLnN0eWxlO2lmKCFjLnN1cHBvcnQub3BhY2l0eSYmYj09PSJvcGFjaXR5IiYmYS5jdXJyZW50U3R5bGUpe2Y9T2EudGVzdChhLmN1cnJlbnRTdHlsZS5maWx0ZXJ8fCIiKT9wYXJzZUZsb2F0KFJlZ0V4cC4kMSkvMTAwKyIiOiIiO3JldHVybiBmPT09IiI/IjEiOmZ9aWYoaGEudGVzdChiKSliPVBhO2lmKCFkJiZlJiZlW2JdKWY9ZVtiXTtlbHNlIGlmKHJiKXtpZihoYS50ZXN0KGIpKWI9ImZsb2F0IjtiPWIucmVwbGFjZShsYiwiLSQxIikudG9Mb3dlckNhc2UoKTtlPWEub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztpZighZSlyZXR1cm4gbnVsbDtpZihhPWUuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKWY9YS5nZXRQcm9wZXJ0eVZhbHVlKGIpO2lmKGI9PT0ib3BhY2l0eSImJmY9PT0iIilmPSIxIn1lbHNlIGlmKGEuY3VycmVudFN0eWxlKXtkPWIucmVwbGFjZShpYSxqYSk7Zj1hLmN1cnJlbnRTdHlsZVtiXXx8YS5jdXJyZW50U3R5bGVbZF07aWYoIW1iLnRlc3QoZikmJm5iLnRlc3QoZikpe2I9ZS5sZWZ0O3ZhciBqPWEucnVudGltZVN0eWxlLmxlZnQ7YS5ydW50aW1lU3R5bGUubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0O2UubGVmdD1kPT09ImZvbnRTaXplIj8iMWVtIjpmfHwwO2Y9ZS5waXhlbExlZnQrInB4IjtlLmxlZnQ9YjthLnJ1bnRpbWVTdHlsZS5sZWZ0PWp9fXJldHVybiBmfSxzd2FwOmZ1bmN0aW9uKGEsYixkKXt2YXIgZj17fTtmb3IodmFyIGUgaW4gYil7ZltlXT1hLnN0eWxlW2VdO2Euc3R5bGVbZV09YltlXX1kLmNhbGwoYSk7Zm9yKGUgaW4gYilhLnN0eWxlW2VdPWZbZV19fSk7aWYoYy5leHByJiZjLmV4cHIuZmlsdGVycyl7Yy5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3ZhciBiPWEub2Zmc2V0V2lkdGgsZD1hLm9mZnNldEhlaWdodCxmPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJ0ciI7cmV0dXJuIGI9PT0wJiZkPT09MCYmIWY/dHJ1ZTpiPjAmJmQ+MCYmIWY/ZmFsc2U6Yy5jdXJDU1MoYSwiZGlzcGxheSIpPT09Im5vbmUifTtjLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFjLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9fXZhciBzYj1KKCksdGI9LzxzY3JpcHQoLnxccykqP1wvc2NyaXB0Pi9naSx1Yj0vc2VsZWN0fHRleHRhcmVhL2ksdmI9L2NvbG9yfGRhdGV8ZGF0ZXRpbWV8ZW1haWx8aGlkZGVufG1vbnRofG51bWJlcnxwYXNzd29yZHxyYW5nZXxzZWFyY2h8dGVsfHRleHR8dGltZXx1cmx8d2Vlay9pLE49Lz1cPygmfCQpLyxrYT0vXD8vLHdiPS8oXD98JilfPS4qPygmfCQpLyx4Yj0vXihcdys6KT9cL1wvKFteXC8/I10rKS8seWI9LyUyMC9nLHpiPWMuZm4ubG9hZDtjLmZuLmV4dGVuZCh7bG9hZDpmdW5jdGlvbihhLGIsZCl7aWYodHlwZW9mIGEhPT0ic3RyaW5nIilyZXR1cm4gemIuY2FsbCh0aGlzLGEpO2Vsc2UgaWYoIXRoaXMubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBmPWEuaW5kZXhPZigiICIpO2lmKGY+PTApe3ZhciBlPWEuc2xpY2UoZixhLmxlbmd0aCk7YT1hLnNsaWNlKDAsZil9Zj0iR0VUIjtpZihiKWlmKGMuaXNGdW5jdGlvbihiKSl7ZD1iO2I9bnVsbH1lbHNlIGlmKHR5cGVvZiBiPT09Im9iamVjdCIpe2I9Yy5wYXJhbShiLGMuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKTtmPSJQT1NUIn12YXIgaj10aGlzO2MuYWpheCh7dXJsOmEsdHlwZTpmLGRhdGFUeXBlOiJodG1sIixkYXRhOmIsY29tcGxldGU6ZnVuY3Rpb24oaSxvKXtpZihvPT09InN1Y2Nlc3MifHxvPT09Im5vdG1vZGlmaWVkIilqLmh0bWwoZT9jKCI8ZGl2IC8+IikuYXBwZW5kKGkucmVzcG9uc2VUZXh0LnJlcGxhY2UodGIsIiIpKS5maW5kKGUpOmkucmVzcG9uc2VUZXh0KTtkJiZqLmVhY2goZCxbaS5yZXNwb25zZVRleHQsbyxpXSl9fSk7cmV0dXJuIHRoaXN9LHNlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBjLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudHM/Yy5tYWtlQXJyYXkodGhpcy5lbGVtZW50cyk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUmJiF0aGlzLmRpc2FibGVkJiYodGhpcy5jaGVja2VkfHx1Yi50ZXN0KHRoaXMubm9kZU5hbWUpfHx2Yi50ZXN0KHRoaXMudHlwZSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7YT1jKHRoaXMpLnZhbCgpO3JldHVybiBhPT1udWxsP251bGw6Yy5pc0FycmF5KGEpP2MubWFwKGEsZnVuY3Rpb24oZCl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmR9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmF9fSkuZ2V0KCl9fSk7Yy5lYWNoKCJhamF4U3RhcnQgYWpheFN0b3AgYWpheENvbXBsZXRlIGFqYXhFcnJvciBhamF4U3VjY2VzcyBhamF4U2VuZCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2MuZm5bYl09ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMuYmluZChiLGQpfX0pO2MuZXh0ZW5kKHtnZXQ6ZnVuY3Rpb24oYSxiLGQsZil7aWYoYy5pc0Z1bmN0aW9uKGIpKXtmPWZ8fGQ7ZD1iO2I9bnVsbH1yZXR1cm4gYy5hamF4KHt0eXBlOiJHRVQiLHVybDphLGRhdGE6YixzdWNjZXNzOmQsZGF0YVR5cGU6Zn0pfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5nZXQoYSxudWxsLGIsInNjcmlwdCIpfSxnZXRKU09OOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5nZXQoYSxiLGQsImpzb24iKX0scG9zdDpmdW5jdGlvbihhLGIsZCxmKXtpZihjLmlzRnVuY3Rpb24oYikpe2Y9Znx8ZDtkPWI7Yj17fX1yZXR1cm4gYy5hamF4KHt0eXBlOiJQT1NUIix1cmw6YSxkYXRhOmIsc3VjY2VzczpkLGRhdGFUeXBlOmZ9KX0sYWpheFNldHVwOmZ1bmN0aW9uKGEpe2MuZXh0ZW5kKGMuYWpheFNldHRpbmdzLGEpfSxhamF4U2V0dGluZ3M6e3VybDpsb2NhdGlvbi5ocmVmLGdsb2JhbDp0cnVlLHR5cGU6IkdFVCIsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLHhocjpBLlhNTEh0dHBSZXF1ZXN0JiYoQS5sb2NhdGlvbi5wcm90b2NvbCE9PSJmaWxlOiJ8fCFBLkFjdGl2ZVhPYmplY3QpP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBBLlhNTEh0dHBSZXF1ZXN0fTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChhKXt9fSxhY2NlcHRzOnt4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGh0bWw6InRleHQvaHRtbCIsc2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCIsdGV4dDoidGV4dC9wbGFpbiIsX2RlZmF1bHQ6IiovKiJ9fSxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlLnN1Y2Nlc3MmJmUuc3VjY2Vzcy5jYWxsKGssbyxpLHgpO2UuZ2xvYmFsJiZmKCJhamF4U3VjY2VzcyIsW3gsZV0pfWZ1bmN0aW9uIGQoKXtlLmNvbXBsZXRlJiZlLmNvbXBsZXRlLmNhbGwoayx4LGkpO2UuZ2xvYmFsJiZmKCJhamF4Q29tcGxldGUiLFt4LGVdKTtlLmdsb2JhbCYmIS0tYy5hY3RpdmUmJmMuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKX1mdW5jdGlvbiBmKHEscCl7KGUuY29udGV4dD9jKGUuY29udGV4dCk6Yy5ldmVudCkudHJpZ2dlcihxLHApfXZhciBlPWMuZXh0ZW5kKHRydWUse30sYy5hamF4U2V0dGluZ3MsYSksaixpLG8saz1hJiZhLmNvbnRleHR8fGUsbj1lLnR5cGUudG9VcHBlckNhc2UoKTtpZihlLmRhdGEmJmUucHJvY2Vzc0RhdGEmJnR5cGVvZiBlLmRhdGEhPT0ic3RyaW5nIillLmRhdGE9Yy5wYXJhbShlLmRhdGEsZS50cmFkaXRpb25hbCk7aWYoZS5kYXRhVHlwZT09PSJqc29ucCIpe2lmKG49PT0iR0VUIilOLnRlc3QoZS51cmwpfHwoZS51cmwrPShrYS50ZXN0KGUudXJsKT8iJiI6Ij8iKSsoZS5qc29ucHx8ImNhbGxiYWNrIikrIj0/Iik7ZWxzZSBpZighZS5kYXRhfHwhTi50ZXN0KGUuZGF0YSkpZS5kYXRhPShlLmRhdGE/ZS5kYXRhKyImIjoiIikrKGUuanNvbnB8fCJjYWxsYmFjayIpKyI9PyI7ZS5kYXRhVHlwZT0ianNvbiJ9aWYoZS5kYXRhVHlwZT09PSJqc29uIiYmKGUuZGF0YSYmTi50ZXN0KGUuZGF0YSl8fE4udGVzdChlLnVybCkpKXtqPWUuanNvbnBDYWxsYmFja3x8Impzb25wIitzYisrO2lmKGUuZGF0YSllLmRhdGE9KGUuZGF0YSsiIikucmVwbGFjZShOLCI9IitqKyIkMSIpO2UudXJsPWUudXJsLnJlcGxhY2UoTiwiPSIraisiJDEiKTtlLmRhdGFUeXBlPSJzY3JpcHQiO0Fbal09QVtqXXx8ZnVuY3Rpb24ocSl7bz1xO2IoKTtkKCk7QVtqXT13O3RyeXtkZWxldGUgQVtqXX1jYXRjaChwKXt9eiYmei5yZW1vdmVDaGlsZChDKX19aWYoZS5kYXRhVHlwZT09PSJzY3JpcHQiJiZlLmNhY2hlPT09bnVsbCllLmNhY2hlPWZhbHNlO2lmKGUuY2FjaGU9PT1mYWxzZSYmbj09PSJHRVQiKXt2YXIgcj1KKCksdT1lLnVybC5yZXBsYWNlKHdiLCIkMV89IityKyIkMiIpO2UudXJsPXUrKHU9PT1lLnVybD8oa2EudGVzdChlLnVybCk/IiYiOiI/IikrIl89IityOiIiKX1pZihlLmRhdGEmJm49PT0iR0VUIillLnVybCs9KGthLnRlc3QoZS51cmwpPyImIjoiPyIpK2UuZGF0YTtlLmdsb2JhbCYmIWMuYWN0aXZlKysmJmMuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iik7cj0ocj14Yi5leGVjKGUudXJsKSkmJihyWzFdJiZyWzFdIT09bG9jYXRpb24ucHJvdG9jb2x8fHJbMl0hPT1sb2NhdGlvbi5ob3N0KTtpZihlLmRhdGFUeXBlPT09InNjcmlwdCImJm49PT0iR0VUIiYmcil7dmFyIHo9cy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxzLmRvY3VtZW50RWxlbWVudCxDPXMuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Qy5zcmM9ZS51cmw7aWYoZS5zY3JpcHRDaGFyc2V0KUMuY2hhcnNldD1lLnNjcmlwdENoYXJzZXQ7aWYoIWope3ZhciBCPWZhbHNlO0Mub25sb2FkPUMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoIUImJighdGhpcy5yZWFkeVN0YXRlfHx0aGlzLnJlYWR5U3RhdGU9PT0ibG9hZGVkInx8dGhpcy5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIikpe0I9dHJ1ZTtiKCk7ZCgpO0Mub25sb2FkPUMub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7eiYmQy5wYXJlbnROb2RlJiZ6LnJlbW92ZUNoaWxkKEMpfX19ei5pbnNlcnRCZWZvcmUoQyx6LmZpcnN0Q2hpbGQpO3JldHVybiB3fXZhciBFPWZhbHNlLHg9ZS54aHIoKTtpZih4KXtlLnVzZXJuYW1lP3gub3BlbihuLGUudXJsLGUuYXN5bmMsZS51c2VybmFtZSxlLnBhc3N3b3JkKTp4Lm9wZW4obixlLnVybCxlLmFzeW5jKTt0cnl7aWYoZS5kYXRhfHxhJiZhLmNvbnRlbnRUeXBlKXguc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixlLmNvbnRlbnRUeXBlKTtpZihlLmlmTW9kaWZpZWQpe2MubGFzdE1vZGlmaWVkW2UudXJsXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsYy5sYXN0TW9kaWZpZWRbZS51cmxdKTtjLmV0YWdbZS51cmxdJiZ4LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLGMuZXRhZ1tlLnVybF0pfXJ8fHguc2V0UmVxdWVzdEhlYWRlcigiWC1SZXF1ZXN0ZWQtV2l0aCIsIlhNTEh0dHBSZXF1ZXN0Iik7eC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGUuZGF0YVR5cGUmJmUuYWNjZXB0c1tlLmRhdGFUeXBlXT9lLmFjY2VwdHNbZS5kYXRhVHlwZV0rIiwgKi8qIjplLmFjY2VwdHMuX2RlZmF1bHQpfWNhdGNoKGdhKXt9aWYoZS5iZWZvcmVTZW5kJiZlLmJlZm9yZVNlbmQuY2FsbChrLHgsZSk9PT1mYWxzZSl7ZS5nbG9iYWwmJiEtLWMuYWN0aXZlJiZjLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIik7eC5hYm9ydCgpO3JldHVybiBmYWxzZX1lLmdsb2JhbCYmZigiYWpheFNlbmQiLFt4LGVdKTt2YXIgZz14Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihxKXtpZigheHx8eC5yZWFkeVN0YXRlPT09MHx8cT09PSJhYm9ydCIpe0V8fGQoKTtFPXRydWU7aWYoeCl4Lm9ucmVhZHlzdGF0ZWNoYW5nZT1jLm5vb3B9ZWxzZSBpZighRSYmeCYmKHgucmVhZHlTdGF0ZT09PTR8fHE9PT0idGltZW91dCIpKXtFPXRydWU7eC5vbnJlYWR5c3RhdGVjaGFuZ2U9Yy5ub29wO2k9cT09PSJ0aW1lb3V0Ij8idGltZW91dCI6IWMuaHR0cFN1Y2Nlc3MoeCk/ImVycm9yIjplLmlmTW9kaWZpZWQmJmMuaHR0cE5vdE1vZGlmaWVkKHgsZS51cmwpPyJub3Rtb2RpZmllZCI6InN1Y2Nlc3MiO3ZhciBwO2lmKGk9PT0ic3VjY2VzcyIpdHJ5e289Yy5odHRwRGF0YSh4LGUuZGF0YVR5cGUsZSl9Y2F0Y2godil7aT0icGFyc2VyZXJyb3IiO3A9dn1pZihpPT09InN1Y2Nlc3MifHxpPT09Im5vdG1vZGlmaWVkIilqfHxiKCk7ZWxzZSBjLmhhbmRsZUVycm9yKGUseCxpLHApO2QoKTtxPT09InRpbWVvdXQiJiZ4LmFib3J0KCk7aWYoZS5hc3luYyl4PW51bGx9fTt0cnl7dmFyIGg9eC5hYm9ydDt4LmFib3J0PWZ1bmN0aW9uKCl7eCYmaC5jYWxsKHgpO2coImFib3J0Iil9fWNhdGNoKGwpe31lLmFzeW5jJiZlLnRpbWVvdXQ+MCYmc2V0VGltZW91dChmdW5jdGlvbigpe3gmJiFFJiZnKCJ0aW1lb3V0Iil9LGUudGltZW91dCk7dHJ5e3guc2VuZChuPT09IlBPU1QifHxuPT09IlBVVCJ8fG49PT0iREVMRVRFIj9lLmRhdGE6bnVsbCl9Y2F0Y2gobSl7Yy5oYW5kbGVFcnJvcihlLHgsbnVsbCxtKTtkKCl9ZS5hc3luY3x8ZygpO3JldHVybiB4fX0saGFuZGxlRXJyb3I6ZnVuY3Rpb24oYSxiLGQsZil7aWYoYS5lcnJvcilhLmVycm9yLmNhbGwoYS5jb250ZXh0fHxhLGIsZCxmKTtpZihhLmdsb2JhbCkoYS5jb250ZXh0P2MoYS5jb250ZXh0KTpjLmV2ZW50KS50cmlnZ2VyKCJhamF4RXJyb3IiLFtiLGEsZl0pfSxhY3RpdmU6MCxodHRwU3VjY2VzczpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIWEuc3RhdHVzJiZsb2NhdGlvbi5wcm90b2NvbD09PSJmaWxlOiJ8fGEuc3RhdHVzPj0yMDAmJmEuc3RhdHVzPDMwMHx8YS5zdGF0dXM9PT0zMDR8fGEuc3RhdHVzPT09MTIyM3x8YS5zdGF0dXM9PT0wfWNhdGNoKGIpe31yZXR1cm4gZmFsc2V9LGh0dHBOb3RNb2RpZmllZDpmdW5jdGlvbihhLGIpe3ZhciBkPWEuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSxmPWEuZ2V0UmVzcG9uc2VIZWFkZXIoIkV0YWciKTtpZihkKWMubGFzdE1vZGlmaWVkW2JdPWQ7aWYoZiljLmV0YWdbYl09ZjtyZXR1cm4gYS5zdGF0dXM9PT0zMDR8fGEuc3RhdHVzPT09MH0saHR0cERhdGE6ZnVuY3Rpb24oYSxiLGQpe3ZhciBmPWEuZ2V0UmVzcG9uc2VIZWFkZXIoImNvbnRlbnQtdHlwZSIpfHwiIixlPWI9PT0ieG1sInx8IWImJmYuaW5kZXhPZigieG1sIik+PTA7YT1lP2EucmVzcG9uc2VYTUw6YS5yZXNwb25zZVRleHQ7ZSYmYS5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWU9PT0icGFyc2VyZXJyb3IiJiZjLmVycm9yKCJwYXJzZXJlcnJvciIpO2lmKGQmJmQuZGF0YUZpbHRlcilhPWQuZGF0YUZpbHRlcihhLGIpO2lmKHR5cGVvZiBhPT09InN0cmluZyIpaWYoYj09PSJqc29uInx8IWImJmYuaW5kZXhPZigianNvbiIpPj0wKWE9Yy5wYXJzZUpTT04oYSk7ZWxzZSBpZihiPT09InNjcmlwdCJ8fCFiJiZmLmluZGV4T2YoImphdmFzY3JpcHQiKT49MCljLmdsb2JhbEV2YWwoYSk7cmV0dXJuIGF9LHBhcmFtOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChpLG8pe2lmKGMuaXNBcnJheShvKSljLmVhY2gobyxmdW5jdGlvbihrLG4pe2J8fC9cW1xdJC8udGVzdChpKT9mKGksbik6ZChpKyJbIisodHlwZW9mIG49PT0ib2JqZWN0Inx8Yy5pc0FycmF5KG4pP2s6IiIpKyJdIixuKX0pO2Vsc2UhYiYmbyE9bnVsbCYmdHlwZW9mIG89PT0ib2JqZWN0Ij9jLmVhY2gobyxmdW5jdGlvbihrLG4pe2QoaSsiWyIraysiXSIsbil9KTpmKGksbyl9ZnVuY3Rpb24gZihpLG8pe289Yy5pc0Z1bmN0aW9uKG8pP28oKTpvO2VbZS5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChpKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG8pfXZhciBlPVtdO2lmKGI9PT13KWI9Yy5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7aWYoYy5pc0FycmF5KGEpfHxhLmpxdWVyeSljLmVhY2goYSxmdW5jdGlvbigpe2YodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IodmFyIGogaW4gYSlkKGosYVtqXSk7cmV0dXJuIGUuam9pbigiJiIpLnJlcGxhY2UoeWIsIisiKX19KTt2YXIgbGE9e30sQWI9L3RvZ2dsZXxzaG93fGhpZGUvLEJiPS9eKFsrLV09KT8oW1xkKy0uXSspKC4qKSQvLFcsdmE9W1siaGVpZ2h0IiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iXSxbIndpZHRoIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiXSxbIm9wYWNpdHkiXV07Yy5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oYSxiKXtpZihhfHxhPT09MClyZXR1cm4gdGhpcy5hbmltYXRlKEsoInNob3ciLDMpLGEsYik7ZWxzZXthPTA7Zm9yKGI9dGhpcy5sZW5ndGg7YTxiO2ErKyl7dmFyIGQ9Yy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiKTt0aGlzW2FdLnN0eWxlLmRpc3BsYXk9ZHx8IiI7aWYoYy5jc3ModGhpc1thXSwiZGlzcGxheSIpPT09Im5vbmUiKXtkPXRoaXNbYV0ubm9kZU5hbWU7dmFyIGY7aWYobGFbZF0pZj1sYVtkXTtlbHNle3ZhciBlPWMoIjwiK2QrIiAvPiIpLmFwcGVuZFRvKCJib2R5Iik7Zj1lLmNzcygiZGlzcGxheSIpO2lmKGY9PT0ibm9uZSIpZj0iYmxvY2siO2UucmVtb3ZlKCk7bGFbZF09Zn1jLmRhdGEodGhpc1thXSwib2xkZGlzcGxheSIsZil9fWE9MDtmb3IoYj10aGlzLmxlbmd0aDthPGI7YSsrKXRoaXNbYV0uc3R5bGUuZGlzcGxheT1jLmRhdGEodGhpc1thXSwib2xkZGlzcGxheSIpfHwiIjtyZXR1cm4gdGhpc319LGhpZGU6ZnVuY3Rpb24oYSxiKXtpZihhfHxhPT09MClyZXR1cm4gdGhpcy5hbmltYXRlKEsoImhpZGUiLDMpLGEsYik7ZWxzZXthPTA7Zm9yKGI9dGhpcy5sZW5ndGg7YTxiO2ErKyl7dmFyIGQ9Yy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiKTshZCYmZCE9PSJub25lIiYmYy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiLGMuY3NzKHRoaXNbYV0sImRpc3BsYXkiKSl9YT0wO2ZvcihiPXRoaXMubGVuZ3RoO2E8YjthKyspdGhpc1thXS5zdHlsZS5kaXNwbGF5PSJub25lIjtyZXR1cm4gdGhpc319LF90b2dnbGU6Yy5mbi50b2dnbGUsdG9nZ2xlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dHlwZW9mIGE9PT0iYm9vbGVhbiI7aWYoYy5pc0Z1bmN0aW9uKGEpJiZjLmlzRnVuY3Rpb24oYikpdGhpcy5fdG9nZ2xlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlbHNlIGE9PW51bGx8fGQ/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGY9ZD9hOmModGhpcykuaXMoIjpoaWRkZW4iKTtjKHRoaXMpW2Y/InNob3ciOiJoaWRlIl0oKX0pOnRoaXMuYW5pbWF0ZShLKCJ0b2dnbGUiLDMpLGEsYik7cmV0dXJuIHRoaXN9LGZhZGVUbzpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKCI6aGlkZGVuIikuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixkLGYpe3ZhciBlPWMuc3BlZWQoYixkLGYpO2lmKGMuaXNFbXB0eU9iamVjdChhKSlyZXR1cm4gdGhpcy5lYWNoKGUuY29tcGxldGUpO3JldHVybiB0aGlzW2UucXVldWU9PT1mYWxzZT8iZWFjaCI6InF1ZXVlIl0oZnVuY3Rpb24oKXt2YXIgaj1jLmV4dGVuZCh7fSxlKSxpLG89dGhpcy5ub2RlVHlwZT09PTEmJmModGhpcykuaXMoIjpoaWRkZW4iKSxrPXRoaXM7Zm9yKGkgaW4gYSl7dmFyIG49aS5yZXBsYWNlKGlhLGphKTtpZihpIT09bil7YVtuXT1hW2ldO2RlbGV0ZSBhW2ldO2k9bn1pZihhW2ldPT09ImhpZGUiJiZvfHxhW2ldPT09InNob3ciJiYhbylyZXR1cm4gai5jb21wbGV0ZS5jYWxsKHRoaXMpO2lmKChpPT09ImhlaWdodCJ8fGk9PT0id2lkdGgiKSYmdGhpcy5zdHlsZSl7ai5kaXNwbGF5PWMuY3NzKHRoaXMsImRpc3BsYXkiKTtqLm92ZXJmbG93PXRoaXMuc3R5bGUub3ZlcmZsb3d9aWYoYy5pc0FycmF5KGFbaV0pKXsoai5zcGVjaWFsRWFzaW5nPWouc3BlY2lhbEVhc2luZ3x8e30pW2ldPWFbaV1bMV07YVtpXT1hW2ldWzBdfX1pZihqLm92ZXJmbG93IT1udWxsKXRoaXMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7ai5jdXJBbmltPWMuZXh0ZW5kKHt9LGEpO2MuZWFjaChhLGZ1bmN0aW9uKHIsdSl7dmFyIHo9bmV3IGMuZngoayxqLHIpO2lmKEFiLnRlc3QodSkpelt1PT09InRvZ2dsZSI/bz8ic2hvdyI6ImhpZGUiOnVdKGEpO2Vsc2V7dmFyIEM9QmIuZXhlYyh1KSxCPXouY3VyKHRydWUpfHwwO2lmKEMpe3U9cGFyc2VGbG9hdChDWzJdKTt2YXIgRT1DWzNdfHwicHgiO2lmKEUhPT0icHgiKXtrLnN0eWxlW3JdPSh1fHwxKStFO0I9KHV8fDEpL3ouY3VyKHRydWUpKkI7ay5zdHlsZVtyXT1CK0V9aWYoQ1sxXSl1PShDWzFdPT09Ii09Ij8tMToxKSp1K0I7ei5jdXN0b20oQix1LEUpfWVsc2Ugei5jdXN0b20oQix1LCIiKX19KTtyZXR1cm4gdHJ1ZX0pfSxzdG9wOmZ1bmN0aW9uKGEsYil7dmFyIGQ9Yy50aW1lcnM7YSYmdGhpcy5xdWV1ZShbXSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Zm9yKHZhciBmPWQubGVuZ3RoLTE7Zj49MDtmLS0paWYoZFtmXS5lbGVtPT09dGhpcyl7YiYmZFtmXSh0cnVlKTtkLnNwbGljZShmLDEpfX0pO2J8fHRoaXMuZGVxdWV1ZSgpO3JldHVybiB0aGlzfX0pO2MuZWFjaCh7c2xpZGVEb3duOksoInNob3ciLDEpLHNsaWRlVXA6SygiaGlkZSIsMSksc2xpZGVUb2dnbGU6SygidG9nZ2xlIiwxKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn19LGZ1bmN0aW9uKGEsYil7Yy5mblthXT1mdW5jdGlvbihkLGYpe3JldHVybiB0aGlzLmFuaW1hdGUoYixkLGYpfX0pO2MuZXh0ZW5kKHtzcGVlZDpmdW5jdGlvbihhLGIsZCl7dmFyIGY9YSYmdHlwZW9mIGE9PT0ib2JqZWN0Ij9hOntjb21wbGV0ZTpkfHwhZCYmYnx8Yy5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmQmJmJ8fGImJiFjLmlzRnVuY3Rpb24oYikmJmJ9O2YuZHVyYXRpb249Yy5meC5vZmY/MDp0eXBlb2YgZi5kdXJhdGlvbj09PSJudW1iZXIiP2YuZHVyYXRpb246Yy5meC5zcGVlZHNbZi5kdXJhdGlvbl18fGMuZnguc3BlZWRzLl9kZWZhdWx0O2Yub2xkPWYuY29tcGxldGU7Zi5jb21wbGV0ZT1mdW5jdGlvbigpe2YucXVldWUhPT1mYWxzZSYmYyh0aGlzKS5kZXF1ZXVlKCk7Yy5pc0Z1bmN0aW9uKGYub2xkKSYmZi5vbGQuY2FsbCh0aGlzKX07cmV0dXJuIGZ9LGVhc2luZzp7bGluZWFyOmZ1bmN0aW9uKGEsYixkLGYpe3JldHVybiBkK2YqYX0sc3dpbmc6ZnVuY3Rpb24oYSxiLGQsZil7cmV0dXJuKC1NYXRoLmNvcyhhKk1hdGguUEkpLzIrMC41KSpmK2R9fSx0aW1lcnM6W10sZng6ZnVuY3Rpb24oYSxiLGQpe3RoaXMub3B0aW9ucz1iO3RoaXMuZWxlbT1hO3RoaXMucHJvcD1kO2lmKCFiLm9yaWcpYi5vcmlnPXt9fX0pO2MuZngucHJvdG90eXBlPXt1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyk7KGMuZnguc3RlcFt0aGlzLnByb3BdfHxjLmZ4LnN0ZXAuX2RlZmF1bHQpKHRoaXMpO2lmKCh0aGlzLnByb3A9PT0iaGVpZ2h0Inx8dGhpcy5wcm9wPT09IndpZHRoIikmJnRoaXMuZWxlbS5zdHlsZSl0aGlzLmVsZW0uc3R5bGUuZGlzcGxheT0iYmxvY2sifSxjdXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5lbGVtW3RoaXMucHJvcF0hPW51bGwmJighdGhpcy5lbGVtLnN0eWxlfHx0aGlzLmVsZW0uc3R5bGVbdGhpcy5wcm9wXT09bnVsbCkpcmV0dXJuIHRoaXMuZWxlbVt0aGlzLnByb3BdO3JldHVybihhPXBhcnNlRmxvYXQoYy5jc3ModGhpcy5lbGVtLHRoaXMucHJvcCxhKSkpJiZhPi0xMDAwMD9hOnBhcnNlRmxvYXQoYy5jdXJDU1ModGhpcy5lbGVtLHRoaXMucHJvcCkpfHwwfSxjdXN0b206ZnVuY3Rpb24oYSxiLGQpe2Z1bmN0aW9uIGYoail7cmV0dXJuIGUuc3RlcChqKX10aGlzLnN0YXJ0VGltZT1KKCk7dGhpcy5zdGFydD1hO3RoaXMuZW5kPWI7dGhpcy51bml0PWR8fHRoaXMudW5pdHx8InB4Ijt0aGlzLm5vdz10aGlzLnN0YXJ0O3RoaXMucG9zPXRoaXMuc3RhdGU9MDt2YXIgZT10aGlzO2YuZWxlbT10aGlzLmVsZW07aWYoZigpJiZjLnRpbWVycy5wdXNoKGYpJiYhVylXPXNldEludGVydmFsKGMuZngudGljaywxMyl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub3JpZ1t0aGlzLnByb3BdPWMuc3R5bGUodGhpcy5lbGVtLHRoaXMucHJvcCk7dGhpcy5vcHRpb25zLnNob3c9dHJ1ZTt0aGlzLmN1c3RvbSh0aGlzLnByb3A9PT0id2lkdGgifHx0aGlzLnByb3A9PT0iaGVpZ2h0Ij8xOjAsdGhpcy5jdXIoKSk7Yyh0aGlzLmVsZW0pLnNob3coKX0saGlkZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5vcmlnW3RoaXMucHJvcF09Yy5zdHlsZSh0aGlzLmVsZW0sdGhpcy5wcm9wKTt0aGlzLm9wdGlvbnMuaGlkZT10cnVlO3RoaXMuY3VzdG9tKHRoaXMuY3VyKCksMCl9LHN0ZXA6ZnVuY3Rpb24oYSl7dmFyIGI9SigpLGQ9dHJ1ZTtpZihhfHxiPj10aGlzLm9wdGlvbnMuZHVyYXRpb24rdGhpcy5zdGFydFRpbWUpe3RoaXMubm93PXRoaXMuZW5kO3RoaXMucG9zPXRoaXMuc3RhdGU9MTt0aGlzLnVwZGF0ZSgpO3RoaXMub3B0aW9ucy5jdXJBbmltW3RoaXMucHJvcF09dHJ1ZTtmb3IodmFyIGYgaW4gdGhpcy5vcHRpb25zLmN1ckFuaW0paWYodGhpcy5vcHRpb25zLmN1ckFuaW1bZl0hPT10cnVlKWQ9ZmFsc2U7aWYoZCl7aWYodGhpcy5vcHRpb25zLmRpc3BsYXkhPW51bGwpe3RoaXMuZWxlbS5zdHlsZS5vdmVyZmxvdz10aGlzLm9wdGlvbnMub3ZlcmZsb3c7YT1jLmRhdGEodGhpcy5lbGVtLCJvbGRkaXNwbGF5Iik7dGhpcy5lbGVtLnN0eWxlLmRpc3BsYXk9YT9hOnRoaXMub3B0aW9ucy5kaXNwbGF5O2lmKGMuY3NzKHRoaXMuZWxlbSwiZGlzcGxheSIpPT09Im5vbmUiKXRoaXMuZWxlbS5zdHlsZS5kaXNwbGF5PSJibG9jayJ9dGhpcy5vcHRpb25zLmhpZGUmJmModGhpcy5lbGVtKS5oaWRlKCk7aWYodGhpcy5vcHRpb25zLmhpZGV8fHRoaXMub3B0aW9ucy5zaG93KWZvcih2YXIgZSBpbiB0aGlzLm9wdGlvbnMuY3VyQW5pbSljLnN0eWxlKHRoaXMuZWxlbSxlLHRoaXMub3B0aW9ucy5vcmlnW2VdKTt0aGlzLm9wdGlvbnMuY29tcGxldGUuY2FsbCh0aGlzLmVsZW0pfXJldHVybiBmYWxzZX1lbHNle2U9Yi10aGlzLnN0YXJ0VGltZTt0aGlzLnN0YXRlPWUvdGhpcy5vcHRpb25zLmR1cmF0aW9uO2E9dGhpcy5vcHRpb25zLmVhc2luZ3x8KGMuZWFzaW5nLnN3aW5nPyJzd2luZyI6ImxpbmVhciIpO3RoaXMucG9zPWMuZWFzaW5nW3RoaXMub3B0aW9ucy5zcGVjaWFsRWFzaW5nJiZ0aGlzLm9wdGlvbnMuc3BlY2lhbEVhc2luZ1t0aGlzLnByb3BdfHxhXSh0aGlzLnN0YXRlLGUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik7dGhpcy5ub3c9dGhpcy5zdGFydCsodGhpcy5lbmQtdGhpcy5zdGFydCkqdGhpcy5wb3M7dGhpcy51cGRhdGUoKX1yZXR1cm4gdHJ1ZX19O2MuZXh0ZW5kKGMuZngse3RpY2s6ZnVuY3Rpb24oKXtmb3IodmFyIGE9Yy50aW1lcnMsYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0oKXx8YS5zcGxpY2UoYi0tLDEpO2EubGVuZ3RofHxjLmZ4LnN0b3AoKX0sc3RvcDpmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoVyk7Vz1udWxsfSxzcGVlZHM6e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sc3RlcDp7b3BhY2l0eTpmdW5jdGlvbihhKXtjLnN0eWxlKGEuZWxlbSwib3BhY2l0eSIsYS5ub3cpfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtpZihhLmVsZW0uc3R5bGUmJmEuZWxlbS5zdHlsZVthLnByb3BdIT1udWxsKWEuZWxlbS5zdHlsZVthLnByb3BdPShhLnByb3A9PT0id2lkdGgifHxhLnByb3A9PT0iaGVpZ2h0Ij9NYXRoLm1heCgwLGEubm93KTphLm5vdykrYS51bml0O2Vsc2UgYS5lbGVtW2EucHJvcF09YS5ub3d9fX0pO2lmKGMuZXhwciYmYy5leHByLmZpbHRlcnMpYy5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZ3JlcChjLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07Yy5mbi5vZmZzZXQ9ImdldEJvdW5kaW5nQ2xpZW50UmVjdCJpbiBzLmRvY3VtZW50RWxlbWVudD9mdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdO2lmKGEpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtjLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGUpfSk7aWYoIWJ8fCFiLm93bmVyRG9jdW1lbnQpcmV0dXJuIG51bGw7aWYoYj09PWIub3duZXJEb2N1bWVudC5ib2R5KXJldHVybiBjLm9mZnNldC5ib2R5T2Zmc2V0KGIpO3ZhciBkPWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZj1iLm93bmVyRG9jdW1lbnQ7Yj1mLmJvZHk7Zj1mLmRvY3VtZW50RWxlbWVudDtyZXR1cm57dG9wOmQudG9wKyhzZWxmLnBhZ2VZT2Zmc2V0fHxjLnN1cHBvcnQuYm94TW9kZWwmJmYuc2Nyb2xsVG9wfHxiLnNjcm9sbFRvcCktKGYuY2xpZW50VG9wfHxiLmNsaWVudFRvcHx8MCksbGVmdDpkLmxlZnQrKHNlbGYucGFnZVhPZmZzZXR8fGMuc3VwcG9ydC5ib3hNb2RlbCYmZi5zY3JvbGxMZWZ0fHxiLnNjcm9sbExlZnQpLShmLmNsaWVudExlZnR8fGIuY2xpZW50TGVmdHx8MCl9fTpmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdO2lmKGEpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihyKXtjLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLHIpfSk7aWYoIWJ8fCFiLm93bmVyRG9jdW1lbnQpcmV0dXJuIG51bGw7aWYoYj09PWIub3duZXJEb2N1bWVudC5ib2R5KXJldHVybiBjLm9mZnNldC5ib2R5T2Zmc2V0KGIpO2Mub2Zmc2V0LmluaXRpYWxpemUoKTt2YXIgZD1iLm9mZnNldFBhcmVudCxmPWIsZT1iLm93bmVyRG9jdW1lbnQsaixpPWUuZG9jdW1lbnRFbGVtZW50LG89ZS5ib2R5O2Y9KGU9ZS5kZWZhdWx0Vmlldyk/ZS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCk6Yi5jdXJyZW50U3R5bGU7Zm9yKHZhciBrPWIub2Zmc2V0VG9wLG49Yi5vZmZzZXRMZWZ0OyhiPWIucGFyZW50Tm9kZSkmJmIhPT1vJiZiIT09aTspe2lmKGMub2Zmc2V0LnN1cHBvcnRzRml4ZWRQb3NpdGlvbiYmZi5wb3NpdGlvbj09PSJmaXhlZCIpYnJlYWs7aj1lP2UuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmIuY3VycmVudFN0eWxlO2stPWIuc2Nyb2xsVG9wO24tPWIuc2Nyb2xsTGVmdDtpZihiPT09ZCl7ays9Yi5vZmZzZXRUb3A7bis9Yi5vZmZzZXRMZWZ0O2lmKGMub2Zmc2V0LmRvZXNOb3RBZGRCb3JkZXImJiEoYy5vZmZzZXQuZG9lc0FkZEJvcmRlckZvclRhYmxlQW5kQ2VsbHMmJi9edChhYmxlfGR8aCkkL2kudGVzdChiLm5vZGVOYW1lKSkpe2srPXBhcnNlRmxvYXQoai5ib3JkZXJUb3BXaWR0aCl8fDA7bis9cGFyc2VGbG9hdChqLmJvcmRlckxlZnRXaWR0aCl8fDB9Zj1kO2Q9Yi5vZmZzZXRQYXJlbnR9aWYoYy5vZmZzZXQuc3VidHJhY3RzQm9yZGVyRm9yT3ZlcmZsb3dOb3RWaXNpYmxlJiZqLm92ZXJmbG93IT09InZpc2libGUiKXtrKz1wYXJzZUZsb2F0KGouYm9yZGVyVG9wV2lkdGgpfHwwO24rPXBhcnNlRmxvYXQoai5ib3JkZXJMZWZ0V2lkdGgpfHwwfWY9an1pZihmLnBvc2l0aW9uPT09InJlbGF0aXZlInx8Zi5wb3NpdGlvbj09PSJzdGF0aWMiKXtrKz1vLm9mZnNldFRvcDtuKz1vLm9mZnNldExlZnR9aWYoYy5vZmZzZXQuc3VwcG9ydHNGaXhlZFBvc2l0aW9uJiZmLnBvc2l0aW9uPT09ImZpeGVkIil7ays9TWF0aC5tYXgoaS5zY3JvbGxUb3Asby5zY3JvbGxUb3ApO24rPU1hdGgubWF4KGkuc2Nyb2xsTGVmdCxvLnNjcm9sbExlZnQpfXJldHVybnt0b3A6ayxsZWZ0Om59fTtjLm9mZnNldD17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXMuYm9keSxiPXMuY3JlYXRlRWxlbWVudCgiZGl2IiksZCxmLGUsaj1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsIm1hcmdpblRvcCIsdHJ1ZSkpfHwwO2MuZXh0ZW5kKGIuc3R5bGUse3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOjAsbGVmdDowLG1hcmdpbjowLGJvcmRlcjowLHdpZHRoOiIxcHgiLGhlaWdodDoiMXB4Iix2aXNpYmlsaXR5OiJoaWRkZW4ifSk7Yi5pbm5lckhUTUw9IjxkaXYgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46MDtib3JkZXI6NXB4IHNvbGlkICMwMDA7cGFkZGluZzowO3dpZHRoOjFweDtoZWlnaHQ6MXB4Oyc+PGRpdj48L2Rpdj48L2Rpdj48dGFibGUgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46MDtib3JkZXI6NXB4IHNvbGlkICMwMDA7cGFkZGluZzowO3dpZHRoOjFweDtoZWlnaHQ6MXB4OycgY2VsbHBhZGRpbmc9JzAnIGNlbGxzcGFjaW5nPScwJz48dHI+PHRkPjwvdGQ+PC90cj48L3RhYmxlPiI7YS5pbnNlcnRCZWZvcmUoYixhLmZpcnN0Q2hpbGQpO2Q9Yi5maXJzdENoaWxkO2Y9ZC5maXJzdENoaWxkO2U9ZC5uZXh0U2libGluZy5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7dGhpcy5kb2VzTm90QWRkQm9yZGVyPWYub2Zmc2V0VG9wIT09NTt0aGlzLmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzPWUub2Zmc2V0VG9wPT09NTtmLnN0eWxlLnBvc2l0aW9uPSJmaXhlZCI7Zi5zdHlsZS50b3A9IjIwcHgiO3RoaXMuc3VwcG9ydHNGaXhlZFBvc2l0aW9uPWYub2Zmc2V0VG9wPT09MjB8fGYub2Zmc2V0VG9wPT09MTU7Zi5zdHlsZS5wb3NpdGlvbj1mLnN0eWxlLnRvcD0iIjtkLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2Quc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjt0aGlzLnN1YnRyYWN0c0JvcmRlckZvck92ZXJmbG93Tm90VmlzaWJsZT1mLm9mZnNldFRvcD09PS01O3RoaXMuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQ9YS5vZmZzZXRUb3AhPT1qO2EucmVtb3ZlQ2hpbGQoYik7Yy5vZmZzZXQuaW5pdGlhbGl6ZT1jLm5vb3B9LGJvZHlPZmZzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vZmZzZXRUb3AsZD1hLm9mZnNldExlZnQ7Yy5vZmZzZXQuaW5pdGlhbGl6ZSgpO2lmKGMub2Zmc2V0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0KXtiKz1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsIm1hcmdpblRvcCIsdHJ1ZSkpfHwwO2QrPXBhcnNlRmxvYXQoYy5jdXJDU1MoYSwibWFyZ2luTGVmdCIsdHJ1ZSkpfHwwfXJldHVybnt0b3A6YixsZWZ0OmR9fSxzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGQpe2lmKC9zdGF0aWMvLnRlc3QoYy5jdXJDU1MoYSwicG9zaXRpb24iKSkpYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3ZhciBmPWMoYSksZT1mLm9mZnNldCgpLGo9cGFyc2VJbnQoYy5jdXJDU1MoYSwidG9wIix0cnVlKSwxMCl8fDAsaT1wYXJzZUludChjLmN1ckNTUyhhLCJsZWZ0Iix0cnVlKSwxMCl8fDA7aWYoYy5pc0Z1bmN0aW9uKGIpKWI9Yi5jYWxsKGEsZCxlKTtkPXt0b3A6Yi50b3AtZS50b3AraixsZWZ0OmIubGVmdC1lLmxlZnQraX07InVzaW5nImluIGI/Yi51c2luZy5jYWxsKGEsZCk6Zi5jc3MoZCl9fTtjLmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSlyZXR1cm4gbnVsbDt2YXIgYT10aGlzWzBdLGI9dGhpcy5vZmZzZXRQYXJlbnQoKSxkPXRoaXMub2Zmc2V0KCksZj0vXmJvZHl8aHRtbCQvaS50ZXN0KGJbMF0ubm9kZU5hbWUpP3t0b3A6MCxsZWZ0OjB9OmIub2Zmc2V0KCk7ZC50b3AtPXBhcnNlRmxvYXQoYy5jdXJDU1MoYSwibWFyZ2luVG9wIix0cnVlKSl8fDA7ZC5sZWZ0LT1wYXJzZUZsb2F0KGMuY3VyQ1NTKGEsIm1hcmdpbkxlZnQiLHRydWUpKXx8MDtmLnRvcCs9cGFyc2VGbG9hdChjLmN1ckNTUyhiWzBdLCJib3JkZXJUb3BXaWR0aCIsdHJ1ZSkpfHwwO2YubGVmdCs9cGFyc2VGbG9hdChjLmN1ckNTUyhiWzBdLCJib3JkZXJMZWZ0V2lkdGgiLHRydWUpKXx8MDtyZXR1cm57dG9wOmQudG9wLQpmLnRvcCxsZWZ0OmQubGVmdC1mLmxlZnR9fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fHMuYm9keTthJiYhL15ib2R5fGh0bWwkL2kudGVzdChhLm5vZGVOYW1lKSYmYy5jc3MoYSwicG9zaXRpb24iKT09PSJzdGF0aWMiOylhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfSl9fSk7Yy5lYWNoKFsiTGVmdCIsIlRvcCJdLGZ1bmN0aW9uKGEsYil7dmFyIGQ9InNjcm9sbCIrYjtjLmZuW2RdPWZ1bmN0aW9uKGYpe3ZhciBlPXRoaXNbMF0sajtpZighZSlyZXR1cm4gbnVsbDtpZihmIT09dylyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoaj13YSh0aGlzKSlqLnNjcm9sbFRvKCFhP2Y6YyhqKS5zY3JvbGxMZWZ0KCksYT9mOmMoaikuc2Nyb2xsVG9wKCkpO2Vsc2UgdGhpc1tkXT1mfSk7ZWxzZSByZXR1cm4oaj13YShlKSk/InBhZ2VYT2Zmc2V0ImluIGo/althPyJwYWdlWU9mZnNldCI6InBhZ2VYT2Zmc2V0Il06Yy5zdXBwb3J0LmJveE1vZGVsJiZqLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXXx8ai5kb2N1bWVudC5ib2R5W2RdOmVbZF19fSk7Yy5lYWNoKFsiSGVpZ2h0IiwiV2lkdGgiXSxmdW5jdGlvbihhLGIpe3ZhciBkPWIudG9Mb3dlckNhc2UoKTtjLmZuWyJpbm5lciIrYl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1swXT9jLmNzcyh0aGlzWzBdLGQsZmFsc2UsInBhZGRpbmciKTpudWxsfTtjLmZuWyJvdXRlciIrYl09ZnVuY3Rpb24oZil7cmV0dXJuIHRoaXNbMF0/Yy5jc3ModGhpc1swXSxkLGZhbHNlLGY/Im1hcmdpbiI6ImJvcmRlciIpOm51bGx9O2MuZm5bZF09ZnVuY3Rpb24oZil7dmFyIGU9dGhpc1swXTtpZighZSlyZXR1cm4gZj09bnVsbD9udWxsOnRoaXM7aWYoYy5pc0Z1bmN0aW9uKGYpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oail7dmFyIGk9Yyh0aGlzKTtpW2RdKGYuY2FsbCh0aGlzLGosaVtkXSgpKSl9KTtyZXR1cm4ic2Nyb2xsVG8iaW4KZSYmZS5kb2N1bWVudD9lLmRvY3VtZW50LmNvbXBhdE1vZGU9PT0iQ1NTMUNvbXBhdCImJmUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2JdfHxlLmRvY3VtZW50LmJvZHlbImNsaWVudCIrYl06ZS5ub2RlVHlwZT09PTk/TWF0aC5tYXgoZS5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYl0sZS5ib2R5WyJzY3JvbGwiK2JdLGUuZG9jdW1lbnRFbGVtZW50WyJzY3JvbGwiK2JdLGUuYm9keVsib2Zmc2V0IitiXSxlLmRvY3VtZW50RWxlbWVudFsib2Zmc2V0IitiXSk6Zj09PXc/Yy5jc3MoZSxkKTp0aGlzLmNzcyhkLHR5cGVvZiBmPT09InN0cmluZyI/ZjpmKyJweCIpfX0pO0EualF1ZXJ5PUEuJD1jfSkod2luZG93KTtPYmplY3Quc2l6ZT1mdW5jdGlvbihvYmopeyJ1c2Ugc3RyaWN0Ijt2YXIgc2l6ZT0wLGtleTtmb3Ioa2V5IGluIG9iail7aWYob2JqLmhhc093blByb3BlcnR5KGtleSkpe3NpemUrKzt9fQpyZXR1cm4gc2l6ZTt9O0Z1bmN0aW9uLnByb3RvdHlwZS5kZWZhdWx0cz1mdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZj10aGlzLGE9W2YubGVuZ3RoLWFyZ3VtZW50cy5sZW5ndGhdO2E9YS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmLmFwcGx5KGYsQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykuY29uY2F0KGEuc2xpY2UoYXJndW1lbnRzLmxlbmd0aCxhLmxlbmd0aCkpKTt9O307ZG9jdW1lbnQ9d2luZG93LmRvY3VtZW50OyhmdW5jdGlvbih3aW5kb3cpeyJ1c2Ugc3RyaWN0Ijt2YXIgTUNSPXtHbG9iYWw6e1RNUDp7fSxyZXF1ZXN0Ont9LG1hbmdhOnsiY2hhcHRlcnMiOnt9LCJ0aXRsZSI6IiIsImNoYXB0ZXIiOnsibnVtYmVyIjowLCJuYW1lIjoiIn19fSxJbmZvOnsidmVyc2lvbiI6PD9waHAgZWNobyBqc29uX2VuY29kZSgkdmVyc2lvbik7Pz4sImtleVByZWZpeCI6Ik1DUi0ifSxSZWdleDp7InVybCI6eyJvbGQiOi9tYW5nYXJlYWRlclwubmV0XC9bMC05XStcLVswLTldK1wtKFswLTldKylcLyhbYS16MC05XC1dKylcL2NoYXB0ZXItKFswLTldKylcLmh0bWw/L2ksImN1ciI6L21hbmdhcmVhZGVyXC5uZXRcLyhbYS16MC05XC1dKykoXC9bMC05XSspPyhcL1swLTldKyk/L2l9LCJzZWxlY3QiOnsib2xkIjovXC9bMC05XC1dK1wvW2EtelwtXStcL2NoYXB0ZXItKFswLTldKylcLmh0bWw/L2ksImN1ciI6L1wvW2EtelwtXStcLyhbMC05XSspL2ksImNoYXB0ZXIiOi9bMC05XSs6PyguKykvaX19LFVJOntodG1sOiIiKyI8ZGl2IGlkPSdjb250YWluZXInPiIrIiA8aDEgaWQ9J3RpdGxlJz48L2gxPiIrIiA8aDIgaWQ9J2NoYXB0ZXInPjwvaDI+IisiIDxkaXYgaWQ9J25hdmJhcicgY2xhc3M9J3doaXRlJz5DaGFwdGVyOiAiKyIgIDxzcGFuIGlkPSdjaGFwdGVycycgY2xhc3M9J3doaXRlJz48c2VsZWN0PjxvcHRpb24+LS0tPC9vcHRpb24+PC9zZWxlY3Q+PC9zcGFuPiIrIiAgPHNwYW4gaWQ9J2xpbmtzJz4iKyIgICA8YSBocmVmPScvJz5Ib21lPC9hPiIrIiAgIC8iKyIgICA8YSBpZD0nbWFuZ2FsaW5rJz5NYW5nYTwvYT4iKyIgICAvIisiICAgPGEgaWQ9J2NvbnRyb2wtYnV0dG9uJz5PcHRpb25zPC9hPiIrIiAgIC8iKyIgICA8YSBpZD0ncGVybWFsaW5rJyBocmVmPScjJz5QZXJtYWxpbms8L2E+IisiICA8L3NwYW4+IisiICA8c3BhbiBzdHlsZT0nZmxvYXQ6IHJpZ2h0Oyc+IisiICAgPHNwYW4gaWQ9J3N0YXR1cyc+UmVhZHk8L3NwYW4+IisiICAgPGEgaWQ9J3ByZXYnPlByZXZpb3VzPC9hPiIrIiAgIC0iKyIgICA8YSBpZD0nbmV4dCc+TmV4dDwvYT4iKyIgIDwvc3Bhbj4iKyIgPC9kaXY+IisiIDxkaXYgaWQ9J2NvbnRyb2wtcGFuZWwnIGNsYXNzPSd3aGl0ZSc+IisiICA8ZGl2IGlkPSdjb250cm9sLWNvbnRhaW5lcic+IisiICAgPGxhYmVsIGlkPSdjb250cm9sLWFsbGJsYWNrJz48YnV0dG9uPkludmVydCBDb2xvdXJzPC9idXR0b24+PC9sYWJlbD4iKyIgICA8bGFiZWwgaWQ9J2NvbnRyb2wtc3BhY2luZyc+U3BhY2luZyA8aW5wdXQgdHlwZT0ndGV4dCcgdmFsdWU9JycgLz48L2xhYmVsPiIrIiAgIDxsYWJlbCBpZD0nY29udHJvbC1ob3RrZXlzJz48YnV0dG9uPlRvZ2dsZSBIb3RrZXlzPC9idXR0b24+PC9sYWJlbD4iKyIgICA8bGFiZWwgaWQ9J2NvbnRyb2wtc2hvd2ZpcnN0Jz48YnV0dG9uPkxvYWQgRmlyc3QgcGFnZTwvYnV0dG9uPjwvbGFiZWw+IisiICAgPGxhYmVsIGlkPSdjb250cm9sLWNhY2hlJz48YnV0dG9uPlRvb2dsZSBDYWNoZTwvYnV0dG9uPjwvbGFiZWw+IisiICAgPGxhYmVsIGlkPSdjb250cm9sLWNhY2hlc2l6ZSc+PHNtYWxsPkNhY2hlOiA8Yj48c3Bhbj4wPC9zcGFuPiU8L2I+IHVzZWQuPC9zbWFsbD48L2xhYmVsPiIrIiAgIDxsYWJlbCBpZD0nY29udHJvbC1jbGVhcmNhY2hlJz48YnV0dG9uPkNsZWFyIENhY2hlIDxiPighKTwvYj48L2J1dHRvbj48L2xhYmVsPiIrIiAgIDxsYWJlbCBpZD0nY29udHJvbC1mb3JjZWQ4MDAnPjxidXR0b24+Rm9yY2UgaW1hZ2Ugd2lkdGg8L2J1dHRvbj48L2xhYmVsPiIrIiAgIDxsYWJlbCBpZD0nY29udHJvbC1hZHMnPjxidXR0b24+QWRzPzwvYnV0dG9uPjwvbGFiZWw+IisiICA8L2Rpdj4iKyIgIDxhIGlkPSdjb250cm9sLWNsb3NlJz5DbG9zZTwvYT4iKyIgPC9kaXY+IisiIDxkaXYgaWQ9J3BhZ2VzJyBjbGFzcz0nZm9yY2VkODAwJz4iKyIgIExvYWRpbmcuLi4iKyIgPC9kaXY+IisiIDxkaXYgaWQ9J2Fib3V0Jz4iKyIgIFVzZXJzY3JpcHQgYnkgPGEgaHJlZj0naHR0cDovL3Bhc3Njb2QuY3ouY2MnPnBhc3Njb2Q8L2E+IisiICAtIFVzZXMgPGEgaHJlZj0naHR0cDovL2pxdWVyeS5jb20nPmpRdWVyeTwvYT4iKyIgIC0gV29ya3MgYmVzdCBpbiA8YSBocmVmPSdodHRwOi8vd3d3Lm1vemlsbGEuY29tL2ZpcmVmb3gvJz5GaXJlZm94IDQ8L2E+IisiICAtIExpY2Vuc2U6IDxhIGhyZWY9J2h0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwJz5NSVQ8L2E+ICsgQXR0cmlidXRpb24iKyIgIC0gVGhhbmtzIGZvciB1c2luZyEiKyIgPC9kaXY+IisiIDxkaXYgaWQ9J2FkZm9vdGVyJz4iKyIgIDxpZnJhbWUgd2lkdGg9JzM1MCcgaGVpZ2h0PScyNTAnIGZyYW1lYm9yZGVyPSdubycgc2Nyb2xsaW5nPSdubycgc3JjPSdodHRwOi8vYWQubWFuZ2FyZWFkZXIubmV0L2J0bGVmdCcgY2xhc3M9J2xlZnQnIC8+IisiICA8aWZyYW1lIHdpZHRoPSczNTAnIGhlaWdodD0nMjUwJyBmcmFtZWJvcmRlcj0nbm8nIHNjcm9sbGluZz0nbm8nIHNyYz0naHR0cDovL2FkLm1hbmdhcmVhZGVyLm5ldC9idHJpZ2h0JyBjbGFzcz0ncmlnaHQnIC8+IisiIDwvZGl2PiIrIjwvZGl2PiIKY3NzOnsiKiI6eyJjb2xvciI6ImluaGVyaXQifSwiYm9keSI6eyJmb250LWZhbWlseSI6InNhbnMtc2VyaWYiLCJjb2xvciI6ImJsYWNrIn0sIiNmYWtlZG9jLCAjZmFrZWRvYyAqIjp7ImRpc3BsYXkiOiJub25lIn0sIiNjb250YWluZXIiOnsid2lkdGgiOiI4MDBweCIsIm1hcmdpbiI6IjVlbSBhdXRvIn0sIiNuYXZiYXIiOnsidG9wIjoiMHB4IiwibGVmdCI6ImF1dG8iLCJ3aWR0aCI6Ijc4MHB4IiwiYm9yZGVyIjoiNXB4ICNDQ0Mgc29saWQiLCJwYWRkaW5nIjoiNXB4IiwicG9zaXRpb24iOiJmaXhlZCIsImZvbnQtc2l6ZSI6IjFlbSJ9LCIjbGlua3MiOnsiZm9udC1zaXplIjoiMC44ZW0ifSwiI3N0YXR1cyI6eyJmb250LXNpemUiOiIwLjZlbSIsImNvbG9yIjoiI0NDQyJ9LCIjY29udHJvbC1wYW5lbCI6eyJ0b3AiOiI1MHB4IiwibGVmdCI6ImF1dG8iLCJ3aWR0aCI6Ijc4MHB4IiwiYm9yZGVyIjoiNXB4ICNDQ0Mgc29saWQiLCJwYWRkaW5nIjoiNXB4IiwiZGlzcGxheSI6Im5vbmUiLCJwb3NpdGlvbiI6ImZpeGVkIiwiZm9udC1zaXplIjoiMWVtIn0sIiNjb250cm9sLWNvbnRhaW5lciI6eyJsaW5lLWhlaWdodCI6IjIuNWVtIn0sIiNjb250cm9sLWNvbnRhaW5lciBsYWJlbCI6eyJtYXJnaW4iOiIwIDAuM2VtIiwicGFkZGluZyI6IjAuMmVtIiwiYm9yZGVyLXN0eWxlIjoic29saWQiLCJib3JkZXItd2lkdGgiOiIxcHgiLCJib3JkZXItcmFkaXVzIjoiNXB4IiwiLW1vei1ib3JkZXItcmFkaXVzIjoiNXB4IiwiLXdlYmtpdC1ib3JkZXItcmFkaXVzIjoiNXB4IiwiLWtodG1sLWJvcmRlci1yYWRpdXMiOiI1cHgifSwiI2NvbnRyb2wtY29udGFpbmVyIGJ1dHRvbiwgI2NvbnRyb2wtY29udGFpbmVyIGlucHV0Ijp7ImJhY2tncm91bmQiOiJ0cmFuc3BhcmVudCIsImJvcmRlciI6IjBweCJ9LCIjY29udHJvbC1sZWdlbmQiOnsicGFkZGluZy10b3AiOiIxZW0iLCJwYWRkaW5nLWxlZnQiOiIyZW0iLCJsaW5lLWhlaWdodCI6IjFlbSJ9LCIjY29udHJvbC1sZWdlbmQgZGl2Ijp7ImNvbG9yIjoiI0NDQyIsImZvbnQtc2l6ZSI6InNtYWxsZXIiLCJkaXNwbGF5Ijoibm9uZSJ9LCIjY29udHJvbC1jbG9zZSI6eyJmbG9hdCI6InJpZ2h0IiwiZm9udC1zaXplIjoic21hbGxlciJ9LCIjY29udHJvbC1zcGFjaW5nIGlucHV0Ijp7IndpZHRoIjoiM2VtIn0sIiNwYWdlcyI6eyJ0ZXh0LWFsaWduIjoiY2VudGVyIn0sIiNwYWdlcyBpbWciOnsibWFyZ2luLWJvdHRvbSI6IjFlbSJ9LCIuZm9yY2VkODAwIGltZyI6eyJ3aWR0aCI6IjgwMHB4In0sIiNhYm91dCI6eyJmb250LXNpemUiOiIwLjdlbSIsIm1hcmdpbiI6IjFlbSBhdXRvIiwidGV4dC1hbGlnbiI6ImNlbnRlciJ9LCJhIjp7ImNvbG9yIjoiaW5oZXJpdCIsInRleHQtZGVjb3JhdGlvbiI6Im5vbmUiLCJjdXJzb3IiOiJwb2ludGVyIn0sImE6aG92ZXIsIGE6Zm9jdXMiOnsiY29sb3IiOiIjQ0NDIn0sIi5ibGFjayI6eyJiYWNrZ3JvdW5kLWNvbG9yIjoiYmxhY2siLCJjb2xvciI6IndoaXRlIiwiYm9yZGVyLWNvbG9yIjoid2hpdGUifSwiLndoaXRlIjp7ImJhY2tncm91bmQtY29sb3IiOiJ3aGl0ZSIsImNvbG9yIjoiYmxhY2siLCJib3JkZXItY29sb3IiOiJibGFjayJ9LCIud2hpdGUgc2VsZWN0LCBzZWxlY3Qud2hpdGUsIC5ibGFjayBzZWxlY3QsIHNlbGVjdC5ibGFjayI6eyJjb2xvciI6ImJsYWNrIn0sIiNhZGZvb3RlciAubGVmdCI6eyJmbG9hdCI6ImxlZnQifSwiI2FkZm9vdGVyIC5yaWdodCI6eyJmbG9hdCI6InJpZ2h0In19LGluaXQ6ZnVuY3Rpb24oKXtNQ1IuVUkuY3NzWyIjcGFnZXMgaW1nIl1bIm1hcmdpbi1ib3R0b20iXT1NQ1IuT3B0aW9uLmdldCgnc3BhY2luZycpOyQoJ2JvZHknKS5odG1sKE1DUi5VSS5odG1sKS5hZGRDbGFzcygnd2hpdGUnKTtNQ1IuVG9vbC5hZGRDc3MoTUNSLlVJLmNzcyk7fX0sVG9vbDp7Z2V0RmFrZTpmdW5jdGlvbih1cmwsY2FsbGJhY2ssc2V0dGluZ3Mpe2Z1bmN0aW9uIGNsZWFuc2VfaHRtbChodG1sKXtodG1sPWh0bWwucmVwbGFjZSgvXG4vZywnICcpO2h0bWw9aHRtbC5yZXBsYWNlKC88c2NyaXB0W14+XSo+W148XSs8XC9zY3JpcHQ+L2lnLCcnKTtodG1sPWh0bWwucmVwbGFjZSgvXi4qPGJvZHlbXj5dKj4vaSwnJyk7aHRtbD1odG1sLnJlcGxhY2UoLzxcL2JvZHk+LiokL2ksJycpO3JldHVybiBodG1sO30KJC5hamF4KHt0eXBlOiJHRVQiLHVybDp1cmwsc3VjY2VzczpmdW5jdGlvbihkYXRhLHN0YXQseGhyKXtpZigvPGgxPjQwNCBOb3QgRm91bmQ8XC9oMT4vaS50ZXN0KGRhdGEpKXskKCcjZmFrZWRvYycpLmh0bWwoJycpO30KZWxzZXtkYXRhPWNsZWFuc2VIdG1sKGRhdGEpOyQoJyNmYWtlZG9jJykuaHRtbChkYXRhKTt9CmlmKGNhbGxiYWNrKXtjYWxsYmFjaygpO319LGVycm9yOmZ1bmN0aW9uKHhocixzdGF0LGVycil7JCgnI2Zha2Vkb2MnKS5odG1sKCcnKTtpZihzdGF0PT0ndGltZW91dCcpeyQoJyNmYWtlZG9jJykuaHRtbCgnPGRpdiBpZD0iaW1naG9sZGVyIj48aW1nIHNyYz0iL3F3ZXJ0eXVpb3Bhc2RmZ2hqa2x6eGN2Ym5tLjQwNCIgYWx0PSItIiAvPjwvZGl2PicpO30KaWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX0sdGltZW91dDo1MDAwfSk7fSxtYWtlQ3NzOmZ1bmN0aW9uKGNzc19vYmosbWluaWZpZWQsdGFiKXt2YXIgc2VsZWN0b3Isc3R5bGVzLHByb3BlcnR5LHZhbHVlLG5sPSJcbiIsaHRtbD0nJzttaW5pZmllZD1taW5pZmllZD90cnVlOmZhbHNlO3RhYj10YWI/dGFiOiJcdCI7aWYobWluaWZpZWQpe3RhYj0nJztubD0nICc7fQpmb3Ioc2VsZWN0b3IgaW4gY3NzX29iail7aWYodHlwZW9mIHNlbGVjdG9yPT09J3N0cmluZycpe3N0eWxlcz1jc3Nfb2JqW3NlbGVjdG9yXTtodG1sKz1ubCtzZWxlY3RvcisiIHsiO2Zvcihwcm9wZXJ0eSBpbiBzdHlsZXMpe2lmKHR5cGVvZiBwcm9wZXJ0eT09PSdzdHJpbmcnKXt2YWx1ZT1zdHlsZXNbcHJvcGVydHldO2h0bWwrPW5sK3RhYitwcm9wZXJ0eSsiOiAiK3ZhbHVlKyI7Ijt9fQpodG1sKz1ubCsifSI7fX0KcmV0dXJuIGh0bWw7fSxhZGRDc3M6ZnVuY3Rpb24oY3NzKXsidXNlIHN0cmljdCI7dmFyIGVsO2lmKHR5cGVvZiBjc3M9PSJvYmplY3QiKXtjc3M9TUNSLlRvb2wubWFrZUNzcyhjc3MpO30KZWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlbC50eXBlPSJ0ZXh0L2NzcyI7aWYoZWwuc3R5bGVTaGVldCl7ZWwuc3R5bGVTaGVldC5jc3NUZXh0PWNzczt9ZWxzZXtlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTt9CmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoZWwpO30scGFyc2VVcmw6ZnVuY3Rpb24odXJsX3N0cil7dmFyIFU9e30sUm89TUNSLlJlZ2V4LnVybC5vbGQuZXhlYyh1cmxfc3RyKSxSbj1NQ1IuUmVnZXgudXJsLmN1ci5leGVjKHVybF9zdHIpLHNzPS9bXC9dLztpZihSbyE9PW51bGwpe1UucGFnZT1Sb1sxXT9Sb1sxXS5yZXBsYWNlKHNzLCcnKTpudWxsO1UubWFuZ2E9Um9bMl0/Um9bMl0ucmVwbGFjZShzcywnJyk6bnVsbDtVLmNoYXB0ZXI9Um9bM10/Um9bM10ucmVwbGFjZShzcywnJyk6bnVsbDt9ZWxzZSBpZihSbiE9PW51bGwpe1UubWFuZ2E9Um5bMV0/Um5bMV0ucmVwbGFjZShzcywnJyk6bnVsbDtVLmNoYXB0ZXI9Um5bMl0/Um5bMl0ucmVwbGFjZShzcywnJyk6bnVsbDtVLnBhZ2U9Um5bM10/Um5bM10ucmVwbGFjZShzcywnJyk6bnVsbDt9ZWxzZXtyZXR1cm4gbnVsbDt9CnJldHVybiBVO30sYnVpbGRVcmw6ZnVuY3Rpb24obWFuZ2EsY2hhcHRlcixwYWdlKXttYW5nYT1tYW5nYT8nLycrbWFuZ2E6Jyc7Y2hhcHRlcj1jaGFwdGVyPycvJytjaGFwdGVyOicnO3BhZ2U9cGFnZT8nLycrcGFnZTonJztyZXR1cm4naHR0cDovL3d3dy5tYW5nYXJlYWRlci5uZXQnK21hbmdhK2NoYXB0ZXIrcGFnZTt9LGNhbkhhelN0b3JhZ2U6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuJ2xvY2FsU3RvcmFnZSdpbiB3aW5kb3cmJndpbmRvdy5sb2NhbFN0b3JhZ2UhPT1udWxsO31jYXRjaChlKXtyZXR1cm4gZmFsc2U7fX0sY2FwaXRhbGl6ZTpmdW5jdGlvbihzdHIpe3JldHVybiBzdHIucmVwbGFjZSgvKF58XHMpKFthLXpdKS9nLGZ1bmN0aW9uKG8scCxxKXtyZXR1cm4gcCtxLnRvVXBwZXJDYXNlKCk7fSk7fSxzdG9yYWdlQXZhaWxhYmxlOmZ1bmN0aW9uKCl7aWYoL2Nocm9tZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe3JldHVybiAyLjUqMTAwMCoxMDAwO30KcmV0dXJuIDUqMTAwMCoxMDAwO30sc3RvcmFnZVVzZWQ6ZnVuY3Rpb24ocGVyY2VudCl7aWYoTUNSLlRvb2wuY2FuSGF6U3RvcmFnZSgpKXt2YXIgbGVuPTAsaSxrO2ZvcihpPTA7aTx3aW5kb3cubG9jYWxTdG9yYWdlLmxlbmd0aDtpKyspe2s9d2luZG93LmxvY2FsU3RvcmFnZS5rZXkoaSk7bGVuPWxlbitrLmxlbmd0aCt3aW5kb3cubG9jYWxTdG9yYWdlW2tdLmxlbmd0aDt9CmlmKHBlcmNlbnQpe3JldHVybiBsZW4qMTAwL01DUi5Ub29sLnN0b3JhZ2VBdmFpbGFibGUoKTt9CnJldHVybiBsZW47fWVsc2V7cmV0dXJuIDA7fX0uZGVmYXVsdHMoZmFsc2UpfSxPcHRpb246e2RlZmF1bHRzOnsic3BhY2luZyI6IjFlbSIsImFsbGJsYWNrIjoib2ZmIiwiaG90a2V5cyI6Im9mZiIsInNob3dmaXJzdCI6Im9mZiIsImZvcmNlZDgwMCI6Im9uIiwiYWRzIjoib24iLCJjYWNoZSI6Im9mZiIsImNhY2hlLWltYWdlcyI6Int9In0saW5pdDpmdW5jdGlvbigpe3ZhciBrZXk7Zm9yKGtleSBpbiBNQ1IuT3B0aW9uLmRlZmF1bHRzKXtpZihNQ1IuVG9vbC5jYW5IYXpTdG9yYWdlKCkpe01DUi5PcHRpb24udmFsdWVzW2tleV09d2luZG93LmxvY2FsU3RvcmFnZVtNQ1IuSW5mby5rZXlQcmVmaXgra2V5XT93aW5kb3cubG9jYWxTdG9yYWdlW01DUi5JbmZvLmtleVByZWZpeCtrZXldOk1DUi5PcHRpb24uZGVmYXVsdHNba2V5XTt3aW5kb3cubG9jYWxTdG9yYWdlW01DUi5JbmZvLmtleVByZWZpeCtrZXldPXJldHVybmVkT3B0aW9uc1trZXldO31lbHNle01DUi5PcHRpb24udmFsdWVzW2tleV09TUNSLk9wdGlvbi5kZWZhdWx0c1trZXldO319fSxzZXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXtNQ1IuT3B0aW9uW2tleV09dmFsdWU7aWYoTUNSLlRvb2wuY2FuSGF6U3RvcmFnZSgpKXt3aW5kb3cubG9jYWxTdG9yYWdlW01DUi5JbmZvLmtleVByZWZpeCtrZXldPU1DUi5PcHRpb25ba2V5XTskKCcjY29udHJvbC1jYWNoZXNpemUgc3BhbicpLnRleHQoTUNSLlRvb2wuc3RvcmFnZVVzZWQodHJ1ZSkpO319LGdldDpmdW5jdGlvbihrZXkpe3ZhciB2YWx1ZT1NQ1IuT3B0aW9uW2tleV07aWYoTUNSLlRvb2wuY2FuSGF6U3RvcmFnZSgpKXt2YWx1ZT13aW5kb3cubG9jYWxTdG9yYWdlW01DUi5JbmZvLmtleVByZWZpeCtrZXldO30KcmV0dXJuIHZhbHVlO30sc3dpdGNoVG86ZnVuY3Rpb24oa2V5LHRvKXt2YXIgYmVmb3JlPU1DUi5PcHRpb24uZ2V0KGtleSksb25mZj10bz8nb24nOidvZmYnO2lmKC9vKG58ZmYpL2kudGVzdChiZWZvcmUpKXtNQ1IuT3B0aW9uLnNldChrZXksb25mZik7fWVsc2V7dGhyb3cgVHlwZUVycm9yO319LHN3aXRjaE9uOmZ1bmN0aW9uKGtleSl7TUNSLk9wdGlvbi5zd2l0Y2hUbyhrZXksdHJ1ZSk7fSxzd2l0Y2hPZmY6ZnVuY3Rpb24oa2V5KXtNQ1IuT3B0aW9uLnN3aXRjaFRvKGtleSxmYWxzZSk7fSxzd2l0Y2hlZDpmdW5jdGlvbihrZXkpe3ZhciBvcHQ9TUNSLk9wdGlvbi5nZXQoa2V5KTtpZigvbyhufGZmKS9pLnRlc3Qob3B0KSl7aWYob3B0PT0nb24nKXtyZXR1cm4gdHJ1ZTt9fWVsc2V7dGhyb3cgVHlwZUVycm9yO30KcmV0dXJuIGZhbHNlO30sdG9nZ2xlOmZ1bmN0aW9uKGtleSxmb3JjZV90byxjYWxsT24sY2FsbE9mZil7aWYodHlwZW9mIGZvcmNlX3RvPT09J2Jvb2xlYW4nKXtNQ1IuT3B0aW9uLnN3aXRjaFRvKGtleSwhZm9yY2VfdG8pO30KaWYoIU1DUi5PcHRpb24uc3dpdGNoZWQoa2V5KSl7aWYoY2FsbE9uKXtjYWxsT24oKTt9Ck1DUi5PcHRpb24uc3dpdGNoT24oa2V5KTskKCcjbGVnZW5kLScra2V5KycgLmNvbnRyb2wtbm93JykudGV4dCgnT24nKTt9ZWxzZXtpZihjYWxsT2ZmKXtjYWxsT2ZmKCk7fQpNQ1IuT3B0aW9uLnN3aXRjaE9mZihrZXkpOyQoJyNsZWdlbmQtJytrZXkrJyAuY29udHJvbC1ub3cnKS50ZXh0KCdPZmYnKTt9fSx2YWx1ZXM6e319LENhY2hlOntpbml0OmZ1bmN0aW9uKCl7aWYoTUNSLk9wdGlvbi5zd2l0Y2hlZCgnY2FjaGUnKSl7TUNSLkNhY2hlLnN0b3JlLmNoYXB0ZXJzPU1DUi5DYWNoZS5nZXQoJ2NoYXB0ZXJzJyk7fX0sc2V0OmZ1bmN0aW9uKGtleSx2YWx1ZSl7dmFyIGpzb249SlNPTi5zdHJpbmdpZnkodmFsdWUpO01DUi5PcHRpb24uc2V0KCdjYWNoZS0nK2tleSxqc29uKTt9LGdldDpmdW5jdGlvbihrZXkpe3ZhciBqc29uPU1DUi5PcHRpb24uZ2V0KCdjYWNoZS0nK2tleSk7cmV0dXJuIEpTT04ucGFyc2UoanNvbik7fSxkOmZ1bmN0aW9uKGtleSxxdWVyeSl7cmV0dXJuIGZhbHNlO30sY2xlYXI9ZnVuY3Rpb24oKXtmb3IoaSBpbiBNQ1IuQ2FjaGUuc3RvcmUpe01DUi5DYWNoZS5zZXQoaSx7fSk7fX0sc3RvcmU6e2NoYXB0ZXJzOnt9fX0sRG86e2Rpc3BsYXlTdGF0dXM9ZnVuY3Rpb24oc3RhdHVzLGFuaW1hdGUpe2lmKGFuaW1hdGUpeyQoJyNzdGF0dXMnKS5zdG9wKCkuZmFkZU91dCgnZmFzdCcsZnVuY3Rpb24oKXskKCcjc3RhdHVzJykudGV4dChzdGF0dXMpLmZhZGVJbigpO30pO31lbHNleyQoJyNzdGF0dXMnKS5zdG9wKCkudGV4dChzdGF0dXMpLnNob3coKTt9CmRvY3VtZW50LnRpdGxlPU1DUi5HbG9iYWwubWFuZ2EudGl0bGUrJyAvICcrTUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXIrJyAvICcrc3RhdHVzO30uZGVmYXVsdHModHJ1ZSksY2hhbmdlOntzcGFjaW5nOmZ1bmN0aW9uKGZvcmNlX3RvKXtpZigvWzAtOV0rKGVtfHB4KS9pLnRlc3QoZm9yY2VfdG8pKXskKCcjcGFnZXMgaW1nJykuY3NzKCdtYXJnaW4tYm90dG9tJyxmb3JjZV90byk7fWVsc2V7dmFyIHM9JCgnI2NvbnRyb2wtc3BhY2luZyBpbnB1dCcpLnZhbCgpO01DUi5PcHRpb24uc2V0KCdzcGFjaW5nJyxzKTskKCcjcGFnZXMgaW1nJykuY3NzKCdtYXJnaW4tYm90dG9tJyxzKTt9CiQoJyNsZWdlbmQtc3BhY2luZyAuY29udHJvbC1ub3cnKS50ZXh0KE1DUi5PcHRpb24uZ2V0KCdzcGFjaW5nJykpO319LGhhbmRsZUhvdGtleXM6ZnVuY3Rpb24oZSl7c3dpdGNoKGUud2hpY2gpe2Nhc2UgMTg4Ok1DUi5HZXQucHJldmlvdXNDaGFwdGVyKCk7cmV0dXJuO2Nhc2UgMTkwOk1DUi5HZXQubmV4dENoYXB0ZXIoKTtyZXR1cm47fX0sdG9nZ2xlOntob3RrZXlzOmZ1bmN0aW9uKGZvcmNlX3RvKXtNQ1IuT3B0aW9uLnRvZ2dsZSgnaG90a2V5cycsZm9yY2VfdG8sZnVuY3Rpb24oKXskKGRvY3VtZW50KS5iaW5kKCdrZXlkb3duJyxNQ1IuRG8uaGFuZGxlSG90a2V5cyk7fSxmdW5jdGlvbigpeyQoZG9jdW1lbnQpLnVuYmluZCgna2V5ZG93bicsTUNSLkRvLmhhbmRsZUhvdGtleXMpO30pO30sYWxsQmxhY2s6ZnVuY3Rpb24oZm9yY2VfdG8pe3ZhciBhPSQoJ1tjbGFzcyo9d2hpdGVdLCBbY2xhc3MqPWJsYWNrXScpO01DUi5PcHRpb24udG9nZ2xlKCdhbGxibGFjaycsZm9yY2VfdG8sZnVuY3Rpb24oKXthLmFkZENsYXNzKCdibGFjaycpLnJlbW92ZUNsYXNzKCd3aGl0ZScpO30sZnVuY3Rpb24oKXthLmFkZENsYXNzKCd3aGl0ZScpLnJlbW92ZUNsYXNzKCdibGFjaycpO30pO30sc2hvd0ZpcnN0OmZ1bmN0aW9uKGZvcmNlX3RvKXtNQ1IuT3B0aW9uLnRvZ2dsZSgnc2hvd2ZpcnN0Jyxmb3JjZV90byk7fSxjYWNoZTpmdW5jdGlvbihmb3JjZV90byl7TUNSLk9wdGlvbi50b2dnbGUoJ2NhY2hlJyxmb3JjZV90byk7fSxmb3JjZWQ4MDA6ZnVuY3Rpb24oZm9yY2VfdG8pe01DUi5PcHRpb24udG9nZ2xlKCdmb3JjZWQ4MDAnLGZvcmNlX3RvLGZ1bmN0aW9uKCl7JCgnI3BhZ2VzJykuYWRkQ2xhc3MoJ2ZvcmNlZDgwMCcpO30sZnVuY3Rpb24oKXskKCcjcGFnZXMnKS5yZW1vdmVDbGFzcygnZm9yY2VkODAwJyk7fSk7fSxhZHM6ZnVuY3Rpb24oZm9yY2VfdG8pe01DUi5PcHRpb24udG9nZ2xlKCdhZHMnLGZvcmNlX3RvLGZ1bmN0aW9uKCl7JCgnI2FkZm9vdGVyJykuc2hvdygpO30sZnVuY3Rpb24oKXskKCcjYWRmb290ZXInKS5oaWRlKCk7fSk7fX0sY29udHJvbHM6e2luaXQ6ZnVuY3Rpb24oKXskKCcjY29udHJvbC1idXR0b24nKS5jbGljayhNQ1IuRG8uY29udHJvbC5zaG93KTskKCcjY29udHJvbC1jbG9zZScpLmNsaWNrKE1DUi5Eby5jb250cm9sLmhpZGUpOyQoJyNjb250cm9sLXNwYWNpbmcgaW5wdXQnKS5rZXl1cChNQ1IuRG8uY2hhbmdlLnNwYWNpbmcpOyQoJyNjb250cm9sLWFsbGJsYWNrIGJ1dHRvbicpLmNsaWNrKE1DUi5Eby50b2dnbGUuYWxsQmxhY2spOyQoJyNjb250cm9sLWhvdGtleXMgYnV0dG9uJykuY2xpY2soTUNSLkRvLnRvZ2dsZS5ob3RrZXlzKTskKCcjY29udHJvbC1zaG93Zmlyc3QgYnV0dG9uJykuY2xpY2soTUNSLkRvLnRvZ2dsZS5zaG93Rmlyc3QpOyQoJyNjb250cm9sLWZvcmNlZDgwMCBidXR0b24nKS5jbGljayhNQ1IuRG8udG9nZ2xlLmZvcmNlZDgwMCk7JCgnI2NvbnRyb2wtY2FjaGUgYnV0dG9uJykuY2xpY2soTUNSLkRvLnRvZ2dsZS5jYWNoZSk7JCgnI2NvbnRyb2wtYWRzIGJ1dHRvbicpLmNsaWNrKE1DUi5Eby50b2dnbGUuYWRzKTskKCcjbmF2aWdhdGlvbi1idXR0b24nKS5jbGljayhmdW5jdGlvbigpe01DUi5Eby5jb250cm9sLnNob3coJ25hdmlnYXRpb24nKTt9KTskKCcjbmF2aWdhdGlvbi1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCl7TUNSLkRvLmNvbnRyb2wuaGlkZSgnbmF2aWdhdGlvbicpO30pOyQoJyNuYXZpZ2F0aW9uLWNoYXB0ZXJzJykubGl2ZSgnY2hhbmdlJyxNQ1IuR2V0LnNlbGVjdGVkQ2hhcHRlcik7JCgnI25hdmlnYXRpb24tcHJldmlvdXMnKS5jbGljayhNQ1IuR2V0LnByZXZpb3VzQ2hhcHRlcik7JCgnI25hdmlnYXRpb24tbmV4dCcpLmNsaWNrKE1DUi5HZXQubmV4dENoYXB0ZXIpOyQoJyNjYWNoZS1idXR0b24nKS5jbGljayhmdW5jdGlvbigpe01DUi5Eby5jb250cm9sLnNob3coJ2NhY2hlJyk7fSk7JCgnI2NhY2hlLWNsb3NlJykuY2xpY2soZnVuY3Rpb24oKXtNQ1IuRG8uY29udHJvbC5oaWRlKCdjYWNoZScpO30pOyQoJyNjYWNoZS1jbGVhcicpLmNsaWNrKE1DUi5DYWNoZS5jbGVhcik7TUNSLkRvLmNoYW5nZS5zcGFjaW5nKE1DUi5PcHRpb24uZ2V0KCdzcGFjaW5nJykpO01DUi5Eby50b2dnbGUuYWxsQmxhY2soTUNSLk9wdGlvbi5zd2l0Y2hlZCgnYWxsYmxhY2snKSk7TUNSLkRvLnRvZ2dsZS5ob3RrZXlzKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2hvdGtleXMnKSk7TUNSLkRvLnRvZ2dsZS5zaG93Rmlyc3QoTUNSLk9wdGlvbi5zd2l0Y2hlZCgnc2hvd2ZpcnN0JykpO01DUi5Eby50b2dnbGUuY2FjaGUoTUNSLk9wdGlvbi5zd2l0Y2hlZCgnY2FjaGUnKSk7TUNSLkRvLnRvZ2dsZS5mb3JjZWQ4MDAoTUNSLk9wdGlvbi5zd2l0Y2hlZCgnZm9yY2VkODAwJykpO01DUi5Eby50b2dnbGUuYWRzKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2FkcycpKTt9LHNob3c6ZnVuY3Rpb24ocGFuZWwpeyQoJyMnK3BhbmVsKyctcGFuZWwnKS5mYWRlSW4oJ2Zhc3QnKTt9LmRlZmF1bHRzKCdjb250cm9sJyksaGlkZTpmdW5jdGlvbihwYW5lbCl7JCgnIycrcGFuZWwrJy1wYW5lbCcpLmZhZGVPdXQoJ2Zhc3QnKTt9LmRlZmF1bHRzKCdjb250cm9sJyksfX0sR2V0OntjaGFwdGVyOmZ1bmN0aW9uKCl7dmFyIHVybCxtYWtlVXJsPWZ1bmN0aW9uKCl7cmV0dXJuIE1DUi5Ub29sLmJ1aWxkVXJsKE1DUi5HbG9iYWwucmVxdWVzdC5tYW5nYSxNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlcixNQ1IuVE1QLnBhZ2UpO30sdXBkYXRlRGV0YWlscz1mdW5jdGlvbigpe30sdXBkYXRlU2VsZWN0PWZ1bmN0aW9uKCl7fSx1cGRhdGVEaXNwbGF5PWZ1bmN0aW9uKCl7fSxtYWluTG9vcD1mdW5jdGlvbigpe307aWYoTUNSLk9wdGlvbi5zd2l0Y2hlZCgiY2FjaGUiKSl7aWYoTUNSLkNhY2hlLmNoYXB0ZXJzW1N0cmluZyhNQ1IuR2xvYmFsLnJlcXVlc3QubWFuZ2EpXSl7aWYoTUNSLkNhY2hlLmNoYXB0ZXJzW1N0cmluZyhNQ1IuR2xvYmFsLnJlcXVlc3QubWFuZ2EpXVtTdHJpbmcoTUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXIpXSl7dXBkYXRlRGV0YWlscygpO3VwZGF0ZURpc3BsYXkoKTtyZXR1cm47fX19ZWxzZXtNQ1IuVE1QLnBhZ2U9MTttYWluTG9vcCgpO319fX07d2luZG93Lk1DUj1NQ1I7fSkod2luZG93KTskKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gb212S2V5UHJlc3NlZCgpe30KZG9jdW1lbnQub25rZXlkb3duPWZ1bmN0aW9uKCl7fTtNQ1IuR2xvYmFsLnJlcXVlc3Q9TUNSLlRvb2wucGFyc2VVcmwod2luZG93LmxvY2F0aW9uKTtNQ1IuR2xvYmFsLm1hbmdhLnRpdGxlPU1DUi5Ub29sLmNhcGl0YWxpemUoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhLnJlcGxhY2UoLy0vaWcsJyAnKSk7TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyPXsibnVtYmVyIjpNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlciwibmFtZSI6IiJ9OyQoJ2hlYWQgPiAqJykubm90KCdzY3JpcHQnKS5yZW1vdmUoKTtNQ1IuVUkuaW5pdCgpO01DUi5PcHRpb24uaW5pdCgpO01DUi5DYWNoZS5pbml0KCk7TUNSLkRvLmluaXQoKTtNQ1IuR2V0LmNoYXB0ZXIoKTt9KTs='; }