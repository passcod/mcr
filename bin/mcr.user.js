// ==UserScript==
// @name           Manga ChapterReader
// @description    Displays full chapters from MangaReader.net in a simpler interface.
// @author         passcod
// @license        MIT/X11 + Attribution
// @version        11.35b
// @namespace      http://www.mangareader.net
// @include        http://www.mangareader.net/*
// @include        http://mangareader.net/*
// ==/UserScript==
// version format: y.z


/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/
 
var Base64 = {
 
	// private property
	_keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
 
	// public method for encoding
	encode : function (input) {
		var output = "";
		var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
		var i = 0;
 
		input = Base64._utf8_encode(input);
 
		while (i < input.length) {
 
			chr1 = input.charCodeAt(i++);
			chr2 = input.charCodeAt(i++);
			chr3 = input.charCodeAt(i++);
 
			enc1 = chr1 >> 2;
			enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
			enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
			enc4 = chr3 & 63;
 
			if (isNaN(chr2)) {
				enc3 = enc4 = 64;
			} else if (isNaN(chr3)) {
				enc4 = 64;
			}
 
			output = output +
			this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
			this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);
 
		}
 
		return output;
	},
 
	// public method for decoding
	decode : function (input) {
		var output = "";
		var chr1, chr2, chr3;
		var enc1, enc2, enc3, enc4;
		var i = 0;
 
		input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
 
		while (i < input.length) {
 
			enc1 = this._keyStr.indexOf(input.charAt(i++));
			enc2 = this._keyStr.indexOf(input.charAt(i++));
			enc3 = this._keyStr.indexOf(input.charAt(i++));
			enc4 = this._keyStr.indexOf(input.charAt(i++));
 
			chr1 = (enc1 << 2) | (enc2 >> 4);
			chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
			chr3 = ((enc3 & 3) << 6) | enc4;
 
			output = output + String.fromCharCode(chr1);
 
			if (enc3 != 64) {
				output = output + String.fromCharCode(chr2);
			}
			if (enc4 != 64) {
				output = output + String.fromCharCode(chr3);
			}
 
		}
 
		output = Base64._utf8_decode(output);
 
		return output;
 
	},
 
	// private method for UTF-8 encoding
	_utf8_encode : function (string) {
		string = string.replace(/\r\n/g,"\n");
		var utftext = "";
 
		for (var n = 0; n < string.length; n++) {
 
			var c = string.charCodeAt(n);
 
			if (c < 128) {
				utftext += String.fromCharCode(c);
			}
			else if((c > 127) && (c < 2048)) {
				utftext += String.fromCharCode((c >> 6) | 192);
				utftext += String.fromCharCode((c & 63) | 128);
			}
			else {
				utftext += String.fromCharCode((c >> 12) | 224);
				utftext += String.fromCharCode(((c >> 6) & 63) | 128);
				utftext += String.fromCharCode((c & 63) | 128);
			}
 
		}
 
		return utftext;
	},
 
	// private method for UTF-8 decoding
	_utf8_decode : function (utftext) {
		var string = "";
		var i = 0;
		var c = c1 = c2 = 0;
 
		while ( i < utftext.length ) {
 
			c = utftext.charCodeAt(i);
 
			if (c < 128) {
				string += String.fromCharCode(c);
				i++;
			}
			else if((c > 191) && (c < 224)) {
				c2 = utftext.charCodeAt(i+1);
				string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
				i += 2;
			}
			else {
				c2 = utftext.charCodeAt(i+1);
				c3 = utftext.charCodeAt(i+2);
				string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
				i += 3;
			}
 
		}
 
		return string;
	}
 
}


var regular = /mangareader\.net\/[a-z0-9\-]+\/[0-9]+(\/.+)?/i,
	old = /mangareader\.net\/[0-9\-]+\/([a-z0-9\-]+)\/chapter-([0-9]+)\.htm/i;

if ( regular.test(window.location) || old.test(window.location) ) {
	document.getElementsByTagName('head')[0].innerHTML = '<title>Loading... -- '+
	  document.getElementsByTagName('title')[0].innerHTML+'</title>';
	
	document.getElementsByTagName('body')[0].innerHTML = '<p id="pre">Loading...</p>';
	var script = document.createElement('script');
	var src = document.createTextNode(Base64.decode(GetIt()));
	script.appendChild(src);
	script.type = "text/javascript";
	document.getElementsByTagName('body')[0].appendChild(script);
}


function GetIt() { return 'CnZhciBNQ1JfVkVSU0lPTj0nMTEuMzViJzsoZnVuY3Rpb24oRSxCKXtmdW5jdGlvbiBrYShhLGIsZCl7aWYoZD09PUImJmEubm9kZVR5cGU9PT0xKXtkPWEuZ2V0QXR0cmlidXRlKCJkYXRhLSIrYik7aWYodHlwZW9mIGQ9PT0ic3RyaW5nIil7dHJ5e2Q9ZD09PSJ0cnVlIj90cnVlOmQ9PT0iZmFsc2UiP2ZhbHNlOmQ9PT0ibnVsbCI/bnVsbDohYy5pc05hTihkKT9wYXJzZUZsb2F0KGQpOkphLnRlc3QoZCk/Yy5wYXJzZUpTT04oZCk6ZH1jYXRjaChlKXt9Yy5kYXRhKGEsYixkKX1lbHNlIGQ9Qn1yZXR1cm4gZH1mdW5jdGlvbiBVKCl7cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIGNhKCl7cmV0dXJuIHRydWV9ZnVuY3Rpb24gbGEoYSxiLGQpe2RbMF0udHlwZT1hO3JldHVybiBjLmV2ZW50LmhhbmRsZS5hcHBseShiLGQpfWZ1bmN0aW9uIEthKGEpe3ZhciBiLGQsZSxmLGgsbCxrLG8seCxyLEEsQz1bXTtmPVtdO2g9Yy5kYXRhKHRoaXMsdGhpcy5ub2RlVHlwZT8iZXZlbnRzIjoiX19ldmVudHNfXyIpO2lmKHR5cGVvZiBoPT09ImZ1bmN0aW9uIiloPWguZXZlbnRzO2lmKCEoYS5saXZlRmlyZWQ9PT10aGlzfHwhaHx8IWgubGl2ZXx8YS5idXR0b24mJmEudHlwZT09PSJjbGljayIpKXtpZihhLm5hbWVzcGFjZSlBPVJlZ0V4cCgiKF58XFwuKSIrYS5uYW1lc3BhY2Uuc3BsaXQoIi4iKS5qb2luKCJcXC4oPzouKlxcLik/IikrIihcXC58JCkiKTthLmxpdmVGaXJlZD10aGlzO3ZhciBKPWgubGl2ZS5zbGljZSgwKTtmb3Ioaz0wO2s8Si5sZW5ndGg7aysrKXtoPUpba107aC5vcmlnVHlwZS5yZXBsYWNlKFgsIiIpPT09YS50eXBlP2YucHVzaChoLnNlbGVjdG9yKTpKLnNwbGljZShrLS0sMSl9Zj1jKGEudGFyZ2V0KS5jbG9zZXN0KGYsYS5jdXJyZW50VGFyZ2V0KTtvPTA7Zm9yKHg9Zi5sZW5ndGg7bzx4O28rKyl7cj1mW29dO2ZvcihrPTA7azxKLmxlbmd0aDtrKyspe2g9SltrXTtpZihyLnNlbGVjdG9yPT09aC5zZWxlY3RvciYmKCFBfHxBLnRlc3QoaC5uYW1lc3BhY2UpKSl7bD1yLmVsZW07ZT1udWxsO2lmKGgucHJlVHlwZT09PSJtb3VzZWVudGVyInx8aC5wcmVUeXBlPT09Im1vdXNlbGVhdmUiKXthLnR5cGU9aC5wcmVUeXBlO2U9YyhhLnJlbGF0ZWRUYXJnZXQpLmNsb3Nlc3QoaC5zZWxlY3RvcilbMF19aWYoIWV8fGUhPT1sKUMucHVzaCh7ZWxlbTpsLGhhbmRsZU9iajpoLGxldmVsOnIubGV2ZWx9KX19fW89MDtmb3IoeD1DLmxlbmd0aDtvPHg7bysrKXtmPUNbb107aWYoZCYmZi5sZXZlbD5kKWJyZWFrO2EuY3VycmVudFRhcmdldD1mLmVsZW07YS5kYXRhPWYuaGFuZGxlT2JqLmRhdGE7YS5oYW5kbGVPYmo9Zi5oYW5kbGVPYmo7QT1mLmhhbmRsZU9iai5vcmlnSGFuZGxlci5hcHBseShmLmVsZW0sYXJndW1lbnRzKTtpZihBPT09ZmFsc2V8fGEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZD1mLmxldmVsO2lmKEE9PT1mYWxzZSliPWZhbHNlO2lmKGEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlicmVha319cmV0dXJuIGJ9fWZ1bmN0aW9uIFkoYSxiKXtyZXR1cm4oYSYmYSE9PSIqIj9hKyIuIjoiIikrYi5yZXBsYWNlKExhLCJgIikucmVwbGFjZShNYSwiJiIpfWZ1bmN0aW9uIG1hKGEsYixkKXtpZihjLmlzRnVuY3Rpb24oYikpcmV0dXJuIGMuZ3JlcChhLGZ1bmN0aW9uKGYsaCl7cmV0dXJuISFiLmNhbGwoZixoLGYpPT09ZH0pO2Vsc2UgaWYoYi5ub2RlVHlwZSlyZXR1cm4gYy5ncmVwKGEsZnVuY3Rpb24oZil7cmV0dXJuIGY9PT1iPT09ZH0pO2Vsc2UgaWYodHlwZW9mIGI9PT0ic3RyaW5nIil7dmFyIGU9Yy5ncmVwKGEsZnVuY3Rpb24oZil7cmV0dXJuIGYubm9kZVR5cGU9PT0xfSk7aWYoTmEudGVzdChiKSlyZXR1cm4gYy5maWx0ZXIoYixlLCFkKTtlbHNlIGI9Yy5maWx0ZXIoYixlKX1yZXR1cm4gYy5ncmVwKGEsZnVuY3Rpb24oZil7cmV0dXJuIGMuaW5BcnJheShmLGIpPj0wPT09ZH0pfWZ1bmN0aW9uIG5hKGEsYil7dmFyIGQ9MDtiLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVOYW1lPT09KGFbZF0mJmFbZF0ubm9kZU5hbWUpKXt2YXIgZT1jLmRhdGEoYVtkKytdKSxmPWMuZGF0YSh0aGlzLGUpO2lmKGU9ZSYmZS5ldmVudHMpe2RlbGV0ZSBmLmhhbmRsZTtmLmV2ZW50cz17fTtmb3IodmFyIGggaW4gZSlmb3IodmFyIGwgaW4gZVtoXSljLmV2ZW50LmFkZCh0aGlzLGgsZVtoXVtsXSxlW2hdW2xdLmRhdGEpfX19KX1mdW5jdGlvbiBPYShhLGIpe2Iuc3JjP2MuYWpheCh7dXJsOmIuc3JjLGFzeW5jOmZhbHNlLGRhdGFUeXBlOiJzY3JpcHQifSk6Yy5nbG9iYWxFdmFsKGIudGV4dHx8Yi50ZXh0Q29udGVudHx8Yi5pbm5lckhUTUx8fCIiKTtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiBvYShhLGIsZCl7dmFyIGU9Yj09PSJ3aWR0aCI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodDtpZihkPT09ImJvcmRlciIpcmV0dXJuIGU7Yy5lYWNoKGI9PT0id2lkdGgiP1BhOlFhLGZ1bmN0aW9uKCl7ZHx8KGUtPXBhcnNlRmxvYXQoYy5jc3MoYSwicGFkZGluZyIrdGhpcykpfHwwKTtpZihkPT09Im1hcmdpbiIpZSs9cGFyc2VGbG9hdChjLmNzcyhhLCJtYXJnaW4iK3RoaXMpKXx8MDtlbHNlIGUtPXBhcnNlRmxvYXQoYy5jc3MoYSwiYm9yZGVyIit0aGlzKyJXaWR0aCIpKXx8MH0pO3JldHVybiBlfWZ1bmN0aW9uIGRhKGEsYixkLGUpe2lmKGMuaXNBcnJheShiKSYmYi5sZW5ndGgpYy5lYWNoKGIsZnVuY3Rpb24oZixoKXtkfHxSYS50ZXN0KGEpP2UoYSxoKTpkYShhKyJbIisodHlwZW9mIGg9PT0ib2JqZWN0Inx8Yy5pc0FycmF5KGgpP2Y6IiIpKyJdIixoLGQsZSl9KTtlbHNlIGlmKCFkJiZiIT1udWxsJiZ0eXBlb2YgYj09PSJvYmplY3QiKWMuaXNFbXB0eU9iamVjdChiKT9lKGEsIiIpOmMuZWFjaChiLGZ1bmN0aW9uKGYsaCl7ZGEoYSsiWyIrZisiXSIsaCxkLGUpfSk7ZWxzZSBlKGEsYil9ZnVuY3Rpb24gUyhhLGIpe3ZhciBkPXt9O2MuZWFjaChwYS5jb25jYXQuYXBwbHkoW10scGEuc2xpY2UoMCxiKSksZnVuY3Rpb24oKXtkW3RoaXNdPWF9KTtyZXR1cm4gZH1mdW5jdGlvbiBxYShhKXtpZighZWFbYV0pe3ZhciBiPWMoIjwiKwphKyI+IikuYXBwZW5kVG8oImJvZHkiKSxkPWIuY3NzKCJkaXNwbGF5Iik7Yi5yZW1vdmUoKTtpZihkPT09Im5vbmUifHxkPT09IiIpZD0iYmxvY2siO2VhW2FdPWR9cmV0dXJuIGVhW2FdfWZ1bmN0aW9uIGZhKGEpe3JldHVybiBjLmlzV2luZG93KGEpP2E6YS5ub2RlVHlwZT09PTk/YS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3c6ZmFsc2V9dmFyIHQ9RS5kb2N1bWVudCxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2lmKCFiLmlzUmVhZHkpe3RyeXt0LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGope3NldFRpbWVvdXQoYSwxKTtyZXR1cm59Yi5yZWFkeSgpfX12YXIgYj1mdW5jdGlvbihqLHMpe3JldHVybiBuZXcgYi5mbi5pbml0KGoscyl9LGQ9RS5qUXVlcnksZT1FLiQsZixoPS9eKD86W148XSooPFtcd1xXXSs+KVtePl0qJHwjKFtcd1wtXSspJCkvLGw9L1xTLyxrPS9eXHMrLyxvPS9ccyskLyx4PS9cVy8scj0vXGQvLEE9L148KFx3KylccypcLz8+KD86PFwvXDE+KT8kLyxDPS9eW1xdLDp7fVxzXSokLyxKPS9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csdz0vIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csST0vKD86Xnw6fCwpKD86XHMqXFspKy9nLEw9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS8sZz0vKG9wZXJhKSg/Oi4qdmVyc2lvbik/WyBcL10oW1x3Ll0rKS8saT0vKG1zaWUpIChbXHcuXSspLyxuPS8obW96aWxsYSkoPzouKj8gcnY6KFtcdy5dKykpPy8sbT1uYXZpZ2F0b3IudXNlckFnZW50LHA9ZmFsc2UscT1bXSx1LHk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxGPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksTT1BcnJheS5wcm90b3R5cGUucHVzaCxOPUFycmF5LnByb3RvdHlwZS5zbGljZSxPPVN0cmluZy5wcm90b3R5cGUudHJpbSxEPUFycmF5LnByb3RvdHlwZS5pbmRleE9mLFI9e307Yi5mbj1iLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihqLHMpe3ZhciB2LHosSDtpZighailyZXR1cm4gdGhpcztpZihqLm5vZGVUeXBlKXt0aGlzLmNvbnRleHQ9dGhpc1swXT1qO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYoaj09PSJib2R5IiYmIXMmJnQuYm9keSl7dGhpcy5jb250ZXh0PXQ7dGhpc1swXT10LmJvZHk7dGhpcy5zZWxlY3Rvcj0iYm9keSI7dGhpcy5sZW5ndGg9MTtyZXR1cm4gdGhpc31pZih0eXBlb2Ygaj09PSJzdHJpbmciKWlmKCh2PWguZXhlYyhqKSkmJih2WzFdfHwhcykpaWYodlsxXSl7SD1zP3Mub3duZXJEb2N1bWVudHx8czp0O2lmKHo9QS5leGVjKGopKWlmKGIuaXNQbGFpbk9iamVjdChzKSl7aj1bdC5jcmVhdGVFbGVtZW50KHpbMV0pXTtiLmZuLmF0dHIuY2FsbChqLHMsdHJ1ZSl9ZWxzZSBqPVtILmNyZWF0ZUVsZW1lbnQoelsxXSldO2Vsc2V7ej1iLmJ1aWxkRnJhZ21lbnQoW3ZbMV1dLFtIXSk7aj0oei5jYWNoZWFibGU/ei5mcmFnbWVudC5jbG9uZU5vZGUodHJ1ZSk6ei5mcmFnbWVudCkuY2hpbGROb2Rlc31yZXR1cm4gYi5tZXJnZSh0aGlzLGopfWVsc2V7aWYoKHo9dC5nZXRFbGVtZW50QnlJZCh2WzJdKSkmJnoucGFyZW50Tm9kZSl7aWYoei5pZCE9PXZbMl0pcmV0dXJuIGYuZmluZChqKTt0aGlzLmxlbmd0aD0xO3RoaXNbMF09en10aGlzLmNvbnRleHQ9dDt0aGlzLnNlbGVjdG9yPWo7cmV0dXJuIHRoaXN9ZWxzZSBpZighcyYmIXgudGVzdChqKSl7dGhpcy5zZWxlY3Rvcj1qO3RoaXMuY29udGV4dD10O2o9dC5nZXRFbGVtZW50c0J5VGFnTmFtZShqKTtyZXR1cm4gYi5tZXJnZSh0aGlzLGopfWVsc2UgcmV0dXJuIXN8fHMuanF1ZXJ5PyhzfHxmKS5maW5kKGopOmIocykuZmluZChqKTtlbHNlIGlmKGIuaXNGdW5jdGlvbihqKSlyZXR1cm4gZi5yZWFkeShqKTtpZihqLnNlbGVjdG9yIT09Qil7dGhpcy5zZWxlY3Rvcj1qLnNlbGVjdG9yO3RoaXMuY29udGV4dD1qLmNvbnRleHR9cmV0dXJuIGIubWFrZUFycmF5KGosdGhpcyl9LHNlbGVjdG9yOiIiLGpxdWVyeToiMS40LjQiLGxlbmd0aDowLHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gTi5jYWxsKHRoaXMsMCl9LGdldDpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbD90aGlzLnRvQXJyYXkoKTpqPDA/dGhpcy5zbGljZShqKVswXTp0aGlzW2pdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oaixzLHYpe3ZhciB6PWIoKTtiLmlzQXJyYXkoaik/TS5hcHBseSh6LGopOmIubWVyZ2UoeixqKTt6LnByZXZPYmplY3Q9dGhpczt6LmNvbnRleHQ9dGhpcy5jb250ZXh0O2lmKHM9PT0iZmluZCIpei5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyh0aGlzLnNlbGVjdG9yPyIgIjoiIikrdjtlbHNlIGlmKHMpei5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyIuIitzKyIoIit2KyIpIjtyZXR1cm4gen0sZWFjaDpmdW5jdGlvbihqLHMpe3JldHVybiBiLmVhY2godGhpcyxqLHMpfSxyZWFkeTpmdW5jdGlvbihqKXtiLmJpbmRSZWFkeSgpO2lmKGIuaXNSZWFkeSlqLmNhbGwodCxiKTtlbHNlIHEmJnEucHVzaChqKTtyZXR1cm4gdGhpc30sZXE6ZnVuY3Rpb24oail7cmV0dXJuIGo9PT0tMT90aGlzLnNsaWNlKGopOnRoaXMuc2xpY2UoaiwraisxKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soTi5hcHBseSh0aGlzLGFyZ3VtZW50cyksInNsaWNlIixOLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfSxtYXA6ZnVuY3Rpb24oail7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIubWFwKHRoaXMsZnVuY3Rpb24ocyx2KXtyZXR1cm4gai5jYWxsKHMsdixzKX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8YihudWxsKX0scHVzaDpNLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfTtiLmZuLmluaXQucHJvdG90eXBlPWIuZm47Yi5leHRlbmQ9Yi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgaixzLHYseixILEc9YXJndW1lbnRzWzBdfHx7fSxLPTEsUT1hcmd1bWVudHMubGVuZ3RoLGdhPWZhbHNlO2lmKHR5cGVvZiBHPT09ImJvb2xlYW4iKXtnYT1HO0c9YXJndW1lbnRzWzFdfHx7fTtLPTJ9aWYodHlwZW9mIEchPT0ib2JqZWN0IiYmIWIuaXNGdW5jdGlvbihHKSlHPXt9O2lmKFE9PT1LKXtHPXRoaXM7LS1LfWZvcig7SzxRO0srKylpZigoaj1hcmd1bWVudHNbS10pIT1udWxsKWZvcihzIGluIGope3Y9R1tzXTt6PWpbc107aWYoRyE9PXopaWYoZ2EmJnomJihiLmlzUGxhaW5PYmplY3Qoeil8fChIPWIuaXNBcnJheSh6KSkpKXtpZihIKXtIPWZhbHNlO3Y9diYmYi5pc0FycmF5KHYpP3Y6W119ZWxzZSB2PXYmJmIuaXNQbGFpbk9iamVjdCh2KT92Ont9O0dbc109Yi5leHRlbmQoZ2Esdix6KX1lbHNlIGlmKHohPT1CKUdbc109en1yZXR1cm4gR307Yi5leHRlbmQoe25vQ29uZmxpY3Q6ZnVuY3Rpb24oail7RS4kPWU7aWYoailFLmpRdWVyeT1kO3JldHVybiBifSxpc1JlYWR5OmZhbHNlLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGope2o9PT10cnVlJiZiLnJlYWR5V2FpdC0tO2lmKCFiLnJlYWR5V2FpdHx8aiE9PXRydWUmJiFiLmlzUmVhZHkpe2lmKCF0LmJvZHkpcmV0dXJuIHNldFRpbWVvdXQoYi5yZWFkeSwxKTtiLmlzUmVhZHk9dHJ1ZTtpZighKGohPT10cnVlJiYtLWIucmVhZHlXYWl0PjApKWlmKHEpe3ZhciBzPTAsdj1xO2ZvcihxPW51bGw7aj12W3MrK107KWouY2FsbCh0LGIpO2IuZm4udHJpZ2dlciYmYih0KS50cmlnZ2VyKCJyZWFkeSIpLnVuYmluZCgicmVhZHkiKX19fSxiaW5kUmVhZHk6ZnVuY3Rpb24oKXtpZighcCl7cD10cnVlO2lmKHQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpcmV0dXJuIHNldFRpbWVvdXQoYi5yZWFkeSwxKTtpZih0LmFkZEV2ZW50TGlzdGVuZXIpe3QuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdSxmYWxzZSk7RS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixiLnJlYWR5LGZhbHNlKX1lbHNlIGlmKHQuYXR0YWNoRXZlbnQpe3QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsdSk7RS5hdHRhY2hFdmVudCgib25sb2FkIixiLnJlYWR5KTt2YXIgaj1mYWxzZTt0cnl7aj1FLmZyYW1lRWxlbWVudD09bnVsbH1jYXRjaChzKXt9dC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwmJmomJmEoKX19fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGope3JldHVybiBiLnR5cGUoaik9PT0iZnVuY3Rpb24ifSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGope3JldHVybiBiLnR5cGUoaik9PT0iYXJyYXkifSxpc1dpbmRvdzpmdW5jdGlvbihqKXtyZXR1cm4gaiYmdHlwZW9mIGo9PT0ib2JqZWN0IiYmInNldEludGVydmFsImluIGp9LGlzTmFOOmZ1bmN0aW9uKGope3JldHVybiBqPT1udWxsfHwhci50ZXN0KGopfHxpc05hTihqKX0sdHlwZTpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbD9TdHJpbmcoaik6Ult5LmNhbGwoaildfHwib2JqZWN0In0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihqKXtpZighanx8Yi50eXBlKGopIT09Im9iamVjdCJ8fGoubm9kZVR5cGV8fGIuaXNXaW5kb3coaikpcmV0dXJuIGZhbHNlO2lmKGouY29uc3RydWN0b3ImJiFGLmNhbGwoaiwiY29uc3RydWN0b3IiKSYmIUYuY2FsbChqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiBmYWxzZTtmb3IodmFyIHMgaW4gaik7cmV0dXJuIHM9PT1CfHxGLmNhbGwoaixzKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihqKXtmb3IodmFyIHMgaW4gailyZXR1cm4gZmFsc2U7cmV0dXJuIHRydWV9LGVycm9yOmZ1bmN0aW9uKGope3Rocm93IGo7fSxwYXJzZUpTT046ZnVuY3Rpb24oail7aWYodHlwZW9mIGohPT0ic3RyaW5nInx8IWopcmV0dXJuIG51bGw7aj1iLnRyaW0oaik7aWYoQy50ZXN0KGoucmVwbGFjZShKLCJAIikucmVwbGFjZSh3LCJdIikucmVwbGFjZShJLCIiKSkpcmV0dXJuIEUuSlNPTiYmRS5KU09OLnBhcnNlP0UuSlNPTi5wYXJzZShqKToobmV3IEZ1bmN0aW9uKCJyZXR1cm4gIitqKSkoKTtlbHNlIGIuZXJyb3IoIkludmFsaWQgSlNPTjogIitqKX0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihqKXtpZihqJiZsLnRlc3Qoaikpe3ZhciBzPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXXx8dC5kb2N1bWVudEVsZW1lbnQsdj10LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3YudHlwZT0idGV4dC9qYXZhc2NyaXB0IjtpZihiLnN1cHBvcnQuc2NyaXB0RXZhbCl2LmFwcGVuZENoaWxkKHQuY3JlYXRlVGV4dE5vZGUoaikpO2Vsc2Ugdi50ZXh0PWo7cy5pbnNlcnRCZWZvcmUodixzLmZpcnN0Q2hpbGQpO3MucmVtb3ZlQ2hpbGQodil9fSxub2RlTmFtZTpmdW5jdGlvbihqLHMpe3JldHVybiBqLm5vZGVOYW1lJiZqLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT1zLnRvVXBwZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oaixzLHYpe3ZhciB6LEg9MCxHPWoubGVuZ3RoLEs9Rz09PUJ8fGIuaXNGdW5jdGlvbihqKTtpZih2KWlmKEspZm9yKHogaW4gail7aWYocy5hcHBseShqW3pdLHYpPT09ZmFsc2UpYnJlYWt9ZWxzZSBmb3IoO0g8Rzspe2lmKHMuYXBwbHkoaltIKytdLHYpPT09ZmFsc2UpYnJlYWt9ZWxzZSBpZihLKWZvcih6IGluIGope2lmKHMuY2FsbChqW3pdLHosalt6XSk9PT1mYWxzZSlicmVha31lbHNlIGZvcih2PWpbMF07SDxHJiZzLmNhbGwodixILHYpIT09ZmFsc2U7dj1qWysrSF0pO3JldHVybiBqfSx0cmltOk8/ZnVuY3Rpb24oail7cmV0dXJuIGo9PW51bGw/IiI6Ty5jYWxsKGopfTpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbD8iIjpqLnRvU3RyaW5nKCkucmVwbGFjZShrLCIiKS5yZXBsYWNlKG8sIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oaixzKXt2YXIgdj1zfHxbXTtpZihqIT1udWxsKXt2YXIgej1iLnR5cGUoaik7ai5sZW5ndGg9PW51bGx8fHo9PT0ic3RyaW5nInx8ej09PSJmdW5jdGlvbiJ8fHo9PT0icmVnZXhwInx8Yi5pc1dpbmRvdyhqKT9NLmNhbGwodixqKTpiLm1lcmdlKHYsail9cmV0dXJuIHZ9LGluQXJyYXk6ZnVuY3Rpb24oaixzKXtpZihzLmluZGV4T2YpcmV0dXJuIHMuaW5kZXhPZihqKTtmb3IodmFyIHY9MCx6PXMubGVuZ3RoO3Y8ejt2KyspaWYoc1t2XT09PWopcmV0dXJuIHY7cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGoscyl7dmFyIHY9ai5sZW5ndGgsej0wO2lmKHR5cGVvZiBzLmxlbmd0aD09PSJudW1iZXIiKWZvcih2YXIgSD1zLmxlbmd0aDt6PEg7eisrKWpbdisrXT1zW3pdO2Vsc2UgZm9yKDtzW3pdIT09Qjspalt2KytdPXNbeisrXTtqLmxlbmd0aD12O3JldHVybiBqfSxncmVwOmZ1bmN0aW9uKGoscyx2KXt2YXIgej1bXSxIO3Y9ISF2O2Zvcih2YXIgRz0wLEs9ai5sZW5ndGg7RzxLO0crKyl7SD0hIXMoaltHXSxHKTt2IT09SCYmei5wdXNoKGpbR10pfXJldHVybiB6fSxtYXA6ZnVuY3Rpb24oaixzLHYpe2Zvcih2YXIgej1bXSxILEc9MCxLPWoubGVuZ3RoO0c8SztHKyspe0g9cyhqW0ddLEcsdik7aWYoSCE9bnVsbCl6W3oubGVuZ3RoXT1IfXJldHVybiB6LmNvbmNhdC5hcHBseShbXSx6KX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGoscyx2KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MilpZih0eXBlb2Ygcz09PSJzdHJpbmciKXt2PWo7aj12W3NdO3M9Qn1lbHNlIGlmKHMmJiFiLmlzRnVuY3Rpb24ocykpe3Y9cztzPUJ9aWYoIXMmJmopcz1mdW5jdGlvbigpe3JldHVybiBqLmFwcGx5KHZ8fHRoaXMsYXJndW1lbnRzKX07aWYoailzLmd1aWQ9ai5ndWlkPWouZ3VpZHx8cy5ndWlkfHxiLmd1aWQrKztyZXR1cm4gc30sYWNjZXNzOmZ1bmN0aW9uKGoscyx2LHosSCxHKXt2YXIgSz1qLmxlbmd0aDtpZih0eXBlb2Ygcz09PSJvYmplY3QiKXtmb3IodmFyIFEgaW4gcyliLmFjY2VzcyhqLFEsc1tRXSx6LEgsdik7cmV0dXJuIGp9aWYodiE9PUIpe3o9IUcmJnomJmIuaXNGdW5jdGlvbih2KTtmb3IoUT0wO1E8SztRKyspSChqW1FdLHMsej92LmNhbGwoaltRXSxRLEgoaltRXSxzKSk6dixHKTtyZXR1cm4gan1yZXR1cm4gSz9IKGpbMF0scyk6Qn0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9LHVhTWF0Y2g6ZnVuY3Rpb24oail7aj1qLnRvTG93ZXJDYXNlKCk7aj1MLmV4ZWMoail8fGcuZXhlYyhqKXx8aS5leGVjKGopfHxqLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiZuLmV4ZWMoail8fFtdO3JldHVybnticm93c2VyOmpbMV18fCIiLHZlcnNpb246alsyXXx8IjAifX0sYnJvd3Nlcjp7fX0pO2IuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCIuc3BsaXQoIiAiKSxmdW5jdGlvbihqLHMpe1JbIltvYmplY3QgIitzKyJdIl09cy50b0xvd2VyQ2FzZSgpfSk7bT1iLnVhTWF0Y2gobSk7aWYobS5icm93c2VyKXtiLmJyb3dzZXJbbS5icm93c2VyXT10cnVlO2IuYnJvd3Nlci52ZXJzaW9uPW0udmVyc2lvbn1pZihiLmJyb3dzZXIud2Via2l0KWIuYnJvd3Nlci5zYWZhcmk9dHJ1ZTtpZihEKWIuaW5BcnJheT1mdW5jdGlvbihqLHMpe3JldHVybiBELmNhbGwocyxqKX07aWYoIS9ccy8udGVzdCgiXHUwMGEwIikpe2s9L15bXHNceEEwXSsvO289L1tcc1x4QTBdKyQvfWY9Yih0KTtpZih0LmFkZEV2ZW50TGlzdGVuZXIpdT1mdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdSxmYWxzZSk7Yi5yZWFkeSgpfTtlbHNlIGlmKHQuYXR0YWNoRXZlbnQpdT1mdW5jdGlvbigpe2lmKHQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe3QuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsdSk7Yi5yZWFkeSgpfX07cmV0dXJuIEUualF1ZXJ5PUUuJD1ifSgpOyhmdW5jdGlvbigpe2Muc3VwcG9ydD17fTt2YXIgYT10LmRvY3VtZW50RWxlbWVudCxiPXQuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksZD10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGU9InNjcmlwdCIrYy5ub3coKTtkLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2QuaW5uZXJIVE1MPSIgICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnIHN0eWxlPSdjb2xvcjpyZWQ7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41NTsnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+Ijt2YXIgZj1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksaD1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF0sbD10LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGs9bC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtpZighKCFmfHwhZi5sZW5ndGh8fCFoKSl7Yy5zdXBwb3J0PXtsZWFkaW5nV2hpdGVzcGFjZTpkLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0zLHRib2R5OiFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpLmxlbmd0aCxodG1sU2VyaWFsaXplOiEhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxzdHlsZTovcmVkLy50ZXN0KGguZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSxocmVmTm9ybWFsaXplZDpoLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09Ii9hIixvcGFjaXR5Oi9eMC41NSQvLnRlc3QoaC5zdHlsZS5vcGFjaXR5KSxjc3NGbG9hdDohIWguc3R5bGUuY3NzRmxvYXQsY2hlY2tPbjpkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdLnZhbHVlPT09Im9uIixvcHRTZWxlY3RlZDprLnNlbGVjdGVkLGRlbGV0ZUV4cGFuZG86dHJ1ZSxvcHREaXNhYmxlZDpmYWxzZSxjaGVja0Nsb25lOmZhbHNlLHNjcmlwdEV2YWw6ZmFsc2Usbm9DbG9uZUV2ZW50OnRydWUsYm94TW9kZWw6bnVsbCxpbmxpbmVCbG9ja05lZWRzTGF5b3V0OmZhbHNlLHNocmlua1dyYXBCbG9ja3M6ZmFsc2UscmVsaWFibGVIaWRkZW5PZmZzZXRzOnRydWV9O2wuZGlzYWJsZWQ9dHJ1ZTtjLnN1cHBvcnQub3B0RGlzYWJsZWQ9IWsuZGlzYWJsZWQ7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO3RyeXtiLmFwcGVuZENoaWxkKHQuY3JlYXRlVGV4dE5vZGUoIndpbmRvdy4iK2UrIj0xOyIpKX1jYXRjaChvKXt9YS5pbnNlcnRCZWZvcmUoYixhLmZpcnN0Q2hpbGQpO2lmKEVbZV0pe2Muc3VwcG9ydC5zY3JpcHRFdmFsPXRydWU7ZGVsZXRlIEVbZV19dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2goeCl7Yy5zdXBwb3J0LmRlbGV0ZUV4cGFuZG89ZmFsc2V9YS5yZW1vdmVDaGlsZChiKTtpZihkLmF0dGFjaEV2ZW50JiZkLmZpcmVFdmVudCl7ZC5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24gcigpe2Muc3VwcG9ydC5ub0Nsb25lRXZlbnQ9ZmFsc2U7ZC5kZXRhY2hFdmVudCgib25jbGljayIscil9KTtkLmNsb25lTm9kZSh0cnVlKS5maXJlRXZlbnQoIm9uY2xpY2siKX1kPXQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5pbm5lckhUTUw9IjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncmFkaW90ZXN0JyBjaGVja2VkPSdjaGVja2VkJy8+IjthPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuYXBwZW5kQ2hpbGQoZC5maXJzdENoaWxkKTtjLnN1cHBvcnQuY2hlY2tDbG9uZT1hLmNsb25lTm9kZSh0cnVlKS5jbG9uZU5vZGUodHJ1ZSkubGFzdENoaWxkLmNoZWNrZWQ7YyhmdW5jdGlvbigpe3ZhciByPXQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ci5zdHlsZS53aWR0aD1yLnN0eWxlLnBhZGRpbmdMZWZ0PSIxcHgiO3QuYm9keS5hcHBlbmRDaGlsZChyKTtjLmJveE1vZGVsPWMuc3VwcG9ydC5ib3hNb2RlbD1yLm9mZnNldFdpZHRoPT09MjtpZigiem9vbSJpbiByLnN0eWxlKXtyLnN0eWxlLmRpc3BsYXk9ImlubGluZSI7ci5zdHlsZS56b29tPTE7Yy5zdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ci5vZmZzZXRXaWR0aD09PTI7ci5zdHlsZS5kaXNwbGF5PSIiO3IuaW5uZXJIVE1MPSI8ZGl2IHN0eWxlPSd3aWR0aDo0cHg7Jz48L2Rpdj4iO2Muc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzPXIub2Zmc2V0V2lkdGghPT0yfXIuaW5uZXJIVE1MPSI8dGFibGU+PHRyPjx0ZCBzdHlsZT0ncGFkZGluZzowO2Rpc3BsYXk6bm9uZSc+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiI7dmFyIEE9ci5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKTtjLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzPUFbMF0ub2Zmc2V0SGVpZ2h0PT09MDtBWzBdLnN0eWxlLmRpc3BsYXk9IiI7QVsxXS5zdHlsZS5kaXNwbGF5PSJub25lIjtjLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzPWMuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMmJkFbMF0ub2Zmc2V0SGVpZ2h0PT09MDtyLmlubmVySFRNTD0iIjt0LmJvZHkucmVtb3ZlQ2hpbGQocikuc3R5bGUuZGlzcGxheT0ibm9uZSJ9KTthPWZ1bmN0aW9uKHIpe3ZhciBBPXQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cj0ib24iK3I7dmFyIEM9ciBpbiBBO2lmKCFDKXtBLnNldEF0dHJpYnV0ZShyLCJyZXR1cm47Iik7Qz10eXBlb2YgQVtyXT09PSJmdW5jdGlvbiJ9cmV0dXJuIEN9O2Muc3VwcG9ydC5zdWJtaXRCdWJibGVzPWEoInN1Ym1pdCIpO2Muc3VwcG9ydC5jaGFuZ2VCdWJibGVzPWEoImNoYW5nZSIpO2E9Yj1kPWY9aD1udWxsfX0pKCk7dmFyIHJhPXt9LEphPS9eKD86XHsuKlx9fFxbLipcXSkkLztjLmV4dGVuZCh7Y2FjaGU6e30sdXVpZDowLGV4cGFuZG86ImpRdWVyeSIrYy5ub3coKSxub0RhdGE6e2VtYmVkOnRydWUsb2JqZWN0OiJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiLGFwcGxldDp0cnVlfSxkYXRhOmZ1bmN0aW9uKGEsYixkKXtpZihjLmFjY2VwdERhdGEoYSkpe2E9YT09RT9yYTphO3ZhciBlPWEubm9kZVR5cGUsZj1lP2FbYy5leHBhbmRvXTpudWxsLGg9Yy5jYWNoZTtpZighKGUmJiFmJiZ0eXBlb2YgYj09PSJzdHJpbmciJiZkPT09Qikpe2lmKGUpZnx8KGFbYy5leHBhbmRvXT1mPSsrYy51dWlkKTtlbHNlIGg9YTtpZih0eXBlb2YgYj09PSJvYmplY3QiKWlmKGUpaFtmXT1jLmV4dGVuZChoW2ZdLGIpO2Vsc2UgYy5leHRlbmQoaCxiKTtlbHNlIGlmKGUmJiFoW2ZdKWhbZl09e307YT1lP2hbZl06aDtpZihkIT09QilhW2JdPWQ7cmV0dXJuIHR5cGVvZiBiPT09InN0cmluZyI/YVtiXTphfX19LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtpZihjLmFjY2VwdERhdGEoYSkpe2E9YT09RT9yYTphO3ZhciBkPWEubm9kZVR5cGUsZT1kP2FbYy5leHBhbmRvXTphLGY9Yy5jYWNoZSxoPWQ/ZltlXTplO2lmKGIpe2lmKGgpe2RlbGV0ZSBoW2JdO2QmJmMuaXNFbXB0eU9iamVjdChoKSYmYy5yZW1vdmVEYXRhKGEpfX1lbHNlIGlmKGQmJmMuc3VwcG9ydC5kZWxldGVFeHBhbmRvKWRlbGV0ZSBhW2MuZXhwYW5kb107ZWxzZSBpZihhLnJlbW92ZUF0dHJpYnV0ZSlhLnJlbW92ZUF0dHJpYnV0ZShjLmV4cGFuZG8pO2Vsc2UgaWYoZClkZWxldGUgZltlXTtlbHNlIGZvcih2YXIgbCBpbiBhKWRlbGV0ZSBhW2xdfX0sYWNjZXB0RGF0YTpmdW5jdGlvbihhKXtpZihhLm5vZGVOYW1lKXt2YXIgYj1jLm5vRGF0YVthLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGIpcmV0dXJuIShiPT09dHJ1ZXx8YS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKSE9PWIpfXJldHVybiB0cnVlfX0pO2MuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGQ9bnVsbDtpZih0eXBlb2YgYT09PSJ1bmRlZmluZWQiKXtpZih0aGlzLmxlbmd0aCl7dmFyIGU9dGhpc1swXS5hdHRyaWJ1dGVzLGY7ZD1jLmRhdGEodGhpc1swXSk7Zm9yKHZhciBoPTAsbD1lLmxlbmd0aDtoPGw7aCsrKXtmPWVbaF0ubmFtZTtpZihmLmluZGV4T2YoImRhdGEtIik9PT0wKXtmPWYuc3Vic3RyKDUpO2thKHRoaXNbMF0sZixkW2ZdKX19fXJldHVybiBkfWVsc2UgaWYodHlwZW9mIGE9PT0ib2JqZWN0IilyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5kYXRhKHRoaXMsYSl9KTt2YXIgaz1hLnNwbGl0KCIuIik7a1sxXT1rWzFdPyIuIitrWzFdOiIiO2lmKGI9PT1CKXtkPXRoaXMudHJpZ2dlckhhbmRsZXIoImdldERhdGEiK2tbMV0rIiEiLFtrWzBdXSk7aWYoZD09PUImJnRoaXMubGVuZ3RoKXtkPWMuZGF0YSh0aGlzWzBdLGEpO2Q9a2EodGhpc1swXSxhLGQpfXJldHVybiBkPT09QiYma1sxXT90aGlzLmRhdGEoa1swXSk6ZH1lbHNlIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz1jKHRoaXMpLHg9W2tbMF0sYl07by50cmlnZ2VySGFuZGxlcigic2V0RGF0YSIra1sxXSsiISIseCk7Yy5kYXRhKHRoaXMsYSxiKTtvLnRyaWdnZXJIYW5kbGVyKCJjaGFuZ2VEYXRhIitrWzFdKyIhIix4KX0pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pO2MuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsZCl7aWYoYSl7Yj0oYnx8ImZ4IikrInF1ZXVlIjt2YXIgZT1jLmRhdGEoYSxiKTtpZighZClyZXR1cm4gZXx8W107aWYoIWV8fGMuaXNBcnJheShkKSllPWMuZGF0YShhLGIsYy5tYWtlQXJyYXkoZCkpO2Vsc2UgZS5wdXNoKGQpO3JldHVybiBlfX0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgZD1jLnF1ZXVlKGEsYiksZT1kLnNoaWZ0KCk7aWYoZT09PSJpbnByb2dyZXNzIillPWQuc2hpZnQoKTtpZihlKXtiPT09ImZ4IiYmZC51bnNoaWZ0KCJpbnByb2dyZXNzIik7ZS5jYWxsKGEsZnVuY3Rpb24oKXtjLmRlcXVldWUoYSxiKX0pfX19KTtjLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYSE9PSJzdHJpbmciKXtiPWE7YT0iZngifWlmKGI9PT1CKXJldHVybiBjLnF1ZXVlKHRoaXNbMF0sYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWMucXVldWUodGhpcyxhLGIpO2E9PT0iZngiJiZkWzBdIT09ImlucHJvZ3Jlc3MiJiZjLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLmRlcXVldWUodGhpcyxhKX0pfSxkZWxheTpmdW5jdGlvbihhLGIpe2E9Yy5meD9jLmZ4LnNwZWVkc1thXXx8YTphO2I9Ynx8ImZ4IjtyZXR1cm4gdGhpcy5xdWV1ZShiLGZ1bmN0aW9uKCl7dmFyIGQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKGQsYil9LGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9fSk7dmFyIHNhPS9bXG5cdF0vZyxoYT0vXHMrLyxTYT0vXHIvZyxUYT0vXig/OmhyZWZ8c3JjfHN0eWxlKSQvLFVhPS9eKD86YnV0dG9ufGlucHV0KSQvaSxWYT0vXig/OmJ1dHRvbnxpbnB1dHxvYmplY3R8c2VsZWN0fHRleHRhcmVhKSQvaSxXYT0vXmEoPzpyZWEpPyQvaSx0YT0vXig/OnJhZGlvfGNoZWNrYm94KSQvaTtjLnByb3BzPXsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIixyZWFkb25seToicmVhZE9ubHkiLG1heGxlbmd0aDoibWF4TGVuZ3RoIixjZWxsc3BhY2luZzoiY2VsbFNwYWNpbmciLHJvd3NwYW46InJvd1NwYW4iLGNvbHNwYW46ImNvbFNwYW4iLHRhYmluZGV4OiJ0YWJJbmRleCIsdXNlbWFwOiJ1c2VNYXAiLGZyYW1lYm9yZGVyOiJmcmFtZUJvcmRlciJ9O2MuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuYWNjZXNzKHRoaXMsYSxiLHRydWUsYy5hdHRyKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5hdHRyKHRoaXMsYSwiIik7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMucmVtb3ZlQXR0cmlidXRlKGEpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHgpe3ZhciByPWModGhpcyk7ci5hZGRDbGFzcyhhLmNhbGwodGhpcyx4LHIuYXR0cigiY2xhc3MiKSkpfSk7aWYoYSYmdHlwZW9mIGE9PT0ic3RyaW5nIilmb3IodmFyIGI9KGF8fCIiKS5zcGxpdChoYSksZD0wLGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpc1tkXTtpZihmLm5vZGVUeXBlPT09MSlpZihmLmNsYXNzTmFtZSl7Zm9yKHZhciBoPSIgIitmLmNsYXNzTmFtZSsiICIsbD1mLmNsYXNzTmFtZSxrPTAsbz1iLmxlbmd0aDtrPG87aysrKWlmKGguaW5kZXhPZigiICIrYltrXSsiICIpPDApbCs9IiAiK2Jba107Zi5jbGFzc05hbWU9Yy50cmltKGwpfWVsc2UgZi5jbGFzc05hbWU9YX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obyl7dmFyIHg9Yyh0aGlzKTt4LnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLG8seC5hdHRyKCJjbGFzcyIpKSl9KTtpZihhJiZ0eXBlb2YgYT09PSJzdHJpbmcifHxhPT09Qilmb3IodmFyIGI9KGF8fCIiKS5zcGxpdChoYSksZD0wLGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpc1tkXTtpZihmLm5vZGVUeXBlPT09MSYmZi5jbGFzc05hbWUpaWYoYSl7Zm9yKHZhciBoPSgiICIrZi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHNhLCIgIiksbD0wLGs9Yi5sZW5ndGg7bDxrO2wrKyloPWgucmVwbGFjZSgiICIrYltsXSsiICIsIiAiKTtmLmNsYXNzTmFtZT1jLnRyaW0oaCl9ZWxzZSBmLmNsYXNzTmFtZT0iIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgZD10eXBlb2YgYSxlPXR5cGVvZiBiPT09ImJvb2xlYW4iO2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGYpe3ZhciBoPWModGhpcyk7aC50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxmLGguYXR0cigiY2xhc3MiKSxiKSxiKX0pO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihkPT09InN0cmluZyIpZm9yKHZhciBmLGg9MCxsPWModGhpcyksaz1iLG89YS5zcGxpdChoYSk7Zj1vW2grK107KXtrPWU/azohbC5oYXNDbGFzcyhmKTtsW2s/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXShmKX1lbHNlIGlmKGQ9PT0idW5kZWZpbmVkInx8ZD09PSJib29sZWFuIil7dGhpcy5jbGFzc05hbWUmJmMuZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSk7dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT1mYWxzZT8iIjpjLmRhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIn19KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7YT0iICIrYSsiICI7Zm9yKHZhciBiPTAsZD10aGlzLmxlbmd0aDtiPGQ7YisrKWlmKCgiICIrdGhpc1tiXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHNhLCIgIikuaW5kZXhPZihhKT4tMSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9LHZhbDpmdW5jdGlvbihhKXtpZighYXJndW1lbnRzLmxlbmd0aCl7dmFyIGI9dGhpc1swXTtpZihiKXtpZihjLm5vZGVOYW1lKGIsIm9wdGlvbiIpKXt2YXIgZD1iLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIWR8fGQuc3BlY2lmaWVkP2IudmFsdWU6Yi50ZXh0fWlmKGMubm9kZU5hbWUoYiwic2VsZWN0Iikpe3ZhciBlPWIuc2VsZWN0ZWRJbmRleDtkPVtdO3ZhciBmPWIub3B0aW9ucztiPWIudHlwZT09PSJzZWxlY3Qtb25lIjtpZihlPDApcmV0dXJuIG51bGw7dmFyIGg9Yj9lOjA7Zm9yKGU9Yj9lKzE6Zi5sZW5ndGg7aDxlO2grKyl7dmFyIGw9ZltoXTtpZihsLnNlbGVjdGVkJiYoYy5zdXBwb3J0Lm9wdERpc2FibGVkPyFsLmRpc2FibGVkOmwuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpPT09bnVsbCkmJighbC5wYXJlbnROb2RlLmRpc2FibGVkfHwhYy5ub2RlTmFtZShsLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXthPWMobCkudmFsKCk7aWYoYilyZXR1cm4gYTtkLnB1c2goYSl9fXJldHVybiBkfWlmKHRhLnRlc3QoYi50eXBlKSYmIWMuc3VwcG9ydC5jaGVja09uKXJldHVybiBiLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PW51bGw/Im9uIjpiLnZhbHVlO3JldHVybihiLnZhbHVlfHwiIikucmVwbGFjZShTYSwiIil9cmV0dXJuIEJ9dmFyIGs9Yy5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obyl7dmFyIHg9Yyh0aGlzKSxyPWE7aWYodGhpcy5ub2RlVHlwZT09PTEpe2lmKGspcj1hLmNhbGwodGhpcyxvLHgudmFsKCkpO2lmKHI9PW51bGwpcj0iIjtlbHNlIGlmKHR5cGVvZiByPT09Im51bWJlciIpcis9IiI7ZWxzZSBpZihjLmlzQXJyYXkocikpcj1jLm1hcChyLGZ1bmN0aW9uKEMpe3JldHVybiBDPT1udWxsPyIiOkMrIiJ9KTtpZihjLmlzQXJyYXkocikmJnRhLnRlc3QodGhpcy50eXBlKSl0aGlzLmNoZWNrZWQ9Yy5pbkFycmF5KHgudmFsKCkscik+PTA7ZWxzZSBpZihjLm5vZGVOYW1lKHRoaXMsInNlbGVjdCIpKXt2YXIgQT1jLm1ha2VBcnJheShyKTtjKCJvcHRpb24iLHRoaXMpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkPWMuaW5BcnJheShjKHRoaXMpLnZhbCgpLEEpPj0wfSk7aWYoIUEubGVuZ3RoKXRoaXMuc2VsZWN0ZWRJbmRleD0tMX1lbHNlIHRoaXMudmFsdWU9cn19KX19KTtjLmV4dGVuZCh7YXR0ckZuOnt2YWw6dHJ1ZSxjc3M6dHJ1ZSxodG1sOnRydWUsdGV4dDp0cnVlLGRhdGE6dHJ1ZSx3aWR0aDp0cnVlLGhlaWdodDp0cnVlLG9mZnNldDp0cnVlfSxhdHRyOmZ1bmN0aW9uKGEsYixkLGUpe2lmKCFhfHxhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpcmV0dXJuIEI7aWYoZSYmYiBpbiBjLmF0dHJGbilyZXR1cm4gYyhhKVtiXShkKTtlPWEubm9kZVR5cGUhPT0xfHwhYy5pc1hNTERvYyhhKTt2YXIgZj1kIT09QjtiPWUmJmMucHJvcHNbYl18fGI7dmFyIGg9VGEudGVzdChiKTtpZigoYiBpbiBhfHxhW2JdIT09QikmJmUmJiFoKXtpZihmKXtiPT09InR5cGUiJiZVYS50ZXN0KGEubm9kZU5hbWUpJiZhLnBhcmVudE5vZGUmJmMuZXJyb3IoInR5cGUgcHJvcGVydHkgY2FuJ3QgYmUgY2hhbmdlZCIpO2lmKGQ9PT1udWxsKWEubm9kZVR5cGU9PT0xJiZhLnJlbW92ZUF0dHJpYnV0ZShiKTtlbHNlIGFbYl09ZH1pZihjLm5vZGVOYW1lKGEsImZvcm0iKSYmYS5nZXRBdHRyaWJ1dGVOb2RlKGIpKXJldHVybiBhLmdldEF0dHJpYnV0ZU5vZGUoYikubm9kZVZhbHVlO2lmKGI9PT0idGFiSW5kZXgiKXJldHVybihiPWEuZ2V0QXR0cmlidXRlTm9kZSgidGFiSW5kZXgiKSkmJmIuc3BlY2lmaWVkP2IudmFsdWU6VmEudGVzdChhLm5vZGVOYW1lKXx8V2EudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6QjtyZXR1cm4gYVtiXX1pZighYy5zdXBwb3J0LnN0eWxlJiZlJiZiPT09InN0eWxlIil7aWYoZilhLnN0eWxlLmNzc1RleHQ9IiIrZDtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fWYmJmEuc2V0QXR0cmlidXRlKGIsIiIrZCk7aWYoIWEuYXR0cmlidXRlc1tiXSYmYS5oYXNBdHRyaWJ1dGUmJiFhLmhhc0F0dHJpYnV0ZShiKSlyZXR1cm4gQjthPSFjLnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQmJmUmJmg/YS5nZXRBdHRyaWJ1dGUoYiwyKTphLmdldEF0dHJpYnV0ZShiKTtyZXR1cm4gYT09PW51bGw/QjphfX0pO3ZhciBYPS9cLiguKikkLyxpYT0vXig/OnRleHRhcmVhfGlucHV0fHNlbGVjdCkkL2ksTGE9L1wuL2csTWE9LyAvZyxYYT0vW15cd1xzLnxgXS9nLFlhPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoWGEsIlxcJCYiKX0sdWE9e2ZvY3VzaW46MCxmb2N1c291dDowfTtjLmV2ZW50PXthZGQ6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoIShhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpKXtpZihjLmlzV2luZG93KGEpJiZhIT09RSYmIWEuZnJhbWVFbGVtZW50KWE9RTtpZihkPT09ZmFsc2UpZD1VO2Vsc2UgaWYoIWQpcmV0dXJuO3ZhciBmLGg7aWYoZC5oYW5kbGVyKXtmPWQ7ZD1mLmhhbmRsZXJ9aWYoIWQuZ3VpZClkLmd1aWQ9Yy5ndWlkKys7aWYoaD1jLmRhdGEoYSkpe3ZhciBsPWEubm9kZVR5cGU/ImV2ZW50cyI6Il9fZXZlbnRzX18iLGs9aFtsXSxvPWguaGFuZGxlO2lmKHR5cGVvZiBrPT09ImZ1bmN0aW9uIil7bz1rLmhhbmRsZTtrPWsuZXZlbnRzfWVsc2UgaWYoIWspe2Eubm9kZVR5cGV8fChoW2xdPWg9ZnVuY3Rpb24oKXt9KTtoLmV2ZW50cz1rPXt9fWlmKCFvKWguaGFuZGxlPW89ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIGMhPT0idW5kZWZpbmVkIiYmIWMuZXZlbnQudHJpZ2dlcmVkP2MuZXZlbnQuaGFuZGxlLmFwcGx5KG8uZWxlbSxhcmd1bWVudHMpOkJ9O28uZWxlbT1hO2I9Yi5zcGxpdCgiICIpO2Zvcih2YXIgeD0wLHI7bD1iW3grK107KXtoPWY/Yy5leHRlbmQoe30sZik6e2hhbmRsZXI6ZCxkYXRhOmV9O2lmKGwuaW5kZXhPZigiLiIpPi0xKXtyPWwuc3BsaXQoIi4iKTtsPXIuc2hpZnQoKTtoLm5hbWVzcGFjZT1yLnNsaWNlKDApLnNvcnQoKS5qb2luKCIuIil9ZWxzZXtyPVtdO2gubmFtZXNwYWNlPSIifWgudHlwZT1sO2lmKCFoLmd1aWQpaC5ndWlkPWQuZ3VpZDt2YXIgQT1rW2xdLEM9Yy5ldmVudC5zcGVjaWFsW2xdfHx7fTtpZighQSl7QT1rW2xdPVtdO2lmKCFDLnNldHVwfHxDLnNldHVwLmNhbGwoYSxlLHIsbyk9PT1mYWxzZSlpZihhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGwsbyxmYWxzZSk7ZWxzZSBhLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrbCxvKX1pZihDLmFkZCl7Qy5hZGQuY2FsbChhLGgpO2lmKCFoLmhhbmRsZXIuZ3VpZCloLmhhbmRsZXIuZ3VpZD1kLmd1aWR9QS5wdXNoKGgpO2MuZXZlbnQuZ2xvYmFsW2xdPXRydWV9YT1udWxsfX19LGdsb2JhbDp7fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoIShhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpKXtpZihkPT09ZmFsc2UpZD1VO3ZhciBmLGgsbD0wLGssbyx4LHIsQSxDLEo9YS5ub2RlVHlwZT8iZXZlbnRzIjoiX19ldmVudHNfXyIsdz1jLmRhdGEoYSksST13JiZ3W0pdO2lmKHcmJkkpe2lmKHR5cGVvZiBJPT09ImZ1bmN0aW9uIil7dz1JO0k9SS5ldmVudHN9aWYoYiYmYi50eXBlKXtkPWIuaGFuZGxlcjtiPWIudHlwZX1pZighYnx8dHlwZW9mIGI9PT0ic3RyaW5nIiYmYi5jaGFyQXQoMCk9PT0iLiIpe2I9Ynx8IiI7Zm9yKGYgaW4gSSljLmV2ZW50LnJlbW92ZShhLGYrYil9ZWxzZXtmb3IoYj1iLnNwbGl0KCIgIik7Zj1iW2wrK107KXtyPWY7az1mLmluZGV4T2YoIi4iKTwwO289W107aWYoIWspe289Zi5zcGxpdCgiLiIpO2Y9by5zaGlmdCgpO3g9UmVnRXhwKCIoXnxcXC4pIisKYy5tYXAoby5zbGljZSgwKS5zb3J0KCksWWEpLmpvaW4oIlxcLig/Oi4qXFwuKT8iKSsiKFxcLnwkKSIpfWlmKEE9SVtmXSlpZihkKXtyPWMuZXZlbnQuc3BlY2lhbFtmXXx8e307Zm9yKGg9ZXx8MDtoPEEubGVuZ3RoO2grKyl7Qz1BW2hdO2lmKGQuZ3VpZD09PUMuZ3VpZCl7aWYoa3x8eC50ZXN0KEMubmFtZXNwYWNlKSl7ZT09bnVsbCYmQS5zcGxpY2UoaC0tLDEpO3IucmVtb3ZlJiZyLnJlbW92ZS5jYWxsKGEsQyl9aWYoZSE9bnVsbClicmVha319aWYoQS5sZW5ndGg9PT0wfHxlIT1udWxsJiZBLmxlbmd0aD09PTEpe2lmKCFyLnRlYXJkb3dufHxyLnRlYXJkb3duLmNhbGwoYSxvKT09PWZhbHNlKWMucmVtb3ZlRXZlbnQoYSxmLHcuaGFuZGxlKTtkZWxldGUgSVtmXX19ZWxzZSBmb3IoaD0wO2g8QS5sZW5ndGg7aCsrKXtDPUFbaF07aWYoa3x8eC50ZXN0KEMubmFtZXNwYWNlKSl7Yy5ldmVudC5yZW1vdmUoYSxyLEMuaGFuZGxlcixoKTtBLnNwbGljZShoLS0sMSl9fX1pZihjLmlzRW1wdHlPYmplY3QoSSkpe2lmKGI9dy5oYW5kbGUpYi5lbGVtPW51bGw7ZGVsZXRlIHcuZXZlbnRzO2RlbGV0ZSB3LmhhbmRsZTtpZih0eXBlb2Ygdz09PSJmdW5jdGlvbiIpYy5yZW1vdmVEYXRhKGEsSik7ZWxzZSBjLmlzRW1wdHlPYmplY3QodykmJmMucmVtb3ZlRGF0YShhKX19fX19LHRyaWdnZXI6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9YS50eXBlfHxhO2lmKCFlKXthPXR5cGVvZiBhPT09Im9iamVjdCI/YVtjLmV4cGFuZG9dP2E6Yy5leHRlbmQoYy5FdmVudChmKSxhKTpjLkV2ZW50KGYpO2lmKGYuaW5kZXhPZigiISIpPj0wKXthLnR5cGU9Zj1mLnNsaWNlKDAsLTEpO2EuZXhjbHVzaXZlPXRydWV9aWYoIWQpe2Euc3RvcFByb3BhZ2F0aW9uKCk7Yy5ldmVudC5nbG9iYWxbZl0mJmMuZWFjaChjLmNhY2hlLGZ1bmN0aW9uKCl7dGhpcy5ldmVudHMmJnRoaXMuZXZlbnRzW2ZdJiZjLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMuaGFuZGxlLmVsZW0pfSl9aWYoIWR8fGQubm9kZVR5cGU9PT0zfHxkLm5vZGVUeXBlPT09OClyZXR1cm4gQjthLnJlc3VsdD1CO2EudGFyZ2V0PWQ7Yj1jLm1ha2VBcnJheShiKTtiLnVuc2hpZnQoYSl9YS5jdXJyZW50VGFyZ2V0PWQ7KGU9ZC5ub2RlVHlwZT9jLmRhdGEoZCwiaGFuZGxlIik6KGMuZGF0YShkLCJfX2V2ZW50c19fIil8fHt9KS5oYW5kbGUpJiZlLmFwcGx5KGQsYik7ZT1kLnBhcmVudE5vZGV8fGQub3duZXJEb2N1bWVudDt0cnl7aWYoIShkJiZkLm5vZGVOYW1lJiZjLm5vRGF0YVtkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSlpZihkWyJvbiIrZl0mJmRbIm9uIitmXS5hcHBseShkLGIpPT09ZmFsc2Upe2EucmVzdWx0PWZhbHNlO2EucHJldmVudERlZmF1bHQoKX19Y2F0Y2goaCl7fWlmKCFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmUpYy5ldmVudC50cmlnZ2VyKGEsYixlLHRydWUpO2Vsc2UgaWYoIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBsO2U9YS50YXJnZXQ7dmFyIGs9Zi5yZXBsYWNlKFgsIiIpLG89Yy5ub2RlTmFtZShlLCJhIikmJms9PT0iY2xpY2siLHg9Yy5ldmVudC5zcGVjaWFsW2tdfHx7fTtpZigoIXguX2RlZmF1bHR8fHguX2RlZmF1bHQuY2FsbChkLGEpPT09ZmFsc2UpJiYhbyYmIShlJiZlLm5vZGVOYW1lJiZjLm5vRGF0YVtlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7dHJ5e2lmKGVba10pe2lmKGw9ZVsib24iK2tdKWVbIm9uIitrXT1udWxsO2MuZXZlbnQudHJpZ2dlcmVkPXRydWU7ZVtrXSgpfX1jYXRjaChyKXt9aWYobCllWyJvbiIra109bDtjLmV2ZW50LnRyaWdnZXJlZD1mYWxzZX19fSxoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGIsZCxlLGY7ZD1bXTt2YXIgaD1jLm1ha2VBcnJheShhcmd1bWVudHMpO2E9aFswXT1jLmV2ZW50LmZpeChhfHxFLmV2ZW50KTthLmN1cnJlbnRUYXJnZXQ9dGhpcztiPWEudHlwZS5pbmRleE9mKCIuIik8MCYmIWEuZXhjbHVzaXZlO2lmKCFiKXtlPWEudHlwZS5zcGxpdCgiLiIpO2EudHlwZT1lLnNoaWZ0KCk7ZD1lLnNsaWNlKDApLnNvcnQoKTtlPVJlZ0V4cCgiKF58XFwuKSIrCmQuam9pbigiXFwuKD86LipcXC4pPyIpKyIoXFwufCQpIil9YS5uYW1lc3BhY2U9YS5uYW1lc3BhY2V8fGQuam9pbigiLiIpO2Y9Yy5kYXRhKHRoaXMsdGhpcy5ub2RlVHlwZT8iZXZlbnRzIjoiX19ldmVudHNfXyIpO2lmKHR5cGVvZiBmPT09ImZ1bmN0aW9uIilmPWYuZXZlbnRzO2Q9KGZ8fHt9KVthLnR5cGVdO2lmKGYmJmQpe2Q9ZC5zbGljZSgwKTtmPTA7Zm9yKHZhciBsPWQubGVuZ3RoO2Y8bDtmKyspe3ZhciBrPWRbZl07aWYoYnx8ZS50ZXN0KGsubmFtZXNwYWNlKSl7YS5oYW5kbGVyPWsuaGFuZGxlcjthLmRhdGE9ay5kYXRhO2EuaGFuZGxlT2JqPWs7az1rLmhhbmRsZXIuYXBwbHkodGhpcyxoKTtpZihrIT09Qil7YS5yZXN1bHQ9aztpZihrPT09ZmFsc2Upe2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpfX1pZihhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpYnJlYWt9fX1yZXR1cm4gYS5yZXN1bHR9LHByb3BzOiJhbHRLZXkgYXR0ckNoYW5nZSBhdHRyTmFtZSBidWJibGVzIGJ1dHRvbiBjYW5jZWxhYmxlIGNoYXJDb2RlIGNsaWVudFggY2xpZW50WSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZGF0YSBkZXRhaWwgZXZlbnRQaGFzZSBmcm9tRWxlbWVudCBoYW5kbGVyIGtleUNvZGUgbGF5ZXJYIGxheWVyWSBtZXRhS2V5IG5ld1ZhbHVlIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBwcmV2VmFsdWUgcmVsYXRlZE5vZGUgcmVsYXRlZFRhcmdldCBzY3JlZW5YIHNjcmVlblkgc2hpZnRLZXkgc3JjRWxlbWVudCB0YXJnZXQgdG9FbGVtZW50IHZpZXcgd2hlZWxEZWx0YSB3aGljaCIuc3BsaXQoIiAiKSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtjLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiPWE7YT1jLkV2ZW50KGIpO2Zvcih2YXIgZD10aGlzLnByb3BzLmxlbmd0aCxlO2Q7KXtlPXRoaXMucHJvcHNbLS1kXTthW2VdPWJbZV19aWYoIWEudGFyZ2V0KWEudGFyZ2V0PWEuc3JjRWxlbWVudHx8dDtpZihhLnRhcmdldC5ub2RlVHlwZT09PTMpYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZTtpZighYS5yZWxhdGVkVGFyZ2V0JiZhLmZyb21FbGVtZW50KWEucmVsYXRlZFRhcmdldD1hLmZyb21FbGVtZW50PT09YS50YXJnZXQ/YS50b0VsZW1lbnQ6YS5mcm9tRWxlbWVudDtpZihhLnBhZ2VYPT1udWxsJiZhLmNsaWVudFghPW51bGwpe2I9dC5kb2N1bWVudEVsZW1lbnQ7ZD10LmJvZHk7YS5wYWdlWD1hLmNsaWVudFgrKGImJmIuc2Nyb2xsTGVmdHx8ZCYmZC5zY3JvbGxMZWZ0fHwwKS0oYiYmYi5jbGllbnRMZWZ0fHxkJiZkLmNsaWVudExlZnR8fDApO2EucGFnZVk9YS5jbGllbnRZKyhiJiZiLnNjcm9sbFRvcHx8ZCYmZC5zY3JvbGxUb3B8fDApLShiJiZiLmNsaWVudFRvcHx8ZCYmZC5jbGllbnRUb3B8fDApfWlmKGEud2hpY2g9PW51bGwmJihhLmNoYXJDb2RlIT1udWxsfHxhLmtleUNvZGUhPW51bGwpKWEud2hpY2g9YS5jaGFyQ29kZSE9bnVsbD9hLmNoYXJDb2RlOmEua2V5Q29kZTtpZighYS5tZXRhS2V5JiZhLmN0cmxLZXkpYS5tZXRhS2V5PWEuY3RybEtleTtpZighYS53aGljaCYmYS5idXR0b24hPT1CKWEud2hpY2g9YS5idXR0b24mMT8xOmEuYnV0dG9uJjI/MzphLmJ1dHRvbiY0PzI6MDtyZXR1cm4gYX0sZ3VpZDoxRTgscHJveHk6Yy5wcm94eSxzcGVjaWFsOntyZWFkeTp7c2V0dXA6Yy5iaW5kUmVhZHksdGVhcmRvd246Yy5ub29wfSxsaXZlOnthZGQ6ZnVuY3Rpb24oYSl7Yy5ldmVudC5hZGQodGhpcyxZKGEub3JpZ1R5cGUsYS5zZWxlY3RvciksYy5leHRlbmQoe30sYSx7aGFuZGxlcjpLYSxndWlkOmEuaGFuZGxlci5ndWlkfSkpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7Yy5ldmVudC5yZW1vdmUodGhpcyxZKGEub3JpZ1R5cGUsYS5zZWxlY3RvciksYSl9fSxiZWZvcmV1bmxvYWQ6e3NldHVwOmZ1bmN0aW9uKGEsYixkKXtpZihjLmlzV2luZG93KHRoaXMpKXRoaXMub25iZWZvcmV1bmxvYWQ9ZH0sdGVhcmRvd246ZnVuY3Rpb24oYSxiKXtpZih0aGlzLm9uYmVmb3JldW5sb2FkPT09Yil0aGlzLm9uYmVmb3JldW5sb2FkPW51bGx9fX19O2MucmVtb3ZlRXZlbnQ9dC5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGEsYixkKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGQsZmFsc2UpfTpmdW5jdGlvbihhLGIsZCl7YS5kZXRhY2hFdmVudCYmYS5kZXRhY2hFdmVudCgib24iK2IsZCl9O2MuRXZlbnQ9ZnVuY3Rpb24oYSl7aWYoIXRoaXMucHJldmVudERlZmF1bHQpcmV0dXJuIG5ldyBjLkV2ZW50KGEpO2lmKGEmJmEudHlwZSl7dGhpcy5vcmlnaW5hbEV2ZW50PWE7dGhpcy50eXBlPWEudHlwZX1lbHNlIHRoaXMudHlwZT1hO3RoaXMudGltZVN0YW1wPWMubm93KCk7dGhpc1tjLmV4cGFuZG9dPXRydWV9O2MuRXZlbnQucHJvdG90eXBlPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWNhO3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDtpZihhKWlmKGEucHJldmVudERlZmF1bHQpYS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgYS5yZXR1cm5WYWx1ZT1mYWxzZX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1jYTt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7aWYoYSl7YS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCk7YS5jYW5jZWxCdWJibGU9dHJ1ZX19LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9Y2E7dGhpcy5zdG9wUHJvcGFnYXRpb24oKX0saXNEZWZhdWx0UHJldmVudGVkOlUsaXNQcm9wYWdhdGlvblN0b3BwZWQ6VSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpVfTt2YXIgdmE9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZWxhdGVkVGFyZ2V0O3RyeXtmb3IoO2ImJmIhPT10aGlzOyliPWIucGFyZW50Tm9kZTtpZihiIT09dGhpcyl7YS50eXBlPWEuZGF0YTtjLmV2ZW50LmhhbmRsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWNhdGNoKGQpe319LHdhPWZ1bmN0aW9uKGEpe2EudHlwZT1hLmRhdGE7Yy5ldmVudC5oYW5kbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtjLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihhLGIpe2MuZXZlbnQuc3BlY2lhbFthXT17c2V0dXA6ZnVuY3Rpb24oZCl7Yy5ldmVudC5hZGQodGhpcyxiLGQmJmQuc2VsZWN0b3I/d2E6dmEsYSl9LHRlYXJkb3duOmZ1bmN0aW9uKGQpe2MuZXZlbnQucmVtb3ZlKHRoaXMsYixkJiZkLnNlbGVjdG9yP3dhOnZhKX19fSk7aWYoIWMuc3VwcG9ydC5zdWJtaXRCdWJibGVzKWMuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09ImZvcm0iKXtjLmV2ZW50LmFkZCh0aGlzLCJjbGljay5zcGVjaWFsU3VibWl0IixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZigoZD09PSJzdWJtaXQifHxkPT09ImltYWdlIikmJmMoYikuY2xvc2VzdCgiZm9ybSIpLmxlbmd0aCl7YS5saXZlRmlyZWQ9QjtyZXR1cm4gbGEoInN1Ym1pdCIsdGhpcyxhcmd1bWVudHMpfX0pO2MuZXZlbnQuYWRkKHRoaXMsImtleXByZXNzLnNwZWNpYWxTdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGQ9Yi50eXBlO2lmKChkPT09InRleHQifHxkPT09InBhc3N3b3JkIikmJmMoYikuY2xvc2VzdCgiZm9ybSIpLmxlbmd0aCYmYS5rZXlDb2RlPT09MTMpe2EubGl2ZUZpcmVkPUI7cmV0dXJuIGxhKCJzdWJtaXQiLHRoaXMsYXJndW1lbnRzKX19KX1lbHNlIHJldHVybiBmYWxzZX0sdGVhcmRvd246ZnVuY3Rpb24oKXtjLmV2ZW50LnJlbW92ZSh0aGlzLCIuc3BlY2lhbFN1Ym1pdCIpfX07aWYoIWMuc3VwcG9ydC5jaGFuZ2VCdWJibGVzKXt2YXIgVix4YT1mdW5jdGlvbihhKXt2YXIgYj1hLnR5cGUsZD1hLnZhbHVlO2lmKGI9PT0icmFkaW8ifHxiPT09ImNoZWNrYm94IilkPWEuY2hlY2tlZDtlbHNlIGlmKGI9PT0ic2VsZWN0LW11bHRpcGxlIilkPWEuc2VsZWN0ZWRJbmRleD4tMT9jLm1hcChhLm9wdGlvbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VsZWN0ZWR9KS5qb2luKCItIik6IiI7ZWxzZSBpZihhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0ic2VsZWN0IilkPWEuc2VsZWN0ZWRJbmRleDtyZXR1cm4gZH0sWj1mdW5jdGlvbihhLGIpe3ZhciBkPWEudGFyZ2V0LGUsZjtpZighKCFpYS50ZXN0KGQubm9kZU5hbWUpfHxkLnJlYWRPbmx5KSl7ZT1jLmRhdGEoZCwiX2NoYW5nZV9kYXRhIik7Zj14YShkKTtpZihhLnR5cGUhPT0iZm9jdXNvdXQifHxkLnR5cGUhPT0icmFkaW8iKWMuZGF0YShkLCJfY2hhbmdlX2RhdGEiLGYpO2lmKCEoZT09PUJ8fGY9PT1lKSlpZihlIT1udWxsfHxmKXthLnR5cGU9ImNoYW5nZSI7YS5saXZlRmlyZWQ9QjtyZXR1cm4gYy5ldmVudC50cmlnZ2VyKGEsYixkKX19fTtjLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtmaWx0ZXJzOntmb2N1c291dDpaLGJlZm9yZWRlYWN0aXZhdGU6WixjbGljazpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZihkPT09InJhZGlvInx8ZD09PSJjaGVja2JveCJ8fGIubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJzZWxlY3QiKXJldHVybiBaLmNhbGwodGhpcyxhKX0sa2V5ZG93bjpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZihhLmtleUNvZGU9PT0xMyYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09InRleHRhcmVhInx8YS5rZXlDb2RlPT09MzImJihkPT09ImNoZWNrYm94Inx8ZD09PSJyYWRpbyIpfHxkPT09InNlbGVjdC1tdWx0aXBsZSIpcmV0dXJuIFouY2FsbCh0aGlzLGEpfSxiZWZvcmVhY3RpdmF0ZTpmdW5jdGlvbihhKXthPWEudGFyZ2V0O2MuZGF0YShhLCJfY2hhbmdlX2RhdGEiLHhhKGEpKX19LHNldHVwOmZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT09ImZpbGUiKXJldHVybiBmYWxzZTtmb3IodmFyIGEgaW4gViljLmV2ZW50LmFkZCh0aGlzLGErIi5zcGVjaWFsQ2hhbmdlIixWW2FdKTtyZXR1cm4gaWEudGVzdCh0aGlzLm5vZGVOYW1lKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtjLmV2ZW50LnJlbW92ZSh0aGlzLCIuc3BlY2lhbENoYW5nZSIpO3JldHVybiBpYS50ZXN0KHRoaXMubm9kZU5hbWUpfX07Vj1jLmV2ZW50LnNwZWNpYWwuY2hhbmdlLmZpbHRlcnM7Vi5mb2N1cz1WLmJlZm9yZWFjdGl2YXRlfXQuYWRkRXZlbnRMaXN0ZW5lciYmYy5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoZSl7ZT1jLmV2ZW50LmZpeChlKTtlLnR5cGU9YjtyZXR1cm4gYy5ldmVudC50cmlnZ2VyKGUsbnVsbCxlLnRhcmdldCl9Yy5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3VhW2JdKys9PT0wJiZ0LmFkZEV2ZW50TGlzdGVuZXIoYSxkLHRydWUpfSx0ZWFyZG93bjpmdW5jdGlvbigpey0tdWFbYl09PT0wJiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxkLHRydWUpfX19KTtjLmVhY2goWyJiaW5kIiwib25lIl0sZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZSxmKXtpZih0eXBlb2YgZD09PSJvYmplY3QiKXtmb3IodmFyIGggaW4gZCl0aGlzW2JdKGgsZSxkW2hdLGYpO3JldHVybiB0aGlzfWlmKGMuaXNGdW5jdGlvbihlKXx8ZT09PWZhbHNlKXtmPWU7ZT1CfXZhciBsPWI9PT0ib25lIj9jLnByb3h5KGYsZnVuY3Rpb24obyl7Yyh0aGlzKS51bmJpbmQobyxsKTtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTpmO2lmKGQ9PT0idW5sb2FkIiYmYiE9PSJvbmUiKXRoaXMub25lKGQsZSxmKTtlbHNle2g9MDtmb3IodmFyIGs9dGhpcy5sZW5ndGg7aDxrO2grKyljLmV2ZW50LmFkZCh0aGlzW2hdLGQsbCxlKX1yZXR1cm4gdGhpc319KTtjLmZuLmV4dGVuZCh7dW5iaW5kOmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGE9PT0ib2JqZWN0IiYmIWEucHJldmVudERlZmF1bHQpZm9yKHZhciBkIGluIGEpdGhpcy51bmJpbmQoZCxhW2RdKTtlbHNle2Q9MDtmb3IodmFyIGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyljLmV2ZW50LnJlbW92ZSh0aGlzW2RdLGEsYil9cmV0dXJuIHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixkLGUpe3JldHVybiB0aGlzLmxpdmUoYixkLGUsYSl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPT09MD90aGlzLnVuYmluZCgibGl2ZSIpOnRoaXMuZGllKGIsbnVsbCxkLGEpfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2MuZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXtpZih0aGlzWzBdKXt2YXIgZD1jLkV2ZW50KGEpO2QucHJldmVudERlZmF1bHQoKTtkLnN0b3BQcm9wYWdhdGlvbigpO2MuZXZlbnQudHJpZ2dlcihkLGIsdGhpc1swXSk7cmV0dXJuIGQucmVzdWx0fX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hcmd1bWVudHMsZD0xO2Q8Yi5sZW5ndGg7KWMucHJveHkoYSxiW2QrK10pO3JldHVybiB0aGlzLmNsaWNrKGMucHJveHkoYSxmdW5jdGlvbihlKXt2YXIgZj0oYy5kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2EuZ3VpZCl8fDApJWQ7Yy5kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2EuZ3VpZCxmKzEpO2UucHJldmVudERlZmF1bHQoKTtyZXR1cm4gYltmXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fGZhbHNlfSkpfSxob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KTt2YXIgeWE9e2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCIsbW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9O2MuZWFjaChbImxpdmUiLCJkaWUiXSxmdW5jdGlvbihhLGIpe2MuZm5bYl09ZnVuY3Rpb24oZCxlLGYsaCl7dmFyIGwsaz0wLG8seCxyPWh8fHRoaXMuc2VsZWN0b3I7aD1oP3RoaXM6Yyh0aGlzLmNvbnRleHQpO2lmKHR5cGVvZiBkPT09Im9iamVjdCImJiFkLnByZXZlbnREZWZhdWx0KXtmb3IobCBpbiBkKWhbYl0obCxlLGRbbF0scik7cmV0dXJuIHRoaXN9aWYoYy5pc0Z1bmN0aW9uKGUpKXtmPWU7ZT1CfWZvcihkPShkfHwiIikuc3BsaXQoIiAiKTsobD1kW2srK10pIT1udWxsOyl7bz1YLmV4ZWMobCk7eD0iIjtpZihvKXt4PW9bMF07bD1sLnJlcGxhY2UoWCwiIil9aWYobD09PSJob3ZlciIpZC5wdXNoKCJtb3VzZWVudGVyIit4LCJtb3VzZWxlYXZlIit4KTtlbHNle289bDtpZihsPT09ImZvY3VzInx8bD09PSJibHVyIil7ZC5wdXNoKHlhW2xdK3gpO2wrPXh9ZWxzZSBsPSh5YVtsXXx8bCkreDtpZihiPT09ImxpdmUiKXt4PTA7Zm9yKHZhciBBPWgubGVuZ3RoO3g8QTt4KyspYy5ldmVudC5hZGQoaFt4XSwibGl2ZS4iK1kobCxyKSx7ZGF0YTplLHNlbGVjdG9yOnIsaGFuZGxlcjpmLG9yaWdUeXBlOmwsb3JpZ0hhbmRsZXI6ZixwcmVUeXBlOm99KX1lbHNlIGgudW5iaW5kKCJsaXZlLiIrWShsLHIpLGYpfX1yZXR1cm4gdGhpc319KTtjLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZSl7aWYoZT09bnVsbCl7ZT1kO2Q9bnVsbH1yZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMuYmluZChiLGQsZSk6dGhpcy50cmlnZ2VyKGIpfTtpZihjLmF0dHJGbiljLmF0dHJGbltiXT10cnVlfSk7RS5hdHRhY2hFdmVudCYmIUUuYWRkRXZlbnRMaXN0ZW5lciYmYyhFKS5iaW5kKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGMuY2FjaGUpaWYoYy5jYWNoZVthXS5oYW5kbGUpdHJ5e2MuZXZlbnQucmVtb3ZlKGMuY2FjaGVbYV0uaGFuZGxlLmVsZW0pfWNhdGNoKGIpe319KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGcsaSxuLG0scCxxKXtwPTA7Zm9yKHZhciB1PW0ubGVuZ3RoO3A8dTtwKyspe3ZhciB5PW1bcF07aWYoeSl7dmFyIEY9ZmFsc2U7Zm9yKHk9eVtnXTt5Oyl7aWYoeS5zaXpjYWNoZT09PW4pe0Y9bVt5LnNpenNldF07YnJlYWt9aWYoeS5ub2RlVHlwZT09PTEmJiFxKXt5LnNpemNhY2hlPW47eS5zaXpzZXQ9cH1pZih5Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1pKXtGPXk7YnJlYWt9eT15W2ddfW1bcF09Rn19fWZ1bmN0aW9uIGIoZyxpLG4sbSxwLHEpe3A9MDtmb3IodmFyIHU9bS5sZW5ndGg7cDx1O3ArKyl7dmFyIHk9bVtwXTtpZih5KXt2YXIgRj1mYWxzZTtmb3IoeT15W2ddO3k7KXtpZih5LnNpemNhY2hlPT09bil7Rj1tW3kuc2l6c2V0XTticmVha31pZih5Lm5vZGVUeXBlPT09MSl7aWYoIXEpe3kuc2l6Y2FjaGU9bjt5LnNpenNldD1wfWlmKHR5cGVvZiBpIT09InN0cmluZyIpe2lmKHk9PT1pKXtGPXRydWU7YnJlYWt9fWVsc2UgaWYoay5maWx0ZXIoaSxbeV0pLmxlbmd0aD4wKXtGPXk7YnJlYWt9fXk9eVtnXX1tW3BdPUZ9fX12YXIgZD0vKCg/OlwoKD86XChbXigpXStcKXxbXigpXSspK1wpfFxbKD86XFtbXlxbXF1dKlxdfFsnIl1bXiciXSpbJyJdfFteXFtcXSciXSspK1xdfFxcLnxbXiA+K34sKFxbXFxdKykrfFs+K35dKShccyosXHMqKT8oKD86LnxccnxcbikqKS9nLGU9MCxmPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsaD1mYWxzZSxsPXRydWU7WzAsMF0uc29ydChmdW5jdGlvbigpe2w9ZmFsc2U7cmV0dXJuIDB9KTt2YXIgaz1mdW5jdGlvbihnLGksbixtKXtuPW58fFtdO3ZhciBwPWk9aXx8dDtpZihpLm5vZGVUeXBlIT09MSYmaS5ub2RlVHlwZSE9PTkpcmV0dXJuW107aWYoIWd8fHR5cGVvZiBnIT09InN0cmluZyIpcmV0dXJuIG47dmFyIHEsdSx5LEYsTSxOPXRydWUsTz1rLmlzWE1MKGkpLEQ9W10sUj1nO2Rve2QuZXhlYygiIik7aWYocT1kLmV4ZWMoUikpe1I9cVszXTtELnB1c2gocVsxXSk7aWYocVsyXSl7Rj1xWzNdO2JyZWFrfX19d2hpbGUocSk7aWYoRC5sZW5ndGg+MSYmeC5leGVjKGcpKWlmKEQubGVuZ3RoPT09MiYmby5yZWxhdGl2ZVtEWzBdXSl1PUwoRFswXStEWzFdLGkpO2Vsc2UgZm9yKHU9by5yZWxhdGl2ZVtEWzBdXT9baV06ayhELnNoaWZ0KCksaSk7RC5sZW5ndGg7KXtnPUQuc2hpZnQoKTtpZihvLnJlbGF0aXZlW2ddKWcrPUQuc2hpZnQoKTt1PUwoZyx1KX1lbHNle2lmKCFtJiZELmxlbmd0aD4xJiZpLm5vZGVUeXBlPT09OSYmIU8mJm8ubWF0Y2guSUQudGVzdChEWzBdKSYmIW8ubWF0Y2guSUQudGVzdChEW0QubGVuZ3RoLTFdKSl7cT1rLmZpbmQoRC5zaGlmdCgpLGksTyk7aT1xLmV4cHI/ay5maWx0ZXIocS5leHByLHEuc2V0KVswXTpxLnNldFswXX1pZihpKXtxPW0/e2V4cHI6RC5wb3AoKSxzZXQ6QyhtKX06ay5maW5kKEQucG9wKCksRC5sZW5ndGg9PT0xJiYoRFswXT09PSJ+Inx8RFswXT09PSIrIikmJmkucGFyZW50Tm9kZT9pLnBhcmVudE5vZGU6aSxPKTt1PXEuZXhwcj9rLmZpbHRlcihxLmV4cHIscS5zZXQpOnEuc2V0O2lmKEQubGVuZ3RoPjApeT1DKHUpO2Vsc2UgTj1mYWxzZTtmb3IoO0QubGVuZ3RoOyl7cT1NPUQucG9wKCk7aWYoby5yZWxhdGl2ZVtNXSlxPUQucG9wKCk7ZWxzZSBNPSIiO2lmKHE9PW51bGwpcT1pO28ucmVsYXRpdmVbTV0oeSxxLE8pfX1lbHNlIHk9W119eXx8KHk9dSk7eXx8ay5lcnJvcihNfHxnKTtpZihmLmNhbGwoeSk9PT0iW29iamVjdCBBcnJheV0iKWlmKE4paWYoaSYmaS5ub2RlVHlwZT09PTEpZm9yKGc9MDt5W2ddIT1udWxsO2crKyl7aWYoeVtnXSYmKHlbZ109PT10cnVlfHx5W2ddLm5vZGVUeXBlPT09MSYmay5jb250YWlucyhpLHlbZ10pKSluLnB1c2godVtnXSl9ZWxzZSBmb3IoZz0wO3lbZ10hPW51bGw7ZysrKXlbZ10mJnlbZ10ubm9kZVR5cGU9PT0xJiZuLnB1c2godVtnXSk7ZWxzZSBuLnB1c2guYXBwbHkobix5KTtlbHNlIEMoeSxuKTtpZihGKXtrKEYscCxuLG0pO2sudW5pcXVlU29ydChuKX1yZXR1cm4gbn07ay51bmlxdWVTb3J0PWZ1bmN0aW9uKGcpe2lmKHcpe2g9bDtnLnNvcnQodyk7aWYoaClmb3IodmFyIGk9MTtpPGcubGVuZ3RoO2krKylnW2ldPT09Z1tpLTFdJiZnLnNwbGljZShpLS0sMSl9cmV0dXJuIGd9O2subWF0Y2hlcz1mdW5jdGlvbihnLGkpe3JldHVybiBrKGcsbnVsbCxudWxsLGkpfTtrLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihnLGkpe3JldHVybiBrKGksbnVsbCxudWxsLFtnXSkubGVuZ3RoPjB9O2suZmluZD1mdW5jdGlvbihnLGksbil7dmFyIG07aWYoIWcpcmV0dXJuW107Zm9yKHZhciBwPTAscT1vLm9yZGVyLmxlbmd0aDtwPHE7cCsrKXt2YXIgdSx5PW8ub3JkZXJbcF07aWYodT1vLmxlZnRNYXRjaFt5XS5leGVjKGcpKXt2YXIgRj11WzFdO3Uuc3BsaWNlKDEsMSk7aWYoRi5zdWJzdHIoRi5sZW5ndGgtMSkhPT0iXFwiKXt1WzFdPSh1WzFdfHwiIikucmVwbGFjZSgvXFwvZywiIik7bT1vLmZpbmRbeV0odSxpLG4pO2lmKG0hPW51bGwpe2c9Zy5yZXBsYWNlKG8ubWF0Y2hbeV0sIiIpO2JyZWFrfX19fW18fChtPWkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSk7cmV0dXJue3NldDptLGV4cHI6Z319O2suZmlsdGVyPWZ1bmN0aW9uKGcsaSxuLG0pe2Zvcih2YXIgcCxxLHU9Zyx5PVtdLEY9aSxNPWkmJmlbMF0mJmsuaXNYTUwoaVswXSk7ZyYmaS5sZW5ndGg7KXtmb3IodmFyIE4gaW4gby5maWx0ZXIpaWYoKHA9by5sZWZ0TWF0Y2hbTl0uZXhlYyhnKSkhPW51bGwmJnBbMl0pe3ZhciBPLEQsUj1vLmZpbHRlcltOXTtEPXBbMV07cT1mYWxzZTtwLnNwbGljZSgxLDEpO2lmKEQuc3Vic3RyKEQubGVuZ3RoLTEpIT09IlxcIil7aWYoRj09PXkpeT1bXTtpZihvLnByZUZpbHRlcltOXSlpZihwPW8ucHJlRmlsdGVyW05dKHAsRixuLHksbSxNKSl7aWYocD09PXRydWUpY29udGludWV9ZWxzZSBxPU89dHJ1ZTtpZihwKWZvcih2YXIgaj0wOyhEPUZbal0pIT1udWxsO2orKylpZihEKXtPPVIoRCxwLGosRik7dmFyIHM9bV4hIU87aWYobiYmTyE9bnVsbClpZihzKXE9dHJ1ZTtlbHNlIEZbal09ZmFsc2U7ZWxzZSBpZihzKXt5LnB1c2goRCk7cT10cnVlfX1pZihPIT09Qil7bnx8KEY9eSk7Zz1nLnJlcGxhY2Uoby5tYXRjaFtOXSwiIik7aWYoIXEpcmV0dXJuW107YnJlYWt9fX1pZihnPT09dSlpZihxPT1udWxsKWsuZXJyb3IoZyk7ZWxzZSBicmVhazt1PWd9cmV0dXJuIEZ9O2suZXJyb3I9ZnVuY3Rpb24oZyl7dGhyb3ciU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitnO307dmFyIG89ay5zZWxlY3RvcnM9e29yZGVyOlsiSUQiLCJOQU1FIiwiVEFHIl0sbWF0Y2g6e0lEOi8jKCg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSspLyxDTEFTUzovXC4oKD86W1x3XHUwMGMwLVx1RkZGRlwtXXxcXC4pKykvLE5BTUU6L1xbbmFtZT1bJyJdKigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKVsnIl0qXF0vLEFUVFI6L1xbXHMqKCg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSspXHMqKD86KFxTPz0pXHMqKFsnIl0qKSguKj8pXDN8KVxzKlxdLyxUQUc6L14oKD86W1x3XHUwMGMwLVx1RkZGRlwqXC1dfFxcLikrKS8sQ0hJTEQ6Lzoob25seXxudGh8bGFzdHxmaXJzdCktY2hpbGQoPzpcKChldmVufG9kZHxbXGRuK1wtXSopXCkpPy8sUE9TOi86KG50aHxlcXxndHxsdHxmaXJzdHxsYXN0fGV2ZW58b2RkKSg/OlwoKFxkKilcKSk/KD89W15cLV18JCkvLFBTRVVETzovOigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKSg/OlwoKFsnIl0/KSgoPzpcKFteXCldK1wpfFteXChcKV0qKSspXDJcKSk/L30sbGVmdE1hdGNoOnt9LGF0dHJNYXA6eyJjbGFzcyI6ImNsYXNzTmFtZSIsImZvciI6Imh0bWxGb3IifSxhdHRySGFuZGxlOntocmVmOmZ1bmN0aW9uKGcpe3JldHVybiBnLmdldEF0dHJpYnV0ZSgiaHJlZiIpfX0scmVsYXRpdmU6eyIrIjpmdW5jdGlvbihnLGkpe3ZhciBuPXR5cGVvZiBpPT09InN0cmluZyIsbT1uJiYhL1xXLy50ZXN0KGkpO249biYmIW07aWYobSlpPWkudG9Mb3dlckNhc2UoKTttPTA7Zm9yKHZhciBwPWcubGVuZ3RoLHE7bTxwO20rKylpZihxPWdbbV0pe2Zvcig7KHE9cS5wcmV2aW91c1NpYmxpbmcpJiZxLm5vZGVUeXBlIT09MTspO2dbbV09bnx8cSYmcS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aT9xfHxmYWxzZTpxPT09aX1uJiZrLmZpbHRlcihpLGcsdHJ1ZSl9LCI+IjpmdW5jdGlvbihnLGkpe3ZhciBuLG09dHlwZW9mIGk9PT0ic3RyaW5nIixwPTAscT1nLmxlbmd0aDtpZihtJiYhL1xXLy50ZXN0KGkpKWZvcihpPWkudG9Mb3dlckNhc2UoKTtwPHE7cCsrKXtpZihuPWdbcF0pe249bi5wYXJlbnROb2RlO2dbcF09bi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aT9uOmZhbHNlfX1lbHNle2Zvcig7cDxxO3ArKylpZihuPWdbcF0pZ1twXT1tP24ucGFyZW50Tm9kZTpuLnBhcmVudE5vZGU9PT1pO20mJmsuZmlsdGVyKGksZyx0cnVlKX19LCIiOmZ1bmN0aW9uKGcsaSxuKXt2YXIgbSxwPWUrKyxxPWI7aWYodHlwZW9mIGk9PT0ic3RyaW5nIiYmIS9cVy8udGVzdChpKSl7bT1pPWkudG9Mb3dlckNhc2UoKTtxPWF9cSgicGFyZW50Tm9kZSIsaSxwLGcsbSxuKX0sIn4iOmZ1bmN0aW9uKGcsaSxuKXt2YXIgbSxwPWUrKyxxPWI7aWYodHlwZW9mIGk9PT0ic3RyaW5nIiYmIS9cVy8udGVzdChpKSl7bT1pPWkudG9Mb3dlckNhc2UoKTtxPWF9cSgicHJldmlvdXNTaWJsaW5nIixpLHAsZyxtLG4pfX0sZmluZDp7SUQ6ZnVuY3Rpb24oZyxpLG4pe2lmKHR5cGVvZiBpLmdldEVsZW1lbnRCeUlkIT09InVuZGVmaW5lZCImJiFuKXJldHVybihnPWkuZ2V0RWxlbWVudEJ5SWQoZ1sxXSkpJiZnLnBhcmVudE5vZGU/W2ddOltdfSxOQU1FOmZ1bmN0aW9uKGcsaSl7aWYodHlwZW9mIGkuZ2V0RWxlbWVudHNCeU5hbWUhPT0idW5kZWZpbmVkIil7Zm9yKHZhciBuPVtdLG09aS5nZXRFbGVtZW50c0J5TmFtZShnWzFdKSxwPTAscT1tLmxlbmd0aDtwPHE7cCsrKW1bcF0uZ2V0QXR0cmlidXRlKCJuYW1lIik9PT1nWzFdJiZuLnB1c2gobVtwXSk7cmV0dXJuIG4ubGVuZ3RoPT09MD9udWxsOm59fSxUQUc6ZnVuY3Rpb24oZyxpKXtyZXR1cm4gaS5nZXRFbGVtZW50c0J5VGFnTmFtZShnWzFdKX19LHByZUZpbHRlcjp7Q0xBU1M6ZnVuY3Rpb24oZyxpLG4sbSxwLHEpe2c9IiAiK2dbMV0ucmVwbGFjZSgvXFwvZywiIikrIiAiO2lmKHEpcmV0dXJuIGc7cT0wO2Zvcih2YXIgdTsodT1pW3FdKSE9bnVsbDtxKyspaWYodSlpZihwXih1LmNsYXNzTmFtZSYmKCIgIit1LmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoL1tcdFxuXS9nLCIgIikuaW5kZXhPZihnKT49MCkpbnx8bS5wdXNoKHUpO2Vsc2UgaWYobilpW3FdPWZhbHNlO3JldHVybiBmYWxzZX0sSUQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGdbMV0ucmVwbGFjZSgvXFwvZywiIil9LFRBRzpmdW5jdGlvbihnKXtyZXR1cm4gZ1sxXS50b0xvd2VyQ2FzZSgpfSxDSElMRDpmdW5jdGlvbihnKXtpZihnWzFdPT09Im50aCIpe3ZhciBpPS8oLT8pKFxkKiluKCg/OlwrfC0pP1xkKikvLmV4ZWMoZ1syXT09PSJldmVuIiYmIjJuInx8Z1syXT09PSJvZGQiJiYiMm4rMSJ8fCEvXEQvLnRlc3QoZ1syXSkmJiIwbisiK2dbMl18fGdbMl0pO2dbMl09aVsxXSsoaVsyXXx8MSktMDtnWzNdPWlbM10tMH1nWzBdPWUrKztyZXR1cm4gZ30sQVRUUjpmdW5jdGlvbihnLGksbixtLHAscSl7aT1nWzFdLnJlcGxhY2UoL1xcL2csIiIpO2lmKCFxJiZvLmF0dHJNYXBbaV0pZ1sxXT1vLmF0dHJNYXBbaV07aWYoZ1syXT09PSJ+PSIpZ1s0XT0iICIrZ1s0XSsiICI7cmV0dXJuIGd9LFBTRVVETzpmdW5jdGlvbihnLGksbixtLHApe2lmKGdbMV09PT0ibm90IilpZigoZC5leGVjKGdbM10pfHwiIikubGVuZ3RoPjF8fC9eXHcvLnRlc3QoZ1szXSkpZ1szXT1rKGdbM10sbnVsbCxudWxsLGkpO2Vsc2V7Zz1rLmZpbHRlcihnWzNdLGksbix0cnVlXnApO258fG0ucHVzaC5hcHBseShtLGcpO3JldHVybiBmYWxzZX1lbHNlIGlmKG8ubWF0Y2guUE9TLnRlc3QoZ1swXSl8fG8ubWF0Y2guQ0hJTEQudGVzdChnWzBdKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZ30sUE9TOmZ1bmN0aW9uKGcpe2cudW5zaGlmdCh0cnVlKTtyZXR1cm4gZ319LGZpbHRlcnM6e2VuYWJsZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuZGlzYWJsZWQ9PT1mYWxzZSYmZy50eXBlIT09ImhpZGRlbiJ9LGRpc2FibGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLmRpc2FibGVkPT09dHJ1ZX0sY2hlY2tlZDpmdW5jdGlvbihnKXtyZXR1cm4gZy5jaGVja2VkPT09dHJ1ZX0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuc2VsZWN0ZWQ9PT10cnVlfSxwYXJlbnQ6ZnVuY3Rpb24oZyl7cmV0dXJuISFnLmZpcnN0Q2hpbGR9LGVtcHR5OmZ1bmN0aW9uKGcpe3JldHVybiFnLmZpcnN0Q2hpbGR9LGhhczpmdW5jdGlvbihnLGksbil7cmV0dXJuISFrKG5bM10sZykubGVuZ3RofSxoZWFkZXI6ZnVuY3Rpb24oZyl7cmV0dXJuL2hcZC9pLnRlc3QoZy5ub2RlTmFtZSl9LHRleHQ6ZnVuY3Rpb24oZyl7cmV0dXJuInRleHQiPT09Zy50eXBlfSxyYWRpbzpmdW5jdGlvbihnKXtyZXR1cm4icmFkaW8iPT09Zy50eXBlfSxjaGVja2JveDpmdW5jdGlvbihnKXtyZXR1cm4iY2hlY2tib3giPT09Zy50eXBlfSxmaWxlOmZ1bmN0aW9uKGcpe3JldHVybiJmaWxlIj09PWcudHlwZX0scGFzc3dvcmQ6ZnVuY3Rpb24oZyl7cmV0dXJuInBhc3N3b3JkIj09PWcudHlwZX0sc3VibWl0OmZ1bmN0aW9uKGcpe3JldHVybiJzdWJtaXQiPT09Zy50eXBlfSxpbWFnZTpmdW5jdGlvbihnKXtyZXR1cm4iaW1hZ2UiPT09Zy50eXBlfSxyZXNldDpmdW5jdGlvbihnKXtyZXR1cm4icmVzZXQiPT09Zy50eXBlfSxidXR0b246ZnVuY3Rpb24oZyl7cmV0dXJuImJ1dHRvbiI9PT1nLnR5cGV8fGcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJidXR0b24ifSxpbnB1dDpmdW5jdGlvbihnKXtyZXR1cm4vaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbi9pLnRlc3QoZy5ub2RlTmFtZSl9fSxzZXRGaWx0ZXJzOntmaXJzdDpmdW5jdGlvbihnLGkpe3JldHVybiBpPT09MH0sbGFzdDpmdW5jdGlvbihnLGksbixtKXtyZXR1cm4gaT09PW0ubGVuZ3RoLTF9LGV2ZW46ZnVuY3Rpb24oZyxpKXtyZXR1cm4gaSUyPT09MH0sb2RkOmZ1bmN0aW9uKGcsaSl7cmV0dXJuIGklMj09PTF9LGx0OmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4gaTxuWzNdLTB9LGd0OmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4gaT5uWzNdLTB9LG50aDpmdW5jdGlvbihnLGksbil7cmV0dXJuIG5bM10tCjA9PT1pfSxlcTpmdW5jdGlvbihnLGksbil7cmV0dXJuIG5bM10tMD09PWl9fSxmaWx0ZXI6e1BTRVVETzpmdW5jdGlvbihnLGksbixtKXt2YXIgcD1pWzFdLHE9by5maWx0ZXJzW3BdO2lmKHEpcmV0dXJuIHEoZyxuLGksbSk7ZWxzZSBpZihwPT09ImNvbnRhaW5zIilyZXR1cm4oZy50ZXh0Q29udGVudHx8Zy5pbm5lclRleHR8fGsuZ2V0VGV4dChbZ10pfHwiIikuaW5kZXhPZihpWzNdKT49MDtlbHNlIGlmKHA9PT0ibm90Iil7aT1pWzNdO249MDtmb3IobT1pLmxlbmd0aDtuPG07bisrKWlmKGlbbl09PT1nKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZX1lbHNlIGsuZXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrcCl9LENISUxEOmZ1bmN0aW9uKGcsaSl7dmFyIG49aVsxXSxtPWc7c3dpdGNoKG4pe2Nhc2Uib25seSI6Y2FzZSJmaXJzdCI6Zm9yKDttPW0ucHJldmlvdXNTaWJsaW5nOylpZihtLm5vZGVUeXBlPT09MSlyZXR1cm4gZmFsc2U7aWYobj09PSJmaXJzdCIpcmV0dXJuIHRydWU7bT1nO2Nhc2UibGFzdCI6Zm9yKDttPW0ubmV4dFNpYmxpbmc7KWlmKG0ubm9kZVR5cGU9PT0xKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZTtjYXNlIm50aCI6bj1pWzJdO3ZhciBwPWlbM107aWYobj09PTEmJnA9PT0wKXJldHVybiB0cnVlO3ZhciBxPWlbMF0sdT1nLnBhcmVudE5vZGU7aWYodSYmKHUuc2l6Y2FjaGUhPT1xfHwhZy5ub2RlSW5kZXgpKXt2YXIgeT0wO2ZvcihtPXUuZmlyc3RDaGlsZDttO209bS5uZXh0U2libGluZylpZihtLm5vZGVUeXBlPT09MSltLm5vZGVJbmRleD0rK3k7dS5zaXpjYWNoZT1xfW09Zy5ub2RlSW5kZXgtcDtyZXR1cm4gbj09PTA/bT09PTA6bSVuPT09MCYmbS9uPj0wfX0sSUQ6ZnVuY3Rpb24oZyxpKXtyZXR1cm4gZy5ub2RlVHlwZT09PTEmJmcuZ2V0QXR0cmlidXRlKCJpZCIpPT09aX0sVEFHOmZ1bmN0aW9uKGcsaSl7cmV0dXJuIGk9PT0iKiImJmcubm9kZVR5cGU9PT0xfHxnLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1pfSxDTEFTUzpmdW5jdGlvbihnLGkpe3JldHVybigiICIrKGcuY2xhc3NOYW1lfHxnLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSkrIiAiKS5pbmRleE9mKGkpPi0xfSxBVFRSOmZ1bmN0aW9uKGcsaSl7dmFyIG49aVsxXTtuPW8uYXR0ckhhbmRsZVtuXT9vLmF0dHJIYW5kbGVbbl0oZyk6Z1tuXSE9bnVsbD9nW25dOmcuZ2V0QXR0cmlidXRlKG4pO3ZhciBtPW4rIiIscD1pWzJdLHE9aVs0XTtyZXR1cm4gbj09bnVsbD9wPT09IiE9IjpwPT09Ij0iP209PT1xOnA9PT0iKj0iP20uaW5kZXhPZihxKT49MDpwPT09In49Ij8oIiAiK20rIiAiKS5pbmRleE9mKHEpPj0wOiFxP20mJm4hPT1mYWxzZTpwPT09IiE9Ij9tIT09cTpwPT09Il49Ij9tLmluZGV4T2YocSk9PT0wOnA9PT0iJD0iP20uc3Vic3RyKG0ubGVuZ3RoLXEubGVuZ3RoKT09PXE6cD09PSJ8PSI/bT09PXF8fG0uc3Vic3RyKDAscS5sZW5ndGgrMSk9PT1xKyItIjpmYWxzZX0sUE9TOmZ1bmN0aW9uKGcsaSxuLG0pe3ZhciBwPW8uc2V0RmlsdGVyc1tpWzJdXTtpZihwKXJldHVybiBwKGcsbixpLG0pfX19LHg9by5tYXRjaC5QT1Mscj1mdW5jdGlvbihnLGkpe3JldHVybiJcXCIrKGktMCsxKX0sQTtmb3IoQSBpbiBvLm1hdGNoKXtvLm1hdGNoW0FdPVJlZ0V4cChvLm1hdGNoW0FdLnNvdXJjZSsvKD8hW15cW10qXF0pKD8hW15cKF0qXCkpLy5zb3VyY2UpO28ubGVmdE1hdGNoW0FdPVJlZ0V4cCgvKF4oPzoufFxyfFxuKSo/KS8uc291cmNlK28ubWF0Y2hbQV0uc291cmNlLnJlcGxhY2UoL1xcKFxkKykvZyxyKSl9dmFyIEM9ZnVuY3Rpb24oZyxpKXtnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGcsMCk7aWYoaSl7aS5wdXNoLmFwcGx5KGksZyk7cmV0dXJuIGl9cmV0dXJuIGd9O3RyeXtBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLDApfWNhdGNoKEope0M9ZnVuY3Rpb24oZyxpKXt2YXIgbj0wLG09aXx8W107aWYoZi5jYWxsKGcpPT09IltvYmplY3QgQXJyYXldIilBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShtLGcpO2Vsc2UgaWYodHlwZW9mIGcubGVuZ3RoPT09Im51bWJlciIpZm9yKHZhciBwPWcubGVuZ3RoO248cDtuKyspbS5wdXNoKGdbbl0pO2Vsc2UgZm9yKDtnW25dO24rKyltLnB1c2goZ1tuXSk7cmV0dXJuIG19fXZhciB3LEk7aWYodC5kb2N1bWVudEVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24pdz1mdW5jdGlvbihnLGkpe2lmKGc9PT1pKXtoPXRydWU7cmV0dXJuIDB9aWYoIWcuY29tcGFyZURvY3VtZW50UG9zaXRpb258fCFpLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKXJldHVybiBnLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uPy0xOjE7cmV0dXJuIGcuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaSkmND8tMToxfTtlbHNle3c9ZnVuY3Rpb24oZyxpKXt2YXIgbixtLHA9W10scT1bXTtuPWcucGFyZW50Tm9kZTttPWkucGFyZW50Tm9kZTt2YXIgdT1uO2lmKGc9PT1pKXtoPXRydWU7cmV0dXJuIDB9ZWxzZSBpZihuPT09bSlyZXR1cm4gSShnLGkpO2Vsc2UgaWYobil7aWYoIW0pcmV0dXJuIDF9ZWxzZSByZXR1cm4tMTtmb3IoO3U7KXtwLnVuc2hpZnQodSk7dT11LnBhcmVudE5vZGV9Zm9yKHU9bTt1Oyl7cS51bnNoaWZ0KHUpO3U9dS5wYXJlbnROb2RlfW49cC5sZW5ndGg7bT1xLmxlbmd0aDtmb3IodT0wO3U8biYmdTxtO3UrKylpZihwW3VdIT09cVt1XSlyZXR1cm4gSShwW3VdLHFbdV0pO3JldHVybiB1PT09bj9JKGcscVt1XSwtMSk6SShwW3VdLGksMSl9O0k9ZnVuY3Rpb24oZyxpLG4pe2lmKGc9PT1pKXJldHVybiBuO2ZvcihnPWcubmV4dFNpYmxpbmc7Zzspe2lmKGc9PT1pKXJldHVybi0xO2c9Zy5uZXh0U2libGluZ31yZXR1cm4gMX19ay5nZXRUZXh0PWZ1bmN0aW9uKGcpe2Zvcih2YXIgaT0iIixuLG09MDtnW21dO20rKyl7bj1nW21dO2lmKG4ubm9kZVR5cGU9PT0zfHxuLm5vZGVUeXBlPT09NClpKz1uLm5vZGVWYWx1ZTtlbHNlIGlmKG4ubm9kZVR5cGUhPT04KWkrPWsuZ2V0VGV4dChuLmNoaWxkTm9kZXMpfXJldHVybiBpfTsoZnVuY3Rpb24oKXt2YXIgZz10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGk9InNjcmlwdCIrKG5ldyBEYXRlKS5nZXRUaW1lKCksbj10LmRvY3VtZW50RWxlbWVudDtnLmlubmVySFRNTD0iPGEgbmFtZT0nIitpKyInLz4iO24uaW5zZXJ0QmVmb3JlKGcsbi5maXJzdENoaWxkKTtpZih0LmdldEVsZW1lbnRCeUlkKGkpKXtvLmZpbmQuSUQ9ZnVuY3Rpb24obSxwLHEpe2lmKHR5cGVvZiBwLmdldEVsZW1lbnRCeUlkIT09InVuZGVmaW5lZCImJiFxKXJldHVybihwPXAuZ2V0RWxlbWVudEJ5SWQobVsxXSkpP3AuaWQ9PT1tWzFdfHx0eXBlb2YgcC5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJnAuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWU9PT1tWzFdP1twXTpCOltdfTtvLmZpbHRlci5JRD1mdW5jdGlvbihtLHApe3ZhciBxPXR5cGVvZiBtLmdldEF0dHJpYnV0ZU5vZGUhPT0idW5kZWZpbmVkIiYmbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBtLm5vZGVUeXBlPT09MSYmcSYmcS5ub2RlVmFsdWU9PT1wfX1uLnJlbW92ZUNoaWxkKGcpO249Zz1udWxsfSkoKTsoZnVuY3Rpb24oKXt2YXIgZz10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2cuYXBwZW5kQ2hpbGQodC5jcmVhdGVDb21tZW50KCIiKSk7aWYoZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4wKW8uZmluZC5UQUc9ZnVuY3Rpb24oaSxuKXt2YXIgbT1uLmdldEVsZW1lbnRzQnlUYWdOYW1lKGlbMV0pO2lmKGlbMV09PT0iKiIpe2Zvcih2YXIgcD1bXSxxPTA7bVtxXTtxKyspbVtxXS5ub2RlVHlwZT09PTEmJnAucHVzaChtW3FdKTttPXB9cmV0dXJuIG19O2cuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IjtpZihnLmZpcnN0Q2hpbGQmJnR5cGVvZiBnLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlIT09InVuZGVmaW5lZCImJmcuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSE9PSIjIilvLmF0dHJIYW5kbGUuaHJlZj1mdW5jdGlvbihpKXtyZXR1cm4gaS5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpfTtnPW51bGx9KSgpO3QucXVlcnlTZWxlY3RvckFsbCYmZnVuY3Rpb24oKXt2YXIgZz1rLGk9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLmlubmVySFRNTD0iPHAgY2xhc3M9J1RFU1QnPjwvcD4iO2lmKCEoaS5xdWVyeVNlbGVjdG9yQWxsJiZpLnF1ZXJ5U2VsZWN0b3JBbGwoIi5URVNUIikubGVuZ3RoPT09MCkpe2s9ZnVuY3Rpb24obSxwLHEsdSl7cD1wfHx0O209bS5yZXBsYWNlKC9cPVxzKihbXiciXF1dKilccypcXS9nLCI9JyQxJ10iKTtpZighdSYmIWsuaXNYTUwocCkpaWYocC5ub2RlVHlwZT09PTkpdHJ5e3JldHVybiBDKHAucXVlcnlTZWxlY3RvckFsbChtKSxxKX1jYXRjaCh5KXt9ZWxzZSBpZihwLm5vZGVUeXBlPT09MSYmcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe3ZhciBGPXAuZ2V0QXR0cmlidXRlKCJpZCIpLE09Rnx8Il9fc2l6emxlX18iO0Z8fHAuc2V0QXR0cmlidXRlKCJpZCIsTSk7dHJ5e3JldHVybiBDKHAucXVlcnlTZWxlY3RvckFsbCgiIyIrTSsiICIrbSkscSl9Y2F0Y2goTil7fWZpbmFsbHl7Rnx8cC5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fXJldHVybiBnKG0scCxxLHUpfTtmb3IodmFyIG4gaW4gZylrW25dPWdbbl07aT1udWxsfX0oKTsoZnVuY3Rpb24oKXt2YXIgZz10LmRvY3VtZW50RWxlbWVudCxpPWcubWF0Y2hlc1NlbGVjdG9yfHxnLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zy53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGcubXNNYXRjaGVzU2VsZWN0b3Isbj1mYWxzZTt0cnl7aS5jYWxsKHQuZG9jdW1lbnRFbGVtZW50LCJbdGVzdCE9JyddOnNpenpsZSIpfWNhdGNoKG0pe249dHJ1ZX1pZihpKWsubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKHAscSl7cT1xLnJlcGxhY2UoL1w9XHMqKFteJyJcXV0qKVxzKlxdL2csIj0nJDEnXSIpO2lmKCFrLmlzWE1MKHApKXRyeXtpZihufHwhby5tYXRjaC5QU0VVRE8udGVzdChxKSYmIS8hPS8udGVzdChxKSlyZXR1cm4gaS5jYWxsKHAscSl9Y2F0Y2godSl7fXJldHVybiBrKHEsbnVsbCxudWxsLFtwXSkubGVuZ3RoPjB9fSkoKTsoZnVuY3Rpb24oKXt2YXIgZz10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2cuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSd0ZXN0IGUnPjwvZGl2PjxkaXYgY2xhc3M9J3Rlc3QnPjwvZGl2PiI7aWYoISghZy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lfHxnLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGg9PT0wKSl7Zy5sYXN0Q2hpbGQuY2xhc3NOYW1lPSJlIjtpZihnLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGghPT0xKXtvLm9yZGVyLnNwbGljZSgxLDAsIkNMQVNTIik7by5maW5kLkNMQVNTPWZ1bmN0aW9uKGksbixtKXtpZih0eXBlb2Ygbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09InVuZGVmaW5lZCImJiFtKXJldHVybiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaVsxXSl9O2c9bnVsbH19fSkoKTtrLmNvbnRhaW5zPXQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zP2Z1bmN0aW9uKGcsaSl7cmV0dXJuIGchPT1pJiYoZy5jb250YWlucz9nLmNvbnRhaW5zKGkpOnRydWUpfTp0LmRvY3VtZW50RWxlbWVudC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihnLGkpe3JldHVybiEhKGcuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaSkmMTYpfTpmdW5jdGlvbigpe3JldHVybiBmYWxzZX07ay5pc1hNTD1mdW5jdGlvbihnKXtyZXR1cm4oZz0oZz9nLm93bmVyRG9jdW1lbnR8fGc6MCkuZG9jdW1lbnRFbGVtZW50KT9nLm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlfTt2YXIgTD1mdW5jdGlvbihnLGkpe2Zvcih2YXIgbixtPVtdLHA9IiIscT1pLm5vZGVUeXBlP1tpXTppO249by5tYXRjaC5QU0VVRE8uZXhlYyhnKTspe3ArPW5bMF07Zz1nLnJlcGxhY2Uoby5tYXRjaC5QU0VVRE8sIiIpfWc9by5yZWxhdGl2ZVtnXT9nKyIqIjpnO249MDtmb3IodmFyIHU9cS5sZW5ndGg7bjx1O24rKylrKGcscVtuXSxtKTtyZXR1cm4gay5maWx0ZXIocCxtKX07Yy5maW5kPWs7Yy5leHByPWsuc2VsZWN0b3JzO2MuZXhwclsiOiJdPWMuZXhwci5maWx0ZXJzO2MudW5pcXVlPWsudW5pcXVlU29ydDtjLnRleHQ9ay5nZXRUZXh0O2MuaXNYTUxEb2M9ay5pc1hNTDtjLmNvbnRhaW5zPWsuY29udGFpbnN9KSgpO3ZhciBaYT0vVW50aWwkLywkYT0vXig/OnBhcmVudHN8cHJldlVudGlsfHByZXZBbGwpLyxhYj0vLC8sTmE9L14uW146I1xbXC4sXSokLyxiYj1BcnJheS5wcm90b3R5cGUuc2xpY2UsY2I9Yy5leHByLm1hdGNoLlBPUztjLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wdXNoU3RhY2soIiIsImZpbmQiLGEpLGQ9MCxlPTAsZj10aGlzLmxlbmd0aDtlPGY7ZSsrKXtkPWIubGVuZ3RoO2MuZmluZChhLHRoaXNbZV0sYik7aWYoZT4wKWZvcih2YXIgaD1kO2g8Yi5sZW5ndGg7aCsrKWZvcih2YXIgbD0wO2w8ZDtsKyspaWYoYltsXT09PWJbaF0pe2Iuc3BsaWNlKGgtLSwxKTticmVha319cmV0dXJuIGJ9LGhhczpmdW5jdGlvbihhKXt2YXIgYj1jKGEpO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylpZihjLmNvbnRhaW5zKHRoaXMsYltkXSkpcmV0dXJuIHRydWV9KX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhtYSh0aGlzLGEsZmFsc2UpLCJub3QiLGEpfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG1hKHRoaXMsYSx0cnVlKSwiZmlsdGVyIixhKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISFhJiZjLmZpbHRlcihhLHRoaXMpLmxlbmd0aD4wfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGQ9W10sZSxmLGg9dGhpc1swXTtpZihjLmlzQXJyYXkoYSkpe3ZhciBsLGs9e30sbz0xO2lmKGgmJmEubGVuZ3RoKXtlPTA7Zm9yKGY9YS5sZW5ndGg7ZTxmO2UrKyl7bD1hW2VdO2tbbF18fChrW2xdPWMuZXhwci5tYXRjaC5QT1MudGVzdChsKT9jKGwsYnx8dGhpcy5jb250ZXh0KTpsKX1mb3IoO2gmJmgub3duZXJEb2N1bWVudCYmaCE9PWI7KXtmb3IobCBpbiBrKXtlPWtbbF07aWYoZS5qcXVlcnk/ZS5pbmRleChoKT4tMTpjKGgpLmlzKGUpKWQucHVzaCh7c2VsZWN0b3I6bCxlbGVtOmgsbGV2ZWw6b30pfWg9aC5wYXJlbnROb2RlO28rK319cmV0dXJuIGR9bD1jYi50ZXN0KGEpP2MoYSxifHx0aGlzLmNvbnRleHQpOm51bGw7ZT0wO2ZvcihmPXRoaXMubGVuZ3RoO2U8ZjtlKyspZm9yKGg9dGhpc1tlXTtoOylpZihsP2wuaW5kZXgoaCk+LTE6Yy5maW5kLm1hdGNoZXNTZWxlY3RvcihoLGEpKXtkLnB1c2goaCk7YnJlYWt9ZWxzZXtoPWgucGFyZW50Tm9kZTtpZighaHx8IWgub3duZXJEb2N1bWVudHx8aD09PWIpYnJlYWt9ZD1kLmxlbmd0aD4xP2MudW5pcXVlKGQpOmQ7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQsImNsb3Nlc3QiLGEpfSxpbmRleDpmdW5jdGlvbihhKXtpZighYXx8dHlwZW9mIGE9PT0ic3RyaW5nIilyZXR1cm4gYy5pbkFycmF5KHRoaXNbMF0sYT9jKGEpOnRoaXMucGFyZW50KCkuY2hpbGRyZW4oKSk7cmV0dXJuIGMuaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyl9LGFkZDpmdW5jdGlvbihhLGIpe3ZhciBkPXR5cGVvZiBhPT09InN0cmluZyI/YyhhLGJ8fHRoaXMuY29udGV4dCk6Yy5tYWtlQXJyYXkoYSksZT1jLm1lcmdlKHRoaXMuZ2V0KCksZCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKCFkWzBdfHwhZFswXS5wYXJlbnROb2RlfHxkWzBdLnBhcmVudE5vZGUubm9kZVR5cGU9PT0xMXx8IWVbMF18fCFlWzBdLnBhcmVudE5vZGV8fGVbMF0ucGFyZW50Tm9kZS5ub2RlVHlwZT09PTExP2U6Yy51bmlxdWUoZSkpfSxhbmRTZWxmOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRkKHRoaXMucHJldk9iamVjdCl9fSk7Yy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9YS5wYXJlbnROb2RlKSYmYS5ub2RlVHlwZSE9PTExP2E6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYy5kaXIoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmRpcihhLCJwYXJlbnROb2RlIixkKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYy5udGgoYSwyLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBjLm50aChhLDIsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjLmRpcihhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjLmRpcihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5kaXIoYSwibmV4dFNpYmxpbmciLGQpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmRpcihhLCJwcmV2aW91c1NpYmxpbmciLGQpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gYy5zaWJsaW5nKGEucGFyZW50Tm9kZS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gYy5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBjLm5vZGVOYW1lKGEsImlmcmFtZSIpP2EuY29udGVudERvY3VtZW50fHxhLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6Yy5tYWtlQXJyYXkoYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7Yy5mblthXT1mdW5jdGlvbihkLGUpe3ZhciBmPWMubWFwKHRoaXMsYixkKTtaYS50ZXN0KGEpfHwoZT1kKTtpZihlJiZ0eXBlb2YgZT09PSJzdHJpbmciKWY9Yy5maWx0ZXIoZSxmKTtmPXRoaXMubGVuZ3RoPjE/Yy51bmlxdWUoZik6ZjtpZigodGhpcy5sZW5ndGg+MXx8YWIudGVzdChlKSkmJiRhLnRlc3QoYSkpZj1mLnJldmVyc2UoKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZixhLGJiLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfX0pO2MuZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oYSxiLGQpe2lmKGQpYT0iOm5vdCgiK2ErIikiO3JldHVybiBiLmxlbmd0aD09PTE/Yy5maW5kLm1hdGNoZXNTZWxlY3RvcihiWzBdLGEpP1tiWzBdXTpbXTpjLmZpbmQubWF0Y2hlcyhhLGIpfSxkaXI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPVtdO2ZvcihhPWFbYl07YSYmYS5ub2RlVHlwZSE9PTkmJihkPT09Qnx8YS5ub2RlVHlwZSE9PTF8fCFjKGEpLmlzKGQpKTspe2Eubm9kZVR5cGU9PT0xJiZlLnB1c2goYSk7YT1hW2JdfXJldHVybiBlfSxudGg6ZnVuY3Rpb24oYSxiLGQpe2I9Ynx8MTtmb3IodmFyIGU9MDthO2E9YVtkXSlpZihhLm5vZGVUeXBlPT09MSYmKytlPT09YilicmVhaztyZXR1cm4gYX0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD1bXTthO2E9YS5uZXh0U2libGluZylhLm5vZGVUeXBlPT09MSYmYSE9PWImJmQucHVzaChhKTtyZXR1cm4gZH19KTt2YXIgemE9LyBqUXVlcnlcZCs9Iig/OlxkK3xudWxsKSIvZywkPS9eXHMrLyxBYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2lnLEJhPS88KFtcdzpdKykvLGRiPS88dGJvZHkvaSxlYj0vPHwmIz9cdys7LyxDYT0vPCg/OnNjcmlwdHxvYmplY3R8ZW1iZWR8b3B0aW9ufHN0eWxlKS9pLERhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGZiPS9cPShbXj0iJz5cc10rXC8pPi9nLFA9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLGxlZ2VuZDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07UC5vcHRncm91cD1QLm9wdGlvbjtQLnRib2R5PVAudGZvb3Q9UC5jb2xncm91cD1QLmNhcHRpb249UC50aGVhZDtQLnRoPVAudGQ7aWYoIWMuc3VwcG9ydC5odG1sU2VyaWFsaXplKVAuX2RlZmF1bHQ9WzEsImRpdjxkaXY+IiwiPC9kaXY+Il07Yy5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7dmFyIGQ9Yyh0aGlzKTtkLnRleHQoYS5jYWxsKHRoaXMsYixkLnRleHQoKSkpfSk7aWYodHlwZW9mIGEhPT0ib2JqZWN0IiYmYSE9PUIpcmV0dXJuIHRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8dCkuY3JlYXRlVGV4dE5vZGUoYSkpO3JldHVybiBjLnRleHQodGhpcyl9LHdyYXBBbGw6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZCl7Yyh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGQpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPWMoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKHRydWUpO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSk7Yi5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGQ9dGhpcztkLmZpcnN0Q2hpbGQmJmQuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTE7KWQ9ZC5maXJzdENoaWxkO3JldHVybiBkfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7Yyh0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPWModGhpcyksZD1iLmNvbnRlbnRzKCk7ZC5sZW5ndGg/ZC53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2ModGhpcykud3JhcEFsbChhKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Yy5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGModGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsdHJ1ZSxmdW5jdGlvbihhKXt0aGlzLm5vZGVUeXBlPT09MSYmdGhpcy5hcHBlbmRDaGlsZChhKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLHRydWUsZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMuaW5zZXJ0QmVmb3JlKGEsdGhpcy5maXJzdENoaWxkKX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZhbHNlLGZ1bmN0aW9uKGIpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzKX0pO2Vsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9Yyhhcmd1bWVudHNbMF0pO2EucHVzaC5hcHBseShhLHRoaXMudG9BcnJheSgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYSwiYmVmb3JlIixhcmd1bWVudHMpfX0sYWZ0ZXI6ZnVuY3Rpb24oKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZhbHNlLGZ1bmN0aW9uKGIpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm5leHRTaWJsaW5nKX0pO2Vsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9dGhpcy5wdXNoU3RhY2sodGhpcywiYWZ0ZXIiLGFyZ3VtZW50cyk7YS5wdXNoLmFwcGx5KGEsYyhhcmd1bWVudHNbMF0pLnRvQXJyYXkoKSk7cmV0dXJuIGF9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9MCxlOyhlPXRoaXNbZF0pIT1udWxsO2QrKylpZighYXx8Yy5maWx0ZXIoYSxbZV0pLmxlbmd0aCl7aWYoIWImJmUubm9kZVR5cGU9PT0xKXtjLmNsZWFuRGF0YShlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO2MuY2xlYW5EYXRhKFtlXSl9ZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYjsoYj10aGlzW2FdKSE9bnVsbDthKyspZm9yKGIubm9kZVR5cGU9PT0xJiZjLmNsZWFuRGF0YShiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO2IuZmlyc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmZpcnN0Q2hpbGQpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcChmdW5jdGlvbigpe2lmKCFjLnN1cHBvcnQubm9DbG9uZUV2ZW50JiYhYy5pc1hNTERvYyh0aGlzKSl7dmFyIGQ9dGhpcy5vdXRlckhUTUwsZT10aGlzLm93bmVyRG9jdW1lbnQ7aWYoIWQpe2Q9ZS5jcmVhdGVFbGVtZW50KCJkaXYiKTtkLmFwcGVuZENoaWxkKHRoaXMuY2xvbmVOb2RlKHRydWUpKTtkPWQuaW5uZXJIVE1MfXJldHVybiBjLmNsZWFuKFtkLnJlcGxhY2UoemEsIiIpLnJlcGxhY2UoZmIsJz0iJDEiPicpLnJlcGxhY2UoJCwiIildLGUpWzBdfWVsc2UgcmV0dXJuIHRoaXMuY2xvbmVOb2RlKHRydWUpfSk7aWYoYT09PXRydWUpe25hKHRoaXMsYik7bmEodGhpcy5maW5kKCIqIiksYi5maW5kKCIqIikpfXJldHVybiBifSxodG1sOmZ1bmN0aW9uKGEpe2lmKGE9PT1CKXJldHVybiB0aGlzWzBdJiZ0aGlzWzBdLm5vZGVUeXBlPT09MT90aGlzWzBdLmlubmVySFRNTC5yZXBsYWNlKHphLCIiKTpudWxsO2Vsc2UgaWYodHlwZW9mIGE9PT0ic3RyaW5nIiYmIUNhLnRlc3QoYSkmJihjLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2V8fCEkLnRlc3QoYSkpJiYhUFsoQmEuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKEFhLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKHZhciBiPTAsZD10aGlzLmxlbmd0aDtiPGQ7YisrKWlmKHRoaXNbYl0ubm9kZVR5cGU9PT0xKXtjLmNsZWFuRGF0YSh0aGlzW2JdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO3RoaXNbYl0uaW5uZXJIVE1MPWF9fWNhdGNoKGUpe3RoaXMuZW1wdHkoKS5hcHBlbmQoYSl9fWVsc2UgYy5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihmKXt2YXIgaD1jKHRoaXMpO2guaHRtbChhLmNhbGwodGhpcyxmLGguaHRtbCgpKSl9KTp0aGlzLmVtcHR5KCkuYXBwZW5kKGEpO3JldHVybiB0aGlzfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3ZhciBkPWModGhpcyksZT1kLmh0bWwoKTtkLnJlcGxhY2VXaXRoKGEuY2FsbCh0aGlzLGIsZSkpfSk7aWYodHlwZW9mIGEhPT0ic3RyaW5nIilhPWMoYSkuZGV0YWNoKCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXRoaXMubmV4dFNpYmxpbmcsZD10aGlzLnBhcmVudE5vZGU7Yyh0aGlzKS5yZW1vdmUoKTtiP2MoYikuYmVmb3JlKGEpOmMoZCkuYXBwZW5kKGEpfSl9ZWxzZSByZXR1cm4gdGhpcy5wdXNoU3RhY2soYyhjLmlzRnVuY3Rpb24oYSk/YSgpOmEpLCJyZXBsYWNlV2l0aCIsYSl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSx0cnVlKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsaCxsPWFbMF0saz1bXTtpZighYy5zdXBwb3J0LmNoZWNrQ2xvbmUmJmFyZ3VtZW50cy5sZW5ndGg9PT0zJiZ0eXBlb2YgbD09PSJzdHJpbmciJiZEYS50ZXN0KGwpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMpLmRvbU1hbmlwKGEsYixkLHRydWUpfSk7aWYoYy5pc0Z1bmN0aW9uKGwpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oeCl7dmFyIHI9Yyh0aGlzKTthWzBdPWwuY2FsbCh0aGlzLHgsYj9yLmh0bWwoKTpCKTtyLmRvbU1hbmlwKGEsYixkKX0pO2lmKHRoaXNbMF0pe2U9bCYmbC5wYXJlbnROb2RlO2U9Yy5zdXBwb3J0LnBhcmVudE5vZGUmJmUmJmUubm9kZVR5cGU9PT0xMSYmZS5jaGlsZE5vZGVzLmxlbmd0aD09PXRoaXMubGVuZ3RoP3tmcmFnbWVudDplfTpjLmJ1aWxkRnJhZ21lbnQoYSx0aGlzLGspO2g9ZS5mcmFnbWVudDtpZihmPWguY2hpbGROb2Rlcy5sZW5ndGg9PT0xP2g9aC5maXJzdENoaWxkOmguZmlyc3RDaGlsZCl7Yj1iJiZjLm5vZGVOYW1lKGYsInRyIik7Zj0wO2Zvcih2YXIgbz10aGlzLmxlbmd0aDtmPG87ZisrKWQuY2FsbChiP2Mubm9kZU5hbWUodGhpc1tmXSwidGFibGUiKT90aGlzW2ZdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHx0aGlzW2ZdLmFwcGVuZENoaWxkKHRoaXNbZl0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTp0aGlzW2ZdOnRoaXNbZl0sZj4wfHxlLmNhY2hlYWJsZXx8dGhpcy5sZW5ndGg+MT9oLmNsb25lTm9kZSh0cnVlKTpoKX1rLmxlbmd0aCYmYy5lYWNoKGssT2EpfXJldHVybiB0aGlzfX0pO2MuYnVpbGRGcmFnbWVudD1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZixoO2I9YiYmYlswXT9iWzBdLm93bmVyRG9jdW1lbnR8fGJbMF06dDtpZihhLmxlbmd0aD09PTEmJnR5cGVvZiBhWzBdPT09InN0cmluZyImJmFbMF0ubGVuZ3RoPDUxMiYmYj09PXQmJiFDYS50ZXN0KGFbMF0pJiYoYy5zdXBwb3J0LmNoZWNrQ2xvbmV8fCFEYS50ZXN0KGFbMF0pKSl7Zj10cnVlO2lmKGg9Yy5mcmFnbWVudHNbYVswXV0paWYoaCE9PTEpZT1ofWlmKCFlKXtlPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2MuY2xlYW4oYSxiLGUsZCl9aWYoZiljLmZyYWdtZW50c1thWzBdXT1oP2U6MTtyZXR1cm57ZnJhZ21lbnQ6ZSxjYWNoZWFibGU6Zn19O2MuZnJhZ21lbnRzPXt9O2MuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7Yy5mblthXT1mdW5jdGlvbihkKXt2YXIgZT1bXTtkPWMoZCk7dmFyIGY9dGhpcy5sZW5ndGg9PT0xJiZ0aGlzWzBdLnBhcmVudE5vZGU7aWYoZiYmZi5ub2RlVHlwZT09PTExJiZmLmNoaWxkTm9kZXMubGVuZ3RoPT09MSYmZC5sZW5ndGg9PT0xKXtkW2JdKHRoaXNbMF0pO3JldHVybiB0aGlzfWVsc2V7Zj0wO2Zvcih2YXIgaD1kLmxlbmd0aDtmPGg7ZisrKXt2YXIgbD0oZj4wP3RoaXMuY2xvbmUodHJ1ZSk6dGhpcykuZ2V0KCk7YyhkW2ZdKVtiXShsKTtlPWUuY29uY2F0KGwpfXJldHVybiB0aGlzLnB1c2hTdGFjayhlLGEsZC5zZWxlY3Rvcil9fX0pO2MuZXh0ZW5kKHtjbGVhbjpmdW5jdGlvbihhLGIsZCxlKXtiPWJ8fHQ7aWYodHlwZW9mIGIuY3JlYXRlRWxlbWVudD09PSJ1bmRlZmluZWQiKWI9Yi5vd25lckRvY3VtZW50fHxiWzBdJiZiWzBdLm93bmVyRG9jdW1lbnR8fHQ7Zm9yKHZhciBmPVtdLGg9MCxsOyhsPWFbaF0pIT1udWxsO2grKyl7aWYodHlwZW9mIGw9PT0ibnVtYmVyIilsKz0iIjtpZihsKXtpZih0eXBlb2YgbD09PSJzdHJpbmciJiYhZWIudGVzdChsKSlsPWIuY3JlYXRlVGV4dE5vZGUobCk7ZWxzZSBpZih0eXBlb2YgbD09PSJzdHJpbmciKXtsPWwucmVwbGFjZShBYSwiPCQxPjwvJDI+Iik7dmFyIGs9KEJhLmV4ZWMobCl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksbz1QW2tdfHxQLl9kZWZhdWx0LHg9b1swXSxyPWIuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKHIuaW5uZXJIVE1MPW9bMV0rbCtvWzJdO3gtLTspcj1yLmxhc3RDaGlsZDtpZighYy5zdXBwb3J0LnRib2R5KXt4PWRiLnRlc3QobCk7az1rPT09InRhYmxlIiYmIXg/ci5maXJzdENoaWxkJiZyLmZpcnN0Q2hpbGQuY2hpbGROb2RlczpvWzFdPT09Ijx0YWJsZT4iJiYheD9yLmNoaWxkTm9kZXM6W107Zm9yKG89ay5sZW5ndGgtCjE7bz49MDstLW8pYy5ub2RlTmFtZShrW29dLCJ0Ym9keSIpJiYha1tvXS5jaGlsZE5vZGVzLmxlbmd0aCYma1tvXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGtbb10pfSFjLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJiQudGVzdChsKSYmci5pbnNlcnRCZWZvcmUoYi5jcmVhdGVUZXh0Tm9kZSgkLmV4ZWMobClbMF0pLHIuZmlyc3RDaGlsZCk7bD1yLmNoaWxkTm9kZXN9aWYobC5ub2RlVHlwZSlmLnB1c2gobCk7ZWxzZSBmPWMubWVyZ2UoZixsKX19aWYoZClmb3IoaD0wO2ZbaF07aCsrKWlmKGUmJmMubm9kZU5hbWUoZltoXSwic2NyaXB0IikmJighZltoXS50eXBlfHxmW2hdLnR5cGUudG9Mb3dlckNhc2UoKT09PSJ0ZXh0L2phdmFzY3JpcHQiKSllLnB1c2goZltoXS5wYXJlbnROb2RlP2ZbaF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmW2hdKTpmW2hdKTtlbHNle2ZbaF0ubm9kZVR5cGU9PT0xJiZmLnNwbGljZS5hcHBseShmLFtoKzEsMF0uY29uY2F0KGMubWFrZUFycmF5KGZbaF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpKSkpO2QuYXBwZW5kQ2hpbGQoZltoXSl9cmV0dXJuIGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsZCxlPWMuY2FjaGUsZj1jLmV2ZW50LnNwZWNpYWwsaD1jLnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxsPTAsazsoaz1hW2xdKSE9bnVsbDtsKyspaWYoIShrLm5vZGVOYW1lJiZjLm5vRGF0YVtrLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSlpZihkPWtbYy5leHBhbmRvXSl7aWYoKGI9ZVtkXSkmJmIuZXZlbnRzKWZvcih2YXIgbyBpbiBiLmV2ZW50cylmW29dP2MuZXZlbnQucmVtb3ZlKGssbyk6Yy5yZW1vdmVFdmVudChrLG8sYi5oYW5kbGUpO2lmKGgpZGVsZXRlIGtbYy5leHBhbmRvXTtlbHNlIGsucmVtb3ZlQXR0cmlidXRlJiZrLnJlbW92ZUF0dHJpYnV0ZShjLmV4cGFuZG8pO2RlbGV0ZSBlW2RdfX19KTt2YXIgRWE9L2FscGhhXChbXildKlwpL2ksZ2I9L29wYWNpdHk9KFteKV0qKS8saGI9Ly0oW2Etel0pL2lnLGliPS8oW0EtWl0pL2csRmE9L14tP1xkKyg/OnB4KT8kL2ksamI9L14tP1xkLyxrYj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sUGE9WyJMZWZ0IiwiUmlnaHQiXSxRYT1bIlRvcCIsIkJvdHRvbSJdLFcsR2EsYWEsbGI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtjLmZuLmNzcz1mdW5jdGlvbihhLGIpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yJiZiPT09QilyZXR1cm4gdGhpcztyZXR1cm4gYy5hY2Nlc3ModGhpcyxhLGIsdHJ1ZSxmdW5jdGlvbihkLGUsZil7cmV0dXJuIGYhPT1CP2Muc3R5bGUoZCxlLGYpOmMuY3NzKGQsZSl9KX07Yy5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgZD1XKGEsIm9wYWNpdHkiLCJvcGFjaXR5Iik7cmV0dXJuIGQ9PT0iIj8iMSI6ZH1lbHNlIHJldHVybiBhLnN0eWxlLm9wYWNpdHl9fX0sY3NzTnVtYmVyOnt6SW5kZXg6dHJ1ZSxmb250V2VpZ2h0OnRydWUsb3BhY2l0eTp0cnVlLHpvb206dHJ1ZSxsaW5lSGVpZ2h0OnRydWV9LGNzc1Byb3BzOnsiZmxvYXQiOmMuc3VwcG9ydC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoISghYXx8YS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04fHwhYS5zdHlsZSkpe3ZhciBmLGg9Yy5jYW1lbENhc2UoYiksbD1hLnN0eWxlLGs9Yy5jc3NIb29rc1toXTtiPWMuY3NzUHJvcHNbaF18fGg7aWYoZCE9PUIpe2lmKCEodHlwZW9mIGQ9PT0ibnVtYmVyIiYmaXNOYU4oZCl8fGQ9PW51bGwpKXtpZih0eXBlb2YgZD09PSJudW1iZXIiJiYhYy5jc3NOdW1iZXJbaF0pZCs9InB4IjtpZigha3x8ISgic2V0ImluIGspfHwoZD1rLnNldChhLGQpKSE9PUIpdHJ5e2xbYl09ZH1jYXRjaChvKXt9fX1lbHNle2lmKGsmJiJnZXQiaW4gayYmKGY9ay5nZXQoYSxmYWxzZSxlKSkhPT1CKXJldHVybiBmO3JldHVybiBsW2JdfX19LGNzczpmdW5jdGlvbihhLGIsZCl7dmFyIGUsZj1jLmNhbWVsQ2FzZShiKSxoPWMuY3NzSG9va3NbZl07Yj1jLmNzc1Byb3BzW2ZdfHxmO2lmKGgmJiJnZXQiaW4gaCYmKGU9aC5nZXQoYSx0cnVlLGQpKSE9PUIpcmV0dXJuIGU7ZWxzZSBpZihXKXJldHVybiBXKGEsYixmKX0sc3dhcDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9e30sZjtmb3IoZiBpbiBiKXtlW2ZdPWEuc3R5bGVbZl07YS5zdHlsZVtmXT1iW2ZdfWQuY2FsbChhKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09ZVtmXX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoaGIsbGIpfX0pO2MuY3VyQ1NTPWMuY3NzO2MuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtjLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oZCxlLGYpe3ZhciBoO2lmKGUpe2lmKGQub2Zmc2V0V2lkdGghPT0wKWg9b2EoZCxiLGYpO2Vsc2UgYy5zd2FwKGQsa2IsZnVuY3Rpb24oKXtoPW9hKGQsYixmKX0pO2lmKGg8PTApe2g9VyhkLGIsYik7aWYoaD09PSIwcHgiJiZhYSloPWFhKGQsYixiKTtpZihoIT1udWxsKXJldHVybiBoPT09IiJ8fGg9PT0iYXV0byI/IjBweCI6aH1pZihoPDB8fGg9PW51bGwpe2g9ZC5zdHlsZVtiXTtyZXR1cm4gaD09PSIifHxoPT09ImF1dG8iPyIwcHgiOmh9cmV0dXJuIHR5cGVvZiBoPT09InN0cmluZyI/aDpoKyJweCJ9fSxzZXQ6ZnVuY3Rpb24oZCxlKXtpZihGYS50ZXN0KGUpKXtlPXBhcnNlRmxvYXQoZSk7aWYoZT49MClyZXR1cm4gZSsicHgifWVsc2UgcmV0dXJuIGV9fX0pO2lmKCFjLnN1cHBvcnQub3BhY2l0eSljLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiBnYi50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHwiIik/cGFyc2VGbG9hdChSZWdFeHAuJDEpLzEwMCsiIjpiPyIxIjoiIn0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5zdHlsZTtkLnpvb209MTt2YXIgZT1jLmlzTmFOKGIpPyIiOiJhbHBoYShvcGFjaXR5PSIrYioxMDArIikiLGY9ZC5maWx0ZXJ8fCIiO2QuZmlsdGVyPUVhLnRlc3QoZik/Zi5yZXBsYWNlKEVhLGUpOmQuZmlsdGVyKyIgIitlfX07aWYodC5kZWZhdWx0VmlldyYmdC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKUdhPWZ1bmN0aW9uKGEsYixkKXt2YXIgZTtkPWQucmVwbGFjZShpYiwiLSQxIikudG9Mb3dlckNhc2UoKTtpZighKGI9YS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSlyZXR1cm4gQjtpZihiPWIuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKXtlPWIuZ2V0UHJvcGVydHlWYWx1ZShkKTtpZihlPT09IiImJiFjLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsYSkpZT1jLnN0eWxlKGEsZCl9cmV0dXJuIGV9O2lmKHQuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSlhYT1mdW5jdGlvbihhLGIpe3ZhciBkLGUsZj1hLmN1cnJlbnRTdHlsZSYmYS5jdXJyZW50U3R5bGVbYl0saD1hLnN0eWxlO2lmKCFGYS50ZXN0KGYpJiZqYi50ZXN0KGYpKXtkPWgubGVmdDtlPWEucnVudGltZVN0eWxlLmxlZnQ7YS5ydW50aW1lU3R5bGUubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0O2gubGVmdD1iPT09ImZvbnRTaXplIj8iMWVtIjpmfHwwO2Y9aC5waXhlbExlZnQrInB4IjtoLmxlZnQ9ZDthLnJ1bnRpbWVTdHlsZS5sZWZ0PWV9cmV0dXJuIGY9PT0iIj8iYXV0byI6Zn07Vz1HYXx8YWE7aWYoYy5leHByJiZjLmV4cHIuZmlsdGVycyl7Yy5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3ZhciBiPWEub2Zmc2V0SGVpZ2h0O3JldHVybiBhLm9mZnNldFdpZHRoPT09MCYmYj09PTB8fCFjLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzJiYoYS5zdHlsZS5kaXNwbGF5fHxjLmNzcyhhLCJkaXNwbGF5IikpPT09Im5vbmUifTtjLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFjLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9fXZhciBtYj1jLm5vdygpLG5iPS88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdD4pPFtePF0qKSo8XC9zY3JpcHQ+L2dpLG9iPS9eKD86c2VsZWN0fHRleHRhcmVhKS9pLHBiPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxlbWFpbHxoaWRkZW58bW9udGh8bnVtYmVyfHBhc3N3b3JkfHJhbmdlfHNlYXJjaHx0ZWx8dGV4dHx0aW1lfHVybHx3ZWVrKSQvaSxxYj0vXig/OkdFVHxIRUFEKSQvLFJhPS9cW1xdJC8sVD0vXD1cPygmfCQpLyxqYT0vXD8vLHJiPS8oWz8mXSlfPVteJl0qLyxzYj0vXihcdys6KT9cL1wvKFteXC8/I10rKS8sdGI9LyUyMC9nLHViPS8jLiokLyxIYT1jLmZuLmxvYWQ7Yy5mbi5leHRlbmQoe2xvYWQ6ZnVuY3Rpb24oYSxiLGQpe2lmKHR5cGVvZiBhIT09InN0cmluZyImJkhhKXJldHVybiBIYS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxzZSBpZighdGhpcy5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIGU9YS5pbmRleE9mKCIgIik7aWYoZT49MCl7dmFyIGY9YS5zbGljZShlLGEubGVuZ3RoKTthPWEuc2xpY2UoMCxlKX1lPSJHRVQiO2lmKGIpaWYoYy5pc0Z1bmN0aW9uKGIpKXtkPWI7Yj1udWxsfWVsc2UgaWYodHlwZW9mIGI9PT0ib2JqZWN0Iil7Yj1jLnBhcmFtKGIsYy5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpO2U9IlBPU1QifXZhciBoPXRoaXM7Yy5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6Imh0bWwiLGRhdGE6Yixjb21wbGV0ZTpmdW5jdGlvbihsLGspe2lmKGs9PT0ic3VjY2VzcyJ8fGs9PT0ibm90bW9kaWZpZWQiKWguaHRtbChmP2MoIjxkaXY+IikuYXBwZW5kKGwucmVzcG9uc2VUZXh0LnJlcGxhY2UobmIsIiIpKS5maW5kKGYpOmwucmVzcG9uc2VUZXh0KTtkJiZoLmVhY2goZCxbbC5yZXNwb25zZVRleHQsayxsXSl9fSk7cmV0dXJuIHRoaXN9LHNlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBjLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudHM/Yy5tYWtlQXJyYXkodGhpcy5lbGVtZW50cyk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUmJiF0aGlzLmRpc2FibGVkJiYodGhpcy5jaGVja2VkfHxvYi50ZXN0KHRoaXMubm9kZU5hbWUpfHxwYi50ZXN0KHRoaXMudHlwZSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGQ9Yyh0aGlzKS52YWwoKTtyZXR1cm4gZD09bnVsbD9udWxsOmMuaXNBcnJheShkKT9jLm1hcChkLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTplfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpkfX0pLmdldCgpfX0pO2MuZWFjaCgiYWpheFN0YXJ0IGFqYXhTdG9wIGFqYXhDb21wbGV0ZSBhamF4RXJyb3IgYWpheFN1Y2Nlc3MgYWpheFNlbmQiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQpe3JldHVybiB0aGlzLmJpbmQoYixkKX19KTtjLmV4dGVuZCh7Z2V0OmZ1bmN0aW9uKGEsYixkLGUpe2lmKGMuaXNGdW5jdGlvbihiKSl7ZT1lfHxkO2Q9YjtiPW51bGx9cmV0dXJuIGMuYWpheCh7dHlwZToiR0VUIix1cmw6YSxkYXRhOmIsc3VjY2VzczpkLGRhdGFUeXBlOmV9KX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuZ2V0KGEsbnVsbCxiLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZ2V0KGEsYixkLCJqc29uIil9LHBvc3Q6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoYy5pc0Z1bmN0aW9uKGIpKXtlPWV8fGQ7ZD1iO2I9e319cmV0dXJuIGMuYWpheCh7dHlwZToiUE9TVCIsdXJsOmEsZGF0YTpiLHN1Y2Nlc3M6ZCxkYXRhVHlwZTplfSl9LGFqYXhTZXR1cDpmdW5jdGlvbihhKXtjLmV4dGVuZChjLmFqYXhTZXR0aW5ncyxhKX0sYWpheFNldHRpbmdzOnt1cmw6bG9jYXRpb24uaHJlZixnbG9iYWw6dHJ1ZSx0eXBlOiJHRVQiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLHByb2Nlc3NEYXRhOnRydWUsYXN5bmM6dHJ1ZSx4aHI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEUuWE1MSHR0cFJlcXVlc3R9LGFjY2VwdHM6e3htbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsaHRtbDoidGV4dC9odG1sIixzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0Iix0ZXh0OiJ0ZXh0L3BsYWluIixfZGVmYXVsdDoiKi8qIn19LGFqYXg6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5leHRlbmQodHJ1ZSx7fSxjLmFqYXhTZXR0aW5ncyxhKSxkLGUsZixoPWIudHlwZS50b1VwcGVyQ2FzZSgpLGw9cWIudGVzdChoKTtiLnVybD1iLnVybC5yZXBsYWNlKHViLCIiKTtiLmNvbnRleHQ9YSYmYS5jb250ZXh0IT1udWxsP2EuY29udGV4dDpiO2lmKGIuZGF0YSYmYi5wcm9jZXNzRGF0YSYmdHlwZW9mIGIuZGF0YSE9PSJzdHJpbmciKWIuZGF0YT1jLnBhcmFtKGIuZGF0YSxiLnRyYWRpdGlvbmFsKTtpZihiLmRhdGFUeXBlPT09Impzb25wIil7aWYoaD09PSJHRVQiKVQudGVzdChiLnVybCl8fChiLnVybCs9KGphLnRlc3QoYi51cmwpPyImIjoiPyIpKyhiLmpzb25wfHwiY2FsbGJhY2siKSsiPT8iKTtlbHNlIGlmKCFiLmRhdGF8fCFULnRlc3QoYi5kYXRhKSliLmRhdGE9KGIuZGF0YT9iLmRhdGErIiYiOiIiKSsoYi5qc29ucHx8ImNhbGxiYWNrIikrIj0/IjtiLmRhdGFUeXBlPSJqc29uIn1pZihiLmRhdGFUeXBlPT09Impzb24iJiYoYi5kYXRhJiZULnRlc3QoYi5kYXRhKXx8VC50ZXN0KGIudXJsKSkpe2Q9Yi5qc29ucENhbGxiYWNrfHwianNvbnAiK21iKys7aWYoYi5kYXRhKWIuZGF0YT0oYi5kYXRhKyIiKS5yZXBsYWNlKFQsIj0iK2QrIiQxIik7Yi51cmw9Yi51cmwucmVwbGFjZShULCI9IitkKyIkMSIpO2IuZGF0YVR5cGU9InNjcmlwdCI7dmFyIGs9RVtkXTtFW2RdPWZ1bmN0aW9uKG0pe2lmKGMuaXNGdW5jdGlvbihrKSlrKG0pO2Vsc2V7RVtkXT1CO3RyeXtkZWxldGUgRVtkXX1jYXRjaChwKXt9fWY9bTtjLmhhbmRsZVN1Y2Nlc3MoYix3LGUsZik7Yy5oYW5kbGVDb21wbGV0ZShiLHcsZSxmKTtyJiZyLnJlbW92ZUNoaWxkKEEpfX1pZihiLmRhdGFUeXBlPT09InNjcmlwdCImJmIuY2FjaGU9PT1udWxsKWIuY2FjaGU9ZmFsc2U7aWYoYi5jYWNoZT09PWZhbHNlJiZsKXt2YXIgbz1jLm5vdygpLHg9Yi51cmwucmVwbGFjZShyYiwiJDFfPSIrbyk7Yi51cmw9eCsoeD09PWIudXJsPyhqYS50ZXN0KGIudXJsKT8iJiI6Ij8iKSsiXz0iK286IiIpfWlmKGIuZGF0YSYmbCliLnVybCs9KGphLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuZGF0YTtiLmdsb2JhbCYmYy5hY3RpdmUrKz09PTAmJmMuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iik7bz0obz1zYi5leGVjKGIudXJsKSkmJihvWzFdJiZvWzFdLnRvTG93ZXJDYXNlKCkhPT1sb2NhdGlvbi5wcm90b2NvbHx8b1syXS50b0xvd2VyQ2FzZSgpIT09bG9jYXRpb24uaG9zdCk7aWYoYi5kYXRhVHlwZT09PSJzY3JpcHQiJiZoPT09IkdFVCImJm8pe3ZhciByPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXXx8dC5kb2N1bWVudEVsZW1lbnQsQT10LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKGIuc2NyaXB0Q2hhcnNldClBLmNoYXJzZXQ9Yi5zY3JpcHRDaGFyc2V0O0Euc3JjPWIudXJsO2lmKCFkKXt2YXIgQz1mYWxzZTtBLm9ubG9hZD1BLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKCFDJiYoIXRoaXMucmVhZHlTdGF0ZXx8dGhpcy5yZWFkeVN0YXRlPT09ImxvYWRlZCJ8fHRoaXMucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpKXtDPXRydWU7Yy5oYW5kbGVTdWNjZXNzKGIsdyxlLGYpO2MuaGFuZGxlQ29tcGxldGUoYix3LGUsZik7QS5vbmxvYWQ9QS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtyJiZBLnBhcmVudE5vZGUmJnIucmVtb3ZlQ2hpbGQoQSl9fX1yLmluc2VydEJlZm9yZShBLHIuZmlyc3RDaGlsZCk7cmV0dXJuIEJ9dmFyIEo9ZmFsc2Usdz1iLnhocigpO2lmKHcpe2IudXNlcm5hbWU/dy5vcGVuKGgsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpOncub3BlbihoLGIudXJsLGIuYXN5bmMpO3RyeXtpZihiLmRhdGEhPW51bGwmJiFsfHxhJiZhLmNvbnRlbnRUeXBlKXcuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixiLmNvbnRlbnRUeXBlKTtpZihiLmlmTW9kaWZpZWQpe2MubGFzdE1vZGlmaWVkW2IudXJsXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsYy5sYXN0TW9kaWZpZWRbYi51cmxdKTtjLmV0YWdbYi51cmxdJiZ3LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLGMuZXRhZ1tiLnVybF0pfW98fHcuc2V0UmVxdWVzdEhlYWRlcigiWC1SZXF1ZXN0ZWQtV2l0aCIsIlhNTEh0dHBSZXF1ZXN0Iik7dy5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGIuZGF0YVR5cGUmJmIuYWNjZXB0c1tiLmRhdGFUeXBlXT9iLmFjY2VwdHNbYi5kYXRhVHlwZV0rIiwgKi8qOyBxPTAuMDEiOmIuYWNjZXB0cy5fZGVmYXVsdCl9Y2F0Y2goSSl7fWlmKGIuYmVmb3JlU2VuZCYmYi5iZWZvcmVTZW5kLmNhbGwoYi5jb250ZXh0LHcsYik9PT1mYWxzZSl7Yi5nbG9iYWwmJmMuYWN0aXZlLS09PT0xJiZjLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIik7dy5hYm9ydCgpO3JldHVybiBmYWxzZX1iLmdsb2JhbCYmYy50cmlnZ2VyR2xvYmFsKGIsImFqYXhTZW5kIixbdyxiXSk7dmFyIEw9dy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24obSl7aWYoIXd8fHcucmVhZHlTdGF0ZT09PTB8fG09PT0iYWJvcnQiKXtKfHxjLmhhbmRsZUNvbXBsZXRlKGIsdyxlLGYpO0o9dHJ1ZTtpZih3KXcub25yZWFkeXN0YXRlY2hhbmdlPWMubm9vcH1lbHNlIGlmKCFKJiZ3JiYody5yZWFkeVN0YXRlPT09NHx8bT09PSJ0aW1lb3V0Iikpe0o9dHJ1ZTt3Lm9ucmVhZHlzdGF0ZWNoYW5nZT1jLm5vb3A7ZT1tPT09InRpbWVvdXQiPyJ0aW1lb3V0IjohYy5odHRwU3VjY2Vzcyh3KT8iZXJyb3IiOmIuaWZNb2RpZmllZCYmYy5odHRwTm90TW9kaWZpZWQodyxiLnVybCk/Im5vdG1vZGlmaWVkIjoic3VjY2VzcyI7dmFyIHA7aWYoZT09PSJzdWNjZXNzIil0cnl7Zj1jLmh0dHBEYXRhKHcsYi5kYXRhVHlwZSxiKX1jYXRjaChxKXtlPSJwYXJzZXJlcnJvciI7cD1xfWlmKGU9PT0ic3VjY2VzcyJ8fGU9PT0ibm90bW9kaWZpZWQiKWR8fGMuaGFuZGxlU3VjY2VzcyhiLHcsZSxmKTtlbHNlIGMuaGFuZGxlRXJyb3IoYix3LGUscCk7ZHx8Yy5oYW5kbGVDb21wbGV0ZShiLHcsZSxmKTttPT09InRpbWVvdXQiJiZ3LmFib3J0KCk7aWYoYi5hc3luYyl3PW51bGx9fTt0cnl7dmFyIGc9dy5hYm9ydDt3LmFib3J0PWZ1bmN0aW9uKCl7dyYmRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwuY2FsbChnLHcpO0woImFib3J0Iil9fWNhdGNoKGkpe31iLmFzeW5jJiZiLnRpbWVvdXQ+MCYmc2V0VGltZW91dChmdW5jdGlvbigpe3cmJiFKJiZMKCJ0aW1lb3V0Iil9LGIudGltZW91dCk7dHJ5e3cuc2VuZChsfHxiLmRhdGE9PW51bGw/bnVsbDpiLmRhdGEpfWNhdGNoKG4pe2MuaGFuZGxlRXJyb3IoYix3LG51bGwsbik7Yy5oYW5kbGVDb21wbGV0ZShiLHcsZSxmKX1iLmFzeW5jfHxMKCk7cmV0dXJuIHd9fSxwYXJhbTpmdW5jdGlvbihhLGIpe3ZhciBkPVtdLGU9ZnVuY3Rpb24oaCxsKXtsPWMuaXNGdW5jdGlvbihsKT9sKCk6bDtkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoaCkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChsKX07aWYoYj09PUIpYj1jLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDtpZihjLmlzQXJyYXkoYSl8fGEuanF1ZXJ5KWMuZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcih2YXIgZiBpbiBhKWRhKGYsYVtmXSxiLGUpO3JldHVybiBkLmpvaW4oIiYiKS5yZXBsYWNlKHRiLCIrIil9fSk7Yy5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGhhbmRsZUVycm9yOmZ1bmN0aW9uKGEsYixkLGUpe2EuZXJyb3ImJmEuZXJyb3IuY2FsbChhLmNvbnRleHQsYixkLGUpO2EuZ2xvYmFsJiZjLnRyaWdnZXJHbG9iYWwoYSwiYWpheEVycm9yIixbYixhLGVdKX0saGFuZGxlU3VjY2VzczpmdW5jdGlvbihhLGIsZCxlKXthLnN1Y2Nlc3MmJmEuc3VjY2Vzcy5jYWxsKGEuY29udGV4dCxlLGQsYik7YS5nbG9iYWwmJmMudHJpZ2dlckdsb2JhbChhLCJhamF4U3VjY2VzcyIsW2IsYV0pfSxoYW5kbGVDb21wbGV0ZTpmdW5jdGlvbihhLGIsZCl7YS5jb21wbGV0ZSYmYS5jb21wbGV0ZS5jYWxsKGEuY29udGV4dCxiLGQpO2EuZ2xvYmFsJiZjLnRyaWdnZXJHbG9iYWwoYSwiYWpheENvbXBsZXRlIixbYixhXSk7YS5nbG9iYWwmJmMuYWN0aXZlLS09PT0xJiZjLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9LHRyaWdnZXJHbG9iYWw6ZnVuY3Rpb24oYSxiLGQpeyhhLmNvbnRleHQmJmEuY29udGV4dC51cmw9PW51bGw/YyhhLmNvbnRleHQpOmMuZXZlbnQpLnRyaWdnZXIoYixkKX0saHR0cFN1Y2Nlc3M6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiFhLnN0YXR1cyYmbG9jYXRpb24ucHJvdG9jb2w9PT0iZmlsZToifHxhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fGEuc3RhdHVzPT09MzA0fHxhLnN0YXR1cz09PTEyMjN9Y2F0Y2goYil7fXJldHVybiBmYWxzZX0saHR0cE5vdE1vZGlmaWVkOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLGU9YS5nZXRSZXNwb25zZUhlYWRlcigiRXRhZyIpO2lmKGQpYy5sYXN0TW9kaWZpZWRbYl09ZDtpZihlKWMuZXRhZ1tiXT1lO3JldHVybiBhLnN0YXR1cz09PTMwNH0saHR0cERhdGE6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEuZ2V0UmVzcG9uc2VIZWFkZXIoImNvbnRlbnQtdHlwZSIpfHwiIixmPWI9PT0ieG1sInx8IWImJmUuaW5kZXhPZigieG1sIik+PTA7YT1mP2EucmVzcG9uc2VYTUw6YS5yZXNwb25zZVRleHQ7ZiYmYS5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWU9PT0icGFyc2VyZXJyb3IiJiZjLmVycm9yKCJwYXJzZXJlcnJvciIpO2lmKGQmJmQuZGF0YUZpbHRlcilhPWQuZGF0YUZpbHRlcihhLGIpO2lmKHR5cGVvZiBhPT09InN0cmluZyIpaWYoYj09PSJqc29uInx8IWImJmUuaW5kZXhPZigianNvbiIpPj0wKWE9Yy5wYXJzZUpTT04oYSk7ZWxzZSBpZihiPT09InNjcmlwdCJ8fCFiJiZlLmluZGV4T2YoImphdmFzY3JpcHQiKT49MCljLmdsb2JhbEV2YWwoYSk7cmV0dXJuIGF9fSk7aWYoRS5BY3RpdmVYT2JqZWN0KWMuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe2lmKEUubG9jYXRpb24ucHJvdG9jb2whPT0iZmlsZToiKXRyeXtyZXR1cm4gbmV3IEUuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYSl7fXRyeXtyZXR1cm4gbmV3IEUuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fTtjLnN1cHBvcnQuYWpheD0hIWMuYWpheFNldHRpbmdzLnhocigpO3ZhciBlYT17fSx2Yj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sd2I9L14oWytcLV09KT8oW1xkKy5cLV0rKSguKikkLyxiYSxwYT1bWyJoZWlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSJdLFsid2lkdGgiLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCJdLFsib3BhY2l0eSJdXTtjLmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbihhLGIsZCl7aWYoYXx8YT09PTApcmV0dXJuIHRoaXMuYW5pbWF0ZShTKCJzaG93IiwzKSxhLGIsZCk7ZWxzZXtkPTA7Zm9yKHZhciBlPXRoaXMubGVuZ3RoO2Q8ZTtkKyspe2E9dGhpc1tkXTtiPWEuc3R5bGUuZGlzcGxheTtpZighYy5kYXRhKGEsIm9sZGRpc3BsYXkiKSYmYj09PSJub25lIiliPWEuc3R5bGUuZGlzcGxheT0iIjtiPT09IiImJmMuY3NzKGEsImRpc3BsYXkiKT09PSJub25lIiYmYy5kYXRhKGEsIm9sZGRpc3BsYXkiLHFhKGEubm9kZU5hbWUpKX1mb3IoZD0wO2Q8ZTtkKyspe2E9dGhpc1tkXTtiPWEuc3R5bGUuZGlzcGxheTtpZihiPT09IiJ8fGI9PT0ibm9uZSIpYS5zdHlsZS5kaXNwbGF5PWMuZGF0YShhLCJvbGRkaXNwbGF5Iil8fCIifXJldHVybiB0aGlzfX0saGlkZTpmdW5jdGlvbihhLGIsZCl7aWYoYXx8YT09PTApcmV0dXJuIHRoaXMuYW5pbWF0ZShTKCJoaWRlIiwzKSxhLGIsZCk7ZWxzZXthPTA7Zm9yKGI9dGhpcy5sZW5ndGg7YTxiO2ErKyl7ZD1jLmNzcyh0aGlzW2FdLCJkaXNwbGF5Iik7ZCE9PSJub25lIiYmYy5kYXRhKHRoaXNbYV0sIm9sZGRpc3BsYXkiLGQpfWZvcihhPTA7YTxiO2ErKyl0aGlzW2FdLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3JldHVybiB0aGlzfX0sX3RvZ2dsZTpjLmZuLnRvZ2dsZSx0b2dnbGU6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXR5cGVvZiBhPT09ImJvb2xlYW4iO2lmKGMuaXNGdW5jdGlvbihhKSYmYy5pc0Z1bmN0aW9uKGIpKXRoaXMuX3RvZ2dsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxzZSBhPT1udWxsfHxlP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBmPWU/YTpjKHRoaXMpLmlzKCI6aGlkZGVuIik7Yyh0aGlzKVtmPyJzaG93IjoiaGlkZSJdKCl9KTp0aGlzLmFuaW1hdGUoUygidG9nZ2xlIiwzKSxhLGIsZCk7cmV0dXJuIHRoaXN9LGZhZGVUbzpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gdGhpcy5maWx0ZXIoIjpoaWRkZW4iKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsZCxlKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1jLnNwZWVkKGIsZCxlKTtpZihjLmlzRW1wdHlPYmplY3QoYSkpcmV0dXJuIHRoaXMuZWFjaChmLmNvbXBsZXRlKTtyZXR1cm4gdGhpc1tmLnF1ZXVlPT09ZmFsc2U/ImVhY2giOiJxdWV1ZSJdKGZ1bmN0aW9uKCl7dmFyIGg9Yy5leHRlbmQoe30sZiksbCxrPXRoaXMubm9kZVR5cGU9PT0xLG89ayYmYyh0aGlzKS5pcygiOmhpZGRlbiIpLHg9dGhpcztmb3IobCBpbiBhKXt2YXIgcj1jLmNhbWVsQ2FzZShsKTtpZihsIT09cil7YVtyXT1hW2xdO2RlbGV0ZSBhW2xdO2w9cn1pZihhW2xdPT09ImhpZGUiJiZvfHxhW2xdPT09InNob3ciJiYhbylyZXR1cm4gaC5jb21wbGV0ZS5jYWxsKHRoaXMpO2lmKGsmJihsPT09ImhlaWdodCJ8fGw9PT0id2lkdGgiKSl7aC5vdmVyZmxvdz1bdGhpcy5zdHlsZS5vdmVyZmxvdyx0aGlzLnN0eWxlLm92ZXJmbG93WCx0aGlzLnN0eWxlLm92ZXJmbG93WV07aWYoYy5jc3ModGhpcywiZGlzcGxheSIpPT09ImlubGluZSImJmMuY3NzKHRoaXMsImZsb2F0Iik9PT0ibm9uZSIpaWYoYy5zdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQpaWYocWEodGhpcy5ub2RlTmFtZSk9PT0iaW5saW5lIil0aGlzLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7ZWxzZXt0aGlzLnN0eWxlLmRpc3BsYXk9ImlubGluZSI7dGhpcy5zdHlsZS56b29tPTF9ZWxzZSB0aGlzLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayJ9aWYoYy5pc0FycmF5KGFbbF0pKXsoaC5zcGVjaWFsRWFzaW5nPWguc3BlY2lhbEVhc2luZ3x8e30pW2xdPWFbbF1bMV07YVtsXT1hW2xdWzBdfX1pZihoLm92ZXJmbG93IT1udWxsKXRoaXMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7aC5jdXJBbmltPWMuZXh0ZW5kKHt9LGEpO2MuZWFjaChhLGZ1bmN0aW9uKEEsQyl7dmFyIEo9bmV3IGMuZngoeCxoLEEpO2lmKHZiLnRlc3QoQykpSltDPT09InRvZ2dsZSI/bz8ic2hvdyI6ImhpZGUiOkNdKGEpO2Vsc2V7dmFyIHc9d2IuZXhlYyhDKSxJPUouY3VyKCl8fDA7aWYodyl7dmFyIEw9cGFyc2VGbG9hdCh3WzJdKSxnPXdbM118fCJweCI7aWYoZyE9PSJweCIpe2Muc3R5bGUoeCxBLChMfHwxKStnKTtJPShMfHwxKS9KLmN1cigpKkk7Yy5zdHlsZSh4LEEsSStnKX1pZih3WzFdKUw9KHdbMV09PT0iLT0iPy0xOjEpKkwrSTtKLmN1c3RvbShJLEwsZyl9ZWxzZSBKLmN1c3RvbShJLEMsIiIpfX0pO3JldHVybiB0cnVlfSl9LHN0b3A6ZnVuY3Rpb24oYSxiKXt2YXIgZD1jLnRpbWVyczthJiZ0aGlzLnF1ZXVlKFtdKTt0aGlzLmVhY2goZnVuY3Rpb24oKXtmb3IodmFyIGU9ZC5sZW5ndGgtMTtlPj0wO2UtLSlpZihkW2VdLmVsZW09PT10aGlzKXtiJiZkW2VdKHRydWUpO2Quc3BsaWNlKGUsMSl9fSk7Ynx8dGhpcy5kZXF1ZXVlKCk7cmV0dXJuIHRoaXN9fSk7Yy5lYWNoKHtzbGlkZURvd246Uygic2hvdyIsMSksc2xpZGVVcDpTKCJoaWRlIiwxKSxzbGlkZVRvZ2dsZTpTKCJ0b2dnbGUiLDEpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oYSxiKXtjLmZuW2FdPWZ1bmN0aW9uKGQsZSxmKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsZCxlLGYpfX0pO2MuZXh0ZW5kKHtzcGVlZDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9YSYmdHlwZW9mIGE9PT0ib2JqZWN0Ij9jLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6ZHx8IWQmJmJ8fGMuaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpkJiZifHxiJiYhYy5pc0Z1bmN0aW9uKGIpJiZifTtlLmR1cmF0aW9uPWMuZngub2ZmPzA6dHlwZW9mIGUuZHVyYXRpb249PT0ibnVtYmVyIj9lLmR1cmF0aW9uOmUuZHVyYXRpb24gaW4gYy5meC5zcGVlZHM/Yy5meC5zcGVlZHNbZS5kdXJhdGlvbl06Yy5meC5zcGVlZHMuX2RlZmF1bHQ7ZS5vbGQ9ZS5jb21wbGV0ZTtlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7ZS5xdWV1ZSE9PWZhbHNlJiZjKHRoaXMpLmRlcXVldWUoKTtjLmlzRnVuY3Rpb24oZS5vbGQpJiZlLm9sZC5jYWxsKHRoaXMpfTtyZXR1cm4gZX0sZWFzaW5nOntsaW5lYXI6ZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIGQrZSphfSxzd2luZzpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4oLU1hdGguY29zKGEqTWF0aC5QSSkvMiswLjUpKmUrZH19LHRpbWVyczpbXSxmeDpmdW5jdGlvbihhLGIsZCl7dGhpcy5vcHRpb25zPWI7dGhpcy5lbGVtPWE7dGhpcy5wcm9wPWQ7aWYoIWIub3JpZyliLm9yaWc9e319fSk7Yy5meC5wcm90b3R5cGU9e3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKTsoYy5meC5zdGVwW3RoaXMucHJvcF18fGMuZnguc3RlcC5fZGVmYXVsdCkodGhpcyl9LGN1cjpmdW5jdGlvbigpe2lmKHRoaXMuZWxlbVt0aGlzLnByb3BdIT1udWxsJiYoIXRoaXMuZWxlbS5zdHlsZXx8dGhpcy5lbGVtLnN0eWxlW3RoaXMucHJvcF09PW51bGwpKXJldHVybiB0aGlzLmVsZW1bdGhpcy5wcm9wXTt2YXIgYT1wYXJzZUZsb2F0KGMuY3NzKHRoaXMuZWxlbSx0aGlzLnByb3ApKTtyZXR1cm4gYSYmYT4tMUU0P2E6MH0sY3VzdG9tOmZ1bmN0aW9uKGEsYixkKXtmdW5jdGlvbiBlKGwpe3JldHVybiBmLnN0ZXAobCl9CnZhciBmPXRoaXMsaD1jLmZ4O3RoaXMuc3RhcnRUaW1lPWMubm93KCk7dGhpcy5zdGFydD1hO3RoaXMuZW5kPWI7dGhpcy51bml0PWR8fHRoaXMudW5pdHx8InB4Ijt0aGlzLm5vdz10aGlzLnN0YXJ0O3RoaXMucG9zPXRoaXMuc3RhdGU9MDtlLmVsZW09dGhpcy5lbGVtO2lmKGUoKSYmYy50aW1lcnMucHVzaChlKSYmIWJhKWJhPXNldEludGVydmFsKGgudGljayxoLmludGVydmFsKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5vcmlnW3RoaXMucHJvcF09Yy5zdHlsZSh0aGlzLmVsZW0sdGhpcy5wcm9wKTt0aGlzLm9wdGlvbnMuc2hvdz10cnVlO3RoaXMuY3VzdG9tKHRoaXMucHJvcD09PSJ3aWR0aCJ8fHRoaXMucHJvcD09PSJoZWlnaHQiPzE6MCx0aGlzLmN1cigpKTtjKHRoaXMuZWxlbSkuc2hvdygpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9yaWdbdGhpcy5wcm9wXT1jLnN0eWxlKHRoaXMuZWxlbSx0aGlzLnByb3ApO3RoaXMub3B0aW9ucy5oaWRlPXRydWU7dGhpcy5jdXN0b20odGhpcy5jdXIoKSwwKX0sc3RlcDpmdW5jdGlvbihhKXt2YXIgYj1jLm5vdygpLGQ9dHJ1ZTtpZihhfHxiPj10aGlzLm9wdGlvbnMuZHVyYXRpb24rdGhpcy5zdGFydFRpbWUpe3RoaXMubm93PXRoaXMuZW5kO3RoaXMucG9zPXRoaXMuc3RhdGU9MTt0aGlzLnVwZGF0ZSgpO3RoaXMub3B0aW9ucy5jdXJBbmltW3RoaXMucHJvcF09dHJ1ZTtmb3IodmFyIGUgaW4gdGhpcy5vcHRpb25zLmN1ckFuaW0paWYodGhpcy5vcHRpb25zLmN1ckFuaW1bZV0hPT10cnVlKWQ9ZmFsc2U7aWYoZCl7aWYodGhpcy5vcHRpb25zLm92ZXJmbG93IT1udWxsJiYhYy5zdXBwb3J0LnNocmlua1dyYXBCbG9ja3Mpe3ZhciBmPXRoaXMuZWxlbSxoPXRoaXMub3B0aW9ucztjLmVhY2goWyIiLCJYIiwiWSJdLGZ1bmN0aW9uKGssbyl7Zi5zdHlsZVsib3ZlcmZsb3ciK29dPWgub3ZlcmZsb3dba119KX10aGlzLm9wdGlvbnMuaGlkZSYmYyh0aGlzLmVsZW0pLmhpZGUoKTtpZih0aGlzLm9wdGlvbnMuaGlkZXx8dGhpcy5vcHRpb25zLnNob3cpZm9yKHZhciBsIGluIHRoaXMub3B0aW9ucy5jdXJBbmltKWMuc3R5bGUodGhpcy5lbGVtLGwsdGhpcy5vcHRpb25zLm9yaWdbbF0pO3RoaXMub3B0aW9ucy5jb21wbGV0ZS5jYWxsKHRoaXMuZWxlbSl9cmV0dXJuIGZhbHNlfWVsc2V7YT1iLXRoaXMuc3RhcnRUaW1lO3RoaXMuc3RhdGU9YS90aGlzLm9wdGlvbnMuZHVyYXRpb247Yj10aGlzLm9wdGlvbnMuZWFzaW5nfHwoYy5lYXNpbmcuc3dpbmc/InN3aW5nIjoibGluZWFyIik7dGhpcy5wb3M9Yy5lYXNpbmdbdGhpcy5vcHRpb25zLnNwZWNpYWxFYXNpbmcmJnRoaXMub3B0aW9ucy5zcGVjaWFsRWFzaW5nW3RoaXMucHJvcF18fGJdKHRoaXMuc3RhdGUsYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTt0aGlzLm5vdz10aGlzLnN0YXJ0Kyh0aGlzLmVuZC10aGlzLnN0YXJ0KSp0aGlzLnBvczt0aGlzLnVwZGF0ZSgpfXJldHVybiB0cnVlfX07Yy5leHRlbmQoYy5meCx7dGljazpmdW5jdGlvbigpe2Zvcih2YXIgYT1jLnRpbWVycyxiPTA7YjxhLmxlbmd0aDtiKyspYVtiXSgpfHxhLnNwbGljZShiLS0sMSk7YS5sZW5ndGh8fGMuZnguc3RvcCgpfSxpbnRlcnZhbDoxMyxzdG9wOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChiYSk7YmE9bnVsbH0sc3BlZWRzOntzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHN0ZXA6e29wYWNpdHk6ZnVuY3Rpb24oYSl7Yy5zdHlsZShhLmVsZW0sIm9wYWNpdHkiLGEubm93KX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7aWYoYS5lbGVtLnN0eWxlJiZhLmVsZW0uc3R5bGVbYS5wcm9wXSE9bnVsbClhLmVsZW0uc3R5bGVbYS5wcm9wXT0oYS5wcm9wPT09IndpZHRoInx8YS5wcm9wPT09ImhlaWdodCI/TWF0aC5tYXgoMCxhLm5vdyk6YS5ub3cpK2EudW5pdDtlbHNlIGEuZWxlbVthLnByb3BdPWEubm93fX19KTtpZihjLmV4cHImJmMuZXhwci5maWx0ZXJzKWMuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBjLmdyZXAoYy50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciB4Yj0vXnQoPzphYmxlfGR8aCkkL2ksSWE9L14oPzpib2R5fGh0bWwpJC9pO2MuZm4ub2Zmc2V0PSJnZXRCb3VuZGluZ0NsaWVudFJlY3QiaW4gdC5kb2N1bWVudEVsZW1lbnQ/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXSxkO2lmKGEpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihsKXtjLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGwpfSk7aWYoIWJ8fCFiLm93bmVyRG9jdW1lbnQpcmV0dXJuIG51bGw7aWYoYj09PWIub3duZXJEb2N1bWVudC5ib2R5KXJldHVybiBjLm9mZnNldC5ib2R5T2Zmc2V0KGIpO3RyeXtkPWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9Y2F0Y2goZSl7fXZhciBmPWIub3duZXJEb2N1bWVudCxoPWYuZG9jdW1lbnRFbGVtZW50O2lmKCFkfHwhYy5jb250YWlucyhoLGIpKXJldHVybiBkfHx7dG9wOjAsbGVmdDowfTtiPWYuYm9keTtmPWZhKGYpO3JldHVybnt0b3A6ZC50b3ArKGYucGFnZVlPZmZzZXR8fGMuc3VwcG9ydC5ib3hNb2RlbCYmaC5zY3JvbGxUb3B8fGIuc2Nyb2xsVG9wKS0oaC5jbGllbnRUb3B8fGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoZi5wYWdlWE9mZnNldHx8Yy5zdXBwb3J0LmJveE1vZGVsJiZoLnNjcm9sbExlZnR8fGIuc2Nyb2xsTGVmdCktKGguY2xpZW50TGVmdHx8Yi5jbGllbnRMZWZ0fHwwKX19OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF07aWYoYSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHgpe2Mub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEseCl9KTtpZighYnx8IWIub3duZXJEb2N1bWVudClyZXR1cm4gbnVsbDtpZihiPT09Yi5vd25lckRvY3VtZW50LmJvZHkpcmV0dXJuIGMub2Zmc2V0LmJvZHlPZmZzZXQoYik7Yy5vZmZzZXQuaW5pdGlhbGl6ZSgpO3ZhciBkLGU9Yi5vZmZzZXRQYXJlbnQsZj1iLm93bmVyRG9jdW1lbnQsaD1mLmRvY3VtZW50RWxlbWVudCxsPWYuYm9keTtkPShmPWYuZGVmYXVsdFZpZXcpP2YuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmIuY3VycmVudFN0eWxlO2Zvcih2YXIgaz1iLm9mZnNldFRvcCxvPWIub2Zmc2V0TGVmdDsoYj1iLnBhcmVudE5vZGUpJiZiIT09bCYmYiE9PWg7KXtpZihjLm9mZnNldC5zdXBwb3J0c0ZpeGVkUG9zaXRpb24mJmQucG9zaXRpb249PT0iZml4ZWQiKWJyZWFrO2Q9Zj9mLmdldENvbXB1dGVkU3R5bGUoYixudWxsKTpiLmN1cnJlbnRTdHlsZTtrLT1iLnNjcm9sbFRvcDtvLT1iLnNjcm9sbExlZnQ7aWYoYj09PWUpe2srPWIub2Zmc2V0VG9wO28rPWIub2Zmc2V0TGVmdDtpZihjLm9mZnNldC5kb2VzTm90QWRkQm9yZGVyJiYhKGMub2Zmc2V0LmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzJiZ4Yi50ZXN0KGIubm9kZU5hbWUpKSl7ays9cGFyc2VGbG9hdChkLmJvcmRlclRvcFdpZHRoKXx8MDtvKz1wYXJzZUZsb2F0KGQuYm9yZGVyTGVmdFdpZHRoKXx8MH1lPWIub2Zmc2V0UGFyZW50fWlmKGMub2Zmc2V0LnN1YnRyYWN0c0JvcmRlckZvck92ZXJmbG93Tm90VmlzaWJsZSYmZC5vdmVyZmxvdyE9PSJ2aXNpYmxlIil7ays9cGFyc2VGbG9hdChkLmJvcmRlclRvcFdpZHRoKXx8MDtvKz1wYXJzZUZsb2F0KGQuYm9yZGVyTGVmdFdpZHRoKXx8MH1kPWR9aWYoZC5wb3NpdGlvbj09PSJyZWxhdGl2ZSJ8fGQucG9zaXRpb249PT0ic3RhdGljIil7ays9bC5vZmZzZXRUb3A7bys9bC5vZmZzZXRMZWZ0fWlmKGMub2Zmc2V0LnN1cHBvcnRzRml4ZWRQb3NpdGlvbiYmZC5wb3NpdGlvbj09PSJmaXhlZCIpe2srPU1hdGgubWF4KGguc2Nyb2xsVG9wLGwuc2Nyb2xsVG9wKTtvKz1NYXRoLm1heChoLnNjcm9sbExlZnQsbC5zY3JvbGxMZWZ0KX1yZXR1cm57dG9wOmssbGVmdDpvfX07Yy5vZmZzZXQ9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10LmJvZHksYj10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQsZSxmLGg9cGFyc2VGbG9hdChjLmNzcyhhLCJtYXJnaW5Ub3AiKSl8fDA7Yy5leHRlbmQoYi5zdHlsZSx7cG9zaXRpb246ImFic29sdXRlIix0b3A6MCxsZWZ0OjAsbWFyZ2luOjAsYm9yZGVyOjAsd2lkdGg6IjFweCIsaGVpZ2h0OiIxcHgiLHZpc2liaWxpdHk6ImhpZGRlbiJ9KTtiLmlubmVySFRNTD0iPGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO21hcmdpbjowO2JvcmRlcjo1cHggc29saWQgIzAwMDtwYWRkaW5nOjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7Jz48ZGl2PjwvZGl2PjwvZGl2Pjx0YWJsZSBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO21hcmdpbjowO2JvcmRlcjo1cHggc29saWQgIzAwMDtwYWRkaW5nOjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7JyBjZWxscGFkZGluZz0nMCcgY2VsbHNwYWNpbmc9JzAnPjx0cj48dGQ+PC90ZD48L3RyPjwvdGFibGU+IjthLmluc2VydEJlZm9yZShiLGEuZmlyc3RDaGlsZCk7ZD1iLmZpcnN0Q2hpbGQ7ZT1kLmZpcnN0Q2hpbGQ7Zj1kLm5leHRTaWJsaW5nLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZDt0aGlzLmRvZXNOb3RBZGRCb3JkZXI9ZS5vZmZzZXRUb3AhPT01O3RoaXMuZG9lc0FkZEJvcmRlckZvclRhYmxlQW5kQ2VsbHM9Zi5vZmZzZXRUb3A9PT01O2Uuc3R5bGUucG9zaXRpb249ImZpeGVkIjtlLnN0eWxlLnRvcD0iMjBweCI7dGhpcy5zdXBwb3J0c0ZpeGVkUG9zaXRpb249ZS5vZmZzZXRUb3A9PT0yMHx8ZS5vZmZzZXRUb3A9PT0xNTtlLnN0eWxlLnBvc2l0aW9uPWUuc3R5bGUudG9wPSIiO2Quc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7ZC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3RoaXMuc3VidHJhY3RzQm9yZGVyRm9yT3ZlcmZsb3dOb3RWaXNpYmxlPWUub2Zmc2V0VG9wPT09LTU7dGhpcy5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldD1hLm9mZnNldFRvcCE9PWg7YS5yZW1vdmVDaGlsZChiKTtjLm9mZnNldC5pbml0aWFsaXplPWMubm9vcH0sYm9keU9mZnNldDpmdW5jdGlvbihhKXt2YXIgYj1hLm9mZnNldFRvcCxkPWEub2Zmc2V0TGVmdDtjLm9mZnNldC5pbml0aWFsaXplKCk7aWYoYy5vZmZzZXQuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQpe2IrPXBhcnNlRmxvYXQoYy5jc3MoYSwibWFyZ2luVG9wIikpfHwwO2QrPXBhcnNlRmxvYXQoYy5jc3MoYSwibWFyZ2luTGVmdCIpKXx8MH1yZXR1cm57dG9wOmIsbGVmdDpkfX0sc2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1jLmNzcyhhLCJwb3NpdGlvbiIpO2lmKGU9PT0ic3RhdGljIilhLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7dmFyIGY9YyhhKSxoPWYub2Zmc2V0KCksbD1jLmNzcyhhLCJ0b3AiKSxrPWMuY3NzKGEsImxlZnQiKSxvPWU9PT0iYWJzb2x1dGUiJiZjLmluQXJyYXkoImF1dG8iLFtsLGtdKT4tMTtlPXt9O3ZhciB4PXt9O2lmKG8peD1mLnBvc2l0aW9uKCk7bD1vP3gudG9wOnBhcnNlSW50KGwsMTApfHwwO2s9bz94LmxlZnQ6cGFyc2VJbnQoaywxMCl8fDA7aWYoYy5pc0Z1bmN0aW9uKGIpKWI9Yi5jYWxsKGEsZCxoKTtpZihiLnRvcCE9bnVsbCllLnRvcD1iLnRvcC1oLnRvcCtsO2lmKGIubGVmdCE9bnVsbCllLmxlZnQ9Yi5sZWZ0LWgubGVmdCtrOyJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLGUpOmYuY3NzKGUpfX07Yy5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXNbMF0pcmV0dXJuIG51bGw7dmFyIGE9dGhpc1swXSxiPXRoaXMub2Zmc2V0UGFyZW50KCksZD10aGlzLm9mZnNldCgpLGU9SWEudGVzdChiWzBdLm5vZGVOYW1lKT97dG9wOjAsbGVmdDowfTpiLm9mZnNldCgpO2QudG9wLT1wYXJzZUZsb2F0KGMuY3NzKGEsIm1hcmdpblRvcCIpKXx8MDtkLmxlZnQtPXBhcnNlRmxvYXQoYy5jc3MoYSwibWFyZ2luTGVmdCIpKXx8MDtlLnRvcCs9cGFyc2VGbG9hdChjLmNzcyhiWzBdLCJib3JkZXJUb3BXaWR0aCIpKXx8MDtlLmxlZnQrPXBhcnNlRmxvYXQoYy5jc3MoYlswXSwiYm9yZGVyTGVmdFdpZHRoIikpfHwwO3JldHVybnt0b3A6ZC50b3AtZS50b3AsbGVmdDpkLmxlZnQtZS5sZWZ0fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHx0LmJvZHk7YSYmIUlhLnRlc3QoYS5ub2RlTmFtZSkmJmMuY3NzKGEsInBvc2l0aW9uIik9PT0ic3RhdGljIjspYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYX0pfX0pO2MuZWFjaChbIkxlZnQiLCJUb3AiXSxmdW5jdGlvbihhLGIpe3ZhciBkPSJzY3JvbGwiK2I7Yy5mbltkXT1mdW5jdGlvbihlKXt2YXIgZj10aGlzWzBdLGg7aWYoIWYpcmV0dXJuIG51bGw7aWYoZSE9PUIpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGg9ZmEodGhpcykpaC5zY3JvbGxUbyghYT9lOmMoaCkuc2Nyb2xsTGVmdCgpLGE/ZTpjKGgpLnNjcm9sbFRvcCgpKTtlbHNlIHRoaXNbZF09ZX0pO2Vsc2UgcmV0dXJuKGg9ZmEoZikpPyJwYWdlWE9mZnNldCJpbiBoP2hbYT8icGFnZVlPZmZzZXQiOiJwYWdlWE9mZnNldCJdOmMuc3VwcG9ydC5ib3hNb2RlbCYmaC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbZF18fGguZG9jdW1lbnQuYm9keVtkXTpmW2RdfX0pO2MuZWFjaChbIkhlaWdodCIsIldpZHRoIl0sZnVuY3Rpb24oYSxiKXt2YXIgZD1iLnRvTG93ZXJDYXNlKCk7Yy5mblsiaW5uZXIiK2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbMF0/cGFyc2VGbG9hdChjLmNzcyh0aGlzWzBdLGQsInBhZGRpbmciKSk6bnVsbH07Yy5mblsib3V0ZXIiK2JdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzWzBdP3BhcnNlRmxvYXQoYy5jc3ModGhpc1swXSxkLGU/Im1hcmdpbiI6ImJvcmRlciIpKTpudWxsfTtjLmZuW2RdPWZ1bmN0aW9uKGUpe3ZhciBmPXRoaXNbMF07aWYoIWYpcmV0dXJuIGU9PW51bGw/bnVsbDp0aGlzO2lmKGMuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGwpe3ZhciBrPWModGhpcyk7a1tkXShlLmNhbGwodGhpcyxsLGtbZF0oKSkpfSk7aWYoYy5pc1dpbmRvdyhmKSlyZXR1cm4gZi5kb2N1bWVudC5jb21wYXRNb2RlPT09IkNTUzFDb21wYXQiJiZmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitiXXx8Zi5kb2N1bWVudC5ib2R5WyJjbGllbnQiK2JdO2Vsc2UgaWYoZi5ub2RlVHlwZT09PTkpcmV0dXJuIE1hdGgubWF4KGYuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiKwpiXSxmLmJvZHlbInNjcm9sbCIrYl0sZi5kb2N1bWVudEVsZW1lbnRbInNjcm9sbCIrYl0sZi5ib2R5WyJvZmZzZXQiK2JdLGYuZG9jdW1lbnRFbGVtZW50WyJvZmZzZXQiK2JdKTtlbHNlIGlmKGU9PT1CKXtmPWMuY3NzKGYsZCk7dmFyIGg9cGFyc2VGbG9hdChmKTtyZXR1cm4gYy5pc05hTihoKT9mOmh9ZWxzZSByZXR1cm4gdGhpcy5jc3MoZCx0eXBlb2YgZT09PSJzdHJpbmciP2U6ZSsicHgiKX19KX0pKHdpbmRvdyk7aWYodHlwZW9mIERPTVBhcnNlcj09PSd1bmRlZmluZWQnKXtET01QYXJzZXI9ZnVuY3Rpb24oKXt9O0RPTVBhcnNlci5wcm90b3R5cGUucGFyc2VGcm9tU3RyaW5nPWZ1bmN0aW9uKHN0cixjb250ZW50VHlwZSl7dmFyIHhtbGRhdGE7aWYodHlwZW9mIEFjdGl2ZVhPYmplY3QhPT0ndW5kZWZpbmVkJyl7eG1sZGF0YT1uZXcgQWN0aXZlWE9iamVjdCgnTVNYTUwuRG9tRG9jdW1lbnQnKTt4bWxkYXRhLmFzeW5jPWZhbHNlO3htbGRhdGEubG9hZFhNTChzdHIpO3JldHVybiB4bWxkYXRhO31lbHNlIGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCE9PSd1bmRlZmluZWQnKXt4bWxkYXRhPW5ldyBYTUxIdHRwUmVxdWVzdCgpO2lmKCFjb250ZW50VHlwZSl7Y29udGVudFR5cGU9J2FwcGxpY2F0aW9uL3htbCc7fQp4bWxkYXRhLm9wZW4oJ0dFVCcsJ2RhdGE6Jytjb250ZW50VHlwZSsnO2NoYXJzZXQ9dXRmLTgsJytlbmNvZGVVUklDb21wb25lbnQoc3RyKSxmYWxzZSk7aWYoeG1sZGF0YS5vdmVycmlkZU1pbWVUeXBlKXt4bWxkYXRhLm92ZXJyaWRlTWltZVR5cGUoY29udGVudFR5cGUpO30KeG1sZGF0YS5zZW5kKG51bGwpO3JldHVybiB4bWxkYXRhLnJlc3BvbnNlWE1MO319O30KT2JqZWN0LnNpemU9ZnVuY3Rpb24ob2JqKXt2YXIgc2l6ZT0wLGtleTtmb3Ioa2V5IGluIG9iail7aWYob2JqLmhhc093blByb3BlcnR5KGtleSkpe3NpemUrKzt9fQpyZXR1cm4gc2l6ZTt9OyhmdW5jdGlvbih3aW5kb3cpeyJ1c2Ugc3RyaWN0Ijt2YXIgTUNSPXt9O01DUj17VE1QOnt9LEdsb2JhbDp7cmVxdWVzdDp7fSxtYW5nYTp7ImNoYXB0ZXJzIjp7fSwidGl0bGUiOiIiLCJkZXNjcmlwdGlvbiI6IiIsInB1YmRhdGUiOiIiLCJzdGF0dXMiOiIiLCJhdXRob3IiOiIiLCJhcnRpc3QiOiIiLCJjaGFwdGVyIjp7Im51bWJlciI6MSwibmFtZSI6IiIsImluZGV4IjowfX19LEluZm86e3ZlcnNpb246U3RyaW5nKE1DUl9WRVJTSU9OKSxrZXlQcmVmaXg6Im1jci0iLGRvbWFpbjp3aW5kb3cubG9jYXRpb24uaG9zdCxzaG93OmZ1bmN0aW9uKCl7dmFyIG49JCgnbmF2I2luZm8nKTskKCdoMScsbikuaHRtbChNQ1IuR2xvYmFsLm1hbmdhLnRpdGxlKTskKCdoMicsbikuaHRtbChNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXJbJ25hbWUnXSk7JCgnI2Rlc2NyaXB0aW9uJyxuKS5odG1sKE1DUi5HbG9iYWwubWFuZ2EuZGVzY3JpcHRpb24pOyQoJ2RhdGVbcHViZGF0ZV0nLG4pLnRleHQoTUNSLkdsb2JhbC5tYW5nYS5wdWJkYXRlKTskKCcjc3RhdCcsbikuaHRtbChNQ1IuR2xvYmFsLm1hbmdhLnN0YXR1cyk7JCgnI2F1dGhvcicsbikudGV4dChNQ1IuR2xvYmFsLm1hbmdhLmF1dGhvcik7JCgnI2FydGlzdCcsbikudGV4dChNQ1IuR2xvYmFsLm1hbmdhLmFydGlzdCk7JCgnI2NvdmVyJyxuKS5hdHRyKCdzcmMnLE1DUi5HbG9iYWwubWFuZ2EuY292ZXIpOyQoJyNwZXJtYWxpbmsnKS5hdHRyKCdocmVmJyxNQ1IuVG9vbC5idWlsZFVybChNQ1IuR2xvYmFsLnJlcXVlc3QubWFuZ2EsTUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXIpKTskKCcjdmVyc2lvbicpLnRleHQoTUNSX1ZFUlNJT04pO319LFJlZ2V4OnsidXJsIjp7Im9sZCI6L21hbmdhcmVhZGVyXC5uZXRcL1swLTldK1wtWzAtOV0rXC0oWzAtOV0rKVwvKFthLXowLTlcLV0rKVwvY2hhcHRlci0oWzAtOV0rKVwuaHRtbD8vaSwiY3VyIjovbWFuZ2FyZWFkZXJcLm5ldFwvKFthLXowLTlcLV0rKShcL1swLTldKyk/KFwvWzAtOV0rKT8vaX0sInNlbGVjdCI6eyJvbGQiOi9cL1swLTlcLV0rXC9bYS16XC1dK1wvY2hhcHRlci0oWzAtOV0rKVwuaHRtbD8vaSwiY3VyIjovXC9bYS16XC1dK1wvKFswLTldKykvaSwiY2hhcHRlciI6L1swLTldKzo/KC4rKS9pfX0sVUk6e2h0bWw6IiIrIjxkaXYgaWQ9J2NvbnRhaW5lcic+IisiIDxuYXYgaWQ9J21haW4nPiIrIiAgPHNwYW4gY2xhc3M9J3doaXRlJz48c2VsZWN0IGlkPSdjaGFwdGVycyc+PG9wdGlvbj4tLS08L29wdGlvbj48L3NlbGVjdD48L3NwYW4+IisiICA8c3BhbiBpZD0nbGlua3MnPiIrIiAgIDxhIGhyZWY9Jy8nPjxpbWcgYWx0PSdIb21lJyB0aXRsZT0nSG9tZScgc3JjPSdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlBUU1BQUFEYXVhKzdBQUFBQVhOU1IwSUFyczRjNlFBQUFBWlFURlJGQVBCamdJQ0E4ODZ4bEFBQUFBRjBVazVUQUVEbTJHWUFBQUFCWWt0SFJBQ0lCUjFJQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFCM1JKVFVVSDJ3RWREalFPZlRJVFJBQUFBRGRKUkVGVUNOZGpZSUFCQ1NDV0FXSTdJSDRQeFBjYkdCajNIbUJncjMvQXdQYi9Bd1B2L3gwTTF2Ly9NTEQvZjREQUh6QXhHZ0FBbFZvYWVTSlhqaGdBQUFBQVNVVk9SSzVDWUlJPScgLz48L2E+IisiICAgPGEgaWQ9J2luZm8tYnV0dG9uJz48aW1nIGFsdD0nTWFuZ2EnIHRpdGxlPSdNYW5nYSBJbmZvJyBzcmM9J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFaaVMwZEVBUDhBL3dEL29MMm5rd0FBQUFsd1NGbHpBQUFMRXdBQUN4TUJBSnFjR0FBQUFBZDBTVTFGQjlzQkhRNHlOTzFrYlhBQUFBS09TVVJCVkVqSHZaWXhheFZCRklXL0U3UUtwRkFraWhaUk1HQkFpR0NoaGRpOHp2Z0hERmlKeEtRVjI3bjNSenlOblNDeHRGRTdLeEY4cFVFMFNNQ1VVVVFMd1NyS3NYQldYamI3WWtSMFlJdWR2VE56ejVsenoxMzR4ME43RFN5bElQME10MDFtQWhBUlJNU2ZIMUJLSVRPSmlCbmJpOEJaQUVuWTNnSldnWDVtcmpXeFhXT3NQZEZrSTJtNmxES3cvVnJTa3FRcDRKRHRRNUpPQWt1UzNwUlNYa2c2dmljRURkeFN5Z0p3UjVLQko4QjhSSHhwSVp5UXRHSjdyaVowSXlLVzIyalVRYzBDY0Z2U1o5dTl6SHpaaGJKQldrcVpCWjVLT21CN01UT1hPeEhVQmRPMjMwcjZaUHUwcE0xbW80aTRidnV1cEMzYlJ6UHo0OURhSTdaZkFRY2xuYkM5MGFBWWF4M1FsMlRidmRibTQ3YnYxdEQ5d0dJTDFLYWtYbFhZZzA2S0l1S1U3VGVTSGtmRTVRN3EzZ0hOWlY3TXpHY2QxRDBDNW16UFpPYmFOZ1MybDZyTzU3dFVsWmtuSk4yVWRDa3puNDNRL255OThLVmZhbXcwRHd3a1RVWEU0WTdzcjBrNlZoTVJzSkdaOTBZVTQzdmI2NWw1QVdEZlVQRmcrMnVubHFWcG9BZWNxZS9QZ1hzZGNjMGUrM2NVV21NREl5UjVDM2c0Uk9lM3ZWck1XT010dHJja2pROVJ0dTBPZ0gyMmQvVXEyMGdhbDdTMTdZQXFxMVhiazZXVWlWRytzdHVvYXlac1Q5cGViUkliOXFLK0pDU3QvSVU3cjFTNis5c09pQWd5YzgzMndQWmNSTXlPTksvV1hRMWJocVE1WUJBUmF6c0tyZkkrRGJ3RlBrazZEV3hXOC92ZWRsNUpSSVFhcXdCZTJkNWhGZXBRelFKdzIvWm5TYjJJZVBtYlJqUUxQSzArZENNaWxuL2JjQnE3cnBrK0J1WnRmeG51YU1BRXNGSnBBYmdLM0c5WHVIYnBaTWR0UDVCMHJuNzYwQlNpcEhIYmszVitJT2xLUkd6c3FhTTEzRlVlejl1ZUFmcTIxNEdQOVZtdnFwdXBNUnQvOVdmUVpXeTdOZnIvT240QUdheHp6MHlqQmJvQUFBQUFTVVZPUks1Q1lJST0nIC8+PC9hPiIrIiAgIDxhIGlkPSdvcHRpb25zLWJ1dHRvbic+PGltZyBhbHQ9J09wdGlvbnMnIHRpdGxlPSdPcHRpb25zJyBzcmM9J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUJBTUFBQUFTV1NETEFBQUFBWE5TUjBJQXJzNGM2UUFBQUMxUVRGUkZNelkyZ1lPRDcrL3ZJeVltRkJjWDBORFF3TUhCa1pLUzRPRGdvYUtpY25SMFltUmtzTEd4VTFWVi8vLy9uSDBMTXdBQUFBRjBVazVUQUVEbTJHWUFBQUFCWWt0SFJBQ0lCUjFJQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFCM1JKVFVVSDJ3RWREalFtU0llN3ZnQUFBRUZKUkVGVUdOTmpZQ0FUQ0FJQk1sdFFBTUptQkFvendxVEFESmdVbUlaSlFjUVlCU0VrQ2dkcUpwSU1USThnVVJ5d0NZd3c5NERkSm9qRm9haGVJQlVBQUxheEJIYzA0ei9EQUFBQUFFbEZUa1N1UW1DQycgLz48L2E+IisiICAgPGEgaWQ9J3Blcm1hbGluaycgaHJlZj0nIyc+PGltZyBhbHQ9J1Blcm1hbGluaycgdGl0bGU9J1Blcm1hbGluayB0byBjdXJyZW50IGNoYXB0ZXInIHNyYz0nZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUFYTlNSMElBcnM0YzZRQUFBQVppUzBkRUFQOEEvd0Qvb0wybmt3QUFBQWx3U0ZsekFBQUxFd0FBQ3hNQkFKcWNHQUFBQUFkMFNVMUZCOXNCSFE0ektaZDVNT2dBQUFPRVNVUkJWRWpIbFpiUGF4eGxHTWMvMzNtVHBqSFlvaEpDYWlVVUcwV2hwUWVSWENSN0ViVFNtOWlEb0JkdklnaFJtazFtZCszc1pEZnFidjRCVDRwNFVLT0hsbmpQd2ZSZ0lJZENJTldVRXVzUEtyWlNOMDEyOTUzSHc4NG1HMGwwODhBd3ZNODdQTjk1djgvMys4ekFBUkhtcGwydWtPL3R6SDAwVytHd0lZQXdlZ2ZYSE9SeWxLZFF5STFDY0FGNEZ1Z0hOc3hzYVhPenRsQ3BWQnZaN0NUbDh1emhBQXI1S0MxZWVFdWlDaHhMdHdBd3N5MWdyZEdvdjF3cWxYK1ptcHFpVkNwMUR3Q2t4ZldKbVpta1BYdHBUZ0ROWnZQcE9JN1h6SXcwMWNVSkNybFJGUHlBOFRDQUpKbVpBVDhEVDBnaVhRdFk5OTZQeFhGOHA1c1RCT250Z3VDWXBIYnhhOTc3RWVDYzkvNjBtYTJvRlFhY2NzNjkwVzBQZ3VucGFkZHFhSXNXTTB1ODk2L0ZjYnloZ0JyQ2UrOHZtdG5kOUhBQ01ybGNycjhyQU9kY2tLcWxIUnZPdWRvSGx3dEhMS0hhNDNwdU91Y1dnTjg2bmprcDZVaFhBRkVVTllDTmp0eUlUL3p4eE50emt0NU9tL21rcEdmU1Bod3FlbEtWTEFGYlFKOGt1Y0I5NDMzemRVbC9TbnAwUnhHN3Nya25jVFNmenp1RVliWWRSY1hOQTV0YzI2d3RBR3R0OVVnNjUxelA5OEJmQjd6WVNkQ1hrcGFFbHFSZ3ZsQW9UT1J5NFNCQUdJYTdNcTE4WE9XOTl5Zklack1uK3ZyNmJxZVV0Q1c1eHdQN3JUdnp3QzN2L2ZrNGpsZXoyU3psY3JsVlpISnlrdG5aV2NJd2ZNbzU5eDF3NnFBaS93SFdYbHE5WG4rOFZDcjlXcTNPN2JxMWJmOHdEQWRUbldkYVZMUTRUNVZ6ZWgvUTY4Q3dwTWQyRU14V2FyVy9uNjlVcWczOTYrRWQrK2R5dWY0ZEtZcWpRbDlKZW1FZmdCdmUrMWVjYzE5TE9wdFN0V1ZtRjZNb3V0S3paMjUwc0ZJc0ZoOEFEd0JTdFF6dFI1T2tVVE9ySjBueWFoQUVhK2xlUHpBR1hBbTZsTE9sVjN1VS9HUm1mNWdaU1pLRVNaTGNscmdML043cHAzdyszOXNWZ0psdEF6YzdVbzk0NzhlOTkyZnE5Y2FINVhLNWlUZ3VNZFJoeGZ2YjI5dmVkUU93dUxqWXlHUXl3OENMNlVCOEtPM0hGejI5QWVPWjhXRVJmQ3RwYUhmdzh2bk16TXkxYmluQ0ovNVQ0SmFadGMxNE5uREJEU200SGlqNFVkSVphd1hBdlNSSnJuYU02LytQdUJqZjhkNmY3eGpwSm9STVE1WjZzcU5IN3hhTHhmVkRBWVJoU0J6SHEvWDY5Z2t6VzBsbkY2aGwrWTQzZnpPS29zL2FuMVFkWmpLMlAvZ1RFeE85QXdNREwwa2FBMGFBKzhCcWtpUlhpOFhpZXFsVVlubDVtZm41K1VQL2hUQTNON2RubmMvbmV5OWR1blFnRS84QVFhRExCTnNadWtrQUFBQUFTVVZPUks1Q1lJST0nIC8+PC9hPiIrIiAgPC9zcGFuPiIrIiAgPHNwYW4gc3R5bGU9J2Zsb2F0OiByaWdodDsnPiIrIiAgIDxzcGFuIGlkPSdzdGF0dXMnPlJlYWR5PC9zcGFuPiIrIiAgIDxhIGlkPSdwcmV2JyB0aXRsZT0nUHJldmlvdXMnPiZsdDsmbHQ7PC9hPiIrIiAgIDxhIGlkPSduZXh0JyB0aXRsZT0nTmV4dCc+Jmd0OyZndDs8L2E+IisiICA8L3NwYW4+IisiIDwvbmF2PiIrIiA8bmF2IGlkPSdvcHRpb25zJz4iKyIgICA8cD48bGFiZWw+IisiICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIGlkPSdvcHRpb24tc3BhY2luZycgdmFsdWU9J29uJyAvPiIrIiAgICAgQWRkIHNwYWNpbmcgYmV0d2VlbiBwYWdlcyB0byBmYWNpbGl0YXRlIHJlYWRpbmcuIisiICAgPC9sYWJlbD48L3A+IisiICAgPHA+PGxhYmVsPiIrIiAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBpZD0nb3B0aW9uLWhvcml6b250YWwnIHZhbHVlPSdvZmYnIC8+IisiICAgICBIb3Jpem9udGFsIHJlYWRpbmcuIE5vdCByZWNvbW1lbmRlZCBmb3Igc21hbGwgc2NyZWVucyBsZXNzIisiICAgICB0aGFuIDEyMDBweCBoaWdoLiIrIiAgIDwvbGFiZWw+PC9wPiIrIiAgIDxwPjxsYWJlbD4iKyIgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J29wdGlvbi1ibGFjaycgdmFsdWU9J29mZicgLz4iKyIgICAgIFN3aXRjaCB0byBkYXJrIHNraW4uIisiICAgPC9sYWJlbD48L3A+IisiICAgPHA+PGxhYmVsPiIrIiAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBpZD0nb3B0aW9uLXRpbWVvdXQnIHZhbHVlPSdvbicgLz4iKyIgICAgIFRpbWVvdXQgaW1hZ2UgbG9hZGluZyB0byA1cy4gT24gZmFzdCBjb25uZWN0aW9ucywgdGhpcyB3aWxsIGRlY3JlYXNlIisiICAgICBsb2FkaW5nIHRpbWUuIEhvd2V2ZXIsIGRvIG5vdCB1c2Ugb24gc2xvdyBjb25uZWN0aW9ucyBhcyBwYWdlcyIrIiAgICAgd2lsbCBiZSBtaXNzaW5nLiIrIiAgIDwvbGFiZWw+PC9wPiIrIiAgIDxwPjxsYWJlbD4iKyIgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J29wdGlvbi1mb3JjZWQ4MDAnIHZhbHVlPSdvbicgLz4iKyIgICAgIEZvcmNlIGltYWdlIHdpZHRoIHRvIDgwMC4gUHJvdmlkZXMgYSBtb3JlIHVuaWZvcm0gcmVhZGluZyBleHBlcmllbmNlLCIrIiAgICAgYnV0IHlvdSBtaWdodCB3YW50IHRvIGRpc2FibGUgaWYgeW91IGNhbid0IHJlYWQgbGFyZ2UgcGFnZXMuIisiICAgPC9sYWJlbD48L3A+IisiICAgPHA+PGxhYmVsPiIrIiAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBpZD0nb3B0aW9uLWhvdGtleXMnIHZhbHVlPSdvbicgLz4iKyIgICAgIEVuYWJsZSBob3RrZXlzLiIrIiAgICAgPGI+Jmx0OzwvYj4gZm9yIFByZXZpb3VzIGFuZCA8Yj4mZ3Q7PC9iPiBmb3IgTmV4dC4iKyIgICA8L2xhYmVsPjwvcD4iKyIgICA8cD48bGFiZWw+IisiICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIGlkPSdvcHRpb24tYWRzJyB2YWx1ZT0nb24nIC8+IisiICAgICBTdXBwb3J0IE1SLm5ldCEgRGlzcGxheSB0aGVpciBhZHMgYXQgdGhlIGJvdHRvbSBhbmQgY2xpY2sgb24gdGhlbS4iKyIgICAgIFlvdSBjYW4gYWx3YXlzIGRpc2FibGUgdGhpcy4gSWYgeW91IGhhdmUgYW4gQWQgQmxvY2tlciwgdGhleSB3b24ndCBhcHBlYXIgYW55d2F5LiIrIiAgIDwvbGFiZWw+PC9wPiIrIiAgIDxwPjxsYWJlbD4iKyIgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J29wdGlvbi1jYWNoZScgdmFsdWU9J29uJyAvPiIrIiAgICAgVXNlIGNhY2hlLiBUaGlzIG1ha2VzIGxvYWRpbmcgYSBjaGFwdGVyIHByZXZpb3VzbHkgdmlzaXRlZCBmYXN0ZXIuIisiICAgICBOb3cgeW91IGNhbiBoaXQgUHJldmlvdXMgYW5kIHJlLXJlYWQgdGhhdCBsYXN0IGNoYXB0ZXIgcXVpY2tseS4iKyIgICAgIE5vdCByZWNvbW1lbmRlZCBvbiBzbG93IGNvbm5lY3Rpb25zLiIrIiAgIDwvbGFiZWw+PC9wPiIrIiAgIDxwPjxhIGlkPSdjYWNoZS1idXR0b24nPk1hbmFnZSBDYWNoZTwvYT48L3A+IisiIDwvbmF2PiIrIiA8bmF2IGlkPSdpbmZvJz4iKyIgICA8aW1nIGlkPSdjb3ZlcicgLz4iKyIgICA8aGVhZGVyPiIrIiAgICAgPGgxPk1hbmdhPC9oMT4iKyIgICAgIDxoMj5DaGFwdGVyPC9oMj4iKyIgICA8L2hlYWRlcj4iKyIgICA8cD5SZWxlYXNlZCBzaW5jZSA8ZGF0ZSBwdWJkYXRlPSdwdWJkYXRlJz48L2RhdGU+IGFuZCBjdXJyZW50bHkgPGkgaWQ9J3N0YXQnPjwvaT48L3A+IisiICAgPHA+U3RvcnkgYnkgPGIgaWQ9J2F1dGhvcic+YXV0aG9yPC9iPiwgQXJ0IGJ5IDxiIGlkPSdhcnRpc3QnPmFydGlzdDwvYj4uPC9wPiIrIiAgIDxwIGlkPSdkZXNjcmlwdGlvbic+RGVzY3JpcHRpb248L3A+IisiIDwvbmF2PiIrIiA8bmF2IGlkPSdjYWNoZSc+IisiICAgPHA+PGEgb25jbGljaz0nTUNSLkRvLnBhbmVsLnRvZ2dsZShcImNhY2hlXCIpJz5IaWRlPC9hPjwvcD4iKyIgICA8cD5TdG9yYWdlIHVzZWQ6IDxiIGlkPSdzdG9yYWdlc2l6ZSc+MDwvYj4lPC9wPiIrIiAgIDxwPjxsYWJlbD4iKyIgICAgIDxpbnB1dCB0eXBlPSdidXR0b24nIGlkPSdjYWNoZS1jbGVhcicgdmFsdWU9J0NsZWFyJyAvPiIrIiAgICAgQ2xlYXIgdGhlIGNhY2hlLiBSZW1vdmVzIGFsbCBjYWNoZWQgY2hhcHRlcnMuIisiICAgPC9sYWJlbD48L3A+IisiIDwvbmF2PiIrIiA8YXJ0aWNsZSBjbGFzcz0nc3BhY2VkJz4iKyIgICA8dWw+PGxpPkxvYWRpbmcuLi48L2xpPjwvdWw+IisiIDwvYXJ0aWNsZT4iKyIgPGZvb3Rlcj4iKyIgICA8bmF2PiIrIiAgIFVzZXJzY3JpcHQgYnkgPGEgaHJlZj0naHR0cDovL3Bhc3Njb2QuY3ouY2MnPnBhc3Njb2Q8L2E+IisiICAgLSBVc2VzIDxhIGhyZWY9J2h0dHA6Ly9qcXVlcnkuY29tJz5qUXVlcnk8L2E+IisiICAgLSBXb3JrcyBiZXN0IGluIDxhIGhyZWY9J2h0dHA6Ly93d3cubW96aWxsYS5jb20vZmlyZWZveC8nPkZpcmVmb3ggNDwvYT4iKyIgICAgIC0gRm9yayBtZSBvbiA8YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vcGFzc2NvZC9NYW5nYS1DaGFwdGVyUmVhZGVyLyc+R2l0aHViPC9hPiIrIiAgIC0gTGljZW5zZTogPGEgaHJlZj0naHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAnPk1JVDwvYT4gKyBBdHRyaWJ1dGlvbiIrIiAgICAtIFRoYW5rcyBmb3IgdXNpbmchIisiICAgICAodi4gPHNwYW4gaWQ9J3ZlcnNpb24nPjwvc3Bhbj4pIisiICAgPC9uYXY+IisiICAgPGRpdiBpZD0nYWRzJz48L2Rpdj4iKyIgPC9mb290ZXI+IisiPC9kaXY+Iixjc3M6eyIqIjp7ImNvbG9yIjoiaW5oZXJpdCJ9LCJib2R5Ijp7ImZvbnQtZmFtaWx5Ijoic2Fucy1zZXJpZiJ9LCIjY29udGFpbmVyIjp7IndpZHRoIjoiODAwcHgiLCJtYXJnaW4iOiI1ZW0gYXV0byJ9LCIjY29udGFpbmVyID4gbmF2Ijp7InRvcCI6IjUwcHgiLCJsZWZ0IjoiYXV0byIsIndpZHRoIjoiNzgwcHgiLCJib3JkZXIiOiI1cHggc29saWQiLCJwYWRkaW5nIjoiNXB4IiwiZGlzcGxheSI6Im5vbmUiLCJvcGFjaXR5IjoiMC45NSIsInBvc2l0aW9uIjoiZml4ZWQiLCJmb250LXNpemUiOiIwLjhlbSIsInRleHQtYWxpZ24iOiJqdXN0aWZ5In0sIm5hdiNtYWluIjp7InRvcCI6IjBweCIsImhlaWdodCI6IjI0cHgiLCJkaXNwbGF5IjoiYmxvY2siLCJsaW5lLWhlaWdodCI6IjI0cHgifSwibmF2I29wdGlvbnMsIG5hdiNjYWNoZSI6eyItbW96LWNvbHVtbi1jb3VudCI6IjIiLCItbW96LWNvbHVtbi1nYXAiOiIyZW0iLCItbW96LWNvbHVtbi1ydWxlLXN0eWxlIjoic29saWQiLCItbW96LWNvbHVtbi1ydWxlLXdpZHRoIjoiMXB4IiwiLXdlYmtpdC1jb2x1bW4tY291bnQiOiIyIiwiLXdlYmtpdC1jb2x1bW4tZ2FwIjoiMmVtIiwiLXdlYmtpdC1jb2x1bW4tcnVsZS1zdHlsZSI6InNvbGlkIiwiLXdlYmtpdC1jb2x1bW4tcnVsZS13aWR0aCI6IjFweCIsImNvbHVtbi1jb3VudCI6IjIiLCJjb2x1bW4tZ2FwIjoiMmVtIiwiY29sdW1uLXJ1bGUtc3R5bGUiOiJzb2xpZCIsImNvbHVtbi1ydWxlLXdpZHRoIjoiMXB4In0sIiNjaGFwdGVycyI6eyJwb3NpdGlvbiI6InJlbGF0aXZlIiwidG9wIjoiLTZweCJ9LCJpbWcjY292ZXIiOnsiZmxvYXQiOiJyaWdodCIsImhlaWdodCI6IjIwZW0iLCJtYXJnaW4iOiIxZW0ifSwiI3N0YXR1cyI6eyJmb250LXNpemUiOiIwLjhlbSJ9LCJhcnRpY2xlIjp7InRleHQtYWxpZ24iOiJjZW50ZXIifSwiLmZvcmNlZDgwMCBpbWciOnsid2lkdGgiOiI4MDBweCJ9LCJmb290ZXIgbmF2Ijp7ImZvbnQtc2l6ZSI6IjAuN2VtIiwibWFyZ2luIjoiMWVtIGF1dG8iLCJ0ZXh0LWFsaWduIjoiY2VudGVyIn0sImlucHV0W3R5cGU9YnV0dG9uXSI6eyJib3JkZXIiOiIxcHggc29saWQiLCJiYWNrZ3JvdW5kLWNvbG9yIjoidHJhbnNwYXJlbnQifSwiYSI6eyJjb2xvciI6ImluaGVyaXQiLCJ0ZXh0LWRlY29yYXRpb24iOiJ1bmRlcmxpbmUiLCJjdXJzb3IiOiJwb2ludGVyIn0sImE6aG92ZXIsIGE6Zm9jdXMiOnsidGV4dC1kZWNvcmF0aW9uIjoibm9uZSJ9LCJoMSI6eyJmb250LXNpemUiOiIxLjdlbSJ9LCJoMiI6eyJmb250LXNpemUiOiIxLjJlbSJ9LCIuYmxhY2siOnsiYmFja2dyb3VuZC1jb2xvciI6ImJsYWNrIiwiY29sb3IiOiJ3aGl0ZSIsImJvcmRlci1jb2xvciI6IndoaXRlIiwiLW1vei1jb2x1bW4tcnVsZS1jb2xvciI6IndoaXRlIiwiLXdlYmtpdC1jb2x1bW4tcnVsZS1jb2xvciI6IndoaXRlIiwiY29sdW1uLXJ1bGUtY29sb3IiOiJ3aGl0ZSJ9LCIud2hpdGUiOnsiYmFja2dyb3VuZC1jb2xvciI6IndoaXRlIiwiY29sb3IiOiJibGFjayIsImJvcmRlci1jb2xvciI6ImJsYWNrIiwiLW1vei1jb2x1bW4tcnVsZS1jb2xvciI6ImJsYWNrIiwiLXdlYmtpdC1jb2x1bW4tcnVsZS1jb2xvciI6ImJsYWNrIiwiY29sdW1uLXJ1bGUtY29sb3IiOiJibGFjayJ9LCIud2hpdGUgc2VsZWN0LCBzZWxlY3Qud2hpdGUsIC5ibGFjayBzZWxlY3QsIHNlbGVjdC5ibGFjayI6eyJjb2xvciI6ImJsYWNrIn0sImZvb3RlciAjYWRzIC5sZWZ0Ijp7ImZsb2F0IjoibGVmdCJ9LCJmb290ZXIgI2FkcyAucmlnaHQiOnsiZmxvYXQiOiJyaWdodCJ9LCJhcnRpY2xlIHVsIjp7Imxpc3Qtc3R5bGUiOiJub25lIiwicGFkZGluZyI6IjAifSwiLmhvcml6b250YWwgdWwiOnsibWFyZ2luIjoiMCAwIDFlbSAwIiwicGFkZGluZyI6IjAiLCJmbG9hdCI6ImxlZnQiLCJ3aWR0aCI6IjEwMCUifSwiLmhvcml6b250YWwgbGkiOnsiZmxvYXQiOiJsZWZ0In0sIi5zcGFjZWQgaW1nIjp7Im1hcmdpbi1ib3R0b20iOiIxZW0ifSwiLmhvcml6b250YWwuc3BhY2VkIGxpIjp7InBhZGRpbmciOiIwLjVlbSJ9fSxpbml0OmZ1bmN0aW9uKCl7JCgnYm9keScpLmFwcGVuZChNQ1IuVUkuaHRtbCkuYWRkKCduYXYnKS5hZGRDbGFzcygnd2hpdGUnKTskKCcjcHJlJykucmVtb3ZlKCk7TUNSLlRvb2wuYWRkQ3NzKE1DUi5VSS5jc3MpO319LFRvb2w6e2dldEZha2U6ZnVuY3Rpb24odXJsLGNhbGxiYWNrLHNldHRpbmdzKXt2YXIgZGVmYXVsdHM9e3RpbWVvdXQ6NTAwMH07aWYoIU1DUi5PcHRpb24uc3dpdGNoZWQoJ3RpbWVvdXQnKSl7ZGVmYXVsdHMudGltZW91dD1mYWxzZTt9CmlmKHR5cGVvZiBzZXR0aW5ncz09PSd1bmRlZmluZWQnKXtzZXR0aW5ncz17fTt9CiQuYWpheCh7dHlwZToiR0VUIix1cmw6dXJsLHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7aWYoY2FsbGJhY2spe3ZhciBwPW5ldyBET01QYXJzZXIoKSxkb2M9cC5wYXJzZUZyb21TdHJpbmcoZGF0YSwidGV4dC94bWwiKTtjYWxsYmFjayhkb2MpO319LGVycm9yOmZ1bmN0aW9uKHhocixzdGF0LGVycil7dmFyIGRhdGE9IjxodG1sPjxoZWFkPjwvaGVhZD48Ym9keT48ZGl2IGlkPSdzdGF0dXMnPiIrCnN0YXQrIjwvZGl2PjxkaXYgaWQ9J2Vycm9yJz4iK2VycisiPC9kaXY+PGRpdiBpZD0ndXJsJz4iKwp1cmwrIjwvZGl2PiI7aWYoc3RhdD09J3RpbWVvdXQnKXtkYXRhKz0nPGltZyBzcmM9Ii9ub3Rmb3VuZC40MDQiIGFsdD0iLSIgd2lkdGg9IjgwMCIgLz4nO30KZGF0YSs9IjwvYm9keT48L2h0bWw+IjtpZihjYWxsYmFjayl7dmFyIHA9bmV3IERPTVBhcnNlcigpLGRvYz1wLnBhcnNlRnJvbVN0cmluZyhkYXRhLCJ0ZXh0L3htbCIpO2NhbGxiYWNrKGRvYyk7fX0sdGltZW91dDpzZXR0aW5nc1sndGltZW91dCddP3NldHRpbmdzWyd0aW1lb3V0J106ZGVmYXVsdHNbJ3RpbWVvdXQnXX0pO30sbWFrZUNzczpmdW5jdGlvbihjc3Nfb2JqLG1pbmlmaWVkLHRhYil7dmFyIHNlbGVjdG9yLHN0eWxlcyxwcm9wZXJ0eSx2YWx1ZSxubD0iXG4iLGh0bWw9Jyc7bWluaWZpZWQ9bWluaWZpZWQ/dHJ1ZTpmYWxzZTt0YWI9dGFiP3RhYjoiXHQiO2lmKG1pbmlmaWVkKXt0YWI9Jyc7bmw9JyAnO30KZm9yKHNlbGVjdG9yIGluIGNzc19vYmope2lmKHR5cGVvZiBzZWxlY3Rvcj09PSdzdHJpbmcnKXtzdHlsZXM9Y3NzX29ialtzZWxlY3Rvcl07aHRtbCs9bmwrc2VsZWN0b3IrIiB7Ijtmb3IocHJvcGVydHkgaW4gc3R5bGVzKXtpZih0eXBlb2YgcHJvcGVydHk9PT0nc3RyaW5nJyl7dmFsdWU9c3R5bGVzW3Byb3BlcnR5XTtodG1sKz1ubCt0YWIrcHJvcGVydHkrIjogIit2YWx1ZSsiOyI7fX0KaHRtbCs9bmwrIn0iO319CnJldHVybiBodG1sO30sYWRkQ3NzOmZ1bmN0aW9uKGNzcyl7dmFyIGVsO2lmKHR5cGVvZiBjc3M9PSJvYmplY3QiKXtjc3M9TUNSLlRvb2wubWFrZUNzcyhjc3MpO30KZWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlbC50eXBlPSJ0ZXh0L2NzcyI7aWYoZWwuc3R5bGVTaGVldCl7ZWwuc3R5bGVTaGVldC5jc3NUZXh0PWNzczt9ZWxzZXtlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTt9CmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoZWwpO30scGFyc2VVcmw6ZnVuY3Rpb24odXJsX3N0cil7dmFyIFU9e30sUm89TUNSLlJlZ2V4LnVybC5vbGQuZXhlYyh1cmxfc3RyKSxSbj1NQ1IuUmVnZXgudXJsLmN1ci5leGVjKHVybF9zdHIpLHNzPS9bXC9dLztpZihSbyE9PW51bGwpe1UucGFnZT1Sb1sxXT9Sb1sxXS5yZXBsYWNlKHNzLCcnKTpudWxsO1UubWFuZ2E9Um9bMl0/Um9bMl0ucmVwbGFjZShzcywnJyk6bnVsbDtVLmNoYXB0ZXI9Um9bM10/Um9bM10ucmVwbGFjZShzcywnJyk6bnVsbDt9ZWxzZSBpZihSbiE9PW51bGwpe1UubWFuZ2E9Um5bMV0/Um5bMV0ucmVwbGFjZShzcywnJyk6bnVsbDtVLmNoYXB0ZXI9Um5bMl0/Um5bMl0ucmVwbGFjZShzcywnJyk6bnVsbDtVLnBhZ2U9Um5bM10/Um5bM10ucmVwbGFjZShzcywnJyk6bnVsbDt9ZWxzZXtyZXR1cm4gbnVsbDt9CnJldHVybiBVO30sYnVpbGRVcmw6ZnVuY3Rpb24obWFuZ2EsY2hhcHRlcixwYWdlKXttYW5nYT1tYW5nYT8nLycrbWFuZ2E6Jyc7Y2hhcHRlcj1jaGFwdGVyPycvJytjaGFwdGVyOicnO3BhZ2U9cGFnZT8nLycrcGFnZTonJztyZXR1cm4naHR0cDovLycrTUNSLkluZm8uZG9tYWluK21hbmdhK2NoYXB0ZXIrcGFnZTt9LGNhbkhhelN0b3JhZ2U6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuJ2xvY2FsU3RvcmFnZSdpbiB3aW5kb3cmJndpbmRvdy5sb2NhbFN0b3JhZ2UhPT1udWxsO31jYXRjaChlKXtyZXR1cm4gZmFsc2U7fX0sY2FwaXRhbGl6ZTpmdW5jdGlvbihzdHIpe3JldHVybiBzdHIucmVwbGFjZSgvKF58XHMpKFthLXpdKS9nLGZ1bmN0aW9uKG8scCxxKXtyZXR1cm4gcCtxLnRvVXBwZXJDYXNlKCk7fSk7fSxzdG9yYWdlQXZhaWxhYmxlOmZ1bmN0aW9uKCl7aWYoL2Nocm9tZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe3JldHVybiAyLjUqMTAwMCoxMDAwO30KcmV0dXJuIDUqMTAwMCoxMDAwO30sc3RvcmFnZVVzZWQ6ZnVuY3Rpb24ocGVyY2VudCl7aWYoTUNSLlRvb2wuY2FuSGF6U3RvcmFnZSgpKXt2YXIgbGVuPTAsaSxrO2ZvcihpPTA7aTx3aW5kb3cubG9jYWxTdG9yYWdlLmxlbmd0aDtpKyspe2s9d2luZG93LmxvY2FsU3RvcmFnZS5rZXkoaSk7bGVuPWxlbitrLmxlbmd0aCt3aW5kb3cubG9jYWxTdG9yYWdlW2tdLmxlbmd0aDt9CmlmKHBlcmNlbnQpe3JldHVybiBsZW4qMTAwL01DUi5Ub29sLnN0b3JhZ2VBdmFpbGFibGUoKTt9CnJldHVybiBsZW47fWVsc2V7cmV0dXJuIDA7fX19LE9wdGlvbjp7ZGVmYXVsdHM6eyJzcGFjaW5nIjoib24iLCJob3Jpem9udGFsIjoib2ZmIiwiYmxhY2siOiJvZmYiLCJ0aW1lb3V0Ijoib24iLCJob3RrZXlzIjoib24iLCJmb3JjZWQ4MDAiOiJvbiIsImFkcyI6Im9uIiwiY2FjaGUiOiJvZmYiLCJjYWNoZS1jaGFwdGVycyI6Int9In0scmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGkgaW4gd2luZG93LmxvY2FsU3RvcmFnZSl7dmFyIHI9bmV3IFJlZ0V4cChNQ1IuSW5mby5rZXlQcmVmaXgucmVwbGFjZSgnLScsJycpKTtpZighaS5tYXRjaChyKSl7d2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGkpO319fSxpbml0OmZ1bmN0aW9uKCl7TUNSLk9wdGlvbi5yZXNldCgpO2Zvcih2YXIga2V5IGluIE1DUi5PcHRpb24uZGVmYXVsdHMpe2lmKE1DUi5Ub29sLmNhbkhhelN0b3JhZ2UoKSl7TUNSLk9wdGlvbi52YWx1ZXNba2V5XT13aW5kb3cubG9jYWxTdG9yYWdlW01DUi5JbmZvLmtleVByZWZpeCtrZXldP3dpbmRvdy5sb2NhbFN0b3JhZ2VbTUNSLkluZm8ua2V5UHJlZml4K2tleV06TUNSLk9wdGlvbi5kZWZhdWx0c1trZXldO3dpbmRvdy5sb2NhbFN0b3JhZ2VbTUNSLkluZm8ua2V5UHJlZml4K2tleV09TUNSLk9wdGlvbi52YWx1ZXNba2V5XTt9ZWxzZXtNQ1IuT3B0aW9uLnZhbHVlc1trZXldPU1DUi5PcHRpb24uZGVmYXVsdHNba2V5XTt9fX0sc2V0OmZ1bmN0aW9uKGtleSx2YWx1ZSl7TUNSLk9wdGlvbltrZXldPXZhbHVlO2lmKE1DUi5Ub29sLmNhbkhhelN0b3JhZ2UoKSl7d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKE1DUi5JbmZvLmtleVByZWZpeCtrZXksTUNSLk9wdGlvbltrZXldKTskKCcjc3RvcmFnZXNpemUnKS50ZXh0KE1DUi5Ub29sLnN0b3JhZ2VVc2VkKHRydWUpKTt9fSxnZXQ6ZnVuY3Rpb24oa2V5KXt2YXIgdmFsdWU9TUNSLk9wdGlvbltrZXldO2lmKE1DUi5Ub29sLmNhbkhhelN0b3JhZ2UoKSl7dmFsdWU9d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKE1DUi5JbmZvLmtleVByZWZpeCtrZXkpO30KcmV0dXJuIHZhbHVlO30sc3dpdGNoVG86ZnVuY3Rpb24oa2V5LHRvKXt2YXIgYmVmb3JlPU1DUi5PcHRpb24uZ2V0KGtleSksb25mZj10bz8nbic6J2YnO2lmKC9vPyhufGZmPykvaS50ZXN0KGJlZm9yZSkpe01DUi5PcHRpb24uc2V0KGtleSxvbmZmKTt9ZWxzZXt0aHJvdyBUeXBlRXJyb3I7fX0sc3dpdGNoT246ZnVuY3Rpb24oa2V5KXtNQ1IuT3B0aW9uLnN3aXRjaFRvKGtleSx0cnVlKTt9LHN3aXRjaE9mZjpmdW5jdGlvbihrZXkpe01DUi5PcHRpb24uc3dpdGNoVG8oa2V5LGZhbHNlKTt9LHN3aXRjaGVkOmZ1bmN0aW9uKGtleSl7dmFyIG9wdD1NQ1IuT3B0aW9uLmdldChrZXkpO2lmKC9vPyhufGZmPykvaS50ZXN0KG9wdCkpe2lmKC9vP24vaS50ZXN0KG9wdCkpe3JldHVybiB0cnVlO319ZWxzZXt0aHJvdyBUeXBlRXJyb3I7fQpyZXR1cm4gZmFsc2U7fSx0b2dnbGU6ZnVuY3Rpb24oa2V5LGZvcmNlX3RvLGNhbGxPbixjYWxsT2ZmKXtpZih0eXBlb2YgZm9yY2VfdG89PT0nYm9vbGVhbicpe01DUi5PcHRpb24uc3dpdGNoVG8oa2V5LCFmb3JjZV90byk7fQppZighTUNSLk9wdGlvbi5zd2l0Y2hlZChrZXkpKXtpZihjYWxsT24pe2NhbGxPbigpO30KTUNSLk9wdGlvbi5zd2l0Y2hPbihrZXkpOyQoJyNvcHRpb24tJytrZXkpLmF0dHIoJ2NoZWNrZWQnLHRydWUpO31lbHNle2lmKGNhbGxPZmYpe2NhbGxPZmYoKTt9Ck1DUi5PcHRpb24uc3dpdGNoT2ZmKGtleSk7JCgnI29wdGlvbi0nK2tleSkuYXR0cignY2hlY2tlZCcsZmFsc2UpO319LHZhbHVlczp7fX0sQ2FjaGU6e2luaXQ6ZnVuY3Rpb24oKXtpZihNQ1IuT3B0aW9uLnN3aXRjaGVkKCdjYWNoZScpKXtNQ1IuQ2FjaGUuc3RvcmUuY2hhcHRlcnM9TUNSLkNhY2hlLmdldCgnY2hhcHRlcnMnKTt9fSxzZXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXt2YXIganNvbj1KU09OLnN0cmluZ2lmeSh2YWx1ZSk7TUNSLk9wdGlvbi5zZXQoJ2NhY2hlLScra2V5LGpzb24pO30sZ2V0OmZ1bmN0aW9uKGtleSl7dmFyIGpzb249TUNSLk9wdGlvbi5nZXQoJ2NhY2hlLScra2V5KTtyZXR1cm4gSlNPTi5wYXJzZShqc29uKTt9LGQ6ZnVuY3Rpb24oa2V5LHF1ZXJ5KXtyZXR1cm4gZmFsc2U7fSxjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgaSBpbiBNQ1IuQ2FjaGUuc3RvcmUpe01DUi5DYWNoZS5zZXQoaSx7fSk7fX0sc3RvcmU6e2NoYXB0ZXJzOnt9fX0sRG86e2Rpc3BsYXlTdGF0dXM6ZnVuY3Rpb24oc3RhdHVzLGFuaW1hdGUpe2lmKHR5cGVvZiBhbmltYXRlIT09J2Jvb2xlYW4nKXthbmltYXRlPXRydWU7fQppZihhbmltYXRlKXskKCcjc3RhdHVzJykuc3RvcCgpLmZhZGVPdXQoJ2Zhc3QnLGZ1bmN0aW9uKCl7JCgnI3N0YXR1cycpLnRleHQoc3RhdHVzKS5mYWRlSW4oKTt9KTt9ZWxzZXskKCcjc3RhdHVzJykuc3RvcCgpLnRleHQoc3RhdHVzKS5zaG93KCk7fQppZihzdGF0dXMubGVuZ3RoPjApe3N0YXR1cys9JyAvICc7fQpkb2N1bWVudC50aXRsZT1zdGF0dXMrTUNSLkdsb2JhbC5tYW5nYS50aXRsZSsnIC8gQ2guICcrTUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXI7fSxjaGFuZ2U6e30saGFuZGxlSG90a2V5czpmdW5jdGlvbihlKXtzd2l0Y2goZS53aGljaCl7Y2FzZSAxODg6TUNSLkdldC5wcmV2aW91c0NoYXB0ZXIoKTtyZXR1cm47Y2FzZSAxOTA6TUNSLkdldC5uZXh0Q2hhcHRlcigpO3JldHVybjtkZWZhdWx0OnJldHVybjt9fSx0b2dnbGU6e2hvdGtleXM6ZnVuY3Rpb24oZm9yY2VfdG8pe01DUi5PcHRpb24udG9nZ2xlKCdob3RrZXlzJyxmb3JjZV90byxmdW5jdGlvbigpeyQoZG9jdW1lbnQpLmJpbmQoJ2tleWRvd24nLE1DUi5Eby5oYW5kbGVIb3RrZXlzKTt9LGZ1bmN0aW9uKCl7JChkb2N1bWVudCkudW5iaW5kKCdrZXlkb3duJyxNQ1IuRG8uaGFuZGxlSG90a2V5cyk7fSk7fSxzcGFjaW5nOmZ1bmN0aW9uKGZvcmNlX3RvKXtNQ1IuT3B0aW9uLnRvZ2dsZSgnc3BhY2luZycsZm9yY2VfdG8sZnVuY3Rpb24oKXskKCdhcnRpY2xlJykuYWRkQ2xhc3MoJ3NwYWNlZCcpO30sZnVuY3Rpb24oKXskKCdhcnRpY2xlJykucmVtb3ZlQ2xhc3MoJ3NwYWNlZCcpO30pO30saG9yaXpvbnRhbDpmdW5jdGlvbihmb3JjZV90byl7TUNSLk9wdGlvbi50b2dnbGUoJ2hvcml6b250YWwnLGZvcmNlX3RvLGZ1bmN0aW9uKCl7JCgnYXJ0aWNsZScpLmFkZENsYXNzKCdob3Jpem9udGFsJyk7TUNSLlRNUC53aWR0aD0wOyQoJ2FydGljbGUgaW1nJykuZWFjaChmdW5jdGlvbigpe3ZhciB3PSQodGhpcykud2lkdGgoKTtpZih3PDgwMCl7dz04MDA7fQpNQ1IuVE1QLndpZHRoKz13KzIwO30pOyQoJ2FydGljbGUgdWwnKS5jc3MoJ3dpZHRoJyxNQ1IuVE1QLndpZHRoKTt9LGZ1bmN0aW9uKCl7JCgnYXJ0aWNsZScpLnJlbW92ZUNsYXNzKCdob3Jpem9udGFsJyk7JCgnYXJ0aWNsZSB1bCcpLmNzcygnd2lkdGgnLCcnKTt9KTt9LGJsYWNrOmZ1bmN0aW9uKGZvcmNlX3RvKXt2YXIgYT0kKCdbY2xhc3MqPXdoaXRlXSwgW2NsYXNzKj1ibGFja10nKTtNQ1IuT3B0aW9uLnRvZ2dsZSgnYmxhY2snLGZvcmNlX3RvLGZ1bmN0aW9uKCl7YS5hZGRDbGFzcygnYmxhY2snKS5yZW1vdmVDbGFzcygnd2hpdGUnKTt9LGZ1bmN0aW9uKCl7YS5hZGRDbGFzcygnd2hpdGUnKS5yZW1vdmVDbGFzcygnYmxhY2snKTt9KTt9LHRpbWVvdXQ6ZnVuY3Rpb24oZm9yY2VfdG8pe01DUi5PcHRpb24udG9nZ2xlKCd0aW1lb3V0Jyxmb3JjZV90byk7fSxjYWNoZTpmdW5jdGlvbihmb3JjZV90byl7TUNSLk9wdGlvbi50b2dnbGUoJ2NhY2hlJyxmb3JjZV90byk7fSxmb3JjZWQ4MDA6ZnVuY3Rpb24oZm9yY2VfdG8pe01DUi5PcHRpb24udG9nZ2xlKCdmb3JjZWQ4MDAnLGZvcmNlX3RvLGZ1bmN0aW9uKCl7JCgnYXJ0aWNsZScpLmFkZENsYXNzKCdmb3JjZWQ4MDAnKTt9LGZ1bmN0aW9uKCl7JCgnYXJ0aWNsZScpLnJlbW92ZUNsYXNzKCdmb3JjZWQ4MDAnKTt9KTt9LGFkczpmdW5jdGlvbihmb3JjZV90byl7TUNSLk9wdGlvbi50b2dnbGUoJ2FkcycsZm9yY2VfdG8sZnVuY3Rpb24oKXskKCcjYWRzJykuaHRtbCgiICAgIDxpZnJhbWUgd2lkdGg9JzM1MCcgaGVpZ2h0PScyNTAnIGZyYW1lYm9yZGVyPSdubycgc2Nyb2xsaW5nPSdubycgc3JjPSdodHRwOi8vYWQubWFuZ2FyZWFkZXIubmV0L2J0bGVmdCcgY2xhc3M9J2xlZnQnIC8+IisiICAgIDxpZnJhbWUgd2lkdGg9JzM1MCcgaGVpZ2h0PScyNTAnIGZyYW1lYm9yZGVyPSdubycgc2Nyb2xsaW5nPSdubycgc3JjPSdodHRwOi8vYWQubWFuZ2FyZWFkZXIubmV0L2J0cmlnaHQnIGNsYXNzPSdyaWdodCcgLz4iKS5zaG93KCk7fSxmdW5jdGlvbigpeyQoJyNhZHMnKS5odG1sKCIiKS5oaWRlKCk7fSk7fX0scGFuZWw6e2luaXQ6ZnVuY3Rpb24oKXskKCcjb3B0aW9ucy1idXR0b24nKS5jbGljayhNQ1IuRG8ucGFuZWwudG9nZ2xlKTskKCcjY2FjaGUtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtNQ1IuRG8ucGFuZWwudG9nZ2xlKCdjYWNoZScpO30pOyQoJyNpbmZvLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCl7TUNSLkRvLnBhbmVsLnRvZ2dsZSgnaW5mbycpO30pOyQoJ3NlbGVjdCNjaGFwdGVycycpLmxpdmUoJ2NoYW5nZScsTUNSLkdldC5zZWxlY3RlZENoYXB0ZXIpOyQoJyNwcmV2JykuY2xpY2soTUNSLkdldC5wcmV2aW91c0NoYXB0ZXIpOyQoJyNuZXh0JykuY2xpY2soTUNSLkdldC5uZXh0Q2hhcHRlcik7JCgnI29wdGlvbi1zcGFjaW5nJykuY2hhbmdlKE1DUi5Eby50b2dnbGUuc3BhY2luZyk7JCgnI29wdGlvbi1ob3Jpem9udGFsJykuY2hhbmdlKE1DUi5Eby50b2dnbGUuaG9yaXpvbnRhbCk7JCgnI29wdGlvbi1ibGFjaycpLmNoYW5nZShNQ1IuRG8udG9nZ2xlLmJsYWNrKTskKCcjb3B0aW9uLXRpbWVvdXQnKS5jaGFuZ2UoTUNSLkRvLnRvZ2dsZS50aW1lb3V0KTskKCcjb3B0aW9uLWhvdGtleXMnKS5jaGFuZ2UoTUNSLkRvLnRvZ2dsZS5ob3RrZXlzKTskKCcjb3B0aW9uLWNhY2hlJykuY2hhbmdlKE1DUi5Eby50b2dnbGUuY2FjaGUpOyQoJyNvcHRpb24tZm9yY2VkODAwJykuY2hhbmdlKE1DUi5Eby50b2dnbGUuZm9yY2VkODAwKTskKCcjb3B0aW9uLWFkcycpLmNoYW5nZShNQ1IuRG8udG9nZ2xlLmFkcyk7TUNSLkRvLnRvZ2dsZS5zcGFjaW5nKE1DUi5PcHRpb24uc3dpdGNoZWQoJ3NwYWNpbmcnKSk7TUNSLkRvLnRvZ2dsZS5ob3Jpem9udGFsKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2hvcml6b250YWwnKSk7TUNSLkRvLnRvZ2dsZS5ibGFjayhNQ1IuT3B0aW9uLnN3aXRjaGVkKCdibGFjaycpKTtNQ1IuRG8udG9nZ2xlLnRpbWVvdXQoTUNSLk9wdGlvbi5zd2l0Y2hlZCgndGltZW91dCcpKTtNQ1IuRG8udG9nZ2xlLmhvdGtleXMoTUNSLk9wdGlvbi5zd2l0Y2hlZCgnaG90a2V5cycpKTtNQ1IuRG8udG9nZ2xlLmNhY2hlKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2NhY2hlJykpO01DUi5Eby50b2dnbGUuZm9yY2VkODAwKE1DUi5PcHRpb24uc3dpdGNoZWQoJ2ZvcmNlZDgwMCcpKTtNQ1IuRG8udG9nZ2xlLmFkcyhNQ1IuT3B0aW9uLnN3aXRjaGVkKCdhZHMnKSk7JCgnI2NhY2hlLWNsZWFyJykuY2xpY2soTUNSLkNhY2hlLmNsZWFyKTt9LHNob3c6ZnVuY3Rpb24ocGFuZWwpe2lmKHR5cGVvZiBwYW5lbCE9PSdzdHJpbmcnKXtwYW5lbD0nb3B0aW9ucyc7fQokKCduYXYjJytwYW5lbCkuZmFkZUluKCdmYXN0Jyk7fSxoaWRlOmZ1bmN0aW9uKHBhbmVsKXtpZih0eXBlb2YgcGFuZWwhPT0nc3RyaW5nJyl7cGFuZWw9J29wdGlvbnMnO30KJCgnbmF2IycrcGFuZWwpLmZhZGVPdXQoJ2Zhc3QnKTt9LHRvZ2dsZTpmdW5jdGlvbihwYW5lbCl7aWYodHlwZW9mIHBhbmVsIT09J3N0cmluZycpe3BhbmVsPSdvcHRpb25zJzt9CiQoJ25hdiMnK3BhbmVsKS50b2dnbGUoJ2Zhc3QnLCdsaW5lYXInKTt9fX0sR2V0OntjaGFwdGVyOmZ1bmN0aW9uKCl7dmFyIHVybCxpLG1ha2VVcmw9ZnVuY3Rpb24oKXtyZXR1cm4gTUNSLlRvb2wuYnVpbGRVcmwoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhLE1DUi5HbG9iYWwucmVxdWVzdC5jaGFwdGVyLE1DUi5UTVAucGFnZSk7fSx1cGRhdGVTZWxlY3Q9ZnVuY3Rpb24oKXt2YXIgYyxodG1sPSIiO2Zvcih2YXIgaSBpbiBNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXJzKXtjPU1DUi5HbG9iYWwubWFuZ2EuY2hhcHRlci5pbmRleD09aT8nIHNlbGVjdGVkPSJzZWxlY3RlZCIgJzonICc7aHRtbCs9IjxvcHRpb24gdmFsdWU9JyIrTUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyc1tpXVsnY2hhcHRlciddKyInIitjKyI+IitNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXJzW2ldWydjaGFwdGVyJ10rIlxuIjt9CiQoJyNjaGFwdGVycycpLmh0bWwoaHRtbCk7fSxpbWdUYWc9ZnVuY3Rpb24ocGFnZSl7dmFyIHQ9TUNSLkdsb2JhbC5tYW5nYS50aXRsZSsnIC8gJysKTUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXIrJzogJytNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXJbJ25hbWUnXSsnIC8gJysnUGFnZSAnK3BhZ2Uscz1NQ1IuT3B0aW9uLnN3aXRjaGVkKCdzcGFjaW5nJyk/J21hcmdpbi1ib3R0b206IDFlbTsnOidtYXJnaW4tYm90dG9tOiAwcHg7JztyZXR1cm4iPGxpPjxpbWcgc3JjPSciK01DUi5UTVAubGlzdFtwYWdlXSsiJyBhbHQ9JyIrdCsiJyB0aXRsZT0nIit0KyInIHN0eWxlPSciK3MrIicgLz48L2xpPlxuIjt9LHVwZGF0ZURpc3BsYXk9ZnVuY3Rpb24odXNlX2NhY2hlKXt2YXIgaSxoPSIiLHQ7Zm9yKGkgaW4gTUNSLlRNUC5saXN0KXtoKz1pbWdUYWcoaSk7fQokKCdhcnRpY2xlIHVsJykuaHRtbChoKTtNQ1IuRG8uZGlzcGxheVN0YXR1cygnJyk7aWYoTUNSLk9wdGlvbi5zd2l0Y2hlZCgiaG9yaXpvbnRhbCIpKXtNQ1IuVE1QLndpZHRoPTA7JCgnYXJ0aWNsZSBpbWcnKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHc9JCh0aGlzKS53aWR0aCgpO2lmKHc8ODAwKXt3PTgwMDt9Ck1DUi5UTVAud2lkdGgrPXcrMjA7fSk7JCgnYXJ0aWNsZSB1bCcpLndpZHRoKE1DUi5UTVAud2lkdGgpO30KaWYoTUNSLk9wdGlvbi5zd2l0Y2hlZCgiY2FjaGUiKSl7dmFyIGM9TUNSLkNhY2hlLmdldCgnY2hhcHRlcnMnKTtpZighY1tTdHJpbmcoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhKV0pe2NbU3RyaW5nKE1DUi5HbG9iYWwucmVxdWVzdC5tYW5nYSldPXt9O30KY1tTdHJpbmcoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhKV1bU3RyaW5nKE1DUi5HbG9iYWwucmVxdWVzdC5jaGFwdGVyKV09TUNSLlRNUC5saXN0O01DUi5DYWNoZS5zZXQoJ2NoYXB0ZXJzJyxjKTt9fSxkb1BhZ2UxPWZ1bmN0aW9uKGRvYyxjYWNoZWQpe2lmKGNhY2hlZCl7fWVsc2V7JCgnYXJ0aWNsZSB1bCcpLmh0bWwoaW1nVGFnKDApKTt9Ck1DUi5HbG9iYWwubWFuZ2EuY2hhcHRlclsnbnVtYmVyJ109TUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXI7dmFyIHNzcyxzcyxzPSQoJ3NjcmlwdDpsYXN0Jyxkb2MpLmNvbnRlbnRzKCkudGV4dCgpO3M9cy5zcGxpdCgiXG4iKTtzcz1zLmluZGV4T2YoImZ1bmN0aW9uIG9tdktleVByZXNzZWQoZSkgeyIpO3Nzcz1zLnNwbGljZSgwLHNzKS5qb2luKCJcbiIpO2V2YWwoc3NzKTtNQ1IuR2xvYmFsLm1hbmdhLmlkPWRvY3VtZW50WydtYW5nYWlkJ107JC5nZXRKU09OKCcvYWN0aW9ucy9zZWxlY3Rvci8/aWQ9JytNQ1IuR2xvYmFsLm1hbmdhLmlkKycmd2hpY2g9MCcsZnVuY3Rpb24oail7TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVycz1qO3ZhciBpLGs7Zm9yKGkgaW4gail7az1qW2ldO2lmKFN0cmluZyhrLmNoYXB0ZXIpPT1NQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlcil7TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyWyduYW1lJ109altpXVsnY2hhcHRlcl9uYW1lJ107TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyLmluZGV4PWk7fX0KdXBkYXRlU2VsZWN0KCk7TUNSLkluZm8uc2hvdygpO30pO01DUi5Ub29sLmdldEZha2UoTUNSLlRvb2wuYnVpbGRVcmwoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhKSxmdW5jdGlvbihkb2Mpe01DUi5HbG9iYWwubWFuZ2EuZGVzY3JpcHRpb249JCgnI3JlYWRtYW5nYXN1bSBwJyxkb2MpLnRleHQoKTtNQ1IuR2xvYmFsLm1hbmdhLmNvdmVyPSQoJyNtYW5nYWltZyBpbWcnLGRvYykuYXR0cignc3JjJyk7TUNSLkdsb2JhbC5tYW5nYS5wdWJkYXRlPSQoJyNtYW5nYXByb3BlcnRpZXMgdHI6ZXEoMikgdGQ6bGFzdCcsZG9jKS50ZXh0KCk7TUNSLkdsb2JhbC5tYW5nYS5zdGF0dXM9JCgnI21hbmdhcHJvcGVydGllcyB0cjplcSgzKSB0ZDpsYXN0Jyxkb2MpLnRleHQoKTtNQ1IuR2xvYmFsLm1hbmdhLmF1dGhvcj0kKCcjbWFuZ2Fwcm9wZXJ0aWVzIHRyOmVxKDQpIHRkOmxhc3QnLGRvYykudGV4dCgpO01DUi5HbG9iYWwubWFuZ2EuYXJ0aXN0PSQoJyNtYW5nYXByb3BlcnRpZXMgdHI6ZXEoNSkgdGQ6bGFzdCcsZG9jKS50ZXh0KCk7TUNSLkluZm8uc2hvdygpO30pO30sbWFpbkxvb3A9ZnVuY3Rpb24oKXtNQ1IuRG8uZGlzcGxheVN0YXR1cygnTG9hZGluZyBDaC4gJytNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlcisnLi4uJysnKCcrTUNSLlRNUC5wYWdlKycpJyxmYWxzZSk7TUNSLlRvb2wuZ2V0RmFrZShtYWtlVXJsKCksZnVuY3Rpb24oZG9jKXt2YXIgZGlzcD1mYWxzZSxpbWc9JCgnI2ltZycsZG9jKTtpZih0eXBlb2YgaW1nLmF0dHIoJ3NyYycpIT09J3VuZGVmaW5lZCcpe01DUi5UTVAubGlzdC5wdXNoKGltZy5hdHRyKCdzcmMnKSk7aWYoTUNSLlRNUC5wYWdlPT0xKXtkb1BhZ2UxKGRvYyk7fQpNQ1IuVE1QLnBhZ2UrKzttYWluTG9vcCgpO31lbHNle3VwZGF0ZURpc3BsYXkoKTt9fSk7fTtNQ1IuRG8uZGlzcGxheVN0YXR1cygnTG9hZGluZyBDaC4gJytNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlcisnLi4uJyk7aWYoTUNSLk9wdGlvbi5zd2l0Y2hlZCgiY2FjaGUiKSl7aWYoTUNSLkNhY2hlLmdldCgnY2hhcHRlcnMnKVtTdHJpbmcoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhKV0pe2lmKE1DUi5DYWNoZS5nZXQoJ2NoYXB0ZXJzJylbU3RyaW5nKE1DUi5HbG9iYWwucmVxdWVzdC5tYW5nYSldW1N0cmluZyhNQ1IuR2xvYmFsLnJlcXVlc3QuY2hhcHRlcildKXtNQ1IuVE1QLmxpc3Q9TUNSLkNhY2hlLmdldCgnY2hhcHRlcnMnKVtTdHJpbmcoTUNSLkdsb2JhbC5yZXF1ZXN0Lm1hbmdhKV1bU3RyaW5nKE1DUi5HbG9iYWwucmVxdWVzdC5jaGFwdGVyKV07TUNSLlRNUC5wYWdlPTE7TUNSLlRvb2wuZ2V0RmFrZShtYWtlVXJsKCksZnVuY3Rpb24oZG9jKXtkb1BhZ2UxKGRvYyx0cnVlKTt9KTt1cGRhdGVEaXNwbGF5KCk7cmV0dXJuO319fQpNQ1IuVE1QLmxpc3Q9W107TUNSLlRNUC5wYWdlPTE7bWFpbkxvb3AoKTt9LHNlbGVjdGVkQ2hhcHRlcjpmdW5jdGlvbigpe01DUi5HbG9iYWwucmVxdWVzdC5jaGFwdGVyPSQoJyNjaGFwdGVycycpLnZhbCgpO01DUi5HZXQuY2hhcHRlcigpO30scHJldmlvdXNDaGFwdGVyOmZ1bmN0aW9uKCl7dmFyIGNoaT1OdW1iZXIoTUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyLmluZGV4KTtpZihNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXJzW2NoaS0xXSl7TUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXI9TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyc1tjaGktMV1bJ2NoYXB0ZXInXTtNQ1IuR2V0LmNoYXB0ZXIoKTt9ZWxzZXtNQ1IuRG8uZGlzcGxheVN0YXR1cygnVGhpcyBpcyB0aGUgZmlyc3QgQ2hhcHRlcicpO319LG5leHRDaGFwdGVyOmZ1bmN0aW9uKCl7dmFyIGNoaT1OdW1iZXIoTUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyLmluZGV4KTtpZihNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXJzW2NoaSsxXSl7TUNSLkdsb2JhbC5yZXF1ZXN0LmNoYXB0ZXI9TUNSLkdsb2JhbC5tYW5nYS5jaGFwdGVyc1tjaGkrMV1bJ2NoYXB0ZXInXTtNQ1IuR2V0LmNoYXB0ZXIoKTt9ZWxzZXtNQ1IuRG8uZGlzcGxheVN0YXR1cygnVGhpcyBpcyB0aGUgbGFzdCBDaGFwdGVyJyk7fX19fTt3aW5kb3cuTUNSPU1DUjt9KSh3aW5kb3cpOyQoZnVuY3Rpb24oKXtmdW5jdGlvbiBvbXZLZXlQcmVzc2VkKCl7fQpkb2N1bWVudC5vbmtleWRvd249ZnVuY3Rpb24oKXt9O01DUi5HbG9iYWwucmVxdWVzdD1NQ1IuVG9vbC5wYXJzZVVybCh3aW5kb3cubG9jYXRpb24pO01DUi5HbG9iYWwubWFuZ2EudGl0bGU9TUNSLlRvb2wuY2FwaXRhbGl6ZShNQ1IuR2xvYmFsLnJlcXVlc3QubWFuZ2EucmVwbGFjZSgvLS9pZywnICcpKTtNQ1IuR2xvYmFsLm1hbmdhLmNoYXB0ZXI9eyJudW1iZXIiOk1DUi5HbG9iYWwucmVxdWVzdC5jaGFwdGVyLCJuYW1lIjoiIn07TUNSLlVJLmluaXQoKTtNQ1IuT3B0aW9uLmluaXQoKTtNQ1IuQ2FjaGUuaW5pdCgpO01DUi5Eby5wYW5lbC5pbml0KCk7TUNSLkluZm8uc2hvdygpO01DUi5HZXQuY2hhcHRlcigpO30pOw=='; }